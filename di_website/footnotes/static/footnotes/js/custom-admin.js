customJsonpFunction([1],{130:function(t,e,n){"use strict";t.exports=n(335)},332:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(333),r=n(343),i=window.draftail;[{type:"FOOTNOTE",source:r.a,decorator:o.a}].forEach(i.registerPlugin)},333:function(t,e,n){"use strict";var o=n(334),r=(window.draftail.TooltipEntity,function(t){t.entityKey,t.contentState;return React.createElement(o.a,t)});e.a=r},334:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return v});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=window.React.Component,c=window.wagtail.components.Icon,f=window.draftail.TooltipEntity,l=React.createElement(c,{name:"asterisk",className:"asterisk"}),p=n(130),d=window.jQuery,h=function(t){return{icon:l,label:t.text||null}};window.footnoteUUIDList=window.footnoteUUIDList||{};var w=function(t,e){var n=void 0;return void 0===window.footnoteUUIDList[e]?n=e:window.footnoteUUIDList[e]!==t?n=p.generate():window.footnoteUUIDList[e]===t&&(n=e),window.footnoteUUIDList[n]=t,n},y=function(t,e,n,o){var r=o.uuid;"insert-fragment"===t?r=w(n,o.uuid):window.footnoteUUIDList[r]=n,e.replaceEntityData(n,{text:o.text,uuid:r})},v=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=n.props;i.contentState,i.entityKey;return n}return i(e,t),u(e,[{key:"render",value:function(){var t=this.props,e=t.contentState,n=t.entityKey,o=this.props.getEditorState().getLastChangeType();this.props.children="";var r=e.getEntity(n).getData();return y(o,e,n,r),d(".Tooltip.Tooltip--top").hide(),React.createElement("span",{role:"button",className:"FootnoteEntity"},React.createElement(f,a({},this.props,h(r))))}}]),e}(s)},335:function(t,e,n){"use strict";function o(e){return u.seed(e),t.exports}function r(e){return f=e,t.exports}function i(t){return void 0!==t&&u.characters(t),u.shuffled()}function a(){return s(f)}var u=n(66),s=n(337),c=n(341),f=n(342)||0;t.exports=a,t.exports.generate=a,t.exports.seed=o,t.exports.worker=r,t.exports.characters=i,t.exports.isValid=c},336:function(t,e,n){"use strict";function o(){return(i=(9301*i+49297)%233280)/233280}function r(t){i=t}var i=1;t.exports={nextValue:o,seed:r}},337:function(t,e,n){"use strict";function o(t){var e="",n=Math.floor(.001*(Date.now()-u));return n===i?r++:(r=0,i=n),e+=a(s),e+=a(t),r>0&&(e+=a(r)),e+=a(n)}var r,i,a=n(338),u=(n(66),1459707606518),s=6;t.exports=o},338:function(t,e,n){"use strict";function o(t){for(var e,n=0,o="";!e;)o+=a(i,r.get(),1),e=t<Math.pow(16,n+1),n++;return o}var r=n(66),i=n(339),a=n(340);t.exports=o},339:function(t,e,n){"use strict";var o,r="object"==typeof window&&(window.crypto||window.msCrypto);o=r&&r.getRandomValues?function(t){return r.getRandomValues(new Uint8Array(t))}:function(t){for(var e=[],n=0;n<t;n++)e.push(Math.floor(256*Math.random()));return e},t.exports=o},340:function(t,e){t.exports=function(t,e,n){var o=(2<<Math.log(e.length-1)/Math.LN2)-1,r=Math.ceil(1.6*o*n/e.length);n=+n;for(var i="";;)for(var a=t(r),u=0;u<r;u++){var s=a[u]&o;if(e[s]&&(i+=e[s],i.length===n))return i}}},341:function(t,e,n){"use strict";function o(t){return!(!t||"string"!=typeof t||t.length<6)&&!new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(t)}var r=n(66);t.exports=o},342:function(t,e,n){"use strict";t.exports=0},343:function(t,e,n){"use strict";(function(t){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(345),u=n(346),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=window.React.Component,f=window.DraftJS.Modifier,l=window.DraftJS.RichUtils,p=window.DraftJS.EditorState,d=(window.Draftail.ENTITY_TYPE,n(130)),h=window.jQuery,w=window.wagtailConfig.STRINGS.STRINGS,y={};y.FOOTNOTE="IMMUTABLE";var v=function(t,e,n){var o=void 0;switch(t.type){case"FOOTNOTE":if(o={text:n,uuid:d.generate()},e){var r=e.getData();r.text&&(o.text=r.text),r.uuid&&(o.uuid=r.uuid)}return{url:"/admin/footnotes/chooser/",urlParams:o,onload:a.a};default:return{url:null,urlParams:{},onload:{}}}},g=function(t,e){switch(t.type){case"FOOTNOTE":return{text:e.text,uuid:e.uuid};default:return{}}},b=function(e){function n(t){o(this,n);var e=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.onChosen=e.onChosen.bind(e),e.onClose=e.onClose.bind(e),e}return i(n,e),s(n,[{key:"componentDidMount",value:function(){var e=this,n=this.props,o=n.onClose,r=n.entityType,i=n.entity,a=n.editorState,s=Object(u.a)(a),c=v(r,i,s),f=c.url,l=c.urlParams,p=c.onload;h(document.body).on("hidden.bs.modal",this.onClose),this.workflow=t.ModalWorkflow({url:f,urlParams:l,onload:p,responses:{footnoteChosen:function(t){return e.onChosen(t)}},onError:function(){window.alert(w.SERVER_ERROR),o()}})}},{key:"componentWillUnmount",value:function(){this.workflow=null,h(document.body).off("hidden.bs.modal",this.onClose)}},{key:"onChosen",value:function(t){var e=this.props,n=e.editorState,o=e.entityType,r=e.onComplete,i=n.getCurrentContent(),a=n.getSelection(),u=g(o,t),s=y[o.type],c=i.createEntity(o.type,s,u),d=c.getLastCreatedEntityKey(),h=void 0;if(t.text||a.isCollapsed()){var w=t.text,v=f.replaceText(i,a,w,null,d);h=p.push(n,v,"insert-characters")}else h=l.toggleLink(n,a,d);this.workflow.close(),r(h)}},{key:"onClose",value:function(t){var e=this.props.onClose;t.preventDefault(),e()}},{key:"render",value:function(){return null}}]),n}(c);b.defaultProps={entity:null},e.a=b}).call(e,n(344))},344:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},345:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={chooser:function(t,e){$("form.footnote-form",t.body).on("submit",function(){var e=new FormData(this);return $.ajax({url:this.action,data:e,processData:!1,contentType:!1,type:"POST",dataType:"text",success:t.loadResponseText}),!1})},footnote_chosen:function(t,e){t.respond("footnoteChosen",e.footnote_data),t.close()}}},346:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var o=function(t){var e=t.getSelection(),n=t.getCurrentContent(),o=e.getStartKey(),r=e.getEndKey(),i=n.getBlockMap();return i.toSeq().skipUntil(function(t,e){return e===o}).takeUntil(function(t,e){return e===r}).concat([[r,i.get(r)]]).toList()},r=function(t){var e=t.getSelection(),n=e.getAnchorOffset(),r=e.getFocusOffset(),i=o(t);if(e.getIsBackward()){var a=n;n=r,r=a}for(var u="",s=0;s<i.size;s+=1){var c=0===s?n:0,f=s===i.size-1?r:i.get(s).getText().length;u+=i.get(s).getText().slice(c,f)}return u}},66:function(t,e,n){"use strict";function o(){d=!1}function r(t){if(!t)return void(l!==w&&(l=w,o()));if(t!==l){if(t.length!==w.length)throw new Error("Custom alphabet for shortid must be "+w.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(t,e,n){return e!==n.lastIndexOf(t)});if(e.length)throw new Error("Custom alphabet for shortid must be "+w.length+" unique characters. These characters were not unique: "+e.join(", "));l=t,o()}}function i(t){return r(t),l}function a(t){h.seed(t),p!==t&&(o(),p=t)}function u(){l||r(w);for(var t,e=l.split(""),n=[],o=h.nextValue();e.length>0;)o=h.nextValue(),t=Math.floor(o*e.length),n.push(e.splice(t,1)[0]);return n.join("")}function s(){return d||(d=u())}function c(t){return s()[t]}function f(){return l||w}var l,p,d,h=n(336),w="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";t.exports={get:f,characters:i,seed:a,lookup:c,shuffled:s}}},[332]);
//# sourceMappingURL=custom-admin.js.map