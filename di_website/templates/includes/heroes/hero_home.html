{% load wagtailimages_tags wagtailcore_tags responsive string_utils %}

{% if hero_image %}
  {% responsiveimage hero_image fill-1600x780-c100 srcset=global.hero_srcs as image %}
{% else %}
  {% responsiveimage page.hero_image fill-1600x780-c100 srcset=global.hero_srcs as image %}
{% endif %}
<section class="hero{% if image %} hero--image{% endif %} {% block hero_class %}{% endblock %}">
  {% if image %}
    <div class="hero__image" {{ image | responsive_id }}>{{ image | responsive_css }}</div>
    {% if page.hero_image_credit_name %}
      <span class="hero__credit">Image by
      {% if page.hero_image_credit_url %}
        <a href="{{page.hero_image_credit_url}}">{{page.hero_image_credit_name}}</a>
      {% else %}
        {{page.hero_image_credit_name}}
      {% endif %}
      </span>
    {% endif%}
  {% endif %}

  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <span class="hero__flourish"></span>
  <div class="row row--narrow">
    <div class="hero__content">
      <ul class="hero__meta">
        {% if page.publication_type %}
        <li class="hero__meta-item hero__meta-item--block">{{ page.publication_type }}</li>
        {% endif %}
      </ul>
      <h1 class="hero__title">
        <span>{{ page.title }}</span>
      </h1>
      {% if page.hero_text %}
        <div class="hero__excerpt"><span>{{ page.hero_text|content }}</span></div>
      {% endif %}
      {% if link_caption %}
        <div>
          <a href="{% pageurl page %}" class="button button--reverse">{{ link_caption }}</a>
        </div>
      {% endif %}
    </div>
  </div>

  {% block hero-author %}{% endblock hero-author %}
</section>
