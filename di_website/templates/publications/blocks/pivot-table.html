{% load string_utils footnotes_utils %}

<div class="max-meter max-meter--center">
    {% if value.heading %}
        <div class="is-typeset is-typeset--article">
            <h3>{{ value.heading }}</h3>
        </div>
    {% endif %}
    <div class="table-styled js-pivot-table"
        data-url="{{value.data_source_url}}"
        data-filters="{{value.filter_by}}"
        data-row="{{value.row_label}}"
        data-column="{{value.column_label}}"
        data-cell="{{value.cell_value}}"
        data-row-total="{{value.show_row_total}}"
        data-column-total="{{value.show_column_total}}"
        data-filter-defaults="{{value.default_filter_values}}">
    </div>
    {% if value.caption or value.caption_link %}
        <figcaption class="media-caption">
            {% if value.caption %}
                {% content_with_footnotes value.caption %}
            {% endif %}
            {% if value.caption_link %}
                <p><a href="{{ value.caption_link }}">{{ value.caption_label | default:value.caption_link }}</a></p>
            {% endif %}
        </figcaption>
    {% endif %}
</div>
<script src="https://d3js.org/d3.v4.min.js"></script>
