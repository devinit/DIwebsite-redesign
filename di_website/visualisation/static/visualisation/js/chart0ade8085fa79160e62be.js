(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1103:function(e,t,r){"use strict";var o=r(12),a=r(25).BADNUM,n=r(659),l=r(652),i=r(654),c=r(3)._;function s(e){return e&&"string"==typeof e}e.exports=function(e,t){var r,u=Array.isArray(t.locations),p=u?t.locations.length:t._length,f=new Array(p);r=t.geojson?function(e){return s(e)||o(e)}:s;for(var d=0;d<p;d++){var h=f[d]={};if(u){var m=t.locations[d];h.loc=r(m)?m:null}else{var x=t.lon[d],y=t.lat[d];o(x)&&o(y)?h.lonlat=[+x,+y]:h.lonlat=[a,a]}}return l(f,t),n(e,t),i(f,t),p&&(f[0].t={labels:{lat:c(e,"lat:")+" ",lon:c(e,"lon:")+" "}}),f}},1268:function(e,t,r){"use strict";var o=r(24),a=r(3),n=r(1069).getTopojsonFeatures,l=r(913),i=r(895),c=r(225).findExtremes,s=r(25).BADNUM,u=r(665).calcMarkerSize,p=r(217),f=r(1269);e.exports={calcGeoJSON:function(e,t){var r,o,a=e[0].trace,l=t[a.geo],p=l._subplot,f=a._length;if(Array.isArray(a.locations)){var d=a.locationmode,h="geojson-id"===d?i.extractTraceFeature(e):n(a,p.topojson);for(r=0;r<f;r++){o=e[r];var m="geojson-id"===d?o.fOut:i.locationToFeature(d,o.loc,h);o.lonlat=m?m.properties.ct:[s,s]}}var x,y,v={padded:!0};if("geojson"===l.fitbounds&&"geojson-id"===a.locationmode){var g=i.computeBbox(i.getTraceGeojson(a));x=[g[0],g[2]],y=[g[1],g[3]]}else{for(x=new Array(f),y=new Array(f),r=0;r<f;r++)o=e[r],x[r]=o.lonlat[0],y[r]=o.lonlat[1];v.ppad=u(a,f)}a._extremes.lon=c(l.lonaxis._ax,x,v),a._extremes.lat=c(l.lataxis._ax,y,v)},plot:function(e,t,r){var n=t.layers.frontplot.select(".scatterlayer"),i=a.makeTraceGroups(n,r,"trace scattergeo");function c(e,t){e.lonlat[0]===s&&o.select(t).remove()}i.selectAll("*").remove(),i.each((function(t){var r=o.select(this),n=t[0].trace;if(p.hasLines(n)||"none"!==n.fill){var i=l.calcTraceToLineCoords(t),s="none"!==n.fill?l.makePolygon(i):l.makeLine(i);r.selectAll("path.js-line").data([{geojson:s,trace:n}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}p.hasMarkers(n)&&r.selectAll("path.point").data(a.identity).enter().append("path").classed("point",!0).each((function(e){c(e,this)})),p.hasText(n)&&r.selectAll("g").data(a.identity).enter().append("g").append("text").each((function(e){c(e,this)})),f(e,t)}))}}},1269:function(e,t,r){"use strict";var o=r(24),a=r(81),n=r(52),l=r(663),i=l.stylePoints,c=l.styleText;e.exports=function(e,t){t&&function(e,t){var r=t[0].trace,l=t[0].node3;l.style("opacity",t[0].trace.opacity),i(l,r,e),c(l,r,e),l.selectAll("path.js-line").style("fill","none").each((function(e){var t=o.select(this),r=e.trace,l=r.line||{};t.call(n.stroke,l.color).call(a.dashLine,l.dash||"",l.width||0),"none"!==r.fill&&t.call(n.fill,r.fillcolor)}))}(e,t)}},1513:function(e,t,r){"use strict";e.exports={attributes:r(800),supplyDefaults:r(1514),colorbar:r(656),formatLabels:r(1515),calc:r(1103),calcGeoJSON:r(1268).calcGeoJSON,plot:r(1268).plot,style:r(1269),styleOnSelect:r(663).styleOnSelect,hoverPoints:r(1516),eventData:r(1517),selectPoints:r(1518),moduleType:"trace",name:"scattergeo",basePlotModule:r(1215),categories:["geo","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_geo",description:["The data visualized as scatter point or lines on a geographic map","is provided either by longitude/latitude pairs in `lon` and `lat`","respectively or by geographic location IDs or names in `locations`."].join(" ")}}},1514:function(e,t,r){"use strict";var o=r(3),a=r(217),n=r(667),l=r(671),i=r(672),c=r(677),s=r(800);e.exports=function(e,t,r,u){function p(r,a){return o.coerce(e,t,s,r,a)}var f,d=p("locations");if(d&&d.length){var h,m=p("geojson");("string"==typeof m&&""!==m||o.isPlainObject(m))&&(h="geojson-id"),"geojson-id"===p("locationmode",h)&&p("featureidkey"),f=d.length}else{var x=p("lon")||[],y=p("lat")||[];f=Math.min(x.length,y.length)}f?(t._length=f,p("text"),p("hovertext"),p("hovertemplate"),p("mode"),a.hasLines(t)&&(l(e,t,r,u,p),p("connectgaps")),a.hasMarkers(t)&&n(e,t,r,u,p,{gradient:!0}),a.hasText(t)&&(p("texttemplate"),i(e,t,u,p)),p("fill"),"none"!==t.fill&&c(e,t,r,p),o.coerceSelectionMarkerOpacity(t,p)):t.visible=!1}},1515:function(e,t,r){"use strict";var o=r(80);e.exports=function(e,t,r){var a={},n=r[t.geo]._subplot.mockAxis,l=e.lonlat;return a.lonLabel=o.tickText(n,n.c2l(l[0]),!0).text,a.latLabel=o.tickText(n,n.c2l(l[1]),!0).text,a}},1516:function(e,t,r){"use strict";var o=r(646),a=r(25).BADNUM,n=r(673),l=r(3).fillText,i=r(800);e.exports=function(e,t,r){var c=e.cd,s=c[0].trace,u=e.xa,p=e.ya,f=e.subplot,d=f.projection.isLonLatOverEdges,h=f.project;if(o.getClosest(c,(function(e){var o=e.lonlat;if(o[0]===a)return 1/0;if(d(o))return 1/0;var n=h(o),l=h([t,r]),i=Math.abs(n[0]-l[0]),c=Math.abs(n[1]-l[1]),s=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(i*i+c*c)-s,1-3/s)}),e),!1!==e.index){var m=c[e.index],x=m.lonlat,y=[u.c2p(x),p.c2p(x)],v=m.mrc||1;e.x0=y[0]-v,e.x1=y[0]+v,e.y0=y[1]-v,e.y1=y[1]+v,e.loc=m.loc,e.lon=x[0],e.lat=x[1];var g={};g[s.geo]={_subplot:f};var k=s._module.formatLabels(m,s,g);return e.lonLabel=k.lonLabel,e.latLabel=k.latLabel,e.color=n(s,m),e.extraText=function(e,t,r,o){if(e.hovertemplate)return;var a=t.hi||e.hoverinfo,n="all"===a?i.hoverinfo.flags:a.split("+"),c=-1!==n.indexOf("location")&&Array.isArray(e.locations),s=-1!==n.indexOf("lon"),u=-1!==n.indexOf("lat"),p=-1!==n.indexOf("text"),f=[];function d(e){return e+"Â°"}c?f.push(t.loc):s&&u?f.push("("+d(r.lonLabel)+", "+d(r.latLabel)+")"):s?f.push(o.lon+d(r.lonLabel)):u&&f.push(o.lat+d(r.latLabel));p&&l(t,e,f);return f.join("<br>")}(s,m,e,c[0].t.labels),e.hovertemplate=s.hovertemplate,[e]}}},1517:function(e,t,r){"use strict";e.exports=function(e,t,r,o,a){e.lon=t.lon,e.lat=t.lat,e.location=t.loc?t.loc:null;var n=o[a];return n.fIn&&n.fIn.properties&&(e.properties=n.fIn.properties),e}},1518:function(e,t,r){"use strict";var o=r(217),a=r(25).BADNUM;e.exports=function(e,t){var r,n,l,i,c,s=e.cd,u=e.xaxis,p=e.yaxis,f=[],d=s[0].trace;if(!o.hasMarkers(d)&&!o.hasText(d))return[];if(!1===t)for(c=0;c<s.length;c++)s[c].selected=0;else for(c=0;c<s.length;c++)(n=(r=s[c]).lonlat)[0]!==a&&(l=u.c2p(n),i=p.c2p(n),t.contains([l,i],null,c,e)?(f.push({pointNumber:c,lon:n[0],lat:n[1]}),r.selected=1):r.selected=0);return f}},274:function(e,t,r){"use strict";e.exports=r(1513)},656:function(e,t,r){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},659:function(e,t,r){"use strict";var o=r(84).hasColorscale,a=r(221),n=r(217);e.exports=function(e,t){n.hasLines(t)&&o(t,"line")&&a(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),n.hasMarkers(t)&&(o(t,"marker")&&a(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),o(t,"marker.line")&&a(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},663:function(e,t,r){"use strict";var o=r(24),a=r(81),n=r(15);function l(e,t,r){a.pointStyle(e.selectAll("path.point"),t,r)}function i(e,t,r){a.textPointStyle(e.selectAll("text"),t,r)}e.exports={style:function(e){var t=o.select(e).selectAll("g.trace.scatter");t.style("opacity",(function(e){return e[0].trace.opacity})),t.selectAll("g.points").each((function(t){l(o.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.text").each((function(t){i(o.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.trace path.js-line").call(a.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(a.fillGroupStyle),n.getComponentMethod("errorbars","style")(t)},stylePoints:l,styleText:i,styleOnSelect:function(e,t,r){var o=t[0].trace;o.selectedpoints?(a.selectedPointStyle(r.selectAll("path.point"),o),a.selectedTextStyle(r.selectAll("text"),o)):(l(r,o,e),i(r,o,e))}}},665:function(e,t,r){"use strict";var o=r(12),a=r(3),n=r(80),l=r(25).BADNUM,i=r(217),c=r(659),s=r(652),u=r(654);function p(e,t,r,o,a,l,c){var s=t._length,u=e._fullLayout,p=r._id,f=o._id,d=u._firstScatter[h(t)]===t.uid,x=(m(t,u,r,o)||{}).orientation,y=t.fill;r._minDtick=0,o._minDtick=0;var v={padded:!0},g={padded:!0};c&&(v.ppad=g.ppad=c);var k=s<2||a[0]!==a[s-1]||l[0]!==l[s-1];k&&("tozerox"===y||"tonextx"===y&&(d||"h"===x))?v.tozero=!0:(t.error_y||{}).visible||"tonexty"!==y&&"tozeroy"!==y&&(i.hasMarkers(t)||i.hasText(t))||(v.padded=!1,v.ppad=0),k&&("tozeroy"===y||"tonexty"===y&&(d||"v"===x))?g.tozero=!0:"tonextx"!==y&&"tozerox"!==y||(g.padded=!1),p&&(t._extremes[p]=n.findExtremes(r,a,v)),f&&(t._extremes[f]=n.findExtremes(o,l,g))}function f(e,t){if(i.hasMarkers(e)){var r,o=e.marker,l=1.6*(e.marker.sizeref||1);if(r="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/l),3)}:function(e){return Math.max((e||0)/l,3)},a.isArrayOrTypedArray(o.size)){var c={type:"linear"};n.setConvert(c);for(var s=c.makeCalcdata(e.marker,"size"),u=new Array(t),p=0;p<t;p++)u[p]=r(s[p]);return u}return r(o.size)}}function d(e,t){var r=h(t),o=e._firstScatter;o[r]||(o[r]=t.uid)}function h(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function m(e,t,r,o){var a=e.stackgroup;if(a){var n=t._scatterStackOpts[r._id+o._id][a],l="v"===n.orientation?o:r;return"linear"===l.type||"log"===l.type?n:void 0}}e.exports={calc:function(e,t){var r,i,h,x,y,v,g=e._fullLayout,k=n.getFromId(e,t.xaxis||"x"),A=n.getFromId(e,t.yaxis||"y"),b=k.makeCalcdata(t,"x"),L=A.makeCalcdata(t,"y"),_=t._length,M=new Array(_),S=t.ids,T=m(t,g,k,A),j=!1;d(g,t);var O,z="x",w="y";for(T?(a.pushUnique(T.traceIndices,t._expandedIndex),(r="v"===T.orientation)?(w="s",O="x"):(z="s",O="y"),y="interpolate"===T.stackgaps):p(e,t,k,A,b,L,f(t,_)),i=0;i<_;i++){var P=M[i]={},D=o(b[i]),C=o(L[i]);D&&C?(P[z]=b[i],P[w]=L[i]):T&&(r?D:C)?(P[O]=r?b[i]:L[i],P.gap=!0,y?(P.s=l,j=!0):P.s=0):P[z]=P[w]=l,S&&(P.id=String(S[i]))}if(s(M,t),c(e,t),u(M,t),T){for(i=0;i<M.length;)M[i][O]===l?M.splice(i,1):i++;if(a.sort(M,(function(e,t){return e[O]-t[O]||e.i-t.i})),j){for(i=0;i<M.length-1&&M[i].gap;)i++;for((v=M[i].s)||(v=M[i].s=0),h=0;h<i;h++)M[h].s=v;for(x=M.length-1;x>i&&M[x].gap;)x--;for(v=M[x].s,h=M.length-1;h>x;h--)M[h].s=v;for(;i<x;)if(M[++i].gap){for(h=i+1;M[h].gap;)h++;for(var N=M[i-1][O],B=M[i-1].s,I=(M[h].s-B)/(M[h][O]-N);i<h;)M[i].s=B+(M[i][O]-N)*I,i++}}}return M},calcMarkerSize:f,calcAxisExpansion:p,setFirstScatter:d,getStackOpts:m}},667:function(e,t,r){"use strict";var o=r(52),a=r(84).hasColorscale,n=r(155),l=r(217);e.exports=function(e,t,r,i,c,s){var u=l.isBubble(e),p=(e.line||{}).color;(s=s||{},p&&(r=p),c("marker.symbol"),c("marker.opacity",u?.7:1),c("marker.size"),c("marker.color",r),a(e,"marker")&&n(e,t,i,c,{prefix:"marker.",cLetter:"c"}),s.noSelect||(c("selected.marker.color"),c("unselected.marker.color"),c("selected.marker.size"),c("unselected.marker.size")),s.noLine||(c("marker.line.color",p&&!Array.isArray(p)&&t.marker.color!==p?p:u?o.background:o.defaultLine),a(e,"marker.line")&&n(e,t,i,c,{prefix:"marker.line.",cLetter:"c"}),c("marker.line.width",u?1:0)),u&&(c("marker.sizeref"),c("marker.sizemin"),c("marker.sizemode")),s.gradient)&&("none"!==c("marker.gradient.type")&&c("marker.gradient.color"))}},671:function(e,t,r){"use strict";var o=r(3).isArrayOrTypedArray,a=r(84).hasColorscale,n=r(155);e.exports=function(e,t,r,l,i,c){var s=(e.marker||{}).color;(i("line.color",r),a(e,"line"))?n(e,t,l,i,{prefix:"line.",cLetter:"c"}):i("line.color",!o(s)&&s||r);i("line.width"),(c||{}).noDash||i("line.dash")}},672:function(e,t,r){"use strict";var o=r(3);e.exports=function(e,t,r,a,n){n=n||{},a("textposition"),o.coerceFont(a,"textfont",r.font),n.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))}},673:function(e,t,r){"use strict";var o=r(52),a=r(217);e.exports=function(e,t){var r,n;if("lines"===e.mode)return(r=e.line.color)&&o.opacity(r)?r:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var l=t.mcc||(e.marker||{}).color,i=t.mlcc||((e.marker||{}).line||{}).color;return(n=l&&o.opacity(l)?l:i&&o.opacity(i)&&(t.mlw||((e.marker||{}).line||{}).width)?i:"")?o.opacity(n)<.3?o.addOpacity(n,.3):n:(r=(e.line||{}).color)&&o.opacity(r)&&a.hasLines(e)&&e.line.width?r:e.fillcolor}},677:function(e,t,r){"use strict";var o=r(52),a=r(3).isArrayOrTypedArray;e.exports=function(e,t,r,n){var l=!1;if(t.marker){var i=t.marker.color,c=(t.marker.line||{}).color;i&&!a(i)?l=i:c&&!a(c)&&(l=c)}n("fillcolor",o.addOpacity((t.line||{}).color||l||r,.5))}},913:function(e,t,r){"use strict";var o=r(25).BADNUM;t.calcTraceToLineCoords=function(e){for(var t=e[0].trace.connectgaps,r=[],a=[],n=0;n<e.length;n++){var l=e[n].lonlat;l[0]!==o?a.push(l):!t&&a.length>0&&(r.push(a),a=[])}return a.length>0&&r.push(a),r},t.makeLine=function(e){return 1===e.length?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}},t.makePolygon=function(e){if(1===e.length)return{type:"Polygon",coordinates:e};for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=[e[r]];return{type:"MultiPolygon",coordinates:t}},t.makeBlank=function(){return{type:"Point",coordinates:[]}}}}]);