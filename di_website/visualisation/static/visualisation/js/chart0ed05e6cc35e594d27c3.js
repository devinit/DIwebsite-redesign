(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1241:function(e,t,r){"use strict";var n=r(627),a=r(207).line,i=r(59),o=r(150).hovertemplateAttrs,s=r(150).texttemplateAttrs,l=r(1436),c=r(32).extendFlat,u=r(57);e.exports={x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,hovertext:n.hovertext,hovertemplate:o({},{keys:l.eventDataKeys}),hoverinfo:c({},i.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],role:"info",editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple funnels, percentages & totals","are computed separately (per trace)."].join(" ")},texttemplate:s({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),text:n.text,textposition:c({},n.textposition,{dflt:"auto"}),insidetextanchor:c({},n.insidetextanchor,{dflt:"middle"}),textangle:c({},n.textangle,{dflt:0}),textfont:n.textfont,insidetextfont:n.insidetextfont,outsidetextfont:n.outsidetextfont,constraintext:n.constraintext,cliponaxis:n.cliponaxis,orientation:c({},n.orientation,{description:["Sets the orientation of the funnels.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal).","By default funnels are tend to be oriented horizontally;","unless only *y* array is presented or orientation is set to *v*.","Also regarding graphs including only 'horizontal' funnels,","*autorange* on the *y-axis* are set to *reversed*."].join(" ")}),offset:c({},n.offset,{arrayOk:!1}),width:c({},n.width,{arrayOk:!1}),marker:n.marker,connector:{fillcolor:{valType:"color",role:"style",editType:"style",description:["Sets the fill color."].join(" ")},line:{color:c({},a.color,{dflt:u.defaultLine}),width:c({},a.width,{dflt:0,editType:"plot"}),dash:a.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Determines if connector regions and lines are drawn."].join(" ")},editType:"plot"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup}},1242:function(e,t,r){"use strict";e.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},funnelgap:{valType:"number",min:0,max:1,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},1243:function(e,t,r){"use strict";var n=r(6),a=r(645).handleGroupingDefaults,i=r(645).handleText,o=r(647),s=r(1241),l=r(57);e.exports={supplyDefaults:function(e,t,r,a){function c(r,a){return n.coerce(e,t,s,r,a)}if(o(e,t,a,c)){c("orientation",t.y&&!t.x?"v":"h"),c("offset"),c("width");var u=c("text");c("hovertext"),c("hovertemplate");var f=c("textposition");i(e,t,a,c,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===t.textposition||t.texttemplate||c("textinfo",Array.isArray(u)?"text+value":"value");var p=c("marker.color",r);if(c("marker.line.color",l.defaultLine),c("marker.line.width"),c("connector.visible"))c("connector.fillcolor",function(e){var t=n.isArrayOrTypedArray(e)?"#000":e;return l.addOpacity(t,.5*l.opacity(t))}(p)),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash"))}else t.visible=!1},crossTraceDefaults:function(e,t){var r,i;function o(e){return n.coerce(i._input,i,s,e)}if("group"===t.funnelmode)for(var l=0;l<e.length;l++)r=(i=e[l])._input,a(r,i,t,o)}}},1435:function(e,t,r){"use strict";e.exports={attributes:r(1241),layoutAttributes:r(1242),supplyDefaults:r(1243).supplyDefaults,crossTraceDefaults:r(1243).crossTraceDefaults,supplyLayoutDefaults:r(1437),calc:r(1438),crossTraceCalc:r(1440),plot:r(1441),style:r(1442).style,hoverPoints:r(1443),eventData:r(1444),selectPoints:r(741),moduleType:"trace",name:"funnel",basePlotModule:r(626),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Visualize stages in a process using length-encoded bars. This trace can be used","to show data in either a part-to-whole representation wherein each item appears",'in a single stage, or in a "drop-off" representation wherein each item appears in','each stage it traversed. See also the "funnelarea" trace type for a different',"approach to visualizing funnel data."].join(" ")}}},1436:function(e,t,r){"use strict";e.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},1437:function(e,t,r){"use strict";var n=r(6),a=r(1242);e.exports=function(e,t,r){var i=!1;function o(r,i){return n.coerce(e,t,a,r,i)}for(var s=0;s<r.length;s++){var l=r[s];if(l.visible&&"funnel"===l.type){i=!0;break}}i&&(o("funnelmode"),o("funnelgap",.2),o("funnelgroupgap"))}},1438:function(e,t,r){"use strict";var n=r(105),a=r(1439),i=r(631),o=r(25).BADNUM;function s(e){return e===o?0:e}e.exports=function(e,t){var r,l,c,u,f=n.getFromId(e,t.xaxis||"x"),p=n.getFromId(e,t.yaxis||"y");"h"===t.orientation?(r=f.makeCalcdata(t,"x"),l=p.makeCalcdata(t,"y")):(r=p.makeCalcdata(t,"y"),l=f.makeCalcdata(t,"x"));var d,h=Math.min(l.length,r.length),v=new Array(h);for(t._base=[],c=0;c<h;c++){r[c]<0&&(r[c]=o);var x=!1;r[c]!==o&&c+1<h&&r[c+1]!==o&&(x=!0),u=v[c]={p:l[c],s:r[c],cNext:x},t._base[c]=-.5*u.s,t.ids&&(u.id=String(t.ids[c])),0===c&&(v[0].vTotal=0),v[0].vTotal+=s(u.s),u.begR=s(u.s)/s(v[0].s)}for(c=0;c<h;c++)(u=v[c]).s!==o&&(u.sumR=u.s/v[0].vTotal,u.difR=void 0!==d?u.s/d:1,d=u.s);return a(v,t),i(v,t),v}},1439:function(e,t,r){"use strict";var n=r(6);e.exports=function(e,t){for(var r=0;r<e.length;r++)e[r].i=r;n.mergeArray(t.text,e,"tx"),n.mergeArray(t.hovertext,e,"htx");var a=t.marker;if(a){n.mergeArray(a.opacity,e,"mo"),n.mergeArray(a.color,e,"mc");var i=a.line;i&&(n.mergeArray(i.color,e,"mlc"),n.mergeArrayCastPositive(i.width,e,"mlw"))}}},1440:function(e,t,r){"use strict";var n=r(739).setGroupPositions;e.exports=function(e,t){var r,a,i=e._fullLayout,o=e._fullData,s=e.calcdata,l=t.xaxis,c=t.yaxis,u=[],f=[],p=[];for(a=0;a<o.length;a++){var d=o[a],h="h"===d.orientation;!0===d.visible&&d.xaxis===l._id&&d.yaxis===c._id&&"funnel"===d.type&&(r=s[a],h?p.push(r):f.push(r),u.push(r))}var v={mode:i.funnelmode,norm:i.funnelnorm,gap:i.funnelgap,groupgap:i.funnelgroupgap};for(n(e,l,c,f,v),n(e,c,l,p,v),a=0;a<u.length;a++){r=u[a];for(var x=0;x<r.length;x++)x+1<r.length&&(r[x].nextP0=r[x+1].p0,r[x].nextS0=r[x+1].s0,r[x].nextP1=r[x+1].p1,r[x].nextS1=r[x+1].s1)}}},1441:function(e,t,r){"use strict";var n=r(24),a=r(6),i=r(106),o=r(25).BADNUM,s=r(721),l=r(637).clearMinTextSize;function c(e,t,r,n){var a=[],i=[],o=n?t:r,s=n?r:t;return a[0]=o.c2p(e.s0,!0),i[0]=s.c2p(e.p0,!0),a[1]=o.c2p(e.s1,!0),i[1]=s.c2p(e.p1,!0),a[2]=o.c2p(e.nextS0,!0),i[2]=s.c2p(e.nextP0,!0),a[3]=o.c2p(e.nextS1,!0),i[3]=s.c2p(e.nextP1,!0),n?[a,i]:[i,a]}e.exports=function(e,t,r,u){var f=e._fullLayout;l("funnel",f),function(e,t,r,s){var l=t.xaxis,u=t.yaxis;a.makeTraceGroups(s,r,"trace bars").each((function(r){var s=n.select(this),f=r[0].trace,p=a.ensureSingle(s,"g","regions");if(f.connector&&f.connector.visible){var d="h"===f.orientation,h=p.selectAll("g.region").data(a.identity);h.enter().append("g").classed("region",!0),h.exit().remove();var v=h.size();h.each((function(r,s){if(s===v-1||r.cNext){var f=c(r,l,u,d),p=f[0],h=f[1],x="";p[0]!==o&&h[0]!==o&&p[1]!==o&&h[1]!==o&&p[2]!==o&&h[2]!==o&&p[3]!==o&&h[3]!==o&&(x+=d?"M"+p[0]+","+h[1]+"L"+p[2]+","+h[2]+"H"+p[3]+"L"+p[1]+","+h[1]+"Z":"M"+p[1]+","+h[1]+"L"+p[2]+","+h[3]+"V"+h[2]+"L"+p[1]+","+h[0]+"Z"),""===x&&(x="M0,0Z"),a.ensureSingle(n.select(this),"path").attr("d",x).call(i.setClipUrl,t.layerClipId,e)}}))}else p.remove()}))}(e,t,r,u),function(e,t,r,o){var s=t.xaxis,l=t.yaxis;a.makeTraceGroups(o,r,"trace bars").each((function(r){var o=n.select(this),u=r[0].trace,f=a.ensureSingle(o,"g","lines");if(u.connector&&u.connector.visible&&u.connector.line.width){var p="h"===u.orientation,d=f.selectAll("g.line").data(a.identity);d.enter().append("g").classed("line",!0),d.exit().remove();var h=d.size();d.each((function(r,o){if(o===h-1||r.cNext){var u=c(r,s,l,p),f=u[0],d=u[1],v="";void 0!==f[3]&&void 0!==d[3]&&(p?(v+="M"+f[0]+","+d[1]+"L"+f[2]+","+d[2],v+="M"+f[1]+","+d[1]+"L"+f[3]+","+d[2]):(v+="M"+f[1]+","+d[1]+"L"+f[2]+","+d[3],v+="M"+f[1]+","+d[0]+"L"+f[2]+","+d[2])),""===v&&(v="M0,0Z"),a.ensureSingle(n.select(this),"path").attr("d",v).call(i.setClipUrl,t.layerClipId,e)}}))}else f.remove()}))}(e,t,r,u),s.plot(e,t,r,u,{mode:f.funnelmode,norm:f.funnelmode,gap:f.funnelgap,groupgap:f.funnelgroupgap})}},1442:function(e,t,r){"use strict";var n=r(24),a=r(106),i=r(57),o=r(115).DESELECTDIM,s=r(653),l=r(637).resizeText,c=s.styleTextPoints;e.exports={style:function(e,t,r){var s=r||n.select(e).selectAll("g.funnellayer").selectAll("g.trace");l(e,s,"funnel"),s.style("opacity",(function(e){return e[0].trace.opacity})),s.each((function(t){var r=n.select(this),s=t[0].trace;r.selectAll(".point > path").each((function(e){if(!e.isBlank){var t=s.marker;n.select(this).call(i.fill,e.mc||t.color).call(i.stroke,e.mlc||t.line.color).call(a.dashLine,t.line.dash,e.mlw||t.line.width).style("opacity",s.selectedpoints&&!e.selected?o:1)}})),c(r,s,e),r.selectAll(".regions").each((function(){n.select(this).selectAll("path").style("stroke-width",0).call(i.fill,s.connector.fillcolor)})),r.selectAll(".lines").each((function(){var e=s.connector.line;a.lineGroupStyle(n.select(this).selectAll("path"),e.width,e.color,e.dash)}))}))}}},1443:function(e,t,r){"use strict";var n=r(57).opacity,a=r(740).hoverOnBars,i=r(6).formatPercent;e.exports=function(e,t,r,o){var s=a(e,t,r,o);if(s){var l=s.cd,c=l[0].trace,u="h"===c.orientation,f=l[s.index];s[(u?"x":"y")+"LabelVal"]=f.s,s.percentInitial=f.begR,s.percentInitialLabel=i(f.begR,1),s.percentPrevious=f.difR,s.percentPreviousLabel=i(f.difR,1),s.percentTotal=f.sumR,s.percentTotalLabel=i(f.sumR,1);var p=f.hi||c.hoverinfo,d=[];if(p&&"none"!==p&&"skip"!==p){var h="all"===p,v=p.split("+"),x=function(e){return h||-1!==v.indexOf(e)};x("percent initial")&&d.push(s.percentInitialLabel+" of initial"),x("percent previous")&&d.push(s.percentPreviousLabel+" of previous"),x("percent total")&&d.push(s.percentTotalLabel+" of total")}return s.extraText=d.join("<br>"),s.color=function(e,t){var r=e.marker,a=t.mc||r.color,i=t.mlc||r.line.color,o=t.mlw||r.line.width;if(n(a))return a;if(n(i)&&o)return i}(c,f),[s]}}},1444:function(e,t,r){"use strict";e.exports=function(e,t){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"percentInitial"in t&&(e.percentInitial=t.percentInitial),"percentPrevious"in t&&(e.percentPrevious=t.percentPrevious),"percentTotal"in t&&(e.percentTotal=t.percentTotal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},242:function(e,t,r){"use strict";e.exports=r(1435)},627:function(e,t,r){"use strict";var n=r(207),a=r(150).hovertemplateAttrs,i=r(150).texttemplateAttrs,o=r(111),s=r(46),l=r(657),c=r(32).extendFlat,u=s({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),f=c({},n.marker.line.width,{dflt:0}),p=c({width:f,editType:"calc"},o("marker.line")),d=c({line:p,editType:"calc"},o("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,role:"style",editType:"style",description:"Sets the opacity of the bars."}});e.exports={x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,text:n.text,texttemplate:i({editType:"plot"},{keys:l.eventDataKeys}),hovertext:n.hovertext,hovertemplate:a({},{keys:l.eventDataKeys}),textposition:{valType:"enumerated",role:"info",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",role:"info",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",role:"info",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:c({},u,{description:"Sets the font used for `text`."}),insidetextfont:c({},u,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:c({},u,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],role:"info",dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:c({},n.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",role:"info",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,role:"info",editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:d,offsetgroup:{valType:"string",role:"info",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",role:"info",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},selected:{marker:{opacity:n.selected.marker.opacity,color:n.selected.marker.color,editType:"style"},textfont:n.selected.textfont,editType:"style"},unselected:{marker:{opacity:n.unselected.marker.opacity,color:n.unselected.marker.color,editType:"style"},textfont:n.unselected.textfont,editType:"style"},r:n.r,t:n.t,_deprecated:{bardir:{valType:"enumerated",role:"info",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}}},631:function(e,t,r){"use strict";var n=r(6);e.exports=function(e,t){n.isArrayOrTypedArray(t.selectedpoints)&&n.tagSelected(e,t)}},637:function(e,t,r){"use strict";var n=r(24),a=r(6);function i(e){return"_"+e+"Text_minsize"}e.exports={recordMinTextSize:function(e,t,r){if(r.uniformtext.mode){var n=i(e),a=r.uniformtext.minsize,o=t.scale*t.fontSize;t.hide=o<a,r[n]=r[n]||1/0,t.hide||(r[n]=Math.min(r[n],Math.max(o,a)))}},clearMinTextSize:function(e,t){t[i(e)]=void 0},resizeText:function(e,t,r){var i=e._fullLayout,o=i["_"+r+"Text_minsize"];if(o){var s,l="hide"===i.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":s="g.slice";break;case"treemap":s="g.slice, g.pathbar";break;default:s="g.points > g.point"}t.selectAll(s).each((function(e){var t=e.transform;t&&(t.scale=l&&t.hide?0:o/t.fontSize,n.select(this).select("text").attr("transform",a.getTextTransform(t)))}))}}}},645:function(e,t,r){"use strict";var n=r(6),a=r(57),i=r(23),o=r(647),s=r(692),l=r(110).getAxisGroup,c=r(627),u=n.coerceFont;function f(e,t,r,n){var a=t.orientation,i=t[{v:"x",h:"y"}[a]+"axis"],o=l(r,i)+a,s=r._alignmentOpts||{},c=n("alignmentgroup"),u=s[o];u||(u=s[o]={});var f=u[c];f?f.traces.push(t):f=u[c]={traces:[t],alignmentIndex:Object.keys(u).length,offsetGroups:{}};var p=n("offsetgroup"),d=f.offsetGroups,h=d[p];p&&(h||(h=d[p]={offsetIndex:Object.keys(d).length}),t._offsetIndex=h.offsetIndex)}function p(e,t,r,a,i,o){var s=!(!1===(o=o||{}).moduleHasSelected),l=!(!1===o.moduleHasUnselected),c=!(!1===o.moduleHasConstrain),f=!(!1===o.moduleHasCliponaxis),p=!(!1===o.moduleHasTextangle),d=!(!1===o.moduleHasInsideanchor),h=!!o.hasPathbar,v=Array.isArray(i)||"auto"===i,x=v||"inside"===i,g=v||"outside"===i;if(x||g){var m=u(a,"textfont",r.font),y=n.extendFlat({},m),b=!(e.textfont&&e.textfont.color);if(b&&delete y.color,u(a,"insidetextfont",y),h){var T=n.extendFlat({},m);b&&delete T.color,u(a,"pathbar.textfont",T)}g&&u(a,"outsidetextfont",m),s&&a("selected.textfont.color"),l&&a("unselected.textfont.color"),c&&a("constraintext"),f&&a("cliponaxis"),p&&a("textangle"),a("texttemplate")}x&&d&&a("insidetextanchor")}e.exports={supplyDefaults:function(e,t,r,l){function u(r,a){return n.coerce(e,t,c,r,a)}if(o(e,t,l,u)){u("orientation",t.x&&!t.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var f=u("textposition");p(e,t,l,u,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(e,t,u,r,l);var d=(t.marker.line||{}).color,h=i.getComponentMethod("errorbars","supplyDefaults");h(e,t,d||a.defaultLine,{axis:"y"}),h(e,t,d||a.defaultLine,{axis:"x",inherit:"y"}),n.coerceSelectionMarkerOpacity(t,u)}else t.visible=!1},crossTraceDefaults:function(e,t){var r;function a(e){return n.coerce(r._input,r,c,e)}if("group"===t.barmode)for(var i=0;i<e.length;i++)"bar"===(r=e[i]).type&&(r._input,f(0,r,t,a))},handleGroupingDefaults:f,handleText:p}},647:function(e,t,r){"use strict";var n=r(6),a=r(23);e.exports=function(e,t,r,i){var o,s=i("x"),l=i("y");if(a.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),s){var c=n.minRowLength(s);l?o=Math.min(c,n.minRowLength(l)):(o=c,i("y0"),i("dy"))}else{if(!l)return 0;o=n.minRowLength(l),i("x0"),i("dx")}return t._length=o,o}},653:function(e,t,r){"use strict";var n=r(24),a=r(57),i=r(106),o=r(6),s=r(23),l=r(637).resizeText,c=r(627),u=c.textfont,f=c.insidetextfont,p=c.outsidetextfont,d=r(667);function h(e,t,r){i.pointStyle(e.selectAll("path"),t,r),v(e,t,r)}function v(e,t,r){e.selectAll("text").each((function(e){var a=n.select(this),s=o.ensureUniformFontSize(r,x(a,e,t,r));i.font(a,s)}))}function x(e,t,r,n){var a=n._fullLayout.font,i=r.textfont;if(e.classed("bartext-inside")){var o=T(t,r);i=m(r,t.i,a,o)}else e.classed("bartext-outside")&&(i=y(r,t.i,a));return i}function g(e,t,r){return b(u,e.textfont,t,r)}function m(e,t,r,n){var i=g(e,t,r);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(i={color:a.contrast(n),family:i.family,size:i.size}),b(f,e.insidetextfont,t,i)}function y(e,t,r){var n=g(e,t,r);return b(p,e.outsidetextfont,t,n)}function b(e,t,r,n){t=t||{};var a=d.getValue(t.family,r),i=d.getValue(t.size,r),o=d.getValue(t.color,r);return{family:d.coerceString(e.family,a,n.family),size:d.coerceNumber(e.size,i,n.size),color:d.coerceColor(e.color,o,n.color)}}function T(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mc||t.marker.color}e.exports={style:function(e){var t=n.select(e).selectAll("g.barlayer").selectAll("g.trace");l(e,t,"bar");var r=t.size(),a=e._fullLayout;t.style("opacity",(function(e){return e[0].trace.opacity})).each((function(e){("stack"===a.barmode&&r>1||0===a.bargap&&0===a.bargroupgap&&!e[0].trace.marker.line.width)&&n.select(this).attr("shape-rendering","crispEdges")})),t.selectAll("g.points").each((function(t){h(n.select(this),t[0].trace,e)})),s.getComponentMethod("errorbars","style")(t)},styleTextPoints:v,styleOnSelect:function(e,t,r){var a=t[0].trace;a.selectedpoints?function(e,t,r){i.selectedPointStyle(e.selectAll("path"),t),function(e,t,r){e.each((function(e){var a,s=n.select(this);if(e.selected){a=o.ensureUniformFontSize(r,x(s,e,t,r));var l=t.selected.textfont&&t.selected.textfont.color;l&&(a.color=l),i.font(s,a)}else i.selectedTextStyle(s,t)}))}(e.selectAll("text"),t,r)}(r,a,e):(h(r,a,e),s.getComponentMethod("errorbars","style")(r))},getInsideTextFont:m,getOutsideTextFont:y,getBarColor:T,resizeText:l}},657:function(e,t,r){"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},667:function(e,t,r){"use strict";var n=r(12),a=r(60),i=r(6).isArrayOrTypedArray;t.coerceString=function(e,t,r){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==r?r:e.dflt},t.coerceNumber=function(e,t,r){if(n(t)){t=+t;var a=e.min,i=e.max;if(!(void 0!==a&&t<a||void 0!==i&&t>i))return t}return void 0!==r?r:e.dflt},t.coerceColor=function(e,t,r){return a(t).isValid()?t:void 0!==r?r:e.dflt},t.coerceEnumerated=function(e,t,r){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==r?r:e.dflt},t.getValue=function(e,t){var r;return Array.isArray(e)?t<e.length&&(r=e[t]):r=e,r},t.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:i(e.marker.line.width)?0:e.marker.line.width}},692:function(e,t,r){"use strict";var n=r(57),a=r(79).hasColorscale,i=r(151);e.exports=function(e,t,r,o,s){r("marker.color",o),a(e,"marker")&&i(e,t,s,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",n.defaultLine),a(e,"marker.line")&&i(e,t,s,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),r("selected.marker.color"),r("unselected.marker.color")}},721:function(e,t,r){"use strict";var n=r(24),a=r(12),i=r(6),o=r(108),s=r(57),l=r(106),c=r(23),u=r(105).tickText,f=r(637),p=f.recordMinTextSize,d=f.clearMinTextSize,h=r(653),v=r(667),x=r(657),g=r(627),m=g.text,y=g.textposition,b=r(215).appendArrayPointValue,T=x.TEXTPAD;function w(e){return e.id}function k(e){if(e.ids)return w}function M(e,t){return e<t?1:-1}function A(e,t,r,n){var a;return!t.uniformtext.mode&&S(r)?(n&&(a=n()),e.transition().duration(r.duration).ease(r.easing).each("end",(function(){a&&a()})).each("interrupt",(function(){a&&a()}))):e}function S(e){return e&&e.duration>0}function L(e){return"auto"===e?0:e}function _(e,t){var r=Math.PI/180*t,n=Math.abs(Math.sin(r)),a=Math.abs(Math.cos(r));return{x:e.width*a+e.height*n,y:e.width*n+e.height*a}}function D(e,t,r,n,a,i){var o=!!i.isHorizontal,s=!!i.constrained,l=i.angle||0,c=i.anchor||"end",u="end"===c,f="start"===c,p=((i.leftToRight||0)+1)/2,d=1-p,h=a.width,v=a.height,x=Math.abs(t-e),g=Math.abs(n-r),m=x>2*T&&g>2*T?T:0;x-=2*m,g-=2*m;var y=L(l);"auto"!==l||h<=x&&v<=g||!(h>x||v>g)||(h>g||v>x)&&h<v==x<g||(y+=90);var b=_(a,y),w=1;s&&(w=Math.min(1,x/b.x,g/b.y));var k=a.left*d+a.right*p,A=(a.top+a.bottom)/2,S=(e+T)*d+(t-T)*p,D=(r+n)/2,z=0,P=0;if(f||u){var C=(o?b.x:b.y)/2,I=o?M(e,t):M(r,n);o?f?(S=e+I*m,z=-I*C):(S=t-I*m,z=I*C):f?(D=r+I*m,P=-I*C):(D=n-I*m,P=I*C)}return{textX:k,textY:A,targetX:S,targetY:D,anchorX:z,anchorY:P,scale:w,rotate:y}}e.exports={plot:function(e,t,r,f,x,g){var w=t.xaxis,z=t.yaxis,P=e._fullLayout;x||(x={mode:P.barmode,norm:P.barmode,gap:P.bargap,groupgap:P.bargroupgap},d("bar",P));var C=i.makeTraceGroups(f,r,"trace bars").each((function(r){var c=n.select(this),f=r[0].trace,d="waterfall"===f.type,C="funnel"===f.type,I="bar"===f.type||C,O=0;d&&f.connector.visible&&"between"===f.connector.mode&&(O=f.connector.line.width/2);var V="h"===f.orientation,N=S(x),j=i.ensureSingle(c,"g","points"),B=k(f),H=j.selectAll("g.point").data(i.identity,B);H.enter().append("g").classed("point",!0),H.exit().remove(),H.each((function(c,d){var k,S,C=n.select(this),j=function(e,t,r,n){var a=[],i=[],o=n?t:r,s=n?r:t;return a[0]=o.c2p(e.s0,!0),i[0]=s.c2p(e.p0,!0),a[1]=o.c2p(e.s1,!0),i[1]=s.c2p(e.p1,!0),n?[a,i]:[i,a]}(c,w,z,V),B=j[0][0],H=j[0][1],R=j[1][0],F=j[1][1],U=0==(V?H-B:F-R);if(U&&I&&v.getLineWidth(f,c)&&(U=!1),U||(U=!(a(B)&&a(H)&&a(R)&&a(F))),c.isBlank=U,U&&(V?H=B:F=R),O&&!U&&(V?(B-=M(B,H)*O,H+=M(B,H)*O):(R-=M(R,F)*O,F+=M(R,F)*O)),"waterfall"===f.type){if(!U){var W=f[c.dir].marker;k=W.line.width,S=W.color}}else k=v.getLineWidth(f,c),S=c.mc||f.marker.color;function E(e){var t=n.round(k/2%1,2);return 0===x.gap&&0===x.groupgap?n.round(Math.round(e)-t,2):e}if(!e._context.staticPlot){var G=s.opacity(S)<1||k>.01?E:function(e,t,r){return r&&e===t?e:Math.abs(e-t)>=2?E(e):e>t?Math.ceil(e):Math.floor(e)};B=G(B,H,V),H=G(H,B,V),R=G(R,F,!V),F=G(F,R,!V)}var X=A(i.ensureSingle(C,"path"),P,x,g);if(X.style("vector-effect","non-scaling-stroke").attr("d",isNaN((H-B)*(F-R))?"M0,0Z":"M"+B+","+R+"V"+F+"H"+H+"V"+R+"Z").call(l.setClipUrl,t.layerClipId,e),!P.uniformtext.mode&&N){var K=l.makePointStyleFns(f);l.singlePointStyle(c,X,f,K,e)}!function(e,t,r,n,a,s,c,f,d,x,g){var w,k=t.xaxis,S=t.yaxis,z=e._fullLayout;function P(t,r,n){return i.ensureSingle(t,"text").text(r).attr({class:"bartext bartext-"+w,"text-anchor":"middle","data-notex":1}).call(l.font,n).call(o.convertToTspans,e)}var C=n[0].trace,I="h"===C.orientation,O=function(e,t,r,n,a){var o,s=t[0].trace;o=s.texttemplate?function(e,t,r,n,a){var o=t[0].trace,s=i.castOption(o,r,"texttemplate");if(!s)return"";var l,c,f,p,d="waterfall"===o.type,h="funnel"===o.type;"h"===o.orientation?(l="y",c=a,f="x",p=n):(l="x",c=n,f="y",p=a);function v(e){return u(p,+e,!0).text}var x=t[r],g={};g.label=x.p,g.labelLabel=g[l+"Label"]=(m=x.p,u(c,m,!0).text);var m;var y=i.castOption(o,x.i,"text");(0===y||y)&&(g.text=y);g.value=x.s,g.valueLabel=g[f+"Label"]=v(x.s);var T={};b(T,o,x.i),d&&(g.delta=+x.rawS||x.s,g.deltaLabel=v(g.delta),g.final=x.v,g.finalLabel=v(g.final),g.initial=g.final-g.delta,g.initialLabel=v(g.initial));h&&(g.value=x.s,g.valueLabel=v(g.value),g.percentInitial=x.begR,g.percentInitialLabel=i.formatPercent(x.begR),g.percentPrevious=x.difR,g.percentPreviousLabel=i.formatPercent(x.difR),g.percentTotal=x.sumR,g.percenTotalLabel=i.formatPercent(x.sumR));var w=i.castOption(o,x.i,"customdata");w&&(g.customdata=w);return i.texttemplateString(s,g,e._d3locale,T,g,o._meta||{})}(e,t,r,n,a):s.textinfo?function(e,t,r,n){var a=e[0].trace,o="h"===a.orientation,s="waterfall"===a.type,l="funnel"===a.type;function c(e){return u(o?r:n,+e,!0).text}var f,p=a.textinfo,d=e[t],h=p.split("+"),v=[],x=function(e){return-1!==h.indexOf(e)};x("label")&&v.push((g=e[t].p,u(o?n:r,g,!0).text));var g;x("text")&&(0===(f=i.castOption(a,d.i,"text"))||f)&&v.push(f);if(s){var m=+d.rawS||d.s,y=d.v,b=y-m;x("initial")&&v.push(c(b)),x("delta")&&v.push(c(m)),x("final")&&v.push(c(y))}if(l){x("value")&&v.push(c(d.s));var T=0;x("percent initial")&&T++,x("percent previous")&&T++,x("percent total")&&T++;var w=T>1;x("percent initial")&&(f=i.formatPercent(d.begR),w&&(f+=" of initial"),v.push(f)),x("percent previous")&&(f=i.formatPercent(d.difR),w&&(f+=" of previous"),v.push(f)),x("percent total")&&(f=i.formatPercent(d.sumR),w&&(f+=" of total"),v.push(f))}return v.join("<br>")}(t,r,n,a):v.getValue(s.text,r);return v.coerceString(m,o)}(z,n,a,k,S);w=function(e,t){var r=v.getValue(e.textposition,t);return v.coerceEnumerated(y,r)}(C,a);var V="stack"===x.mode||"relative"===x.mode,N=n[a],j=!V||N._outmost;if(!O||"none"===w||(N.isBlank||s===c||f===d)&&("auto"===w||"inside"===w))return void r.select("text").remove();var B=z.font,H=h.getBarColor(n[a],C),R=h.getInsideTextFont(C,a,B,H),F=h.getOutsideTextFont(C,a,B),U=r.datum();I?"log"===k.type&&U.s0<=0&&(s=k.range[0]<k.range[1]?0:k._length):"log"===S.type&&U.s0<=0&&(f=S.range[0]<S.range[1]?S._length:0);var W,E,G,X,K,Y=Math.abs(c-s)-2*T,Z=Math.abs(d-f)-2*T;"outside"===w&&(j||N.hasB||(w="inside"));if("auto"===w)if(j){w="inside",K=i.ensureUniformFontSize(e,R),W=P(r,O,K),E=l.bBox(W.node()),G=E.width,X=E.height;var J=G<=Y&&X<=Z,q=G<=Z&&X<=Y,Q=I?Y>=G*(Z/X):Z>=X*(Y/G);G>0&&X>0&&(J||q||Q)?w="inside":(w="outside",W.remove(),W=null)}else w="inside";if(!W){K=i.ensureUniformFontSize(e,"outside"===w?F:R);var $=(W=P(r,O,K)).attr("transform");if(W.attr("transform",""),E=l.bBox(W.node()),G=E.width,X=E.height,W.attr("transform",$),G<=0||X<=0)return void W.remove()}var ee,te,re=C.textangle;"outside"===w?(te="both"===C.constraintext||"outside"===C.constraintext,ee=function(e,t,r,n,a,i){var o,s=!!i.isHorizontal,l=!!i.constrained,c=i.angle||0,u=a.width,f=a.height,p=Math.abs(t-e),d=Math.abs(n-r);o=s?d>2*T?T:0:p>2*T?T:0;var h=1;l&&(h=s?Math.min(1,d/f):Math.min(1,p/u));var v=L(c),x=_(a,v),g=(s?x.x:x.y)/2,m=(a.left+a.right)/2,y=(a.top+a.bottom)/2,b=(e+t)/2,w=(r+n)/2,k=0,A=0,S=s?M(t,e):M(r,n);s?(b=t-S*o,k=S*g):(w=n+S*o,A=-S*g);return{textX:m,textY:y,targetX:b,targetY:w,anchorX:k,anchorY:A,scale:h,rotate:v}}(s,c,f,d,E,{isHorizontal:I,constrained:te,angle:re})):(te="both"===C.constraintext||"inside"===C.constraintext,ee=D(s,c,f,d,E,{isHorizontal:I,constrained:te,angle:re,anchor:C.insidetextanchor}));ee.fontSize=K.size,p(C.type,ee,z),N.transform=ee,A(W,z,x,g).attr("transform",i.getTextTransform(ee))}(e,t,C,r,d,B,H,R,F,x,g),t.layerClipId&&l.hideOutsideRangePoint(c,C.select("text"),w,z,f.xcalendar,f.ycalendar)}));var R=!1===f.cliponaxis;l.setClipUrl(c,R?null:t.layerClipId,e)}));c.getComponentMethod("errorbars","plot")(e,C,t,x)},toMoveInsideBar:D}},739:function(e,t,r){"use strict";var n=r(12),a=r(6).isArrayOrTypedArray,i=r(25).BADNUM,o=r(23),s=r(105),l=r(110).getAxisGroup,c=r(883);function u(e,t,r,o,u){if(o.length){var b,T,w,k;switch(function(e,t){var r,i;for(r=0;r<t.length;r++){var o,s=t[r],l=s[0].trace,c="funnel"===l.type?l._base:l.base,u="h"===l.orientation?l.xcalendar:l.ycalendar,f="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(a(c)){for(i=0;i<Math.min(c.length,s.length);i++)o=f(c[i],0,u),n(o)?(s[i].b=+o,s[i].hasB=1):s[i].b=0;for(;i<s.length;i++)s[i].b=0}else{o=f(c,0,u);var p=n(o);for(o=p?o:0,i=0;i<s.length;i++)s[i].b=o,p&&(s[i].hasB=1)}}}(r,o),u.mode){case"overlay":f(t,r,o,u);break;case"group":for(b=[],T=[],w=0;w<o.length;w++)void 0===(k=o[w])[0].trace.offset?T.push(k):b.push(k);T.length&&function(e,t,r,n,a){var o=new c(n,{sepNegVal:!1,overlapNoMerge:!a.norm});(function(e,t,r,n){for(var a=e._fullLayout,i=r.positions,o=r.distinctPositions,s=r.minDiff,c=r.traces,u=c.length,f=i.length!==o.length,p=s*(1-n.gap),x=l(a,t._id)+c[0][0].trace.orientation,g=a._alignmentOpts[x]||{},m=0;m<u;m++){var y,b,T=c[m],w=T[0].trace,k=g[w.alignmentgroup]||{},M=Object.keys(k.offsetGroups||{}).length,A=(y=M?p/M:f?p/u:p)*(1-(n.groupgap||0));b=M?((2*w._offsetIndex+1-M)*y-A)/2:f?((2*m+1-u)*y-A)/2:-A/2;var S=T[0].t;S.barwidth=A,S.poffset=b,S.bargroupwidth=p,S.bardelta=s}r.binWidth=c[0][0].t.barwidth/100,d(r),h(t,r),v(t,r,f)})(e,t,o,a),function(e){for(var t=e.traces,r=0;r<t.length;r++){var n=t[r];if(void 0===n[0].trace.base)for(var a=new c([n],{sepNegVal:!0,overlapNoMerge:!0}),o=0;o<n.length;o++){var s=n[o];if(s.p!==i){var l=a.put(s.p,s.b+s.s);l&&(s.b=l)}}}}(o),a.norm?(g(o),m(r,o,a)):x(r,o)}(e,t,r,T,u),b.length&&f(t,r,b,u);break;case"stack":case"relative":for(b=[],T=[],w=0;w<o.length;w++)void 0===(k=o[w])[0].trace.base?T.push(k):b.push(k);T.length&&function(e,t,r,n,a){var o=new c(n,{sepNegVal:"relative"===a.mode,overlapNoMerge:!(a.norm||"stack"===a.mode||"relative"===a.mode)});p(t,o,a),function(e,t,r){var n,a,o,l,c,u,f=y(e),p=t.traces;for(l=0;l<p.length;l++)if(n=p[l],"funnel"===(a=n[0].trace).type)for(c=0;c<n.length;c++)(u=n[c]).s!==i&&t.put(u.p,-.5*u.s);for(l=0;l<p.length;l++){n=p[l],a=n[0].trace,o="funnel"===a.type;var d=[];for(c=0;c<n.length;c++)if((u=n[c]).s!==i){var h;h=o?u.s:u.s+u.b;var v=t.put(u.p,h),x=v+h;u.b=v,u[f]=x,r.norm||(d.push(x),u.hasB&&d.push(v))}r.norm||(a._extremes[e._id]=s.findExtremes(e,d,{tozero:!0,padded:!0}))}}(r,o,a);for(var l=0;l<n.length;l++)for(var u=n[l],f=0;f<u.length;f++){var d=u[f];if(d.s!==i)d.b+d.s===o.get(d.p,d.s)&&(d._outmost=!0)}a.norm&&m(r,o,a)}(0,t,r,T,u),b.length&&f(t,r,b,u)}!function(e,t){var r,a,i,o=y(t),s={},l=1/0,c=-1/0;for(r=0;r<e.length;r++)for(i=e[r],a=0;a<i.length;a++){var u=i[a].p;n(u)&&(l=Math.min(l,u),c=Math.max(c,u))}var f=1e4/(c-l),p=s.round=function(e){return String(Math.round(f*(e-l)))};for(r=0;r<e.length;r++){(i=e[r])[0].t.extents=s;var d=i[0].t.poffset,h=Array.isArray(d);for(a=0;a<i.length;a++){var v=i[a],x=v[o]-v.w/2;if(n(x)){var g=v[o]+v.w/2,m=p(v.p);s[m]?s[m]=[Math.min(x,s[m][0]),Math.max(g,s[m][1])]:s[m]=[x,g]}v.p0=v.p+(h?d[a]:d),v.p1=v.p0+v.w,v.s0=v.b,v.s1=v.s0+v.s}}}(o,t)}}function f(e,t,r,n){for(var a=0;a<r.length;a++){var i=r[a],o=new c([i],{sepNegVal:!1,overlapNoMerge:!n.norm});p(e,o,n),n.norm?(g(o),m(t,o,n)):x(t,o)}}function p(e,t,r){for(var n=t.minDiff,a=t.traces,i=n*(1-r.gap),o=i*(1-(r.groupgap||0)),s=-o/2,l=0;l<a.length;l++){var c=a[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=i,c.bardelta=n}t.binWidth=a[0][0].t.barwidth/100,d(t),h(e,t),v(e,t)}function d(e){var t,r,i=e.traces;for(t=0;t<i.length;t++){var o,s=i[t],l=s[0],c=l.trace,u=l.t,f=c._offset||c.offset,p=u.poffset;if(a(f)){for(o=Array.prototype.slice.call(f,0,s.length),r=0;r<o.length;r++)n(o[r])||(o[r]=p);for(r=o.length;r<s.length;r++)o.push(p);u.poffset=o}else void 0!==f&&(u.poffset=f);var d=c._width||c.width,h=u.barwidth;if(a(d)){var v=Array.prototype.slice.call(d,0,s.length);for(r=0;r<v.length;r++)n(v[r])||(v[r]=h);for(r=v.length;r<s.length;r++)v.push(h);if(u.barwidth=v,void 0===f){for(o=[],r=0;r<s.length;r++)o.push(p+(h-v[r])/2);u.poffset=o}}else void 0!==d&&(u.barwidth=d,void 0===f&&(u.poffset=p+(h-d)/2))}}function h(e,t){for(var r=t.traces,n=y(e),a=0;a<r.length;a++)for(var i=r[a],o=i[0].t,s=o.poffset,l=Array.isArray(s),c=o.barwidth,u=Array.isArray(c),f=0;f<i.length;f++){var p=i[f],d=p.w=u?c[f]:c;p[n]=p.p+(l?s[f]:s)+d/2}}function v(e,t,r){var n=t.traces,a=t.minDiff/2;s.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var i=0;i<n.length;i++){var o,l,c,u,f=n[i],p=f[0],d=p.trace,h=[];for(u=0;u<f.length;u++)l=(o=f[u]).p-a,c=o.p+a,h.push(l,c);if(d.width||d.offset){var v=p.t,x=v.poffset,g=v.barwidth,m=Array.isArray(x),y=Array.isArray(g);for(u=0;u<f.length;u++){o=f[u];var b=m?x[u]:x,T=y?g[u]:g;c=(l=o.p+b)+T,h.push(l,c)}}d._extremes[e._id]=s.findExtremes(e,h,{padded:!1})}}function x(e,t){for(var r=t.traces,n=y(e),a=0;a<r.length;a++){for(var i=r[a],o=i[0].trace,l=[],c=!1,u=0;u<i.length;u++){var f=i[u],p=f.b,d=p+f.s;f[n]=d,l.push(d),f.hasB&&l.push(p),f.hasB&&f.b||(c=!0)}o._extremes[e._id]=s.findExtremes(e,l,{tozero:c,padded:!0})}}function g(e){for(var t=e.traces,r=0;r<t.length;r++)for(var n=t[r],a=0;a<n.length;a++){var o=n[a];o.s!==i&&e.put(o.p,o.b+o.s)}}function m(e,t,r){var a=t.traces,o=y(e),l="fraction"===r.norm?1:100,c=l/1e9,u=e.l2c(e.c2l(0)),f="stack"===r.mode?l:u;function p(t){return n(e.c2l(t))&&(t<u-c||t>f+c||!n(u))}for(var d=0;d<a.length;d++){for(var h=a[d],v=h[0].trace,x=[],g=!1,m=!1,b=0;b<h.length;b++){var T=h[b];if(T.s!==i){var w=Math.abs(l/t.get(T.p,T.s));T.b*=w,T.s*=w;var k=T.b,M=k+T.s;T[o]=M,x.push(M),m=m||p(M),T.hasB&&(x.push(k),m=m||p(k)),T.hasB&&T.b||(g=!0)}}v._extremes[e._id]=s.findExtremes(e,x,{tozero:g,padded:m})}}function y(e){return e._id.charAt(0)}e.exports={crossTraceCalc:function(e,t){for(var r=t.xaxis,n=t.yaxis,a=e._fullLayout,i=e._fullData,s=e.calcdata,l=[],c=[],f=0;f<i.length;f++){var p=i[f];if(!0===p.visible&&o.traceIs(p,"bar")&&p.xaxis===r._id&&p.yaxis===n._id&&("h"===p.orientation?l.push(s[f]):c.push(s[f]),p._computePh))for(var d=e.calcdata[f],h=0;h<d.length;h++)"function"==typeof d[h].ph0&&(d[h].ph0=d[h].ph0()),"function"==typeof d[h].ph1&&(d[h].ph1=d[h].ph1())}var v={mode:a.barmode,norm:a.barnorm,gap:a.bargap,groupgap:a.bargroupgap};u(e,r,n,c,v),u(e,n,r,l,v)},setGroupPositions:u}},740:function(e,t,r){"use strict";var n=r(623),a=r(23),i=r(57),o=r(6).fillText,s=r(667).getLineWidth,l=r(105).hoverLabelText,c=r(25).BADNUM;function u(e,t,r,a){var i,s,u,f,p,d,h,v=e.cd,x=v[0].trace,g=v[0].t,m="closest"===a,y="waterfall"===x.type,b=e.maxHoverDistance;function T(e){return e[u]-e.w/2}function w(e){return e[u]+e.w/2}var k=m?T:function(e){return Math.min(T(e),e.p-g.bardelta/2)},M=m?w:function(e){return Math.max(w(e),e.p+g.bardelta/2)};function A(e,t){return n.inbox(e-i,t-i,b+Math.min(1,Math.abs(t-e)/h)-1)}function S(e){return A(k(e),M(e))}function L(e){var t=s,r=e.b,a=e[f];if(y){var i=Math.abs(e.rawS)||0;t>0?a+=i:t<0&&(a-=i)}return n.inbox(r-t,a-t,b+(a-t)/(a-r)-1)}"h"===x.orientation?(i=r,s=t,u="y",f="x",p=L,d=S):(i=t,s=r,u="x",f="y",d=L,p=S);var _=e[u+"a"],D=e[f+"a"];h=Math.abs(_.r2c(_.range[1])-_.r2c(_.range[0]));var z=n.getDistanceFunction(a,p,d,(function(e){return(p(e)+d(e))/2}));if(n.getClosest(v,z,e),!1!==e.index&&v[e.index].p!==c){m||(k=function(e){return Math.min(T(e),e.p-g.bargroupwidth/2)},M=function(e){return Math.max(w(e),e.p+g.bargroupwidth/2)});var P=v[e.index],C=x.base?P.b+P.s:P.s;e[f+"0"]=e[f+"1"]=D.c2p(P[f],!0),e[f+"LabelVal"]=C;var I=g.extents[g.extents.round(P.p)];return e[u+"0"]=_.c2p(m?k(P):I[0],!0),e[u+"1"]=_.c2p(m?M(P):I[1],!0),e[u+"LabelVal"]=P.p,e.labelLabel=l(_,e[u+"LabelVal"]),e.valueLabel=l(D,e[f+"LabelVal"]),e.spikeDistance=(L(P)+function(e){return A(T(e),w(e))}(P))/2-b,e[u+"Spike"]=_.c2p(P.p,!0),o(P,x,e),e.hovertemplate=x.hovertemplate,e}}function f(e,t){var r=t.mcc||e.marker.color,n=t.mlcc||e.marker.line.color,a=s(e,t);return i.opacity(r)?r:i.opacity(n)&&a?n:void 0}e.exports={hoverPoints:function(e,t,r,n){var i=u(e,t,r,n);if(i){var o=i.cd,s=o[0].trace,l=o[i.index];return i.color=f(s,l),a.getComponentMethod("errorbars","hoverInfo")(l,s,i),[i]}},hoverOnBars:u,getTraceColor:f}},741:function(e,t,r){"use strict";function n(e,t,r,n,a){var i=t.c2p(n?e.s0:e.p0,!0),o=t.c2p(n?e.s1:e.p1,!0),s=r.c2p(n?e.p0:e.s0,!0),l=r.c2p(n?e.p1:e.s1,!0);return a?[(i+o)/2,(s+l)/2]:n?[o,(s+l)/2]:[(i+o)/2,l]}e.exports=function(e,t){var r,a=e.cd,i=e.xaxis,o=e.yaxis,s=a[0].trace,l="funnel"===s.type,c="h"===s.orientation,u=[];if(!1===t)for(r=0;r<a.length;r++)a[r].selected=0;else for(r=0;r<a.length;r++){var f=a[r],p="ct"in f?f.ct:n(f,i,o,c,l);t.contains(p,!1,r,e)?(u.push({pointNumber:r,x:i.c2d(f.x),y:o.c2d(f.y)}),f.selected=1):f.selected=0}return u}},883:function(e,t,r){"use strict";e.exports=i;var n=r(6).distinctVals,a=r(25).BADNUM;function i(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var r=1/0,i=[],o=0;o<e.length;o++){for(var s=e[o],l=0;l<s.length;l++){var c=s[l];c.p!==a&&i.push(c.p)}s[0]&&s[0].width1&&(r=Math.min(s[0].width1,r))}this.positions=i;var u=n(i);this.distinctPositions=u.vals,1===u.vals.length&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(u.minDiff,r),this.binWidth=this.minDiff,this.bins={}}i.prototype.put=function(e,t){var r=this.getLabel(e,t),n=this.bins[r]||0;return this.bins[r]=n+t,n},i.prototype.get=function(e,t){var r=this.getLabel(e,t);return this.bins[r]||0},i.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}}}]);