(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1148:function(e,t,n){"use strict";e.exports=n(1284)},1284:function(e,t,n){"use strict";e.exports={attributes:n(589),supplyDefaults:n(931),calc:n(836),plot:n(853).plot,style:n(854),colorbar:n(708),hoverPoints:n(933),moduleType:"trace",name:"contour",basePlotModule:n(407),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{description:["The data from which contour lines are computed is set in `z`.","Data in `z` must be a {2D array} of numbers.","Say that `z` has N rows and M columns, then by default,","these N rows correspond to N y coordinates","(set in `y` or auto-generated) and the M columns","correspond to M x coordinates (set in `x` or auto-generated).","By setting `transpose` to *true*, the above behavior is flipped."].join(" ")}}},472:function(e,t,n){"use strict";var r=n(378);e.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");var a=t.marker;if(a){r.mergeArray(a.opacity,e,"mo",!0),r.mergeArray(a.color,e,"mc");var o=a.line;o&&(r.mergeArray(o.color,e,"mlc"),r.mergeArrayCastPositive(o.width,e,"mlw"))}}},482:function(e,t,n){"use strict";var r=n(396),a=n(397),o=n(389).hovertemplateAttrs,i=n(394),s=n(483).FORMAT_LINK,l=n(385).extendFlat;e.exports=l({z:{valType:"data_array",editType:"calc",description:"Sets the z data."},x:l({},r.x,{impliedEdits:{xtype:"array"}}),x0:l({},r.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},r.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},r.y,{impliedEdits:{ytype:"array"}}),y0:l({},r.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},r.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"calc",description:"Same as `text`."},transpose:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:"Transposes the z data."},xtype:{valType:"enumerated",values:["array","scaled"],role:"info",editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's x coordinates are given by *x*","(the default behavior when `x` is provided).","If *scaled*, the heatmap's x coordinates are given by *x0* and *dx*","(the default behavior when `x` is not provided)."].join(" ")},ytype:{valType:"enumerated",values:["array","scaled"],role:"info",editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's y coordinates are given by *y*","(the default behavior when `y` is provided)","If *scaled*, the heatmap's y coordinates are given by *y0* and *dy*","(the default behavior when `y` is not provided)"].join(" ")},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,role:"style",editType:"calc",description:["Picks a smoothing algorithm use to smooth `z` data."].join(" ")},hoverongaps:{valType:"boolean",dflt:!0,role:"style",editType:"none",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data have hover labels associated with them."].join(" ")},connectgaps:{valType:"boolean",role:"info",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array and `zsmooth` is not false;","otherwise it is defaulted to false."].join(" ")},xgap:{valType:"number",dflt:0,min:0,role:"style",editType:"plot",description:"Sets the horizontal gap (in pixels) between bricks."},ygap:{valType:"number",dflt:0,min:0,role:"style",editType:"plot",description:"Sets the vertical gap (in pixels) between bricks."},zhoverformat:{valType:"string",dflt:"",role:"style",editType:"none",description:["Sets the hover text formatting rule using d3 formatting mini-languages","which are very similar to those in Python. See:",s].join(" ")},hovertemplate:o(),showlegend:l({},a.showlegend,{dflt:!1})},{transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},494:function(e,t,n){"use strict";e.exports=function(e){return e.end+e.size/1e6}},497:function(e,t,n){"use strict";var r=n(383);e.exports={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,a){var o=a[t];return r(o)?(o=Number(o),n[e]+=o,o):0},avg:function(e,t,n,a,o){var i=a[t];return r(i)&&(i=Number(i),n[e]+=i,o[e]++),0},min:function(e,t,n,a){var o=a[t];if(r(o)){if(o=Number(o),!r(n[e]))return n[e]=o,o;if(n[e]>o){var i=o-n[e];return n[e]=o,i}}return 0},max:function(e,t,n,a){var o=a[t];if(r(o)){if(o=Number(o),!r(n[e]))return n[e]=o,o;if(n[e]<o){var i=o-n[e];return n[e]=o,i}}return 0}}},498:function(e,t,n){"use strict";e.exports={percent:function(e,t){for(var n=e.length,r=100/t,a=0;a<n;a++)e[a]*=r},probability:function(e,t){for(var n=e.length,r=0;r<n;r++)e[r]/=t},density:function(e,t,n,r){var a=e.length;r=r||1;for(var o=0;o<a;o++)e[o]*=n[o]*r},"probability density":function(e,t,n,r){var a=e.length;r&&(t/=r);for(var o=0;o<a;o++)e[o]*=n[o]/t}}},499:function(e,t,n){"use strict";e.exports=function(e,t){for(var n=e.length,r=0,a=0;a<n;a++)t[a]?(e[a]/=t[a],r+=e[a]):e[a]=null;return r}},500:function(e,t,n){"use strict";var r=n(388),a=r.ONEAVGYEAR,o=r.ONEAVGMONTH,i=r.ONEDAY,s=r.ONEHOUR,l=r.ONEMIN,c=r.ONESEC,u=n(382).tickIncrement;function h(e,t,n,r){if(e*t<=0)return 1/0;for(var a=Math.abs(t-e),o="date"===n.type,i=f(a,o),s=0;s<10;s++){var l=f(80*i,o);if(i===l)break;if(!p(l,e,t,o,n,r))break;i=l}return i}function f(e,t){return t&&e>c?e>i?e>1.1*a?a:e>1.1*o?o:i:e>s?s:e>l?l:c:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function p(e,t,n,r,o,s){if(r&&e>i){var l=d(t,o,s),c=d(n,o,s),u=e===a?0:1;return l[u]!==c[u]}return Math.floor(n/e)-Math.floor(t/e)>.1}function d(e,t,n){var r=t.c2d(e,a,n).split("-");return""===r[0]&&(r.unshift(),r[0]="-"+r[0]),r}e.exports=function(e,t,n,r,o){var s,l,c=-1.1*t,f=-.1*t,p=e-f,d=n[0],v=n[1],g=Math.min(h(d+f,d+p,r,o),h(v+f,v+p,r,o)),y=Math.min(h(d+c,d+f,r,o),h(v+c,v+f,r,o));if(g>y&&y<Math.abs(v-d)/4e3?(s=g,l=!1):(s=Math.min(g,y),l=!0),"date"===r.type&&s>i){var m=s===a?1:6,x=s===a?"M12":"M1";return function(t,n){var i=r.c2d(t,a,o),s=i.indexOf("-",m);s>0&&(i=i.substr(0,s));var c=r.d2c(i,0,o);if(c<t){var h=u(c,x,!1,o);(c+h)/2<t+e&&(c=h)}return n&&l?u(c,x,!0,o):c}}return function(t,n){var r=s*Math.round(t/s);return r+s/10<t&&r+.9*s<t+e&&(r+=s),n&&l&&(r-=s),r}}},542:function(e,t,n){"use strict";var r=n(378),a=[[-1,0],[1,0],[0,-1],[0,1]];function o(e){return.5-.25*Math.min(1,.5*e)}function i(e,t,n){var r,o,i,s,l,c,u,h,f,p,d,v,g,y=0;for(s=0;s<t.length;s++){for(o=(r=t[s])[0],i=r[1],d=e[o][i],p=0,f=0,l=0;l<4;l++)(u=e[o+(c=a[l])[0]])&&void 0!==(h=u[i+c[1]])&&(0===p?v=g=h:(v=Math.min(v,h),g=Math.max(g,h)),f++,p+=h);if(0===f)throw"iterateInterp2d order is wrong: no defined neighbors";e[o][i]=p/f,void 0===d?f<4&&(y=1):(e[o][i]=(1+n)*e[o][i]-n*d,g>v&&(y=Math.max(y,Math.abs(e[o][i]-d)/(g-v))))}return y}e.exports=function(e,t){var n,a=1;for(i(e,t),n=0;n<t.length&&!(t[n][2]<4);n++);for(t=t.slice(n),n=0;n<100&&a>.01;n++)a=i(e,t,o(a));return a>.01&&r.log("interp2d didn't converge quickly",a),e}},543:function(e,t,n){"use strict";var r=n(378).maxRowLength;e.exports=function(e){var t,n,a,o,i,s,l,c,u=[],h={},f=[],p=e[0],d=[],v=[0,0,0],g=r(e);for(n=0;n<e.length;n++)for(t=d,d=p,p=e[n+1]||[],a=0;a<g;a++)void 0===d[a]&&((s=(void 0!==d[a-1]?1:0)+(void 0!==d[a+1]?1:0)+(void 0!==t[a]?1:0)+(void 0!==p[a]?1:0))?(0===n&&s++,0===a&&s++,n===e.length-1&&s++,a===d.length-1&&s++,s<4&&(h[[n,a]]=[n,a,s]),u.push([n,a,s])):f.push([n,a]));for(;f.length;){for(l={},c=!1,i=f.length-1;i>=0;i--)(s=((h[[(n=(o=f[i])[0])-1,a=o[1]]]||v)[2]+(h[[n+1,a]]||v)[2]+(h[[n,a-1]]||v)[2]+(h[[n,a+1]]||v)[2])/20)&&(l[o]=[n,a,s],f.splice(i,1),c=!0);if(!c)throw"findEmpties iterated with no new neighbors";for(o in l)h[o]=l[o],u.push(l[o])}return u.sort((function(e,t){return t[2]-e[2]}))}},554:function(e,t,n){"use strict";var r=n(383),a=n(378),o=n(388).BADNUM;e.exports=function(e,t,n,i){var s,l,c,u,h,f;function p(e){if(r(e))return+e}if(t&&t.transpose){for(s=0,h=0;h<e.length;h++)s=Math.max(s,e[h].length);if(0===s)return!1;c=function(e){return e.length},u=function(e,t,n){return(e[n]||[])[t]}}else s=e.length,c=function(e,t){return e[t].length},u=function(e,t,n){return(e[t]||[])[n]};var d=function(e,t,n){return t===o||n===o?o:u(e,t,n)};function v(e){if(t&&"carpet"!==t.type&&"contourcarpet"!==t.type&&e&&"category"===e.type&&t["_"+e._id.charAt(0)].length){var n=e._id.charAt(0),r={},i=t["_"+n+"CategoryMap"]||t[n];for(h=0;h<i.length;h++)r[i[h]]=h;return function(t){var n=r[e._categories[t]];return n+1?n:o}}return a.identity}var g=v(n),y=v(i);i&&"category"===i.type&&(s=i._categories.length);var m=new Array(s);for(h=0;h<s;h++)for(l=n&&"category"===n.type?n._categories.length:c(e,h),m[h]=new Array(l),f=0;f<l;f++)m[h][f]=p(d(e,y(h),g(f)));return m}},555:function(e,t,n){"use strict";var r=n(378),a=n(388).BADNUM;e.exports=function(e,t,n,o,i,s){var l,c,u,h,f=e._length,p=t.makeCalcdata(e,o),d=n.makeCalcdata(e,i),v=e.text,g=void 0!==v&&r.isArray1D(v),y=e.hovertext,m=void 0!==y&&r.isArray1D(y),x=r.distinctVals(p),b=x.vals,M=r.distinctVals(d),T=M.vals,A=[],_=T.length,z=b.length;for(l=0;l<s.length;l++)A[l]=r.init2dArray(_,z);g&&(u=r.init2dArray(_,z)),m&&(h=r.init2dArray(_,z));var w=r.init2dArray(_,z);for(l=0;l<f;l++)if(p[l]!==a&&d[l]!==a){var O=r.findBin(p[l]+x.minDiff/2,b),k=r.findBin(d[l]+M.minDiff/2,T);for(c=0;c<s.length;c++){var L=e[s[c]];A[c][k][O]=L[l],w[k][O]=l}g&&(u[k][O]=v[l]),m&&(h[k][O]=y[l])}for(e["_"+o]=b,e["_"+i]=T,c=0;c<s.length;c++)e["_"+s[c]]=A[c];g&&(e._text=u),m&&(e._hovertext=h),t&&"category"===t.type&&(e["_"+o+"CategoryMap"]=b.map((function(e){return t._categories[e]}))),n&&"category"===n.type&&(e["_"+i+"CategoryMap"]=T.map((function(e){return n._categories[e]}))),e._after2before=w}},562:function(e,t,n){"use strict";var r=n(379),a=n(378),o=n(382),i=n(697),s=n(419),l=n(555),c=n(554),u=n(542),h=n(543),f=n(610),p=n(388).BADNUM;function d(e){for(var t=[],n=e.length,r=0;r<n;r++){var a=e[r];a!==p&&t.push(a)}return t}e.exports=function(e,t){var n,v,g,y,m,x,b,M,T,A=o.getFromId(e,t.xaxis||"x"),_=o.getFromId(e,t.yaxis||"y"),z=r.traceIs(t,"contour"),w=r.traceIs(t,"histogram"),O=r.traceIs(t,"gl2d"),k=z?"best":t.zsmooth;if(A._minDtick=0,_._minDtick=0,w)n=(T=i(e,t)).x,v=T.x0,g=T.dx,y=T.y,m=T.y0,x=T.dy,b=T.z;else{var L=t.z;a.isArray1D(L)?(l(t,A,_,"x","y",["z"]),n=t._x,y=t._y,L=t._z):(n=t._x=t.x?A.makeCalcdata(t,"x"):[],y=t._y=t.y?_.makeCalcdata(t,"y"):[]),v=t.x0,g=t.dx,m=t.y0,x=t.dy,b=c(L,t,A,_)}function S(e){k=t._input.zsmooth=t.zsmooth=!1,a.warn('cannot use zsmooth: "fast": '+e)}if((A.rangebreaks||_.rangebreaks)&&(b=function(e,t,n){for(var r=[],a=-1,o=0;o<n.length;o++)if(t[o]!==p){a++,r[a]=[];for(var i=0;i<n[o].length;i++)e[i]!==p&&r[a].push(n[o][i])}return r}(n,y,b),w||(n=d(n),y=d(y),t._x=n,t._y=y)),w||!z&&!t.connectgaps||(t._emptypoints=h(b),u(b,t._emptypoints)),"fast"===k)if("log"===A.type||"log"===_.type)S("log axis found");else if(!w){if(n.length){var E=(n[n.length-1]-n[0])/(n.length-1),I=Math.abs(E/100);for(M=0;M<n.length-1;M++)if(Math.abs(n[M+1]-n[M]-E)>I){S("x scale is not linear");break}}if(y.length&&"fast"===k){var N=(y[y.length-1]-y[0])/(y.length-1),D=Math.abs(N/100);for(M=0;M<y.length-1;M++)if(Math.abs(y[M+1]-y[M]-N)>D){S("y scale is not linear");break}}}var C=a.maxRowLength(b),F="scaled"===t.xtype?"":n,R=f(t,F,v,g,C,A),B="scaled"===t.ytype?"":y,j=f(t,B,m,x,b.length,_);O||(t._extremes[A._id]=o.findExtremes(A,R),t._extremes[_._id]=o.findExtremes(_,j));var P={x:R,y:j,z:b,text:t._text||t.text,hovertext:t._hovertext||t.hovertext};if(F&&F.length===R.length-1&&(P.xCenter=F),B&&B.length===j.length-1&&(P.yCenter=B),w&&(P.xRanges=T.xRanges,P.yRanges=T.yRanges,P.pts=T.pts),z||s(e,t,{vals:b,cLetter:"z"}),z&&t.contours&&"heatmap"===t.contours.coloring){var G={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar};P.xfill=f(G,F,v,g,C,A),P.yfill=f(G,B,m,x,b.length,_)}return[P]}},563:function(e,t,n){"use strict";var r=n(383),a=n(378),o=n(379),i=n(382),s=n(472),l=n(497),c=n(498),u=n(499),h=n(500);function f(e,t,n,s,l){var c,u,h,p,d,v,g,y=s+"bins",m=e._fullLayout,x=t["_"+s+"bingroup"],b=m._histogramBinOpts[x],M="overlay"===m.barmode,T=function(e){return n.r2c(e,0,p)},A=function(e){return n.c2r(e,0,p)},_="date"===n.type?function(e){return e||0===e?a.cleanDate(e,null,p):null}:function(e){return r(e)?Number(e):null};function z(e,t,n){t[e+"Found"]?(t[e]=_(t[e]),null===t[e]&&(t[e]=n[e])):(v[e]=t[e]=n[e],a.nestedProperty(u[0],y+"."+e).set(n[e]))}if(t["_"+s+"autoBinFinished"])delete t["_"+s+"autoBinFinished"];else{u=b.traces;var w=[],O=!0,k=!1,L=!1;for(c=0;c<u.length;c++)if((h=u[c]).visible){var S=b.dirs[c];d=h["_"+S+"pos0"]=n.makeCalcdata(h,S),w=a.concat(w,d),delete h["_"+s+"autoBinFinished"],!0===t.visible&&(O?O=!1:(delete h._autoBin,h["_"+s+"autoBinFinished"]=1),o.traceIs(h,"2dMap")&&(k=!0),"histogram2dcontour"===h.type&&(L=!0))}p=u[0][s+"calendar"];var E=i.autoBin(w,n,b.nbins,k,p,b.sizeFound&&b.size),I=u[0]._autoBin={};if(v=I[b.dirs[0]]={},L&&(b.size||(E.start=A(i.tickIncrement(T(E.start),E.size,!0,p))),void 0===b.end&&(E.end=A(i.tickIncrement(T(E.end),E.size,!1,p)))),M&&!o.traceIs(t,"2dMap")&&0===E._dataSpan&&"category"!==n.type&&"multicategory"!==n.type){if(l)return[E,d,!0];E=function(e,t,n,r,o){var i,s,l,c=e._fullLayout,u=function(e,t){for(var n=t.xaxis,r=t.yaxis,a=t.orientation,o=[],i=e._fullData,s=0;s<i.length;s++){var l=i[s];"histogram"===l.type&&!0===l.visible&&l.orientation===a&&l.xaxis===n&&l.yaxis===r&&o.push(l)}return o}(e,t),h=!1,p=1/0,d=[t];for(i=0;i<u.length;i++)if((s=u[i])===t)h=!0;else if(h){var v=f(e,s,n,r,!0),g=v[0],y=v[2];s["_"+r+"autoBinFinished"]=1,s["_"+r+"pos0"]=v[1],y?d.push(s):p=Math.min(p,g.size)}else l=c._histogramBinOpts[s["_"+r+"bingroup"]],p=Math.min(p,l.size||s[o].size);var m=new Array(d.length);for(i=0;i<d.length;i++)for(var x=d[i]["_"+r+"pos0"],b=0;b<x.length;b++)if(void 0!==x[b]){m[i]=x[b];break}isFinite(p)||(p=a.distinctVals(m).minDiff);for(i=0;i<d.length;i++){var M=(s=d[i])[r+"calendar"],T={start:n.c2r(m[i]-p/2,0,M),end:n.c2r(m[i]+p/2,0,M),size:p};s._input[o]=s[o]=T,(l=c._histogramBinOpts[s["_"+r+"bingroup"]])&&a.extendFlat(l,T)}return t[o]}(e,t,n,s,y)}(g=h.cumulative||{}).enabled&&"include"!==g.currentbin&&("decreasing"===g.direction?E.start=A(i.tickIncrement(T(E.start),E.size,!0,p)):E.end=A(i.tickIncrement(T(E.end),E.size,!1,p))),b.size=E.size,b.sizeFound||(v.size=E.size,a.nestedProperty(u[0],y+".size").set(E.size)),z("start",b,E),z("end",b,E)}d=t["_"+s+"pos0"],delete t["_"+s+"pos0"];var N=t._input[y]||{},D=a.extendFlat({},b),C=b.start,F=n.r2l(N.start),R=void 0!==F;if((b.startFound||R)&&F!==n.r2l(C)){var B=R?F:a.aggNums(Math.min,null,d),j={type:"category"===n.type||"multicategory"===n.type?"linear":n.type,r2l:n.r2l,dtick:b.size,tick0:C,calendar:p,range:[B,i.tickIncrement(B,b.size,!1,p)].map(n.l2r)},P=i.tickFirst(j);P>n.r2l(B)&&(P=i.tickIncrement(P,b.size,!0,p)),D.start=n.l2r(P),R||a.nestedProperty(t,y+".start").set(D.start)}var G=b.end,H=n.r2l(N.end),V=void 0!==H;if((b.endFound||V)&&H!==n.r2l(G)){var U=V?H:a.aggNums(Math.max,null,d);D.end=n.l2r(U),V||a.nestedProperty(t,y+".start").set(D.end)}var q="autobin"+s;return!1===t._input[q]&&(t._input[y]=a.extendFlat({},t[y]||{}),delete t._input[q],delete t[q]),[D,d]}e.exports={calc:function(e,t){var n,o,p,d,v=[],g=[],y=i.getFromId(e,"h"===t.orientation?t.yaxis:t.xaxis),m="h"===t.orientation?"y":"x",x={x:"y",y:"x"}[m],b=t[m+"calendar"],M=t.cumulative,T=f(e,t,y,m),A=T[0],_=T[1],z="string"==typeof A.size,w=[],O=z?w:A,k=[],L=[],S=[],E=0,I=t.histnorm,N=t.histfunc,D=-1!==I.indexOf("density");M.enabled&&D&&(I=I.replace(/ ?density$/,""),D=!1);var C,F="max"===N||"min"===N?null:0,R=l.count,B=c[I],j=!1,P=function(e){return y.r2c(e,0,b)};for(a.isArrayOrTypedArray(t[x])&&"count"!==N&&(C=t[x],j="avg"===N,R=l[N]),n=P(A.start),p=P(A.end)+(n-i.tickIncrement(n,A.size,!1,b))/1e6;n<p&&v.length<1e6&&(o=i.tickIncrement(n,A.size,!1,b),v.push((n+o)/2),g.push(F),S.push([]),w.push(n),D&&k.push(1/(o-n)),j&&L.push(0),!(o<=n));)n=o;w.push(n),z||"date"!==y.type||(O={start:P(O.start),end:P(O.end),size:O.size}),e._fullLayout._roundFnOpts||(e._fullLayout._roundFnOpts={});var G=t["_"+m+"bingroup"],H={leftGap:1/0,rightGap:1/0};G&&(e._fullLayout._roundFnOpts[G]||(e._fullLayout._roundFnOpts[G]=H),H=e._fullLayout._roundFnOpts[G]);var V,U=g.length,q=!0,Z=H.leftGap,X=H.rightGap,W={};for(n=0;n<_.length;n++){var J=_[n];(d=a.findBin(J,O))>=0&&d<U&&(E+=R(d,n,g,C,L),q&&S[d].length&&J!==_[S[d][0]]&&(q=!1),S[d].push(n),W[n]=d,Z=Math.min(Z,J-w[d]),X=Math.min(X,w[d+1]-J))}H.leftGap=Z,H.rightGap=X,q||(V=function(t,n){return function(){var r=e._fullLayout._roundFnOpts[G];return h(r.leftGap,r.rightGap,w,y,b)(t,n)}}),j&&(E=u(g,L)),B&&B(g,E,k),M.enabled&&function(e,t,n){var r,a,o;function i(t){o=e[t],e[t]/=2}function s(t){a=e[t],e[t]=o+a/2,o+=a}if("half"===n)if("increasing"===t)for(i(0),r=1;r<e.length;r++)s(r);else for(i(e.length-1),r=e.length-2;r>=0;r--)s(r);else if("increasing"===t){for(r=1;r<e.length;r++)e[r]+=e[r-1];"exclude"===n&&(e.unshift(0),e.pop())}else{for(r=e.length-2;r>=0;r--)e[r]+=e[r+1];"exclude"===n&&(e.push(0),e.shift())}}(g,M.direction,M.currentbin);var K=Math.min(v.length,g.length),Y=[],$=0,Q=K-1;for(n=0;n<K;n++)if(g[n]){$=n;break}for(n=K-1;n>=$;n--)if(g[n]){Q=n;break}for(n=$;n<=Q;n++)if(r(v[n])&&r(g[n])){var ee={p:v[n],s:g[n],b:0};M.enabled||(ee.pts=S[n],q?ee.ph0=ee.ph1=S[n].length?_[S[n][0]]:v[n]:(t._computePh=!0,ee.ph0=V(w[n]),ee.ph1=V(w[n+1],!0))),Y.push(ee)}return 1===Y.length&&(Y[0].width1=i.tickIncrement(Y[0].p,A.size,!1,b)-Y[0].p),s(Y,t),a.isArrayOrTypedArray(t.selectedpoints)&&a.tagSelected(Y,t,W),Y},calcAllAutoBins:f}},589:function(e,t,n){"use strict";var r=n(482),a=n(396),o=n(394),i=n(488).dash,s=n(404),l=n(385).extendFlat,c=n(615),u=c.COMPARISON_OPS2,h=c.INTERVAL_OPS,f=n(483).FORMAT_LINK,p=a.line;e.exports=l({z:r.z,x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,hovertext:r.hovertext,transpose:r.transpose,xtype:r.xtype,ytype:r.ytype,zhoverformat:r.zhoverformat,hovertemplate:r.hovertemplate,hoverongaps:r.hoverongaps,connectgaps:l({},r.connectgaps,{description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array","otherwise it is defaulted to false."].join(" ")}),fillcolor:{valType:"color",role:"style",editType:"calc",description:["Sets the fill color if `contours.type` is *constraint*.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},autocontour:{valType:"boolean",dflt:!0,role:"style",editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0},description:["Determines whether or not the contour level attributes are","picked by an algorithm.","If *true*, the number of contour levels can be set in `ncontours`.","If *false*, set the contour level attributes in `contours`."].join(" ")},ncontours:{valType:"integer",dflt:15,min:1,role:"style",editType:"calc",description:["Sets the maximum number of contour levels. The actual number","of contours will be chosen automatically to be less than or","equal to the value of `ncontours`.","Has an effect only if `autocontour` is *true* or if","`contours.size` is missing."].join(" ")},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",role:"info",editType:"calc",description:["If `levels`, the data is represented as a contour plot with multiple","levels displayed. If `constraint`, the data is represented as constraints","with the invalid region shaded as specified by the `operation` and","`value` parameters."].join(" ")},start:{valType:"number",dflt:null,role:"style",editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,role:"style",editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,role:"style",editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the step between each contour level.","Must be positive."].join(" ")},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",role:"style",editType:"calc",description:["Determines the coloring method showing the contour values.","If *fill*, coloring is done evenly between each contour level","If *heatmap*, a heatmap gradient coloring is applied","between each contour level.","If *lines*, coloring is done on the contour lines.","If *none*, no coloring is applied on this trace."].join(" ")},showlines:{valType:"boolean",dflt:!0,role:"style",editType:"plot",description:["Determines whether or not the contour lines are drawn.","Has an effect only if `contours.coloring` is set to *fill*."].join(" ")},showlabels:{valType:"boolean",dflt:!1,role:"style",editType:"plot",description:["Determines whether to label the contour lines with their values."].join(" ")},labelfont:s({editType:"plot",colorEditType:"style",description:["Sets the font used for labeling the contour levels.","The default color comes from the lines, if shown.","The default family and size come from `layout.font`."].join(" ")}),labelformat:{valType:"string",dflt:"",role:"style",editType:"plot",description:["Sets the contour label formatting rule using d3 formatting","mini-language which is very similar to Python, see:",f].join(" ")},operation:{valType:"enumerated",values:[].concat(u).concat(h),role:"info",dflt:"=",editType:"calc",description:["Sets the constraint operation.","*=* keeps regions equal to `value`","*<* and *<=* keep regions less than `value`","*>* and *>=* keep regions greater than `value`","*[]*, *()*, *[)*, and *(]* keep regions inside `value[0]` to `value[1]`","*][*, *)(*, *](*, *)[* keep regions outside `value[0]` to value[1]`","Open vs. closed intervals make no difference to constraint display, but","all versions are allowed for consistency with filter transforms."].join(" ")},value:{valType:"any",dflt:0,role:"info",editType:"calc",description:["Sets the value or values of the constraint boundary.","When `operation` is set to one of the comparison values","("+u+")","*value* is expected to be a number.","When `operation` is set to one of the interval values","("+h+")","*value* is expected to be an array of two numbers where the first","is the lower bound and the second is the upper bound."].join(" ")},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:l({},p.color,{editType:"style+colorbars",description:["Sets the color of the contour level.","Has no effect if `contours.coloring` is set to *lines*."].join(" ")}),width:{valType:"number",min:0,role:"style",editType:"style+colorbars",description:["Sets the contour line width in (in px)","Defaults to *0.5* when `contours.type` is *levels*.","Defaults to *2* when `contour.type` is *constraint*."].join(" ")},dash:i,smoothing:l({},p.smoothing,{description:["Sets the amount of smoothing for the contour lines,","where *0* corresponds to no smoothing."].join(" ")}),editType:"plot"}},o("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},590:function(e,t,n){"use strict";e.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},610:function(e,t,n){"use strict";var r=n(379),a=n(378).isArrayOrTypedArray;e.exports=function(e,t,n,o,i,s){var l,c,u,h=[],f=r.traceIs(e,"contour"),p=r.traceIs(e,"histogram"),d=r.traceIs(e,"gl2d");if(a(t)&&t.length>1&&!p&&"category"!==s.type){var v=t.length;if(!(v<=i))return f?t.slice(0,i):t.slice(0,i+1);if(f||d)h=t.slice(0,i);else if(1===i)h=[t[0]-.5,t[0]+.5];else{for(h=[1.5*t[0]-.5*t[1]],u=1;u<v;u++)h.push(.5*(t[u-1]+t[u]));h.push(1.5*t[v-1]-.5*t[v-2])}if(v<i){var g=h[h.length-1],y=g-h[h.length-2];for(u=v;u<i;u++)g+=y,h.push(g)}}else{var m=e[s._id.charAt(0)+"calendar"];if(p)l=s.r2c(n,0,m);else if(a(t)&&1===t.length)l=t[0];else if(void 0===n)l=0;else{l=("log"===s.type?s.d2c:s.r2c)(n,0,m)}for(c=o||1,u=f||d?0:-.5;u<i;u++)h.push(l+c*u)}return h}},611:function(e,t,n){"use strict";var r=n(381),a=n(400),o=n(494);e.exports=function(e){var t=e.contours,n=t.start,i=o(t),s=t.size||1,l=Math.floor((i-n)/s)+1,c="lines"===t.coloring?0:1,u=a.extractOpts(e);isFinite(s)||(s=1,l=1);var h,f,p=u.reversescale?a.flipScale(u.colorscale):u.colorscale,d=p.length,v=new Array(d),g=new Array(d);if("heatmap"===t.coloring){var y=u.min,m=u.max;for(f=0;f<d;f++)h=p[f],v[f]=h[0]*(m-y)+y,g[f]=h[1];var x=r.extent([y,m,t.start,t.start+s*(l-1)]),b=x[y<m?0:1],M=x[y<m?1:0];b!==y&&(v.splice(0,0,b),g.splice(0,0,g[0])),M!==m&&(v.push(M),g.push(g[g.length-1]))}else for(f=0;f<d;f++)h=p[f],v[f]=(h[0]*(l+c-1)-c/2)*s+n,g[f]=h[1];return a.makeColorScaleFunc({domain:v,range:g},{noNumericCheck:!0})}},676:function(e,t,n){"use strict";var r=n(383),a=n(378),o=n(379);function i(e,t){var n=t(e);return"scaled"===(n?t(e+"type","array"):"scaled")&&(t(e+"0"),t("d"+e)),n}e.exports=function(e,t,n,s,l,c){var u,h,f=n("z");if(l=l||"x",c=c||"y",void 0===f||!f.length)return 0;if(a.isArray1D(e.z)){u=n(l),h=n(c);var p=a.minRowLength(u),d=a.minRowLength(h);if(0===p||0===d)return 0;t._length=Math.min(p,d,f.length)}else{if(u=i(l,n),h=i(c,n),!function(e){for(var t,n=!0,o=!1,i=!1,s=0;s<e.length;s++){if(t=e[s],!a.isArrayOrTypedArray(t)){n=!1;break}t.length>0&&(o=!0);for(var l=0;l<t.length;l++)if(r(t[l])){i=!0;break}}return n&&o&&i}(f))return 0;n("transpose"),t._length=null}return o.getComponentMethod("calendars","handleTraceDefaults")(e,t,[l,c],s),!0}},677:function(e,t,n){"use strict";var r=n(378);e.exports=function(e,t,n,a){if(a||(a={}),e("contours.showlabels")){var o=t.font;r.coerceFont(e,"contours.labelfont",{family:o.family,size:o.size,color:n}),e("contours.labelformat")}!1!==a.hasHover&&e("zhoverformat")}},697:function(e,t,n){"use strict";var r=n(378),a=n(382),o=n(497),i=n(498),s=n(499),l=n(500),c=n(563).calcAllAutoBins;function u(e,t,n,r){var a,o=new Array(e);if(r)for(a=0;a<e;a++)o[a]=1/(t[a+1]-t[a]);else{var i=1/n;for(a=0;a<e;a++)o[a]=i}return o}function h(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function f(e,t,n,r,a,o){var i,s=e.length-1,c=new Array(s),u=l(n,r,e,a,o);for(i=0;i<s;i++){var h=(t||[])[i];c[i]=void 0===h?[u(e[i]),u(e[i+1],!0)]:[h,h]}return c}e.exports=function(e,t){var n,l,p,d,v=a.getFromId(e,t.xaxis),g=a.getFromId(e,t.yaxis),y=t.xcalendar,m=t.ycalendar,x=function(e){return v.r2c(e,0,y)},b=function(e){return g.r2c(e,0,m)},M=c(e,t,v,"x"),T=M[0],A=M[1],_=c(e,t,g,"y"),z=_[0],w=_[1],O=t._length;A.length>O&&A.splice(O,A.length-O),w.length>O&&w.splice(O,w.length-O);var k=[],L=[],S=[],E="string"==typeof T.size,I="string"==typeof z.size,N=[],D=[],C=E?N:T,F=I?D:z,R=0,B=[],j=[],P=t.histnorm,G=t.histfunc,H=-1!==P.indexOf("density"),V="max"===G||"min"===G?null:0,U=o.count,q=i[P],Z=!1,X=[],W=[],J="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";J&&"count"!==G&&(Z="avg"===G,U=o[G]);var K=T.size,Y=x(T.start),$=x(T.end)+(Y-a.tickIncrement(Y,K,!1,y))/1e6;for(n=Y;n<$;n=a.tickIncrement(n,K,!1,y))L.push(V),N.push(n),Z&&S.push(0);N.push(n);var Q,ee=L.length,te=(n-Y)/ee,ne=(Q=Y+te/2,v.c2r(Q,0,y)),re=z.size,ae=b(z.start),oe=b(z.end)+(ae-a.tickIncrement(ae,re,!1,m))/1e6;for(n=ae;n<oe;n=a.tickIncrement(n,re,!1,m)){k.push(L.slice()),D.push(n);var ie=new Array(ee);for(l=0;l<ee;l++)ie[l]=[];j.push(ie),Z&&B.push(S.slice())}D.push(n);var se=k.length,le=(n-ae)/se,ce=function(e){return g.c2r(e,0,m)}(ae+le/2);H&&(X=u(L.length,C,te,E),W=u(k.length,F,le,I)),E||"date"!==v.type||(C=h(x,C)),I||"date"!==g.type||(F=h(b,F));var ue=!0,he=!0,fe=new Array(ee),pe=new Array(se),de=1/0,ve=1/0,ge=1/0,ye=1/0;for(n=0;n<O;n++){var me=A[n],xe=w[n];p=r.findBin(me,C),d=r.findBin(xe,F),p>=0&&p<ee&&d>=0&&d<se&&(R+=U(p,n,k[d],J,B[d]),j[d][p].push(n),ue&&(void 0===fe[p]?fe[p]=me:fe[p]!==me&&(ue=!1)),he&&(void 0===pe[d]?pe[d]=xe:pe[d]!==xe&&(he=!1)),de=Math.min(de,me-N[p]),ve=Math.min(ve,N[p+1]-me),ge=Math.min(ge,xe-D[d]),ye=Math.min(ye,D[d+1]-xe))}if(Z)for(d=0;d<se;d++)R+=s(k[d],B[d]);if(q)for(d=0;d<se;d++)q(k[d],R,X,W[d]);return{x:A,xRanges:f(N,ue&&fe,de,ve,v,y),x0:ne,dx:te,y:w,yRanges:f(D,he&&pe,ge,ye,g,m),y0:ce,dy:le,z:k,pts:j}}},698:function(e,t,n){"use strict";var r=n(381),a=n(409),o=n(379),i=n(378),s=n(400).makeColorScaleFuncFromTrace,l=n(427);function c(e,t){var n=t.length-2,r=i.constrain(i.findBin(e,t),0,n),a=t[r],o=t[r+1],s=i.constrain(r+(e-a)/(o-a)-.5,0,n),l=Math.round(s),c=Math.abs(s-l);return s&&s!==n&&c?{bin0:l,frac:c,bin1:Math.round(l+c/(s-l))}:{bin0:l,bin1:l,frac:0}}function u(e,t){var n=t.length-1,r=i.constrain(i.findBin(e,t),0,n),a=t[r],o=(e-a)/(t[r+1]-a)||0;return o<=0?{bin0:r,bin1:r,frac:0}:o<.5?{bin0:r,bin1:r+1,frac:o}:{bin0:r+1,bin1:r,frac:1-o}}function h(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(255*n[3])}e.exports=function(e,t,n,f){var p=t.xaxis,d=t.yaxis;i.makeTraceGroups(f,n,"hm").each((function(t){var n,f,v,g,y,m,x=r.select(this),b=t[0],M=b.trace,T=b.z,A=b.x,_=b.y,z=b.xCenter,w=b.yCenter,O=o.traceIs(M,"contour"),k=O?"best":M.zsmooth,L=T.length,S=i.maxRowLength(T),E=!1,I=!1;for(m=0;void 0===n&&m<A.length-1;)n=p.c2p(A[m]),m++;for(m=A.length-1;void 0===f&&m>0;)f=p.c2p(A[m]),m--;for(f<n&&(v=f,f=n,n=v,E=!0),m=0;void 0===g&&m<_.length-1;)g=d.c2p(_[m]),m++;for(m=_.length-1;void 0===y&&m>0;)y=d.c2p(_[m]),m--;if(y<g&&(v=g,g=y,y=v,I=!0),O&&(z=A,w=_,A=b.xfill,_=b.yfill),"fast"!==k){var N="best"===k?0:.5;n=Math.max(-N*p._length,n),f=Math.min((1+N)*p._length,f),g=Math.max(-N*d._length,g),y=Math.min((1+N)*d._length,y)}var D=Math.round(f-n),C=Math.round(y-g);if(D<=0||C<=0){x.selectAll("image").data([]).exit().remove()}else{var F,R;"fast"===k?(F=S,R=L):(F=D,R=C);var B=document.createElement("canvas");B.width=F,B.height=R;var j,P,G=B.getContext("2d"),H=s(M,{noNumericCheck:!0,returnArray:!0});"fast"===k?(j=E?function(e){return S-1-e}:i.identity,P=I?function(e){return L-1-e}:i.identity):(j=function(e){return i.constrain(Math.round(p.c2p(A[e])-n),0,D)},P=function(e){return i.constrain(Math.round(d.c2p(_[e])-g),0,C)});var V,U,q,Z,X,W=P(0),J=[W,W],K=E?0:1,Y=I?0:1,$=0,Q=0,ee=0,te=0;if(k){var ne,re=0;try{ne=new Uint8Array(D*C*4)}catch(e){ne=new Array(D*C*4)}if("best"===k){var ae,oe,ie,se=z||A,le=w||_,ce=new Array(se.length),ue=new Array(le.length),he=new Array(D),fe=z?u:c,pe=w?u:c;for(m=0;m<se.length;m++)ce[m]=Math.round(p.c2p(se[m])-n);for(m=0;m<le.length;m++)ue[m]=Math.round(d.c2p(le[m])-g);for(m=0;m<D;m++)he[m]=fe(m,ce);for(U=0;U<C;U++)for(oe=T[(ae=pe(U,ue)).bin0],ie=T[ae.bin1],m=0;m<D;m++,re+=4)h(ne,re,X=_e(oe,ie,he[m],ae))}else for(U=0;U<L;U++)for(Z=T[U],J=P(U),m=0;m<D;m++)X=Ae(Z[m],1),h(ne,re=4*(J*D+j(m)),X);var de=G.createImageData(D,C);try{de.data.set(ne)}catch(e){var ve=de.data,ge=ve.length;for(U=0;U<ge;U++)ve[U]=ne[U]}G.putImageData(de,0,0)}else{var ye=M.xgap,me=M.ygap,xe=Math.floor(ye/2),be=Math.floor(me/2);for(U=0;U<L;U++)if(Z=T[U],J.reverse(),J[Y]=P(U+1),J[0]!==J[1]&&void 0!==J[0]&&void 0!==J[1])for(V=[q=j(0),q],m=0;m<S;m++)V.reverse(),V[K]=j(m+1),V[0]!==V[1]&&void 0!==V[0]&&void 0!==V[1]&&(X=Ae(Z[m],(V[1]-V[0])*(J[1]-J[0])),G.fillStyle="rgba("+X.join(",")+")",G.fillRect(V[0]+xe,J[0]+be,V[1]-V[0]-ye,J[1]-J[0]-me))}Q=Math.round(Q/$),ee=Math.round(ee/$),te=Math.round(te/$);var Me=a("rgb("+Q+","+ee+","+te+")");e._hmpixcount=(e._hmpixcount||0)+$,e._hmlumcount=(e._hmlumcount||0)+$*Me.getLuminance();var Te=x.selectAll("image").data(t);Te.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),Te.attr({height:C,width:D,x:n,y:g,"xlink:href":B.toDataURL("image/png")})}function Ae(e,t){if(void 0!==e){var n=H(e);return n[0]=Math.round(n[0]),n[1]=Math.round(n[1]),n[2]=Math.round(n[2]),$+=t,Q+=n[0]*t,ee+=n[1]*t,te+=n[2]*t,n}return[0,0,0,0]}function _e(e,t,n,r){var a=e[n.bin0];if(void 0===a)return Ae(void 0,1);var o,i=e[n.bin1],s=t[n.bin0],l=t[n.bin1],c=i-a||0,u=s-a||0;return o=void 0===i?void 0===l?0:void 0===s?2*(l-a):2*(2*l-s-a)/3:void 0===l?void 0===s?0:2*(2*a-i-s)/3:void 0===s?2*(2*l-i-a)/3:l+a-i-s,Ae(a+n.frac*c+r.frac*(u+n.frac*o))}}))}},699:function(e,t,n){"use strict";var r=n(381);e.exports=function(e){r.select(e).selectAll(".hm image").style("opacity",(function(e){return e.trace.opacity}))}},706:function(e,t,n){"use strict";e.exports=function(e,t,n,r){var a=r("contours.start"),o=r("contours.end"),i=!1===a||!1===o,s=n("contours.size");!(i?t.autocontour=!0:n("autocontour",!1))&&s||n("ncontours")}},707:function(e,t,n){"use strict";var r=n(401),a=n(677);e.exports=function(e,t,n,o,i){var s,l=n("contours.coloring"),c="";"fill"===l&&(s=n("contours.showlines")),!1!==s&&("lines"!==l&&(c=n("line.color","#000")),n("line.width",.5),n("line.dash")),"none"!==l&&(!0!==e.showlegend&&(t.showlegend=!1),t._dfltShowLegend=!1,r(e,t,o,n,{prefix:"",cLetter:"z"})),n("line.smoothing"),a(n,o,c,i)}},708:function(e,t,n){"use strict";var r=n(400),a=n(611),o=n(494);e.exports={min:"zmin",max:"zmax",calc:function(e,t,n){var i=t.contours,s=t.line,l=i.size||1,c=i.coloring,u=a(t,{isColorbar:!0});if("heatmap"===c){var h=r.extractOpts(t);n._fillgradient=h.reversescale?r.flipScale(h.colorscale):h.colorscale,n._zrange=[h.min,h.max]}else"fill"===c&&(n._fillcolor=u);n._line={color:"lines"===c?u:s.color,width:!1!==i.showlines?s.width:0,dash:s.dash},n._levels={start:i.start,end:o(i),size:l}}}},717:function(e,t,n){"use strict";var r=n(395),a=n(378),o=n(382),i=n(400).extractOpts;e.exports=function(e,t,n,s,l,c){var u,h,f,p,d=e.cd[0],v=d.trace,g=e.xa,y=e.ya,m=d.x,x=d.y,b=d.z,M=d.xCenter,T=d.yCenter,A=d.zmask,_=v.zhoverformat,z=m,w=x;if(!1!==e.index){try{f=Math.round(e.index[1]),p=Math.round(e.index[0])}catch(t){return void a.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(f<0||f>=b[0].length||p<0||p>b.length)return}else{if(r.inbox(t-m[0],t-m[m.length-1],0)>0||r.inbox(n-x[0],n-x[x.length-1],0)>0)return;if(c){var O;for(z=[2*m[0]-m[1]],O=1;O<m.length;O++)z.push((m[O]+m[O-1])/2);for(z.push([2*m[m.length-1]-m[m.length-2]]),w=[2*x[0]-x[1]],O=1;O<x.length;O++)w.push((x[O]+x[O-1])/2);w.push([2*x[x.length-1]-x[x.length-2]])}f=Math.max(0,Math.min(z.length-2,a.findBin(t,z))),p=Math.max(0,Math.min(w.length-2,a.findBin(n,w)))}var k=g.c2p(m[f]),L=g.c2p(m[f+1]),S=y.c2p(x[p]),E=y.c2p(x[p+1]);c?(L=k,u=m[f],E=S,h=x[p]):(u=M?M[f]:(m[f]+m[f+1])/2,h=T?T[p]:(x[p]+x[p+1])/2,g&&"category"===g.type&&(u=m[f]),y&&"category"===y.type&&(h=x[p]),v.zsmooth&&(k=L=g.c2p(u),S=E=y.c2p(h)));var I=b[p][f];if(A&&!A[p][f]&&(I=void 0),void 0!==I||v.hoverongaps){var N;Array.isArray(d.hovertext)&&Array.isArray(d.hovertext[p])?N=d.hovertext[p][f]:Array.isArray(d.text)&&Array.isArray(d.text[p])&&(N=d.text[p][f]);var D=i(v),C={type:"linear",range:[D.min,D.max],hoverformat:_,_separators:g._separators,_numFormat:g._numFormat},F=o.tickText(C,I,"hover").text;return[a.extendFlat(e,{index:v._after2before?v._after2before[p][f]:[p,f],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:k,x1:L,y0:S,y1:E,xLabelVal:u,yLabelVal:h,zLabelVal:I,zLabel:F,text:N})]}}},735:function(e,t,n){"use strict";var r=n(382),a=n(378);function o(e,t,n){var a={type:"linear",range:[e,t]};return r.autoTicks(a,(t-e)/(n||15)),a}e.exports=function(e,t){var n=e.contours;if(e.autocontour){var i=e.zmin,s=e.zmax;(e.zauto||void 0===i)&&(i=a.aggNums(Math.min,null,t)),(e.zauto||void 0===s)&&(s=a.aggNums(Math.max,null,t));var l=o(i,s,e.ncontours);n.size=l.dtick,n.start=r.tickFirst(l),l.range.reverse(),n.end=r.tickFirst(l),n.start===i&&(n.start+=n.size),n.end===s&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),e._input.contours||(e._input.contours={}),a.extendFlat(e._input.contours,{start:n.start,end:n.end,size:n.size}),e._input.autocontour=!0}else if("constraint"!==n.type){var c,u=n.start,h=n.end,f=e._input.contours;if(u>h&&(n.start=f.start=h,h=n.end=f.end=u,u=n.start),!(n.size>0))c=u===h?1:o(u,h,e.ncontours).dtick,f.size=n.size=c}}},836:function(e,t,n){"use strict";var r=n(400),a=n(562),o=n(735),i=n(494);e.exports=function(e,t){var n=a(e,t),s=n[0].z;o(t,s);var l,c=t.contours,u=r.extractOpts(t);if("heatmap"===c.coloring&&u.auto&&!1===t.autocontour){var h=c.start,f=i(c),p=c.size||1,d=Math.floor((f-h)/p)+1;isFinite(p)||(p=1,d=1);var v=h-p/2;l=[v,v+d*p]}else l=s;return r.calc(e,t,{vals:l,cLetter:"z"}),n}},852:function(e,t,n){"use strict";var r=n(383),a=n(677),o=n(380),i=o.addOpacity,s=o.opacity,l=n(615),c=l.CONSTRAINT_REDUCTION,u=l.COMPARISON_OPS2;e.exports=function(e,t,n,o,l,h){var f,p,d,v=t.contours,g=n("contours.operation");(v._operation=c[g],function(e,t){var n;-1===u.indexOf(t.operation)?(e("contours.value",[0,1]),Array.isArray(t.value)?t.value.length>2?t.value=t.value.slice(2):0===t.length?t.value=[0,1]:t.length<2?(n=parseFloat(t.value[0]),t.value=[n,n+1]):t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]:r(t.value)&&(n=parseFloat(t.value),t.value=[n,n+1])):(e("contours.value",0),r(t.value)||(Array.isArray(t.value)?t.value=parseFloat(t.value[0]):t.value=0))}(n,v),"="===g?f=v.showlines=!0:(f=n("contours.showlines"),d=n("fillcolor",i((e.line||{}).color||l,.5))),f)&&(p=n("line.color",d&&s(d)?i(t.fillcolor,1):l),n("line.width",2),n("line.dash"));n("line.smoothing"),a(n,o,p,h)}},853:function(e,t,n){"use strict";var r=n(381),a=n(378),o=n(384),i=n(400),s=n(391),l=n(382),c=n(521),u=n(698),h=n(884),f=n(885),p=n(886),d=n(887),v=n(888),g=n(590),y=g.LABELOPTIMIZER;function m(e,t){var n,r,i,s,l,c,u,h="",f=0,p=e.edgepaths.map((function(e,t){return t})),d=!0;function v(e){return Math.abs(e[1]-t[2][1])<.01}function g(e){return Math.abs(e[0]-t[0][0])<.01}function y(e){return Math.abs(e[0]-t[2][0])<.01}for(;p.length;){for(c=o.smoothopen(e.edgepaths[f],e.smoothing),h+=d?c:c.replace(/^M/,"L"),p.splice(p.indexOf(f),1),n=e.edgepaths[f][e.edgepaths[f].length-1],s=-1,i=0;i<4;i++){if(!n){a.log("Missing end?",f,e);break}for(u=n,Math.abs(u[1]-t[0][1])<.01&&!y(n)?r=t[1]:g(n)?r=t[0]:v(n)?r=t[3]:y(n)&&(r=t[2]),l=0;l<e.edgepaths.length;l++){var m=e.edgepaths[l][0];Math.abs(n[0]-r[0])<.01?Math.abs(n[0]-m[0])<.01&&(m[1]-n[1])*(r[1]-m[1])>=0&&(r=m,s=l):Math.abs(n[1]-r[1])<.01?Math.abs(n[1]-m[1])<.01&&(m[0]-n[0])*(r[0]-m[0])>=0&&(r=m,s=l):a.log("endpt to newendpt is not vert. or horz.",n,r,m)}if(n=r,s>=0)break;h+="L"+r}if(s===e.edgepaths.length){a.log("unclosed perimeter path");break}f=s,(d=-1===p.indexOf(f))&&(f=p[0],h+="Z")}for(f=0;f<e.paths.length;f++)h+=o.smoothclosed(e.paths[f],e.smoothing);return h}function x(e,t,n,r){var o=t.width/2,i=t.height/2,s=e.x,l=e.y,c=e.theta,u=Math.cos(c)*o,h=Math.sin(c)*o,f=(s>r.center?r.right-s:s-r.left)/(u+Math.abs(Math.sin(c)*i)),p=(l>r.middle?r.bottom-l:l-r.top)/(Math.abs(h)+Math.cos(c)*i);if(f<1||p<1)return 1/0;var d=y.EDGECOST*(1/(f-1)+1/(p-1));d+=y.ANGLECOST*c*c;for(var v=s-u,g=l-h,m=s+u,x=l+h,b=0;b<n.length;b++){var M=n[b],T=Math.cos(M.theta)*M.width/2,A=Math.sin(M.theta)*M.width/2,_=2*a.segmentDistance(v,g,m,x,M.x-T,M.y-A,M.x+T,M.y+A)/(t.height+M.height),z=M.level===t.level,w=z?y.SAMELEVELDISTANCE:1;if(_<=w)return 1/0;d+=y.NEIGHBORCOST*(z?y.SAMELEVELFACTOR:1)/(_-w)}return d}function b(e){var t,n,r=e.trace._emptypoints,a=[],o=e.z.length,i=e.z[0].length,s=[];for(t=0;t<i;t++)s.push(1);for(t=0;t<o;t++)a.push(s.slice());for(t=0;t<r.length;t++)a[(n=r[t])[0]][n[1]]=0;return e.zmask=a,a}t.plot=function(e,n,i,s){var l=n.xaxis,c=n.yaxis;a.makeTraceGroups(s,i,"contour").each((function(i){var s=r.select(this),y=i[0],x=y.trace,M=y.x,T=y.y,A=x.contours,_=p(A,n,y),z=a.ensureSingle(s,"g","heatmapcoloring"),w=[];"heatmap"===A.coloring&&(w=[i]),u(e,n,w,z),h(_),f(_);var O=l.c2p(M[0],!0),k=l.c2p(M[M.length-1],!0),L=c.c2p(T[0],!0),S=c.c2p(T[T.length-1],!0),E=[[O,S],[k,S],[k,L],[O,L]],I=_;"constraint"===A.type&&(I=d(_,A._operation)),function(e,t,n){var r=a.ensureSingle(e,"g","contourbg").selectAll("path").data("fill"===n.coloring?[0]:[]);r.enter().append("path"),r.exit().remove(),r.attr("d","M"+t.join("L")+"Z").style("stroke","none")}(s,E,A),function(e,t,n,o){var i="fill"===o.coloring||"constraint"===o.type&&"="!==o._operation,s="M"+n.join("L")+"Z";i&&v(t,o);var l=a.ensureSingle(e,"g","contourfill").selectAll("path").data(i?t:[]);l.enter().append("path"),l.exit().remove(),l.each((function(e){var t=(e.prefixBoundary?s:"")+m(e,n);t?r.select(this).attr("d",t).style("stroke","none"):r.select(this).remove()}))}(s,I,E,A),function(e,n,i,s,l){var c=a.ensureSingle(e,"g","contourlines"),u=!1!==l.showlines,h=l.showlabels,f=u&&h,p=t.createLines(c,u||h,n),d=t.createLineClip(c,f,i,s.trace.uid),v=e.selectAll("g.contourlabels").data(h?[0]:[]);if(v.exit().remove(),v.enter().append("g").classed("contourlabels",!0),h){var y=[],m=[];a.clearLocationCache();var x=t.labelFormatter(i,s),b=o.tester.append("text").attr("data-notex",1).call(o.font,l.labelfont),M=n[0].xaxis,T=n[0].yaxis,A=M._length,_=T._length,z=M.range,w=T.range,O=a.aggNums(Math.min,null,s.x),k=a.aggNums(Math.max,null,s.x),L=a.aggNums(Math.min,null,s.y),S=a.aggNums(Math.max,null,s.y),E=Math.max(M.c2p(O,!0),0),I=Math.min(M.c2p(k,!0),A),N=Math.max(T.c2p(S,!0),0),D=Math.min(T.c2p(L,!0),_),C={};z[0]<z[1]?(C.left=E,C.right=I):(C.left=I,C.right=E),w[0]<w[1]?(C.top=N,C.bottom=D):(C.top=D,C.bottom=N),C.middle=(C.top+C.bottom)/2,C.center=(C.left+C.right)/2,y.push([[C.left,C.top],[C.right,C.top],[C.right,C.bottom],[C.left,C.bottom]]);var F=Math.sqrt(A*A+_*_),R=g.LABELDISTANCE*F/Math.max(1,n.length/g.LABELINCREASE);p.each((function(e){var n=t.calcTextOpts(e.level,x,b,i);r.select(this).selectAll("path").each((function(){var e=a.getVisibleSegment(this,C,n.height/2);if(e&&!(e.len<(n.width+n.height)*g.LABELMIN))for(var r=Math.min(Math.ceil(e.len/R),g.LABELMAX),o=0;o<r;o++){var i=t.findBestTextLocation(this,e,n,m,C);if(!i)break;t.addLabelData(i,n,m,y)}}))})),b.remove(),t.drawLabels(v,m,i,d,f?y:null)}h&&!u&&p.remove()}(s,_,e,y,A),function(e,t,n,r,i){var s=r.trace,l=n._fullLayout._clips,c="clip"+s.uid,u=l.selectAll("#"+c).data(s.connectgaps?[]:[0]);if(u.enter().append("clipPath").classed("contourclip",!0).attr("id",c),u.exit().remove(),!1===s.connectgaps){var p={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:r.x,y:r.y,z:b(r),smoothing:0};h([p]),f([p]),v([p],{type:"levels"}),a.ensureSingle(u,"path","").attr("d",(p.prefixBoundary?"M"+i.join("L")+"Z":"")+m(p,i))}else c=null;o.setClipUrl(e,c,n)}(s,n,e,y,E)}))},t.createLines=function(e,t,n){var r=n[0].smoothing,a=e.selectAll("g.contourlevel").data(t?n:[]);if(a.exit().remove(),a.enter().append("g").classed("contourlevel",!0),t){var i=a.selectAll("path.openline").data((function(e){return e.pedgepaths||e.edgepaths}));i.exit().remove(),i.enter().append("path").classed("openline",!0),i.attr("d",(function(e){return o.smoothopen(e,r)})).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var s=a.selectAll("path.closedline").data((function(e){return e.ppaths||e.paths}));s.exit().remove(),s.enter().append("path").classed("closedline",!0),s.attr("d",(function(e){return o.smoothclosed(e,r)})).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return a},t.createLineClip=function(e,t,n,r){var a=t?"clipline"+r:null,i=n._fullLayout._clips.selectAll("#"+a).data(t?[0]:[]);return i.exit().remove(),i.enter().append("clipPath").classed("contourlineclip",!0).attr("id",a),o.setClipUrl(e,a,n),i},t.labelFormatter=function(e,t){var n=e._fullLayout,r=t.trace,a=r.contours,o={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(a.labelformat)o.tickformat=a.labelformat,c(o,n);else{var s=i.extractOpts(r);if(s&&s.colorbar&&s.colorbar._axis)o=s.colorbar._axis;else{if("constraint"===a.type){var u=a.value;Array.isArray(u)?o.range=[u[0],u[u.length-1]]:o.range=[u,u]}else o.range=[a.start,a.end],o.nticks=(a.end-a.start)/a.size;o.range[0]===o.range[1]&&(o.range[1]+=o.range[0]||1),o.nticks||(o.nticks=1e3),c(o,n),l.prepTicks(o),o._tmin=null,o._tmax=null}}return function(e){return l.tickText(o,e).text}},t.calcTextOpts=function(e,t,n,r){var a=t(e);n.text(a).call(s.convertToTspans,r);var i=n.node(),l=o.bBox(i,!0);return{text:a,width:l.width,height:l.height,fontSize:+i.style["font-size"].replace("px",""),level:e,dy:(l.top+l.bottom)/2}},t.findBestTextLocation=function(e,t,n,r,o){var i,s,l,c,u,h=n.width;t.isClosed?(s=t.len/y.INITIALSEARCHPOINTS,i=t.min+s/2,l=t.max):(s=(t.len-h)/(y.INITIALSEARCHPOINTS+1),i=t.min+s+h/2,l=t.max-(s+h)/2);for(var f=1/0,p=0;p<y.ITERATIONS;p++){for(var d=i;d<l;d+=s){var v=a.getTextLocation(e,t.total,d,h),g=x(v,n,r,o);g<f&&(f=g,u=v,c=d)}if(f>2*y.MAXCOST)break;p&&(s/=2),l=(i=c-s/2)+1.5*s}if(f<=y.MAXCOST)return u},t.addLabelData=function(e,t,n,r){var a=t.fontSize,o=t.width+a/3,i=Math.max(0,t.height-a/3),s=e.x,l=e.y,c=e.theta,u=Math.sin(c),h=Math.cos(c),f=function(e,t){return[s+e*h-t*u,l+e*u+t*h]},p=[f(-o/2,-i/2),f(-o/2,i/2),f(o/2,i/2),f(o/2,-i/2)];n.push({text:t.text,x:s,y:l,dy:t.dy,theta:c,level:t.level,width:o,height:i}),r.push(p)},t.drawLabels=function(e,t,n,o,i){var l=e.selectAll("text").data(t,(function(e){return e.text+","+e.x+","+e.y+","+e.theta}));if(l.exit().remove(),l.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each((function(e){var t=e.x+Math.sin(e.theta)*e.dy,a=e.y-Math.cos(e.theta)*e.dy;r.select(this).text(e.text).attr({x:t,y:a,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+a+")"}).call(s.convertToTspans,n)})),i){for(var c="",u=0;u<i.length;u++)c+="M"+i[u].join("L")+"Z";a.ensureSingle(o,"path","").attr("d",c)}}},854:function(e,t,n){"use strict";var r=n(381),a=n(384),o=n(699),i=n(611);e.exports=function(e){var t=r.select(e).selectAll("g.contour");t.style("opacity",(function(e){return e[0].trace.opacity})),t.each((function(e){var t=r.select(this),n=e[0].trace,o=n.contours,s=n.line,l=o.size||1,c=o.start,u="constraint"===o.type,h=!u&&"lines"===o.coloring,f=!u&&"fill"===o.coloring,p=h||f?i(n):null;t.selectAll("g.contourlevel").each((function(e){r.select(this).selectAll("path").call(a.lineGroupStyle,s.width,h?p(e.level):s.color,s.dash)}));var d=o.labelfont;if(t.selectAll("g.contourlabels text").each((function(e){a.font(r.select(this),{family:d.family,size:d.size,color:d.color||(h?p(e.level):s.color)})})),u)t.selectAll("g.contourfill path").style("fill",n.fillcolor);else if(f){var v;t.selectAll("g.contourfill path").style("fill",(function(e){return void 0===v&&(v=e.level),p(e.level+.5*l)})),void 0===v&&(v=c),t.selectAll("g.contourbg path").style("fill",p(v-.5*l))}})),o(e)}},884:function(e,t,n){"use strict";var r=n(590);function a(e,t){var n=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);return 5===n||10===n?e>(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4?5===n?713:1114:5===n?104:208:15===n?0:n}e.exports=function(e){var t,n,o,i,s,l,c,u,h,f=e[0].z,p=f.length,d=f[0].length,v=2===p||2===d;for(n=0;n<p-1;n++)for(i=[],0===n&&(i=i.concat(r.BOTTOMSTART)),n===p-2&&(i=i.concat(r.TOPSTART)),t=0;t<d-1;t++)for(o=i.slice(),0===t&&(o=o.concat(r.LEFTSTART)),t===d-2&&(o=o.concat(r.RIGHTSTART)),s=t+","+n,l=[[f[n][t],f[n][t+1]],[f[n+1][t],f[n+1][t+1]]],h=0;h<e.length;h++)(c=a((u=e[h]).level,l))&&(u.crossings[s]=c,-1!==o.indexOf(c)&&(u.starts.push([t,n]),v&&-1!==o.indexOf(c,o.indexOf(c)+1)&&u.starts.push([t,n])))}},885:function(e,t,n){"use strict";var r=n(378),a=n(590);function o(e,t,n,r){return Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<r}function i(e,t,n,i,l){var c,u=t.join(","),h=e.crossings[u],f=function(e,t,n){var r=0,o=0;e>20&&t?208===e||1114===e?r=0===n[0]?1:-1:o=0===n[1]?1:-1:-1!==a.BOTTOMSTART.indexOf(e)?o=1:-1!==a.LEFTSTART.indexOf(e)?r=1:-1!==a.TOPSTART.indexOf(e)?o=-1:r=-1;return[r,o]}(h,n,t),p=[s(e,t,[-f[0],-f[1]])],d=e.z.length,v=e.z[0].length,g=t.slice(),y=f.slice();for(c=0;c<1e4;c++){if(h>20?(h=a.CHOOSESADDLE[h][(f[0]||f[1])<0?0:1],e.crossings[u]=a.SADDLEREMAINDER[h]):delete e.crossings[u],!(f=a.NEWDELTA[h])){r.log("Found bad marching index:",h,t,e.level);break}p.push(s(e,t,f)),t[0]+=f[0],t[1]+=f[1],u=t.join(","),o(p[p.length-1],p[p.length-2],i,l)&&p.pop();var m=f[0]&&(t[0]<0||t[0]>v-2)||f[1]&&(t[1]<0||t[1]>d-2);if(t[0]===g[0]&&t[1]===g[1]&&f[0]===y[0]&&f[1]===y[1]||n&&m)break;h=e.crossings[u]}1e4===c&&r.log("Infinite loop in contour?");var x,b,M,T,A,_,z,w,O,k,L,S,E,I,N,D=o(p[0],p[p.length-1],i,l),C=0,F=.2*e.smoothing,R=[],B=0;for(c=1;c<p.length;c++)S=p[c],E=p[c-1],I=void 0,N=void 0,I=S[2]-E[2],N=S[3]-E[3],C+=z=Math.sqrt(I*I+N*N),R.push(z);var j=C/R.length*F;function P(e){return p[e%p.length]}for(c=p.length-2;c>=B;c--)if((x=R[c])<j){for(M=0,b=c-1;b>=B&&x+R[b]<j;b--)x+=R[b];if(D&&c===p.length-2)for(M=0;M<b&&x+R[M]<j;M++)x+=R[M];A=c-b+M+1,_=Math.floor((c+b+M+2)/2),T=D||c!==p.length-2?D||-1!==b?A%2?P(_):[(P(_)[0]+P(_+1)[0])/2,(P(_)[1]+P(_+1)[1])/2]:p[0]:p[p.length-1],p.splice(b+1,c-b+1,T),c=b+1,M&&(B=M),D&&(c===p.length-2?p[M]=p[p.length-1]:0===c&&(p[p.length-1]=p[0]))}for(p.splice(0,B),c=0;c<p.length;c++)p[c].length=2;if(!(p.length<2))if(D)p.pop(),e.paths.push(p);else{n||r.log("Unclosed interior contour?",e.level,g.join(","),p.join("L"));var G=!1;for(w=0;w<e.edgepaths.length;w++)if(k=e.edgepaths[w],!G&&o(k[0],p[p.length-1],i,l)){p.pop(),G=!0;var H=!1;for(O=0;O<e.edgepaths.length;O++)if(o((L=e.edgepaths[O])[L.length-1],p[0],i,l)){H=!0,p.shift(),e.edgepaths.splice(w,1),O===w?e.paths.push(p.concat(L)):(O>w&&O--,e.edgepaths[O]=L.concat(p,k));break}H||(e.edgepaths[w]=p.concat(k))}for(w=0;w<e.edgepaths.length&&!G;w++)o((k=e.edgepaths[w])[k.length-1],p[0],i,l)&&(p.shift(),e.edgepaths[w]=k.concat(p),G=!0);G||e.edgepaths.push(p)}}function s(e,t,n){var r=t[0]+Math.max(n[0],0),a=t[1]+Math.max(n[1],0),o=e.z[a][r],i=e.xaxis,s=e.yaxis;if(n[1]){var l=(e.level-o)/(e.z[a][r+1]-o);return[i.c2p((1-l)*e.x[r]+l*e.x[r+1],!0),s.c2p(e.y[a],!0),r+l,a]}var c=(e.level-o)/(e.z[a+1][r]-o);return[i.c2p(e.x[r],!0),s.c2p((1-c)*e.y[a]+c*e.y[a+1],!0),r,a+c]}e.exports=function(e,t,n){var a,o,s,l;for(t=t||.01,n=n||.01,o=0;o<e.length;o++){for(s=e[o],l=0;l<s.starts.length;l++)i(s,s.starts[l],"edge",t,n);for(a=0;Object.keys(s.crossings).length&&a<1e4;)a++,i(s,Object.keys(s.crossings)[0].split(",").map(Number),void 0,t,n);1e4===a&&r.log("Infinite loop in contour?")}}},886:function(e,t,n){"use strict";var r=n(378),a=n(932),o=n(494);e.exports=function(e,t,n){for(var i="constraint"===e.type?a[e._operation](e.value):e,s=i.size,l=[],c=o(i),u=n.trace._carpetTrace,h=u?{xaxis:u.aaxis,yaxis:u.baxis,x:n.a,y:n.b}:{xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y},f=i.start;f<c;f+=s)if(l.push(r.extendFlat({level:f,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},h)),l.length>1e3){r.warn("Too many contours, clipping at 1000",e);break}return l}},887:function(e,t,n){"use strict";var r=n(378);function a(e){return r.extendFlat({},e,{edgepaths:r.extendDeep([],e.edgepaths),paths:r.extendDeep([],e.paths),starts:r.extendDeep([],e.starts)})}e.exports=function(e,t){var n,o,i,s=function(e){return e.reverse()},l=function(e){return e};switch(t){case"=":case"<":return e;case">":for(1!==e.length&&r.warn("Contour data invalid for the specified inequality operation."),o=e[0],n=0;n<o.edgepaths.length;n++)o.edgepaths[n]=s(o.edgepaths[n]);for(n=0;n<o.paths.length;n++)o.paths[n]=s(o.paths[n]);for(n=0;n<o.starts.length;n++)o.starts[n]=s(o.starts[n]);return e;case"][":var c=s;s=l,l=c;case"[]":for(2!==e.length&&r.warn("Contour data invalid for the specified inequality range operation."),o=a(e[0]),i=a(e[1]),n=0;n<o.edgepaths.length;n++)o.edgepaths[n]=s(o.edgepaths[n]);for(n=0;n<o.paths.length;n++)o.paths[n]=s(o.paths[n]);for(n=0;n<o.starts.length;n++)o.starts[n]=s(o.starts[n]);for(;i.edgepaths.length;)o.edgepaths.push(l(i.edgepaths.shift()));for(;i.paths.length;)o.paths.push(l(i.paths.shift()));for(;i.starts.length;)o.starts.push(l(i.starts.shift()));return[o]}}},888:function(e,t,n){"use strict";e.exports=function(e,t){var n,r=e[0],a=r.z;switch(t.type){case"levels":var o=Math.min(a[0][0],a[0][1]);for(n=0;n<e.length;n++){var i=e[n];i.prefixBoundary=!i.edgepaths.length&&(o>i.level||i.starts.length&&o===i.level)}break;case"constraint":if(r.prefixBoundary=!1,r.edgepaths.length)return;var s=r.x.length,l=r.y.length,c=-1/0,u=1/0;for(n=0;n<l;n++)u=Math.min(u,a[n][0]),u=Math.min(u,a[n][s-1]),c=Math.max(c,a[n][0]),c=Math.max(c,a[n][s-1]);for(n=1;n<s-1;n++)u=Math.min(u,a[0][n]),u=Math.min(u,a[l-1][n]),c=Math.max(c,a[0][n]),c=Math.max(c,a[l-1][n]);var h,f,p=t.value;switch(t._operation){case">":p>c&&(r.prefixBoundary=!0);break;case"<":(p<u||r.starts.length&&p===u)&&(r.prefixBoundary=!0);break;case"[]":h=Math.min(p[0],p[1]),((f=Math.max(p[0],p[1]))<u||h>c||r.starts.length&&f===u)&&(r.prefixBoundary=!0);break;case"][":h=Math.min(p[0],p[1]),f=Math.max(p[0],p[1]),h<u&&f>c&&(r.prefixBoundary=!0)}}}},931:function(e,t,n){"use strict";var r=n(378),a=n(676),o=n(852),i=n(706),s=n(707),l=n(589);e.exports=function(e,t,n,c){function u(n,a){return r.coerce(e,t,l,n,a)}if(a(e,t,u,c)){u("text"),u("hovertext"),u("hovertemplate"),u("hoverongaps");var h="constraint"===u("contours.type");u("connectgaps",r.isArray1D(t.z)),h?o(e,t,u,c,n):(i(e,t,u,(function(n){return r.coerce2(e,t,l,n)})),s(e,t,u,c))}else t.visible=!1}},932:function(e,t,n){"use strict";var r=n(615),a=n(383);function o(e,t){var n,o=Array.isArray(t);function i(e){return a(e)?+e:null}return-1!==r.COMPARISON_OPS2.indexOf(e)?n=i(o?t[0]:t):-1!==r.INTERVAL_OPS.indexOf(e)?n=o?[i(t[0]),i(t[1])]:[i(t),i(t)]:-1!==r.SET_OPS.indexOf(e)&&(n=o?t.map(i):[i(t)]),n}function i(e){return function(t){t=o(e,t);var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return{start:n,end:r,size:r-n}}}function s(e){return function(t){return{start:t=o(e,t),end:1/0,size:1/0}}}e.exports={"[]":i("[]"),"][":i("]["),">":s(">"),"<":s("<"),"=":s("=")}},933:function(e,t,n){"use strict";var r=n(380),a=n(717);e.exports=function(e,t,n,o,i){var s=a(e,t,n,o,i,!0);return s&&s.forEach((function(e){var t=e.trace;"constraint"===t.contours.type&&(t.fillcolor&&r.opacity(t.fillcolor)?e.color=r.addOpacity(t.fillcolor,1):t.contours.showlines&&r.opacity(t.line.color)&&(e.color=r.addOpacity(t.line.color,1)))})),s}}}]);