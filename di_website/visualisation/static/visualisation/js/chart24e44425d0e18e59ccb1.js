(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{1173:function(e,t,r){"use strict";e.exports=r(1487)},1487:function(e,t,r){"use strict";e.exports={attributes:r(856),supplyDefaults:r(1488),colorbar:r(416),formatLabels:r(946),calc:r(913),plot:r(1489),hoverPoints:r(947),eventData:r(1491),selectPoints:r(1492),styleOnSelect:function(e,t){t&&t[0].trace._glTrace.update(t)},moduleType:"trace",name:"scattermapbox",basePlotModule:r(878),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_mapbox",description:["The data visualized as scatter point, lines or marker symbols","on a Mapbox GL geographic map","is provided by longitude/latitude pairs in `lon` and `lat`."].join(" ")}}},1488:function(e,t,r){"use strict";var o=r(378),a=r(387),i=r(429),l=r(433),n=r(434),s=r(440),c=r(856);e.exports=function(e,t,r,p){function m(r,a){return o.coerce(e,t,c,r,a)}if(function(e,t,r){var o=r("lon")||[],a=r("lat")||[],i=Math.min(o.length,a.length);return t._length=i,i}(0,t,m)){if(m("text"),m("texttemplate"),m("hovertext"),m("hovertemplate"),m("mode"),m("below"),a.hasLines(t)&&(l(e,t,r,p,m,{noDash:!0}),m("connectgaps")),a.hasMarkers(t)){i(e,t,r,p,m,{noLine:!0}),m("marker.allowoverlap"),m("marker.angle");var u=t.marker;"circle"!==u.symbol&&(o.isArrayOrTypedArray(u.size)&&(u.size=u.size[0]),o.isArrayOrTypedArray(u.color)&&(u.color=u.color[0]))}a.hasText(t)&&n(e,t,p,m,{noSelect:!0}),m("fill"),"none"!==t.fill&&s(e,t,r,m),o.coerceSelectionMarkerOpacity(t,m)}else t.visible=!1}},1489:function(e,t,r){"use strict";var o=r(1490),a=r(556).traceLayerPrefix,i=["fill","line","circle","symbol"];function l(e,t){this.type="scattermapbox",this.subplot=e,this.uid=t,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol"},this.layerIds={fill:a+t+"-fill",line:a+t+"-line",circle:a+t+"-circle",symbol:a+t+"-symbol"},this.below=null}var n=l.prototype;n.addSource=function(e,t){this.subplot.map.addSource(this.sourceIds[e],{type:"geojson",data:t.geojson})},n.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)},n.addLayer=function(e,t,r){this.subplot.addLayer({type:e,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint},r)},n.update=function(e){var t,r,a,l=this.subplot,n=l.map,s=o(l.gd,e),c=l.belowLookup["trace-"+this.uid];if(c!==this.below){for(t=i.length-1;t>=0;t--)r=i[t],n.removeLayer(this.layerIds[r]);for(t=0;t<i.length;t++)a=s[r=i[t]],this.addLayer(r,a,c);this.below=c}for(t=0;t<i.length;t++)a=s[r=i[t]],l.setOptions(this.layerIds[r],"setLayoutProperty",a.layout),"visible"===a.layout.visibility&&(this.setSourceData(r,a),l.setOptions(this.layerIds[r],"setPaintProperty",a.paint));e[0].trace._glTrace=this},n.dispose=function(){for(var e=this.subplot.map,t=i.length-1;t>=0;t--){var r=i[t];e.removeLayer(this.layerIds[r]),e.removeSource(this.sourceIds[r])}},e.exports=function(e,t){for(var r=t[0].trace,a=new l(e,r.uid),n=o(e.gd,t),s=a.below=e.belowLookup["trace-"+r.uid],c=0;c<i.length;c++){var p=i[c],m=n[p];a.addSource(p,m),a.addLayer(p,m,s)}return t[0].trace._glTrace=a,a}},1490:function(e,t,r){"use strict";var o=r(383),a=r(378),i=r(388).BADNUM,l=r(703),n=r(400),s=r(384),c=r(845),p=r(387),m=r(1032),u=r(471).appendArrayPointValue,y=r(391).NEWLINES,d=r(391).BR_TAG_ALL;function f(){return{geojson:l.makeBlank(),layout:{visibility:"none"},paint:{}}}function h(e,t){return a.isArrayOrTypedArray(e)?t?function(t){return o(e[t])?+e[t]:0}:function(t){return e[t]}:e?function(){return e}:v}function v(){return""}function x(e){return e[0]===i}e.exports=function(e,t){var r,i=t[0].trace,g=!0===i.visible&&0!==i._length,b="none"!==i.fill,k=p.hasLines(i),A=p.hasMarkers(i),w=p.hasText(i),L=A&&"circle"===i.marker.symbol,z=A&&"circle"!==i.marker.symbol,T=f(),F=f(),S=f(),O=f(),j={fill:T,line:F,circle:S,symbol:O};if(!g)return j;if((b||k)&&(r=l.calcTraceToLineCoords(t)),b&&(T.geojson=l.makePolygon(r),T.layout.visibility="visible",a.extendFlat(T.paint,{"fill-color":i.fillcolor})),k&&(F.geojson=l.makeLine(r),F.layout.visibility="visible",a.extendFlat(F.paint,{"line-width":i.line.width,"line-color":i.line.color,"line-opacity":i.opacity})),L){var I=function(e){var t,r,i,l,p=e[0].trace,m=p.marker,u=p.selectedpoints,y=a.isArrayOrTypedArray(m.color),d=a.isArrayOrTypedArray(m.size),f=a.isArrayOrTypedArray(m.opacity);function h(e){return p.opacity*e}y&&(r=n.hasColorscale(p,"marker")?n.makeColorScaleFuncFromTrace(m):a.identity);d&&(i=c(p));f&&(l=function(e){return h(o(e)?+a.constrain(e,0,1):0)});var v,g=[];for(t=0;t<e.length;t++){var b=e[t],k=b.lonlat;if(!x(k)){var A={};r&&(A.mcc=b.mcc=r(b.mc)),i&&(A.mrc=b.mrc=i(b.ms)),l&&(A.mo=l(b.mo)),u&&(A.selected=b.selected||0),g.push({type:"Feature",geometry:{type:"Point",coordinates:k},properties:A})}}if(u)for(v=s.makeSelectedPointStyleFns(p),t=0;t<g.length;t++){var w=g[t].properties;v.selectedOpacityFn&&(w.mo=h(v.selectedOpacityFn(w))),v.selectedColorFn&&(w.mcc=v.selectedColorFn(w)),v.selectedSizeFn&&(w.mrc=v.selectedSizeFn(w))}return{geojson:{type:"FeatureCollection",features:g},mcc:y||v&&v.selectedColorFn?{type:"identity",property:"mcc"}:m.color,mrc:d||v&&v.selectedSizeFn?{type:"identity",property:"mrc"}:(L=m.size,L/2),mo:f||v&&v.selectedOpacityFn?{type:"identity",property:"mo"}:h(m.opacity)};var L}(t);S.geojson=I.geojson,S.layout.visibility="visible",a.extendFlat(S.paint,{"circle-color":I.mcc,"circle-radius":I.mrc,"circle-opacity":I.mo})}if((z||w)&&(O.geojson=function(e,t){for(var r=t._fullLayout,o=e[0].trace,i=o.marker||{},l=i.symbol,n=i.angle,s="circle"!==l?h(l):v,c="auto"!==n?h(n,!0):v,m=p.hasText(o)?h(o.text):v,f=[],g=0;g<e.length;g++){var b=e[g];if(!x(b.lonlat)){var k,A=o.texttemplate;if(A){var w=Array.isArray(A)?A[g]||"":A,L=o._module.formatLabels(b,o,r),z={};u(z,o,b.i);var T=o._meta||{};k=a.texttemplateString(w,L,r._d3locale,z,b,T)}else k=m(g);k&&(k=k.replace(y,"").replace(d,"\n")),f.push({type:"Feature",geometry:{type:"Point",coordinates:b.lonlat},properties:{symbol:s(g),angle:c(g),text:k}})}}return{type:"FeatureCollection",features:f}}(t,e),a.extendFlat(O.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),z&&(a.extendFlat(O.layout,{"icon-size":i.marker.size/10}),"angle"in i.marker&&"auto"!==i.marker.angle&&a.extendFlat(O.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),O.layout["icon-allow-overlap"]=i.marker.allowoverlap,a.extendFlat(O.paint,{"icon-opacity":i.opacity*i.marker.opacity,"icon-color":i.marker.color})),w)){var M=(i.marker||{}).size,_=m(i.textposition,M);a.extendFlat(O.layout,{"text-size":i.textfont.size,"text-anchor":_.anchor,"text-offset":_.offset}),a.extendFlat(O.paint,{"text-color":i.textfont.color,"text-opacity":i.opacity})}return j}},1491:function(e,t,r){"use strict";e.exports=function(e,t){return e.lon=t.lon,e.lat=t.lat,e}},1492:function(e,t,r){"use strict";var o=r(378),a=r(387),i=r(388).BADNUM;e.exports=function(e,t){var r,l=e.cd,n=e.xaxis,s=e.yaxis,c=[],p=l[0].trace;if(!a.hasMarkers(p))return[];if(!1===t)for(r=0;r<l.length;r++)l[r].selected=0;else for(r=0;r<l.length;r++){var m=l[r],u=m.lonlat;if(u[0]!==i){var y=[o.modHalf(u[0],360),u[1]],d=[n.c2p(y),s.c2p(y)];t.contains(d,null,r,e)?(c.push({pointNumber:r,lon:u[0],lat:u[1]}),m.selected=1):m.selected=0}}return c}},412:function(e,t,r){"use strict";var o=r(378);e.exports=function(e,t){for(var r=0;r<e.length;r++)e[r].i=r;o.mergeArray(t.text,e,"tx"),o.mergeArray(t.texttemplate,e,"txt"),o.mergeArray(t.hovertext,e,"htx"),o.mergeArray(t.customdata,e,"data"),o.mergeArray(t.textposition,e,"tp"),t.textfont&&(o.mergeArrayCastPositive(t.textfont.size,e,"ts"),o.mergeArray(t.textfont.color,e,"tc"),o.mergeArray(t.textfont.family,e,"tf"));var a=t.marker;if(a){o.mergeArrayCastPositive(a.size,e,"ms"),o.mergeArrayCastPositive(a.opacity,e,"mo"),o.mergeArray(a.symbol,e,"mx"),o.mergeArray(a.color,e,"mc");var i=a.line;a.line&&(o.mergeArray(i.color,e,"mlc"),o.mergeArrayCastPositive(i.width,e,"mlw"));var l=a.gradient;l&&"none"!==l.type&&(o.mergeArray(l.type,e,"mgt"),o.mergeArray(l.color,e,"mgc"))}}},414:function(e,t,r){"use strict";var o=r(378);e.exports=function(e,t){o.isArrayOrTypedArray(t.selectedpoints)&&o.tagSelected(e,t)}},416:function(e,t,r){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},420:function(e,t,r){"use strict";var o=r(399).hasColorscale,a=r(419),i=r(387);e.exports=function(e,t){i.hasLines(t)&&o(t,"line")&&a(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),i.hasMarkers(t)&&(o(t,"marker")&&a(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),o(t,"marker.line")&&a(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},429:function(e,t,r){"use strict";var o=r(380),a=r(399).hasColorscale,i=r(401),l=r(387);e.exports=function(e,t,r,n,s,c){var p=l.isBubble(e),m=(e.line||{}).color;(c=c||{},m&&(r=m),s("marker.symbol"),s("marker.opacity",p?.7:1),s("marker.size"),s("marker.color",r),a(e,"marker")&&i(e,t,n,s,{prefix:"marker.",cLetter:"c"}),c.noSelect||(s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size")),c.noLine||(s("marker.line.color",m&&!Array.isArray(m)&&t.marker.color!==m?m:p?o.background:o.defaultLine),a(e,"marker.line")&&i(e,t,n,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width",p?1:0)),p&&(s("marker.sizeref"),s("marker.sizemin"),s("marker.sizemode")),c.gradient)&&("none"!==s("marker.gradient.type")&&s("marker.gradient.color"))}},433:function(e,t,r){"use strict";var o=r(378).isArrayOrTypedArray,a=r(399).hasColorscale,i=r(401);e.exports=function(e,t,r,l,n,s){var c=(e.marker||{}).color;(n("line.color",r),a(e,"line"))?i(e,t,l,n,{prefix:"line.",cLetter:"c"}):n("line.color",!o(c)&&c||r);n("line.width"),(s||{}).noDash||n("line.dash")}},434:function(e,t,r){"use strict";var o=r(378);e.exports=function(e,t,r,a,i){i=i||{},a("textposition"),o.coerceFont(a,"textfont",r.font),i.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))}},436:function(e,t,r){"use strict";var o=r(380),a=r(387);e.exports=function(e,t){var r,i;if("lines"===e.mode)return(r=e.line.color)&&o.opacity(r)?r:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var l=t.mcc||(e.marker||{}).color,n=t.mlcc||((e.marker||{}).line||{}).color;return(i=l&&o.opacity(l)?l:n&&o.opacity(n)&&(t.mlw||((e.marker||{}).line||{}).width)?n:"")?o.opacity(i)<.3?o.addOpacity(i,.3):i:(r=(e.line||{}).color)&&o.opacity(r)&&a.hasLines(e)&&e.line.width?r:e.fillcolor}},440:function(e,t,r){"use strict";var o=r(380),a=r(378).isArrayOrTypedArray;e.exports=function(e,t,r,i){var l=!1;if(t.marker){var n=t.marker.color,s=(t.marker.line||{}).color;n&&!a(n)?l=n:s&&!a(s)&&(l=s)}i("fillcolor",o.addOpacity((t.line||{}).color||l||r,.5))}},856:function(e,t,r){"use strict";var o=r(389).hovertemplateAttrs,a=r(389).texttemplateAttrs,i=r(583),l=r(396),n=r(851),s=r(397),c=r(394),p=r(385).extendFlat,m=r(392).overrideAll,u=i.line,y=i.marker;e.exports=m({lon:i.lon,lat:i.lat,mode:p({},l.mode,{dflt:"markers",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover."].join(" ")}),text:p({},l.text,{description:["Sets text elements associated with each (lon,lat) pair","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:a({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:p({},l.hovertext,{description:["Sets hover text elements associated with each (lon,lat) pair","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:u.color,width:u.width},connectgaps:l.connectgaps,marker:p({symbol:{valType:"string",dflt:"circle",role:"style",arrayOk:!0,description:["Sets the marker symbol.","Full list: https://www.mapbox.com/maki-icons/","Note that the array `marker.color` and `marker.size`","are only available for *circle* symbols."].join(" ")},angle:{valType:"number",dflt:"auto",role:"style",arrayOk:!0,description:["Sets the marker orientation from true North, in degrees clockwise.","When using the *auto* default, no rotation would be applied","in perspective views which is different from using a zero angle."].join(" ")},allowoverlap:{valType:"boolean",dflt:!1,role:"style",description:["Flag to draw all symbols, even if they overlap."].join(" ")},opacity:y.opacity,size:y.size,sizeref:y.sizeref,sizemin:y.sizemin,sizemode:y.sizemode},c("marker")),fill:i.fill,fillcolor:l.fillcolor,textfont:n.layers.symbol.textfont,textposition:n.layers.symbol.textposition,below:{valType:"string",role:"info",description:["Determines if this scattermapbox trace's layers are to be inserted","before the layer with the specified ID.","By default, scattermapbox layers are inserted","above all the base layers.","To place the scattermapbox layers above every other layer, set `below` to *''*."].join(" ")},selected:{marker:l.selected.marker},unselected:{marker:l.unselected.marker},hoverinfo:p({},s.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:o()},"calc","nested")},913:function(e,t,r){"use strict";var o=r(383),a=r(388).BADNUM,i=r(420),l=r(412),n=r(414),s=r(378)._;function c(e){return e&&"string"==typeof e}e.exports=function(e,t){var r,p=Array.isArray(t.locations),m=p?t.locations.length:t._length,u=new Array(m);r=t.geojson?function(e){return c(e)||o(e)}:c;for(var y=0;y<m;y++){var d=u[y]={};if(p){var f=t.locations[y];d.loc=r(f)?f:null}else{var h=t.lon[y],v=t.lat[y];o(h)&&o(v)?d.lonlat=[+h,+v]:d.lonlat=[a,a]}}return l(u,t),i(e,t),n(u,t),m&&(u[0].t={labels:{lat:s(e,"lat:")+" ",lon:s(e,"lon:")+" "}}),u}},946:function(e,t,r){"use strict";var o=r(382);e.exports=function(e,t,r){var a={},i=r[t.subplot]._subplot.mockAxis,l=e.lonlat;return a.lonLabel=o.tickText(i,i.c2l(l[0]),!0).text,a.latLabel=o.tickText(i,i.c2l(l[1]),!0).text,a}},947:function(e,t,r){"use strict";var o=r(395),a=r(378),i=r(436),l=a.fillText,n=r(388).BADNUM;e.exports=function(e,t,r){var s=e.cd,c=s[0].trace,p=e.xa,m=e.ya,u=e.subplot,y=360*(t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360)),d=t-y;if(o.getClosest(s,(function(e){var t=e.lonlat;if(t[0]===n)return 1/0;var o=a.modHalf(t[0],360),i=t[1],l=u.project([o,i]),s=l.x-p.c2p([d,i]),c=l.y-m.c2p([o,r]),y=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(s*s+c*c)-y,1-3/y)}),e),!1!==e.index){var f=s[e.index],h=f.lonlat,v=[a.modHalf(h[0],360)+y,h[1]],x=p.c2p(v),g=m.c2p(v),b=f.mrc||1;e.x0=x-b,e.x1=x+b,e.y0=g-b,e.y1=g+b;var k={};k[c.subplot]={_subplot:u};var A=c._module.formatLabels(f,c,k);return e.lonLabel=A.lonLabel,e.latLabel=A.latLabel,e.color=i(c,f),e.extraText=function(e,t,r){if(e.hovertemplate)return;var o=(t.hi||e.hoverinfo).split("+"),a=-1!==o.indexOf("all"),i=-1!==o.indexOf("lon"),n=-1!==o.indexOf("lat"),s=t.lonlat,c=[];function p(e){return e+"°"}a||i&&n?c.push("("+p(s[0])+", "+p(s[1])+")"):i?c.push(r.lon+p(s[0])):n&&c.push(r.lat+p(s[1]));(a||-1!==o.indexOf("text"))&&l(t,e,c);return c.join("<br>")}(c,f,s[0].t.labels),e.hovertemplate=c.hovertemplate,[e]}}}}]);