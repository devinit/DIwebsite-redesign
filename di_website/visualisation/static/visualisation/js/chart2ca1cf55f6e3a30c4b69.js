(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1112:function(e,t,i){"use strict";var a=i(404),r=i(1564),n=i(406),o=a({editType:"calc",description:"The default font used for axis & tick labels on this carpet"});o.family.dflt='"Open Sans", verdana, arial, sans-serif',o.size.dflt=12,o.color.dflt=n.defaultLine,e.exports={carpet:{valType:"string",role:"info",editType:"calc",description:["An identifier for this carpet, so that `scattercarpet` and","`contourcarpet` traces can specify a carpet plot on which","they lie"].join(" ")},x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["A two dimensional array of x coordinates at each carpet point.","If ommitted, the plot is a cheater plot and the xaxis is hidden","by default."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:"A two dimensional array of y coordinates at each carpet point."},a:{valType:"data_array",editType:"calc",description:["An array containing values of the first parameter value"].join(" ")},a0:{valType:"number",dflt:0,role:"info",editType:"calc",description:["Alternate to `a`.","Builds a linear space of a coordinates.","Use with `da`","where `a0` is the starting coordinate and `da` the step."].join(" ")},da:{valType:"number",dflt:1,role:"info",editType:"calc",description:["Sets the a coordinate step.","See `a0` for more info."].join(" ")},b:{valType:"data_array",editType:"calc",description:"A two dimensional array of y coordinates at each carpet point."},b0:{valType:"number",dflt:0,role:"info",editType:"calc",description:["Alternate to `b`.","Builds a linear space of a coordinates.","Use with `db`","where `b0` is the starting coordinate and `db` the step."].join(" ")},db:{valType:"number",dflt:1,role:"info",editType:"calc",description:["Sets the b coordinate step.","See `b0` for more info."].join(" ")},cheaterslope:{valType:"number",role:"info",dflt:1,editType:"calc",description:["The shift applied to each successive row of data in creating a cheater plot.","Only used if `x` is been ommitted."].join(" ")},aaxis:r,baxis:r,font:o,color:{valType:"color",dflt:n.defaultLine,role:"style",editType:"plot",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},transforms:void 0}},1143:function(e,t,i){"use strict";var a=i(378).isArrayOrTypedArray;e.exports=function(e,t,i){var r;for(a(e)?e.length>t.length&&(e=e.slice(0,t.length)):e=[],r=0;r<t.length;r++)e[r]=i(t[r]);return e}},1144:function(e,t,i){"use strict";e.exports=function(e,t,i){if(0===e.length)return"";var a,r=[],n=i?3:1;for(a=0;a<e.length;a+=n)r.push(e[a]+","+t[a]),i&&a<e.length-n&&(r.push("C"),r.push([e[a+1]+","+t[a+1],e[a+2]+","+t[a+2]+" "].join(" ")));return r.join(i?"":"L")}},1522:function(e,t,i){"use strict";e.exports=i(1563)},1563:function(e,t,i){"use strict";e.exports={attributes:i(1112),supplyDefaults:i(1565),plot:i(1569),calc:i(1571),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:i(407),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{description:["The data describing carpet axis layout is set in `y` and (optionally)","also `x`. If only `y` is present, `x` the plot is interpreted as a","cheater plot and is filled in using the `y` values.","`x` and `y` may either be 2D arrays matching with each dimension matching","that of `a` and `b`, or they may be 1D arrays with total length equal to","that of `a` and `b`."].join(" ")}}},1564:function(e,t,i){"use strict";var a=i(404),r=i(406),n=i(443),o=i(392).overrideAll,l=i(483).FORMAT_LINK,s=i(483).TIME_FORMAT_LINK;e.exports={color:{valType:"color",role:"style",editType:"calc",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},smoothing:{valType:"number",dflt:1,min:0,max:1.3,role:"info",editType:"calc"},title:{text:{valType:"string",dflt:"",role:"info",editType:"calc",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:a({editType:"calc",description:["Sets this axis' title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),offset:{valType:"number",role:"info",dflt:10,editType:"calc",description:["An additional amount by which to offset the title from the tick","labels, given in pixels.","Note that this used to be set","by the now deprecated `titleoffset` attribute."].join(" ")},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",role:"info",editType:"calc",description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,role:"style",editType:"calc",description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",role:"style",editType:"calc",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data."].join(" ")},range:{valType:"info_array",role:"info",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",role:"info",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",role:"info",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,role:"style",editType:"calc",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")},tickvals:{valType:"data_array",editType:"calc",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},ticktext:{valType:"data_array",editType:"calc",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",role:"style",editType:"calc",description:["Determines whether axis labels are drawn on the low side,","the high side, both, or neither side of the axis."].join(" ")},tickfont:a({editType:"calc",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",role:"style",editType:"calc",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",role:"style",editType:"calc",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",role:"style",editType:"calc",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",role:"style",editType:"calc",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",role:"style",editType:"calc",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",role:"style",editType:"calc",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",role:"style",editType:"calc",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,role:"style",editType:"calc",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",role:"style",editType:"calc",description:["Sets the tick label formatting rule using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see:",l,"And for dates see:",s,"We add one item to d3's date formatter: *%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")},tickformatstops:o(n.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",role:"info",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`."].join(" ")},categoryarray:{valType:"data_array",role:"info",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},labelpadding:{valType:"integer",role:"style",dflt:10,editType:"calc",description:"Extra padding between label and the axis"},labelprefix:{valType:"string",role:"style",editType:"calc",description:"Sets a axis label prefix."},labelsuffix:{valType:"string",dflt:"",role:"style",editType:"calc",description:"Sets a axis label suffix."},showline:{valType:"boolean",dflt:!1,role:"style",editType:"calc",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:r.defaultLine,role:"style",editType:"calc",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,role:"style",editType:"calc",description:"Sets the width (in px) of the axis line."},gridcolor:{valType:"color",role:"style",editType:"calc",description:"Sets the axis line color."},gridwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"calc",description:"Sets the width (in px) of the axis line."},showgrid:{valType:"boolean",role:"style",dflt:!0,editType:"calc",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},minorgridcount:{valType:"integer",min:0,dflt:0,role:"info",editType:"calc",description:"Sets the number of minor grid ticks per major grid tick"},minorgridwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"calc",description:"Sets the width (in px) of the grid lines."},minorgridcolor:{valType:"color",dflt:r.lightLine,role:"style",editType:"calc",description:"Sets the color of the grid lines."},startline:{valType:"boolean",role:"style",editType:"calc",description:["Determines whether or not a line is drawn at along the starting value","of this axis.","If *true*, the start line is drawn on top of the grid lines."].join(" ")},startlinecolor:{valType:"color",role:"style",editType:"calc",description:"Sets the line color of the start line."},startlinewidth:{valType:"number",dflt:1,role:"style",editType:"calc",description:"Sets the width (in px) of the start line."},endline:{valType:"boolean",role:"style",editType:"calc",description:["Determines whether or not a line is drawn at along the final value","of this axis.","If *true*, the end line is drawn on top of the grid lines."].join(" ")},endlinewidth:{valType:"number",dflt:1,role:"style",editType:"calc",description:"Sets the width (in px) of the end line."},endlinecolor:{valType:"color",role:"style",editType:"calc",description:"Sets the line color of the end line."},tick0:{valType:"number",min:0,dflt:0,role:"info",editType:"calc",description:"The starting index of grid lines along the axis"},dtick:{valType:"number",min:0,dflt:1,role:"info",editType:"calc",description:"The stride between grid lines along the axis"},arraytick0:{valType:"integer",min:0,dflt:0,role:"info",editType:"calc",description:"The starting index of grid lines along the axis"},arraydtick:{valType:"integer",min:1,dflt:1,role:"info",editType:"calc",description:"The stride between grid lines along the axis"},_deprecated:{title:{valType:"string",role:"info",editType:"calc",description:["Deprecated in favor of `title.text`.","Note that value of `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:a({editType:"calc",description:"Deprecated in favor of `title.font`."}),titleoffset:{valType:"number",role:"info",dflt:10,editType:"calc",description:"Deprecated in favor of `title.offset`."}},editType:"calc"}},1565:function(e,t,i){"use strict";var a=i(378),r=i(1566),n=i(1567),o=i(1112),l=i(406);e.exports=function(e,t,i,s){function c(i,r){return a.coerce(e,t,o,i,r)}t._clipPathId="clip"+t.uid+"carpet";var d=c("color",l.defaultLine);(a.coerceFont(c,"font"),c("carpet"),n(e,t,s,c,d),t.a&&t.b)?(t.a.length<3&&(t.aaxis.smoothing=0),t.b.length<3&&(t.baxis.smoothing=0),r(e,t,c)||(t.visible=!1),t._cheater&&c("cheaterslope")):t.visible=!1}},1566:function(e,t,i){"use strict";var a=i(378).isArray1D;e.exports=function(e,t,i){var r=i("x"),n=r&&r.length,o=i("y"),l=o&&o.length;if(!n&&!l)return!1;if(t._cheater=!r,n&&!a(r)||l&&!a(o))t._length=null;else{var s=n?r.length:1/0;l&&(s=Math.min(s,o.length)),t.a&&t.a.length&&(s=Math.min(s,t.a.length)),t.b&&t.b.length&&(s=Math.min(s,t.b.length)),t._length=s}return!0}},1567:function(e,t,i){"use strict";var a=i(1568),r=i(386);e.exports=function(e,t,i,n,o){n("a")||(n("da"),n("a0")),n("b")||(n("db"),n("b0")),function(e,t,i,n){["aaxis","baxis"].forEach((function(o){var l=o.charAt(0),s=e[o]||{},c=r.newContainer(t,o),d={tickfont:"x",id:l+"axis",letter:l,font:t.font,name:o,data:e[l],calendar:t.calendar,dfltColor:n,bgColor:i.paper_bgcolor,fullLayout:i};a(s,c,d),c._categories=c._categories||[],e[o]||"-"===s.type||(e[o]={type:s.type})}))}(e,t,i,o)}},1568:function(e,t,i){"use strict";var a=i(1112),r=i(380).addOpacity,n=i(379),o=i(378),l=i(564),s=i(565),c=i(551),d=i(521),h=i(614);e.exports=function(e,t,i){var f=i.letter,p=i.font||{},u=a[f+"axis"];function y(i,a){return o.coerce(e,t,u,i,a)}function g(i,a){return o.coerce2(e,t,u,i,a)}i.name&&(t._name=i.name,t._id=i.name);var x=y("type");("-"===x&&(i.data&&function(e,t){if("-"!==e.type)return;var i=e._id.charAt(0),a=e[i+"calendar"];e.type=h(t,a)}(t,i.data),"-"===t.type?t.type="linear":x=e.type=t.type),y("smoothing"),y("cheatertype"),y("showticklabels"),y("labelprefix",f+" = "),y("labelsuffix"),y("showtickprefix"),y("showticksuffix"),y("separatethousands"),y("tickformat"),y("exponentformat"),y("showexponent"),y("categoryorder"),y("tickmode"),y("tickvals"),y("ticktext"),y("tick0"),y("dtick"),"array"===t.tickmode&&(y("arraytick0"),y("arraydtick")),y("labelpadding"),t._hovertitle=f,"date"===x)&&n.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",i.calendar);d(t,i.fullLayout),t.c2p=o.identity;var m=y("color",i.dfltColor),v=m===e.color?m:p.color;y("title.text")&&(o.coerceFont(y,"title.font",{family:p.family,size:Math.round(1.2*p.size),color:v}),y("title.offset")),y("tickangle"),y("autorange",!t.isValidRange(e.range))&&y("rangemode"),y("range"),t.cleanRange(),y("fixedrange"),l(e,t,y,x),s(e,t,y,x,i),c(e,t,y,{data:i.data,dataAttr:f});var b=g("gridcolor",r(m,.3)),T=g("gridwidth"),w=y("showgrid");w||(delete t.gridcolor,delete t.gridwidth);var M=g("startlinecolor",m),k=g("startlinewidth",T);y("startline",t.showgrid||!!M||!!k)||(delete t.startlinecolor,delete t.startlinewidth);var _=g("endlinecolor",m),j=g("endlinewidth",T);return y("endline",t.showgrid||!!_||!!j)||(delete t.endlinecolor,delete t.endlinewidth),w?(y("minorgridcount"),y("minorgridwidth",T),y("minorgridcolor",r(b,.06)),t.minorgridcount||(delete t.minorgridwidth,delete t.minorgridcolor)):(delete t.gridcolor,delete t.gridWidth),"none"===t.showticklabels&&(delete t.tickfont,delete t.tickangle,delete t.showexponent,delete t.exponentformat,delete t.tickformat,delete t.showticksuffix,delete t.showtickprefix),t.showticksuffix||delete t.ticksuffix,t.showtickprefix||delete t.tickprefix,y("tickmode"),t}},1569:function(e,t,i){"use strict";var a=i(381),r=i(384),n=i(1143),o=i(1144),l=i(1570),s=i(391),c=i(378),d=i(408);function h(e,t,i,r,l,s){var c="const-"+l+"-lines",d=i.selectAll("."+c).data(s);d.enter().append("path").classed(c,!0).style("vector-effect","non-scaling-stroke"),d.each((function(i){var r=i,l=r.x,s=r.y,c=n([],l,e.c2p),d=n([],s,t.c2p),h="M"+o(c,d,r.smoothing);a.select(this).attr("d",h).style("stroke-width",r.width).style("stroke",r.color).style("fill","none")})),d.exit().remove()}function f(e,t,i,n,o,c,d,h){var f=c.selectAll("text."+h).data(d);f.enter().append("text").classed(h,!0);var p=0,u={};return f.each((function(o,c){var d;if("auto"===o.axis.tickangle)d=l(n,t,i,o.xy,o.dxy);else{var h=(o.axis.tickangle+180)*Math.PI/180;d=l(n,t,i,o.xy,[Math.cos(h),Math.sin(h)])}c||(u={angle:d.angle,flip:d.flip});var f=(o.endAnchor?-1:1)*d.flip,y=a.select(this).attr({"text-anchor":f>0?"start":"end","data-notex":1}).call(r.font,o.font).text(o.text).call(s.convertToTspans,e),g=r.bBox(this);y.attr("transform","translate("+d.p[0]+","+d.p[1]+") rotate("+d.angle+")translate("+o.axis.labelpadding*f+","+.3*g.height+")"),p=Math.max(p,g.width+o.axis.labelpadding)})),f.exit().remove(),u.maxExtent=p,u}e.exports=function(e,t,i,r){var s=t.xaxis,d=t.yaxis,p=e._fullLayout._clips;c.makeTraceGroups(r,i,"trace").each((function(t){var i=a.select(this),r=t[0],u=r.trace,g=u.aaxis,x=u.baxis,m=c.ensureSingle(i,"g","minorlayer"),v=c.ensureSingle(i,"g","majorlayer"),b=c.ensureSingle(i,"g","boundarylayer"),T=c.ensureSingle(i,"g","labellayer");i.style("opacity",u.opacity),h(s,d,v,g,"a",g._gridlines),h(s,d,v,x,"b",x._gridlines),h(s,d,m,g,"a",g._minorgridlines),h(s,d,m,x,"b",x._minorgridlines),h(s,d,b,g,"a-boundary",g._boundarylines),h(s,d,b,x,"b-boundary",x._boundarylines);var w=f(e,s,d,u,r,T,g._labels,"a-label"),M=f(e,s,d,u,r,T,x._labels,"b-label");!function(e,t,i,a,r,n,o,s){var d,h,f,p,u=c.aggNums(Math.min,null,i.a),g=c.aggNums(Math.max,null,i.a),x=c.aggNums(Math.min,null,i.b),m=c.aggNums(Math.max,null,i.b);d=.5*(u+g),h=x,f=i.ab2xy(d,h,!0),p=i.dxyda_rough(d,h),void 0===o.angle&&c.extendFlat(o,l(i,r,n,f,i.dxydb_rough(d,h)));y(e,t,i,a,f,p,i.aaxis,r,n,o,"a-title"),d=u,h=.5*(x+m),f=i.ab2xy(d,h,!0),p=i.dxydb_rough(d,h),void 0===s.angle&&c.extendFlat(s,l(i,r,n,f,i.dxyda_rough(d,h)));y(e,t,i,a,f,p,i.baxis,r,n,s,"b-title")}(e,T,u,r,s,d,w,M),function(e,t,i,a,r){var l,s,d,h,f=i.select("#"+e._clipPathId);f.size()||(f=i.append("clipPath").classed("carpetclip",!0));var p=c.ensureSingle(f,"path","carpetboundary"),u=t.clipsegments,y=[];for(h=0;h<u.length;h++)l=u[h],s=n([],l.x,a.c2p),d=n([],l.y,r.c2p),y.push(o(s,d,l.bicubic));var g="M"+y.join("L")+"Z";f.attr("id",e._clipPathId),p.attr("d",g)}(u,r,p,s,d)}))};var p=d.LINE_SPACING,u=(1-d.MID_SHIFT)/p+1;function y(e,t,i,n,o,c,d,h,f,y,g){var x=[];d.title.text&&x.push(d.title.text);var m=t.selectAll("text."+g).data(x),v=y.maxExtent;m.enter().append("text").classed(g,!0),m.each((function(){var t=l(i,h,f,o,c);-1===["start","both"].indexOf(d.showticklabels)&&(v=0);var n=d.title.font.size;v+=n+d.title.offset;var g=(y.angle+(y.flip<0?180:0)-t.angle+450)%360,x=g>90&&g<270,m=a.select(this);m.text(d.title.text).call(s.convertToTspans,e),x&&(v=(-s.lineCount(m)+u)*p*n-v),m.attr("transform","translate("+t.p[0]+","+t.p[1]+") rotate("+t.angle+") translate(0,"+v+")").classed("user-select-none",!0).attr("text-anchor","middle").call(r.font,d.title.font)})),m.exit().remove()}},1570:function(e,t,i){"use strict";e.exports=function(e,t,i,a,r,n){var o=r[0]*e.dpdx(t),l=r[1]*e.dpdy(i),s=1,c=1;if(n){var d=Math.sqrt(r[0]*r[0]+r[1]*r[1]),h=Math.sqrt(n[0]*n[0]+n[1]*n[1]),f=(r[0]*n[0]+r[1]*n[1])/d/h;c=Math.max(0,f)}var p=180*Math.atan2(l,o)/Math.PI;return p<-90?(p+=180,s=-s):p>90&&(p-=180,s=-s),{angle:p,flip:s,p:e.c2p(a,t,i),offsetMultplier:c}}},1571:function(e,t,i){"use strict";var a=i(382),r=i(378).isArray1D,n=i(1572),o=i(1573),l=i(1574),s=i(1575),c=i(1576),d=i(554),h=i(1577),f=i(555),p=i(1578);e.exports=function(e,t){var i=a.getFromId(e,t.xaxis),u=a.getFromId(e,t.yaxis),y=t.aaxis,g=t.baxis,x=t.x,m=t.y,v=[];x&&r(x)&&v.push("x"),m&&r(m)&&v.push("y"),v.length&&f(t,y,g,"a","b",v);var b=t._a=t._a||t.a,T=t._b=t._b||t.b;x=t._x||t.x,m=t._y||t.y;var w={};if(t._cheater){var M="index"===y.cheatertype?b.length:b,k="index"===g.cheatertype?T.length:T;x=n(M,k,t.cheaterslope)}t._x=x=d(x),t._y=m=d(m),h(x,b,T),h(m,b,T),p(t),t.setScale();var _=o(x),j=o(m),A=.5*(_[1]-_[0]),S=.5*(_[1]+_[0]),I=.5*(j[1]-j[0]),L=.5*(j[1]+j[0]);return _=[S-1.3*A,S+1.3*A],j=[L-1.3*I,L+1.3*I],t._extremes[i._id]=a.findExtremes(i,_,{padded:!0}),t._extremes[u._id]=a.findExtremes(u,j,{padded:!0}),l(t,"a","b"),l(t,"b","a"),s(t,y),s(t,g),w.clipsegments=c(t._xctrl,t._yctrl,y,g),w.x=x,w.y=m,w.a=b,w.b=T,[w]}},1572:function(e,t,i){"use strict";var a=i(378).isArrayOrTypedArray;e.exports=function(e,t,i){var r,n,o,l,s,c,d=[],h=a(e)?e.length:e,f=a(t)?t.length:t,p=a(e)?e:null,u=a(t)?t:null;p&&(o=(p.length-1)/(p[p.length-1]-p[0])/(h-1)),u&&(l=(u.length-1)/(u[u.length-1]-u[0])/(f-1));var y=1/0,g=-1/0;for(n=0;n<f;n++)for(d[n]=[],s=u?(u[n]-u[0])*l:n/(f-1),r=0;r<h;r++)c=(p?(p[r]-p[0])*o:r/(h-1))-s*i,y=Math.min(c,y),g=Math.max(c,g),d[n][r]=c;var x=1/(g-y),m=-y*x;for(n=0;n<f;n++)for(r=0;r<h;r++)d[n][r]=x*d[n][r]+m;return d}},1573:function(e,t,i){"use strict";var a=i(378).isArrayOrTypedArray;e.exports=function(e){return function e(t,i){if(!a(t)||i>=10)return null;for(var r=1/0,n=-1/0,o=t.length,l=0;l<o;l++){var s=t[l];if(a(s)){var c=e(s,i+1);c&&(r=Math.min(c[0],r),n=Math.max(c[1],n))}else r=Math.min(s,r),n=Math.max(s,n)}return[r,n]}(e,0)}},1574:function(e,t,i){"use strict";var a=i(382),r=i(385).extendFlat;e.exports=function(e,t,i){var n,o,l,s,c,d,h,f,p,u,y,g,x,m,v=e["_"+t],b=e[t+"axis"],T=b._gridlines=[],w=b._minorgridlines=[],M=b._boundarylines=[],k=e["_"+i],_=e[i+"axis"];"array"===b.tickmode&&(b.tickvals=v.slice());var j=e._xctrl,A=e._yctrl,S=j[0].length,I=j.length,L=e._a.length,D=e._b.length;a.prepTicks(b),"array"===b.tickmode&&delete b.tickvals;var E=b.smoothing?3:1;function C(a){var r,n,o,l,s,c,d,h,p,u,y,g,x=[],m=[],v={};if("b"===t)for(n=e.b2j(a),o=Math.floor(Math.max(0,Math.min(D-2,n))),l=n-o,v.length=D,v.crossLength=L,v.xy=function(t){return e.evalxy([],t,n)},v.dxy=function(t,i){return e.dxydi([],t,o,i,l)},r=0;r<L;r++)c=Math.min(L-2,r),d=r-c,h=e.evalxy([],r,n),_.smoothing&&r>0&&(p=e.dxydi([],r-1,o,0,l),x.push(s[0]+p[0]/3),m.push(s[1]+p[1]/3),u=e.dxydi([],r-1,o,1,l),x.push(h[0]-u[0]/3),m.push(h[1]-u[1]/3)),x.push(h[0]),m.push(h[1]),s=h;else for(r=e.a2i(a),c=Math.floor(Math.max(0,Math.min(L-2,r))),d=r-c,v.length=L,v.crossLength=D,v.xy=function(t){return e.evalxy([],r,t)},v.dxy=function(t,i){return e.dxydj([],c,t,d,i)},n=0;n<D;n++)o=Math.min(D-2,n),l=n-o,h=e.evalxy([],r,n),_.smoothing&&n>0&&(y=e.dxydj([],c,n-1,d,0),x.push(s[0]+y[0]/3),m.push(s[1]+y[1]/3),g=e.dxydj([],c,n-1,d,1),x.push(h[0]-g[0]/3),m.push(h[1]-g[1]/3)),x.push(h[0]),m.push(h[1]),s=h;return v.axisLetter=t,v.axis=b,v.crossAxis=_,v.value=a,v.constvar=i,v.index=f,v.x=x,v.y=m,v.smoothing=_.smoothing,v}function O(a){var r,n,o,l,s,c=[],d=[],h={};if(h.length=v.length,h.crossLength=k.length,"b"===t)for(o=Math.max(0,Math.min(D-2,a)),s=Math.min(1,Math.max(0,a-o)),h.xy=function(t){return e.evalxy([],t,a)},h.dxy=function(t,i){return e.dxydi([],t,o,i,s)},r=0;r<S;r++)c[r]=j[a*E][r],d[r]=A[a*E][r];else for(n=Math.max(0,Math.min(L-2,a)),l=Math.min(1,Math.max(0,a-n)),h.xy=function(t){return e.evalxy([],a,t)},h.dxy=function(t,i){return e.dxydj([],n,t,l,i)},r=0;r<I;r++)c[r]=j[r][a*E],d[r]=A[r][a*E];return h.axisLetter=t,h.axis=b,h.crossAxis=_,h.value=v[a],h.constvar=i,h.index=a,h.x=c,h.y=d,h.smoothing=_.smoothing,h}if("array"===b.tickmode){for(s=5e-15,d=(c=[Math.floor((v.length-1-b.arraytick0)/b.arraydtick*(1+s)),Math.ceil(-b.arraytick0/b.arraydtick/(1+s))].sort((function(e,t){return e-t})))[0]-1,h=c[1]+1,f=d;f<h;f++)(o=b.arraytick0+b.arraydtick*f)<0||o>v.length-1||T.push(r(O(o),{color:b.gridcolor,width:b.gridwidth}));for(f=d;f<h;f++)if(l=b.arraytick0+b.arraydtick*f,y=Math.min(l+b.arraydtick,v.length-1),!(l<0||l>v.length-1||y<0||y>v.length-1))for(g=v[l],x=v[y],n=0;n<b.minorgridcount;n++)(m=y-l)<=0||(u=g+(x-g)*(n+1)/(b.minorgridcount+1)*(b.arraydtick/m))<v[0]||u>v[v.length-1]||w.push(r(C(u),{color:b.minorgridcolor,width:b.minorgridwidth}));b.startline&&M.push(r(O(0),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&M.push(r(O(v.length-1),{color:b.endlinecolor,width:b.endlinewidth}))}else{for(s=5e-15,d=(c=[Math.floor((v[v.length-1]-b.tick0)/b.dtick*(1+s)),Math.ceil((v[0]-b.tick0)/b.dtick/(1+s))].sort((function(e,t){return e-t})))[0],h=c[1],f=d;f<=h;f++)p=b.tick0+b.dtick*f,T.push(r(C(p),{color:b.gridcolor,width:b.gridwidth}));for(f=d-1;f<h+1;f++)for(p=b.tick0+b.dtick*f,n=0;n<b.minorgridcount;n++)(u=p+b.dtick*(n+1)/(b.minorgridcount+1))<v[0]||u>v[v.length-1]||w.push(r(C(u),{color:b.minorgridcolor,width:b.minorgridwidth}));b.startline&&M.push(r(C(v[0]),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&M.push(r(C(v[v.length-1]),{color:b.endlinecolor,width:b.endlinewidth}))}}},1575:function(e,t,i){"use strict";var a=i(382),r=i(385).extendFlat;e.exports=function(e,t){var i,n,o,l=t._labels=[],s=t._gridlines;for(i=0;i<s.length;i++)o=s[i],-1!==["start","both"].indexOf(t.showticklabels)&&(n=a.tickText(t,o.value),r(n,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:o.xy(0),dxy:o.dxy(0,0),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:0===i,isLast:i===s.length-1}),l.push(n)),-1!==["end","both"].indexOf(t.showticklabels)&&(n=a.tickText(t,o.value),r(n,{endAnchor:!1,xy:o.xy(o.crossLength-1),dxy:o.dxy(o.crossLength-2,1),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:0===i,isLast:i===s.length-1}),l.push(n))}},1576:function(e,t,i){"use strict";e.exports=function(e,t,i,a){var r,n,o,l=[],s=!!i.smoothing,c=!!a.smoothing,d=e[0].length-1,h=e.length-1;for(r=0,n=[],o=[];r<=d;r++)n[r]=e[0][r],o[r]=t[0][r];for(l.push({x:n,y:o,bicubic:s}),r=0,n=[],o=[];r<=h;r++)n[r]=e[r][d],o[r]=t[r][d];for(l.push({x:n,y:o,bicubic:c}),r=d,n=[],o=[];r>=0;r--)n[d-r]=e[h][r],o[d-r]=t[h][r];for(l.push({x:n,y:o,bicubic:s}),r=h,n=[],o=[];r>=0;r--)n[h-r]=e[r][0],o[h-r]=t[r][0];return l.push({x:n,y:o,bicubic:c}),l}},1577:function(e,t,i){"use strict";var a=i(378);e.exports=function(e,t,i){var r,n,o,l=[],s=[],c=e[0].length,d=e.length;function h(t,i){var a,r=0,n=0;return t>0&&void 0!==(a=e[i][t-1])&&(n++,r+=a),t<c-1&&void 0!==(a=e[i][t+1])&&(n++,r+=a),i>0&&void 0!==(a=e[i-1][t])&&(n++,r+=a),i<d-1&&void 0!==(a=e[i+1][t])&&(n++,r+=a),r/Math.max(1,n)}var f,p,u,y,g,x,m,v,b,T,w,M=0;for(r=0;r<c;r++)for(n=0;n<d;n++)void 0===e[n][r]&&(l.push(r),s.push(n),e[n][r]=h(r,n)),M=Math.max(M,Math.abs(e[n][r]));if(!l.length)return e;var k=0,_=0,j=l.length;do{for(k=0,o=0;o<j;o++){r=l[o],n=s[o];var A,S,I,L,D,E,C=0,O=0;0===r?(I=t[D=Math.min(c-1,2)],L=t[1],A=e[n][D],O+=(S=e[n][1])+(S-A)*(t[0]-L)/(L-I),C++):r===c-1&&(I=t[D=Math.max(0,c-3)],L=t[c-2],A=e[n][D],O+=(S=e[n][c-2])+(S-A)*(t[c-1]-L)/(L-I),C++),(0===r||r===c-1)&&n>0&&n<d-1&&(f=i[n+1]-i[n],O+=((p=i[n]-i[n-1])*e[n+1][r]+f*e[n-1][r])/(p+f),C++),0===n?(I=i[E=Math.min(d-1,2)],L=i[1],A=e[E][r],O+=(S=e[1][r])+(S-A)*(i[0]-L)/(L-I),C++):n===d-1&&(I=i[E=Math.max(0,d-3)],L=i[d-2],A=e[E][r],O+=(S=e[d-2][r])+(S-A)*(i[d-1]-L)/(L-I),C++),(0===n||n===d-1)&&r>0&&r<c-1&&(f=t[r+1]-t[r],O+=((p=t[r]-t[r-1])*e[n][r+1]+f*e[n][r-1])/(p+f),C++),C?O/=C:(u=t[r+1]-t[r],y=t[r]-t[r-1],v=(g=i[n+1]-i[n])*(x=i[n]-i[n-1])*(g+x),O=((m=u*y*(u+y))*(x*e[n+1][r]+g*e[n-1][r])+v*(y*e[n][r+1]+u*e[n][r-1]))/(v*(y+u)+m*(x+g))),k+=(T=(b=O-e[n][r])/M)*T,w=C?0:.85,e[n][r]+=b*(1+w)}k=Math.sqrt(k)}while(_++<100&&k>1e-5);return a.log("Smoother converged to",k,"after",_,"iterations"),e}},1578:function(e,t,i){"use strict";var a=i(1579),r=i(724).findBin,n=i(1580),o=i(1582),l=i(1583),s=i(1584);e.exports=function(e){var t=e._a,i=e._b,c=t.length,d=i.length,h=e.aaxis,f=e.baxis,p=t[0],u=t[c-1],y=i[0],g=i[d-1],x=t[t.length-1]-t[0],m=i[i.length-1]-i[0],v=x*a.RELATIVE_CULL_TOLERANCE,b=m*a.RELATIVE_CULL_TOLERANCE;p-=v,u+=v,y-=b,g+=b,e.isVisible=function(e,t){return e>p&&e<u&&t>y&&t<g},e.isOccluded=function(e,t){return e<p||e>u||t<y||t>g},e.setScale=function(){var t=e._x,i=e._y,a=n(e._xctrl,e._yctrl,t,i,h.smoothing,f.smoothing);e._xctrl=a[0],e._yctrl=a[1],e.evalxy=o([e._xctrl,e._yctrl],c,d,h.smoothing,f.smoothing),e.dxydi=l([e._xctrl,e._yctrl],h.smoothing,f.smoothing),e.dxydj=s([e._xctrl,e._yctrl],h.smoothing,f.smoothing)},e.i2a=function(e){var i=Math.max(0,Math.floor(e[0]),c-2),a=e[0]-i;return(1-a)*t[i]+a*t[i+1]},e.j2b=function(e){var t=Math.max(0,Math.floor(e[1]),c-2),a=e[1]-t;return(1-a)*i[t]+a*i[t+1]},e.ij2ab=function(t){return[e.i2a(t[0]),e.j2b(t[1])]},e.a2i=function(e){var i=Math.max(0,Math.min(r(e,t),c-2)),a=t[i],n=t[i+1];return Math.max(0,Math.min(c-1,i+(e-a)/(n-a)))},e.b2j=function(e){var t=Math.max(0,Math.min(r(e,i),d-2)),a=i[t],n=i[t+1];return Math.max(0,Math.min(d-1,t+(e-a)/(n-a)))},e.ab2ij=function(t){return[e.a2i(t[0]),e.b2j(t[1])]},e.i2c=function(t,i){return e.evalxy([],t,i)},e.ab2xy=function(a,r,n){if(!n&&(a<t[0]||a>t[c-1]|r<i[0]||r>i[d-1]))return[!1,!1];var o=e.a2i(a),l=e.b2j(r),s=e.evalxy([],o,l);if(n){var h,f,p,u,y=0,g=0,x=[];a<t[0]?(h=0,f=0,y=(a-t[0])/(t[1]-t[0])):a>t[c-1]?(h=c-2,f=1,y=(a-t[c-1])/(t[c-1]-t[c-2])):f=o-(h=Math.max(0,Math.min(c-2,Math.floor(o)))),r<i[0]?(p=0,u=0,g=(r-i[0])/(i[1]-i[0])):r>i[d-1]?(p=d-2,u=1,g=(r-i[d-1])/(i[d-1]-i[d-2])):u=l-(p=Math.max(0,Math.min(d-2,Math.floor(l)))),y&&(e.dxydi(x,h,p,f,u),s[0]+=x[0]*y,s[1]+=x[1]*y),g&&(e.dxydj(x,h,p,f,u),s[0]+=x[0]*g,s[1]+=x[1]*g)}return s},e.c2p=function(e,t,i){return[t.c2p(e[0]),i.c2p(e[1])]},e.p2x=function(e,t,i){return[t.p2c(e[0]),i.p2c(e[1])]},e.dadi=function(e){var i=Math.max(0,Math.min(t.length-2,e));return t[i+1]-t[i]},e.dbdj=function(e){var t=Math.max(0,Math.min(i.length-2,e));return i[t+1]-i[t]},e.dxyda=function(t,i,a,r){var n=e.dxydi(null,t,i,a,r),o=e.dadi(t,a);return[n[0]/o,n[1]/o]},e.dxydb=function(t,i,a,r){var n=e.dxydj(null,t,i,a,r),o=e.dbdj(i,r);return[n[0]/o,n[1]/o]},e.dxyda_rough=function(t,i,a){var r=x*(a||.1),n=e.ab2xy(t+r,i,!0),o=e.ab2xy(t-r,i,!0);return[.5*(n[0]-o[0])/r,.5*(n[1]-o[1])/r]},e.dxydb_rough=function(t,i,a){var r=m*(a||.1),n=e.ab2xy(t,i+r,!0),o=e.ab2xy(t,i-r,!0);return[.5*(n[0]-o[0])/r,.5*(n[1]-o[1])/r]},e.dpdx=function(e){return e._m},e.dpdy=function(e){return e._m}}},1579:function(e,t,i){"use strict";e.exports={RELATIVE_CULL_TOLERANCE:1e-6}},1580:function(e,t,i){"use strict";var a=i(1581),r=i(378).ensureArray;function n(e,t,i){var a=-.5*i[0]+1.5*t[0],r=-.5*i[1]+1.5*t[1];return[(2*a+e[0])/3,(2*r+e[1])/3]}e.exports=function(e,t,i,o,l,s){var c,d,h,f,p,u,y,g,x,m,v=i[0].length,b=i.length,T=l?3*v-2:v,w=s?3*b-2:b;for(e=r(e,w),t=r(t,w),h=0;h<w;h++)e[h]=r(e[h],T),t[h]=r(t[h],T);for(d=0,f=0;d<b;d++,f+=s?3:1)for(p=e[f],u=t[f],y=i[d],g=o[d],c=0,h=0;c<v;c++,h+=l?3:1)p[h]=y[c],u[h]=g[c];if(l)for(d=0,f=0;d<b;d++,f+=s?3:1){for(c=1,h=3;c<v-1;c++,h+=3)x=a([i[d][c-1],o[d][c-1]],[i[d][c],o[d][c]],[i[d][c+1],o[d][c+1]],l),e[f][h-1]=x[0][0],t[f][h-1]=x[0][1],e[f][h+1]=x[1][0],t[f][h+1]=x[1][1];m=n([e[f][0],t[f][0]],[e[f][2],t[f][2]],[e[f][3],t[f][3]]),e[f][1]=m[0],t[f][1]=m[1],m=n([e[f][T-1],t[f][T-1]],[e[f][T-3],t[f][T-3]],[e[f][T-4],t[f][T-4]]),e[f][T-2]=m[0],t[f][T-2]=m[1]}if(s)for(h=0;h<T;h++){for(f=3;f<w-3;f+=3)x=a([e[f-3][h],t[f-3][h]],[e[f][h],t[f][h]],[e[f+3][h],t[f+3][h]],s),e[f-1][h]=x[0][0],t[f-1][h]=x[0][1],e[f+1][h]=x[1][0],t[f+1][h]=x[1][1];m=n([e[0][h],t[0][h]],[e[2][h],t[2][h]],[e[3][h],t[3][h]]),e[1][h]=m[0],t[1][h]=m[1],m=n([e[w-1][h],t[w-1][h]],[e[w-3][h],t[w-3][h]],[e[w-4][h],t[w-4][h]]),e[w-2][h]=m[0],t[w-2][h]=m[1]}if(l&&s)for(f=1;f<w;f+=(f+1)%3==0?2:1){for(h=3;h<T-3;h+=3)x=a([e[f][h-3],t[f][h-3]],[e[f][h],t[f][h]],[e[f][h+3],t[f][h+3]],l),e[f][h-1]=.5*(e[f][h-1]+x[0][0]),t[f][h-1]=.5*(t[f][h-1]+x[0][1]),e[f][h+1]=.5*(e[f][h+1]+x[1][0]),t[f][h+1]=.5*(t[f][h+1]+x[1][1]);m=n([e[f][0],t[f][0]],[e[f][2],t[f][2]],[e[f][3],t[f][3]]),e[f][1]=.5*(e[f][1]+m[0]),t[f][1]=.5*(t[f][1]+m[1]),m=n([e[f][T-1],t[f][T-1]],[e[f][T-3],t[f][T-3]],[e[f][T-4],t[f][T-4]]),e[f][T-2]=.5*(e[f][T-2]+m[0]),t[f][T-2]=.5*(t[f][T-2]+m[1])}return[e,t]}},1581:function(e,t,i){"use strict";e.exports=function(e,t,i,a){var r=e[0]-t[0],n=e[1]-t[1],o=i[0]-t[0],l=i[1]-t[1],s=Math.pow(r*r+n*n,.25),c=Math.pow(o*o+l*l,.25),d=(c*c*r-s*s*o)*a,h=(c*c*n-s*s*l)*a,f=c*(s+c)*3,p=s*(s+c)*3;return[[t[0]+(f&&d/f),t[1]+(f&&h/f)],[t[0]-(p&&d/p),t[1]-(p&&h/p)]]}},1582:function(e,t,i){"use strict";e.exports=function(e,t,i,a,r){var n=t-2,o=i-2;return a&&r?function(t,i,a){var r,l,s,c,d,h;t||(t=[]);var f=Math.max(0,Math.min(Math.floor(i),n)),p=Math.max(0,Math.min(Math.floor(a),o)),u=Math.max(0,Math.min(1,i-f)),y=Math.max(0,Math.min(1,a-p));f*=3,p*=3;var g=u*u,x=g*u,m=1-u,v=m*m,b=v*m,T=y*y,w=T*y,M=1-y,k=M*M,_=k*M;for(h=0;h<e.length;h++)r=b*(d=e[h])[p][f]+3*(v*u*d[p][f+1]+m*g*d[p][f+2])+x*d[p][f+3],l=b*d[p+1][f]+3*(v*u*d[p+1][f+1]+m*g*d[p+1][f+2])+x*d[p+1][f+3],s=b*d[p+2][f]+3*(v*u*d[p+2][f+1]+m*g*d[p+2][f+2])+x*d[p+2][f+3],c=b*d[p+3][f]+3*(v*u*d[p+3][f+1]+m*g*d[p+3][f+2])+x*d[p+3][f+3],t[h]=_*r+3*(k*y*l+M*T*s)+w*c;return t}:a?function(t,i,a){t||(t=[]);var r,l,s,c,d,h,f=Math.max(0,Math.min(Math.floor(i),n)),p=Math.max(0,Math.min(Math.floor(a),o)),u=Math.max(0,Math.min(1,i-f)),y=Math.max(0,Math.min(1,a-p));f*=3;var g=u*u,x=g*u,m=1-u,v=m*m,b=v*m,T=1-y;for(d=0;d<e.length;d++)r=T*(h=e[d])[p][f]+y*h[p+1][f],l=T*h[p][f+1]+y*h[p+1][f+1],s=T*h[p][f+2]+y*h[p+1][f+1],c=T*h[p][f+3]+y*h[p+1][f+1],t[d]=b*r+3*(v*u*l+m*g*s)+x*c;return t}:r?function(t,i,a){t||(t=[]);var r,l,s,c,d,h,f=Math.max(0,Math.min(Math.floor(i),n)),p=Math.max(0,Math.min(Math.floor(a),o)),u=Math.max(0,Math.min(1,i-f)),y=Math.max(0,Math.min(1,a-p));p*=3;var g=y*y,x=g*y,m=1-y,v=m*m,b=v*m,T=1-u;for(d=0;d<e.length;d++)r=T*(h=e[d])[p][f]+u*h[p][f+1],l=T*h[p+1][f]+u*h[p+1][f+1],s=T*h[p+2][f]+u*h[p+2][f+1],c=T*h[p+3][f]+u*h[p+3][f+1],t[d]=b*r+3*(v*y*l+m*g*s)+x*c;return t}:function(t,i,a){t||(t=[]);var r,l,s,c,d=Math.max(0,Math.min(Math.floor(i),n)),h=Math.max(0,Math.min(Math.floor(a),o)),f=Math.max(0,Math.min(1,i-d)),p=Math.max(0,Math.min(1,a-h)),u=1-p,y=1-f;for(s=0;s<e.length;s++)r=y*(c=e[s])[h][d]+f*c[h][d+1],l=y*c[h+1][d]+f*c[h+1][d+1],t[s]=u*r+p*l;return t}}},1583:function(e,t,i){"use strict";e.exports=function(e,t,i){return t&&i?function(t,i,a,r,n){var o,l,s,c,d,h;t||(t=[]),i*=3,a*=3;var f=r*r,p=1-r,u=p*p,y=p*r*2,g=-3*u,x=3*(u-y),m=3*(y-f),v=3*f,b=n*n,T=b*n,w=1-n,M=w*w,k=M*w;for(h=0;h<e.length;h++)o=g*(d=e[h])[a][i]+x*d[a][i+1]+m*d[a][i+2]+v*d[a][i+3],l=g*d[a+1][i]+x*d[a+1][i+1]+m*d[a+1][i+2]+v*d[a+1][i+3],s=g*d[a+2][i]+x*d[a+2][i+1]+m*d[a+2][i+2]+v*d[a+2][i+3],c=g*d[a+3][i]+x*d[a+3][i+1]+m*d[a+3][i+2]+v*d[a+3][i+3],t[h]=k*o+3*(M*n*l+w*b*s)+T*c;return t}:t?function(t,i,a,r,n){var o,l,s,c;t||(t=[]),i*=3;var d=r*r,h=1-r,f=h*h,p=h*r*2,u=-3*f,y=3*(f-p),g=3*(p-d),x=3*d,m=1-n;for(s=0;s<e.length;s++)o=u*(c=e[s])[a][i]+y*c[a][i+1]+g*c[a][i+2]+x*c[a][i+3],l=u*c[a+1][i]+y*c[a+1][i+1]+g*c[a+1][i+2]+x*c[a+1][i+3],t[s]=m*o+n*l;return t}:i?function(t,i,a,r,n){var o,l,s,c,d,h;t||(t=[]),a*=3;var f=n*n,p=f*n,u=1-n,y=u*u,g=y*u;for(d=0;d<e.length;d++)o=(h=e[d])[a][i+1]-h[a][i],l=h[a+1][i+1]-h[a+1][i],s=h[a+2][i+1]-h[a+2][i],c=h[a+3][i+1]-h[a+3][i],t[d]=g*o+3*(y*n*l+u*f*s)+p*c;return t}:function(t,i,a,r,n){var o,l,s,c;t||(t=[]);var d=1-n;for(s=0;s<e.length;s++)o=(c=e[s])[a][i+1]-c[a][i],l=c[a+1][i+1]-c[a+1][i],t[s]=d*o+n*l;return t}}},1584:function(e,t,i){"use strict";e.exports=function(e,t,i){return t&&i?function(t,i,a,r,n){var o,l,s,c,d,h;t||(t=[]),i*=3,a*=3;var f=r*r,p=f*r,u=1-r,y=u*u,g=y*u,x=n*n,m=1-n,v=m*m,b=m*n*2,T=-3*v,w=3*(v-b),M=3*(b-x),k=3*x;for(h=0;h<e.length;h++)o=T*(d=e[h])[a][i]+w*d[a+1][i]+M*d[a+2][i]+k*d[a+3][i],l=T*d[a][i+1]+w*d[a+1][i+1]+M*d[a+2][i+1]+k*d[a+3][i+1],s=T*d[a][i+2]+w*d[a+1][i+2]+M*d[a+2][i+2]+k*d[a+3][i+2],c=T*d[a][i+3]+w*d[a+1][i+3]+M*d[a+2][i+3]+k*d[a+3][i+3],t[h]=g*o+3*(y*r*l+u*f*s)+p*c;return t}:t?function(t,i,a,r,n){var o,l,s,c,d,h;t||(t=[]),i*=3;var f=n*n,p=f*n,u=1-n,y=u*u,g=y*u;for(d=0;d<e.length;d++)o=(h=e[d])[a+1][i]-h[a][i],l=h[a+1][i+1]-h[a][i+1],s=h[a+1][i+2]-h[a][i+2],c=h[a+1][i+3]-h[a][i+3],t[d]=g*o+3*(y*n*l+u*f*s)+p*c;return t}:i?function(t,i,a,r,n){var o,l,s,c;t||(t=[]),a*=3;var d=1-r,h=n*n,f=1-n,p=f*f,u=f*n*2,y=-3*p,g=3*(p-u),x=3*(u-h),m=3*h;for(s=0;s<e.length;s++)o=y*(c=e[s])[a][i]+g*c[a+1][i]+x*c[a+2][i]+m*c[a+3][i],l=y*c[a][i+1]+g*c[a+1][i+1]+x*c[a+2][i+1]+m*c[a+3][i+1],t[s]=d*o+r*l;return t}:function(t,i,a,r,n){var o,l,s,c;t||(t=[]);var d=1-r;for(s=0;s<e.length;s++)o=(c=e[s])[a+1][i]-c[a][i],l=c[a+1][i+1]-c[a][i+1],t[s]=d*o+r*l;return t}}},554:function(e,t,i){"use strict";var a=i(383),r=i(378),n=i(388).BADNUM;e.exports=function(e,t,i,o){var l,s,c,d,h,f;function p(e){if(a(e))return+e}if(t&&t.transpose){for(l=0,h=0;h<e.length;h++)l=Math.max(l,e[h].length);if(0===l)return!1;c=function(e){return e.length},d=function(e,t,i){return(e[i]||[])[t]}}else l=e.length,c=function(e,t){return e[t].length},d=function(e,t,i){return(e[t]||[])[i]};var u=function(e,t,i){return t===n||i===n?n:d(e,t,i)};function y(e){if(t&&"carpet"!==t.type&&"contourcarpet"!==t.type&&e&&"category"===e.type&&t["_"+e._id.charAt(0)].length){var i=e._id.charAt(0),a={},o=t["_"+i+"CategoryMap"]||t[i];for(h=0;h<o.length;h++)a[o[h]]=h;return function(t){var i=a[e._categories[t]];return i+1?i:n}}return r.identity}var g=y(i),x=y(o);o&&"category"===o.type&&(l=o._categories.length);var m=new Array(l);for(h=0;h<l;h++)for(s=i&&"category"===i.type?i._categories.length:c(e,h),m[h]=new Array(s),f=0;f<s;f++)m[h][f]=p(u(e,x(h),g(f)));return m}},555:function(e,t,i){"use strict";var a=i(378),r=i(388).BADNUM;e.exports=function(e,t,i,n,o,l){var s,c,d,h,f=e._length,p=t.makeCalcdata(e,n),u=i.makeCalcdata(e,o),y=e.text,g=void 0!==y&&a.isArray1D(y),x=e.hovertext,m=void 0!==x&&a.isArray1D(x),v=a.distinctVals(p),b=v.vals,T=a.distinctVals(u),w=T.vals,M=[],k=w.length,_=b.length;for(s=0;s<l.length;s++)M[s]=a.init2dArray(k,_);g&&(d=a.init2dArray(k,_)),m&&(h=a.init2dArray(k,_));var j=a.init2dArray(k,_);for(s=0;s<f;s++)if(p[s]!==r&&u[s]!==r){var A=a.findBin(p[s]+v.minDiff/2,b),S=a.findBin(u[s]+T.minDiff/2,w);for(c=0;c<l.length;c++){var I=e[l[c]];M[c][S][A]=I[s],j[S][A]=s}g&&(d[S][A]=y[s]),m&&(h[S][A]=x[s])}for(e["_"+n]=b,e["_"+o]=w,c=0;c<l.length;c++)e["_"+l[c]]=M[c];g&&(e._text=d),m&&(e._hovertext=h),t&&"category"===t.type&&(e["_"+n+"CategoryMap"]=b.map((function(e){return t._categories[e]}))),i&&"category"===i.type&&(e["_"+o+"CategoryMap"]=w.map((function(e){return i._categories[e]}))),e._after2before=j}}}]);