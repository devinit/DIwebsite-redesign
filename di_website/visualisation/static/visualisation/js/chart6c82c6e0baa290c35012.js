(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1095:function(e,t,r){"use strict";e.exports={attributes:r(627),layoutAttributes:r(791),supplyDefaults:r(645).supplyDefaults,crossTraceDefaults:r(645).crossTraceDefaults,supplyLayoutDefaults:r(916),calc:r(1096),crossTraceCalc:r(740).crossTraceCalc,colorbar:r(633),arraysToCalcdata:r(680),plot:r(721).plot,style:r(653).style,styleOnSelect:r(653).styleOnSelect,hoverPoints:r(741).hoverPoints,eventData:r(1097),selectPoints:r(742),moduleType:"trace",name:"bar",basePlotModule:r(626),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{description:["The data visualized by the span of the bars is set in `y`","if `orientation` is set th *v* (the default)","and the labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}},1096:function(e,t,r){"use strict";var a=r(105),n=r(79).hasColorscale,o=r(210),i=r(680),s=r(631);e.exports=function(e,t){var r,l,c=a.getFromId(e,t.xaxis||"x"),u=a.getFromId(e,t.yaxis||"y"),f={msUTC:!(!t.base&&0!==t.base)};"h"===t.orientation?(r=c.makeCalcdata(t,"x",f),l=u.makeCalcdata(t,"y")):(r=u.makeCalcdata(t,"y",f),l=c.makeCalcdata(t,"x"));for(var d=Math.min(l.length,r.length),p=new Array(d),h=0;h<d;h++)p[h]={p:l[h],s:r[h]},t.ids&&(p[h].id=String(t.ids[h]));return n(t,"marker")&&o(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),n(t,"marker.line")&&o(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),i(p,t),s(p,t),p}},1097:function(e,t,r){"use strict";e.exports=function(e,t,r){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),"h"===r.orientation?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},231:function(e,t,r){"use strict";e.exports=r(1095)},627:function(e,t,r){"use strict";var a=r(207),n=r(150).hovertemplateAttrs,o=r(150).texttemplateAttrs,i=r(111),s=r(46),l=r(657),c=r(32).extendFlat,u=s({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),f=c({},a.marker.line.width,{dflt:0}),d=c({width:f,editType:"calc"},i("marker.line")),p=c({line:d,editType:"calc"},i("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,role:"style",editType:"style",description:"Sets the opacity of the bars."}});e.exports={x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,text:a.text,texttemplate:o({editType:"plot"},{keys:l.eventDataKeys}),hovertext:a.hovertext,hovertemplate:n({},{keys:l.eventDataKeys}),textposition:{valType:"enumerated",role:"info",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",role:"info",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",role:"info",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:c({},u,{description:"Sets the font used for `text`."}),insidetextfont:c({},u,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:c({},u,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],role:"info",dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:c({},a.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",role:"info",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,role:"info",editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:p,offsetgroup:{valType:"string",role:"info",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",role:"info",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},selected:{marker:{opacity:a.selected.marker.opacity,color:a.selected.marker.color,editType:"style"},textfont:a.selected.textfont,editType:"style"},unselected:{marker:{opacity:a.unselected.marker.opacity,color:a.unselected.marker.color,editType:"style"},textfont:a.unselected.textfont,editType:"style"},r:a.r,t:a.t,_deprecated:{bardir:{valType:"enumerated",role:"info",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}}},631:function(e,t,r){"use strict";var a=r(6);e.exports=function(e,t){a.isArrayOrTypedArray(t.selectedpoints)&&a.tagSelected(e,t)}},633:function(e,t,r){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},637:function(e,t,r){"use strict";var a=r(24),n=r(6);function o(e){return"_"+e+"Text_minsize"}e.exports={recordMinTextSize:function(e,t,r){if(r.uniformtext.mode){var a=o(e),n=r.uniformtext.minsize,i=t.scale*t.fontSize;t.hide=i<n,r[a]=r[a]||1/0,t.hide||(r[a]=Math.min(r[a],Math.max(i,n)))}},clearMinTextSize:function(e,t){t[o(e)]=void 0},resizeText:function(e,t,r){var o=e._fullLayout,i=o["_"+r+"Text_minsize"];if(i){var s,l="hide"===o.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":s="g.slice";break;case"treemap":s="g.slice, g.pathbar";break;default:s="g.points > g.point"}t.selectAll(s).each((function(e){var t=e.transform;t&&(t.scale=l&&t.hide?0:i/t.fontSize,a.select(this).select("text").attr("transform",n.getTextTransform(t)))}))}}}},645:function(e,t,r){"use strict";var a=r(6),n=r(57),o=r(23),i=r(647),s=r(693),l=r(110).getAxisGroup,c=r(627),u=a.coerceFont;function f(e,t,r,a){var n=t.orientation,o=t[{v:"x",h:"y"}[n]+"axis"],i=l(r,o)+n,s=r._alignmentOpts||{},c=a("alignmentgroup"),u=s[i];u||(u=s[i]={});var f=u[c];f?f.traces.push(t):f=u[c]={traces:[t],alignmentIndex:Object.keys(u).length,offsetGroups:{}};var d=a("offsetgroup"),p=f.offsetGroups,h=p[d];d&&(h||(h=p[d]={offsetIndex:Object.keys(p).length}),t._offsetIndex=h.offsetIndex)}function d(e,t,r,n,o,i){var s=!(!1===(i=i||{}).moduleHasSelected),l=!(!1===i.moduleHasUnselected),c=!(!1===i.moduleHasConstrain),f=!(!1===i.moduleHasCliponaxis),d=!(!1===i.moduleHasTextangle),p=!(!1===i.moduleHasInsideanchor),h=!!i.hasPathbar,v=Array.isArray(o)||"auto"===o,m=v||"inside"===o,x=v||"outside"===o;if(m||x){var g=u(n,"textfont",r.font),y=a.extendFlat({},g),b=!(e.textfont&&e.textfont.color);if(b&&delete y.color,u(n,"insidetextfont",y),h){var w=a.extendFlat({},g);b&&delete w.color,u(n,"pathbar.textfont",w)}x&&u(n,"outsidetextfont",g),s&&n("selected.textfont.color"),l&&n("unselected.textfont.color"),c&&n("constraintext"),f&&n("cliponaxis"),d&&n("textangle"),n("texttemplate")}m&&p&&n("insidetextanchor")}e.exports={supplyDefaults:function(e,t,r,l){function u(r,n){return a.coerce(e,t,c,r,n)}if(i(e,t,l,u)){u("orientation",t.x&&!t.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var f=u("textposition");d(e,t,l,u,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(e,t,u,r,l);var p=(t.marker.line||{}).color,h=o.getComponentMethod("errorbars","supplyDefaults");h(e,t,p||n.defaultLine,{axis:"y"}),h(e,t,p||n.defaultLine,{axis:"x",inherit:"y"}),a.coerceSelectionMarkerOpacity(t,u)}else t.visible=!1},crossTraceDefaults:function(e,t){var r;function n(e){return a.coerce(r._input,r,c,e)}if("group"===t.barmode)for(var o=0;o<e.length;o++)"bar"===(r=e[o]).type&&(r._input,f(0,r,t,n))},handleGroupingDefaults:f,handleText:d}},647:function(e,t,r){"use strict";var a=r(6),n=r(23);e.exports=function(e,t,r,o){var i,s=o("x"),l=o("y");if(n.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),s){var c=a.minRowLength(s);l?i=Math.min(c,a.minRowLength(l)):(i=c,o("y0"),o("dy"))}else{if(!l)return 0;i=a.minRowLength(l),o("x0"),o("dx")}return t._length=i,i}},653:function(e,t,r){"use strict";var a=r(24),n=r(57),o=r(106),i=r(6),s=r(23),l=r(637).resizeText,c=r(627),u=c.textfont,f=c.insidetextfont,d=c.outsidetextfont,p=r(667);function h(e,t,r){o.pointStyle(e.selectAll("path"),t,r),v(e,t,r)}function v(e,t,r){e.selectAll("text").each((function(e){var n=a.select(this),s=i.ensureUniformFontSize(r,m(n,e,t,r));o.font(n,s)}))}function m(e,t,r,a){var n=a._fullLayout.font,o=r.textfont;if(e.classed("bartext-inside")){var i=w(t,r);o=g(r,t.i,n,i)}else e.classed("bartext-outside")&&(o=y(r,t.i,n));return o}function x(e,t,r){return b(u,e.textfont,t,r)}function g(e,t,r,a){var o=x(e,t,r);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(o={color:n.contrast(a),family:o.family,size:o.size}),b(f,e.insidetextfont,t,o)}function y(e,t,r){var a=x(e,t,r);return b(d,e.outsidetextfont,t,a)}function b(e,t,r,a){t=t||{};var n=p.getValue(t.family,r),o=p.getValue(t.size,r),i=p.getValue(t.color,r);return{family:p.coerceString(e.family,n,a.family),size:p.coerceNumber(e.size,o,a.size),color:p.coerceColor(e.color,i,a.color)}}function w(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mc||t.marker.color}e.exports={style:function(e){var t=a.select(e).selectAll("g.barlayer").selectAll("g.trace");l(e,t,"bar");var r=t.size(),n=e._fullLayout;t.style("opacity",(function(e){return e[0].trace.opacity})).each((function(e){("stack"===n.barmode&&r>1||0===n.bargap&&0===n.bargroupgap&&!e[0].trace.marker.line.width)&&a.select(this).attr("shape-rendering","crispEdges")})),t.selectAll("g.points").each((function(t){h(a.select(this),t[0].trace,e)})),s.getComponentMethod("errorbars","style")(t)},styleTextPoints:v,styleOnSelect:function(e,t,r){var n=t[0].trace;n.selectedpoints?function(e,t,r){o.selectedPointStyle(e.selectAll("path"),t),function(e,t,r){e.each((function(e){var n,s=a.select(this);if(e.selected){n=i.ensureUniformFontSize(r,m(s,e,t,r));var l=t.selected.textfont&&t.selected.textfont.color;l&&(n.color=l),o.font(s,n)}else o.selectedTextStyle(s,t)}))}(e.selectAll("text"),t,r)}(r,n,e):(h(r,n,e),s.getComponentMethod("errorbars","style")(r))},getInsideTextFont:g,getOutsideTextFont:y,getBarColor:w,resizeText:l}},657:function(e,t,r){"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},667:function(e,t,r){"use strict";var a=r(12),n=r(60),o=r(6).isArrayOrTypedArray;t.coerceString=function(e,t,r){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==r?r:e.dflt},t.coerceNumber=function(e,t,r){if(a(t)){t=+t;var n=e.min,o=e.max;if(!(void 0!==n&&t<n||void 0!==o&&t>o))return t}return void 0!==r?r:e.dflt},t.coerceColor=function(e,t,r){return n(t).isValid()?t:void 0!==r?r:e.dflt},t.coerceEnumerated=function(e,t,r){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==r?r:e.dflt},t.getValue=function(e,t){var r;return Array.isArray(e)?t<e.length&&(r=e[t]):r=e,r},t.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:o(e.marker.line.width)?0:e.marker.line.width}},680:function(e,t,r){"use strict";var a=r(6);e.exports=function(e,t){for(var r=0;r<e.length;r++)e[r].i=r;a.mergeArray(t.text,e,"tx"),a.mergeArray(t.hovertext,e,"htx");var n=t.marker;if(n){a.mergeArray(n.opacity,e,"mo",!0),a.mergeArray(n.color,e,"mc");var o=n.line;o&&(a.mergeArray(o.color,e,"mlc"),a.mergeArrayCastPositive(o.width,e,"mlw"))}}},693:function(e,t,r){"use strict";var a=r(57),n=r(79).hasColorscale,o=r(151);e.exports=function(e,t,r,i,s){r("marker.color",i),n(e,"marker")&&o(e,t,s,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",a.defaultLine),n(e,"marker.line")&&o(e,t,s,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),r("selected.marker.color"),r("unselected.marker.color")}},721:function(e,t,r){"use strict";var a=r(24),n=r(12),o=r(6),i=r(108),s=r(57),l=r(106),c=r(23),u=r(105).tickText,f=r(637),d=f.recordMinTextSize,p=f.clearMinTextSize,h=r(653),v=r(667),m=r(657),x=r(627),g=x.text,y=x.textposition,b=r(215).appendArrayPointValue,w=m.TEXTPAD;function T(e){return e.id}function k(e){if(e.ids)return T}function M(e,t){return e<t?1:-1}function S(e,t,r,a){var n;return!t.uniformtext.mode&&A(r)?(a&&(n=a()),e.transition().duration(r.duration).ease(r.easing).each("end",(function(){n&&n()})).each("interrupt",(function(){n&&n()}))):e}function A(e){return e&&e.duration>0}function _(e){return"auto"===e?0:e}function L(e,t){var r=Math.PI/180*t,a=Math.abs(Math.sin(r)),n=Math.abs(Math.cos(r));return{x:e.width*n+e.height*a,y:e.width*a+e.height*n}}function z(e,t,r,a,n,o){var i=!!o.isHorizontal,s=!!o.constrained,l=o.angle||0,c=o.anchor||"end",u="end"===c,f="start"===c,d=((o.leftToRight||0)+1)/2,p=1-d,h=n.width,v=n.height,m=Math.abs(t-e),x=Math.abs(a-r),g=m>2*w&&x>2*w?w:0;m-=2*g,x-=2*g;var y=_(l);"auto"!==l||h<=m&&v<=x||!(h>m||v>x)||(h>x||v>m)&&h<v==m<x||(y+=90);var b=L(n,y),T=1;s&&(T=Math.min(1,m/b.x,x/b.y));var k=n.left*p+n.right*d,S=(n.top+n.bottom)/2,A=(e+w)*p+(t-w)*d,z=(r+a)/2,D=0,C=0;if(f||u){var P=(i?b.x:b.y)/2,O=i?M(e,t):M(r,a);i?f?(A=e+O*g,D=-O*P):(A=t-O*g,D=O*P):f?(z=r+O*g,C=-O*P):(z=a-O*g,C=O*P)}return{textX:k,textY:S,targetX:A,targetY:z,anchorX:D,anchorY:C,scale:T,rotate:y}}e.exports={plot:function(e,t,r,f,m,x){var T=t.xaxis,D=t.yaxis,C=e._fullLayout;m||(m={mode:C.barmode,norm:C.barmode,gap:C.bargap,groupgap:C.bargroupgap},p("bar",C));var P=o.makeTraceGroups(f,r,"trace bars").each((function(r){var c=a.select(this),f=r[0].trace,p="waterfall"===f.type,P="funnel"===f.type,O="bar"===f.type||P,V=0;p&&f.connector.visible&&"between"===f.connector.mode&&(V=f.connector.line.width/2);var I="h"===f.orientation,N=A(m),B=o.ensureSingle(c,"g","points"),j=k(f),F=B.selectAll("g.point").data(o.identity,j);F.enter().append("g").classed("point",!0),F.exit().remove(),F.each((function(c,p){var k,A,P=a.select(this),B=function(e,t,r,a){var n=[],o=[],i=a?t:r,s=a?r:t;return n[0]=i.c2p(e.s0,!0),o[0]=s.c2p(e.p0,!0),n[1]=i.c2p(e.s1,!0),o[1]=s.c2p(e.p1,!0),a?[n,o]:[o,n]}(c,T,D,I),j=B[0][0],F=B[0][1],H=B[1][0],R=B[1][1],W=0==(I?F-j:R-H);if(W&&O&&v.getLineWidth(f,c)&&(W=!1),W||(W=!(n(j)&&n(F)&&n(H)&&n(R))),c.isBlank=W,W&&(I?F=j:R=H),V&&!W&&(I?(j-=M(j,F)*V,F+=M(j,F)*V):(H-=M(H,R)*V,R+=M(H,R)*V)),"waterfall"===f.type){if(!W){var U=f[c.dir].marker;k=U.line.width,A=U.color}}else k=v.getLineWidth(f,c),A=c.mc||f.marker.color;function E(e){var t=a.round(k/2%1,2);return 0===m.gap&&0===m.groupgap?a.round(Math.round(e)-t,2):e}if(!e._context.staticPlot){var G=s.opacity(A)<1||k>.01?E:function(e,t,r){return r&&e===t?e:Math.abs(e-t)>=2?E(e):e>t?Math.ceil(e):Math.floor(e)};j=G(j,F,I),F=G(F,j,I),H=G(H,R,!I),R=G(R,H,!I)}var X=S(o.ensureSingle(P,"path"),C,m,x);if(X.style("vector-effect","non-scaling-stroke").attr("d",isNaN((F-j)*(R-H))?"M0,0Z":"M"+j+","+H+"V"+R+"H"+F+"V"+H+"Z").call(l.setClipUrl,t.layerClipId,e),!C.uniformtext.mode&&N){var Y=l.makePointStyleFns(f);l.singlePointStyle(c,X,f,Y,e)}!function(e,t,r,a,n,s,c,f,p,m,x){var T,k=t.xaxis,A=t.yaxis,D=e._fullLayout;function C(t,r,a){return o.ensureSingle(t,"text").text(r).attr({class:"bartext bartext-"+T,"text-anchor":"middle","data-notex":1}).call(l.font,a).call(i.convertToTspans,e)}var P=a[0].trace,O="h"===P.orientation,V=function(e,t,r,a,n){var i,s=t[0].trace;i=s.texttemplate?function(e,t,r,a,n){var i=t[0].trace,s=o.castOption(i,r,"texttemplate");if(!s)return"";var l,c,f,d,p="waterfall"===i.type,h="funnel"===i.type;"h"===i.orientation?(l="y",c=n,f="x",d=a):(l="x",c=a,f="y",d=n);function v(e){return u(d,+e,!0).text}var m=t[r],x={};x.label=m.p,x.labelLabel=x[l+"Label"]=(g=m.p,u(c,g,!0).text);var g;var y=o.castOption(i,m.i,"text");(0===y||y)&&(x.text=y);x.value=m.s,x.valueLabel=x[f+"Label"]=v(m.s);var w={};b(w,i,m.i),p&&(x.delta=+m.rawS||m.s,x.deltaLabel=v(x.delta),x.final=m.v,x.finalLabel=v(x.final),x.initial=x.final-x.delta,x.initialLabel=v(x.initial));h&&(x.value=m.s,x.valueLabel=v(x.value),x.percentInitial=m.begR,x.percentInitialLabel=o.formatPercent(m.begR),x.percentPrevious=m.difR,x.percentPreviousLabel=o.formatPercent(m.difR),x.percentTotal=m.sumR,x.percenTotalLabel=o.formatPercent(m.sumR));var T=o.castOption(i,m.i,"customdata");T&&(x.customdata=T);return o.texttemplateString(s,x,e._d3locale,w,x,i._meta||{})}(e,t,r,a,n):s.textinfo?function(e,t,r,a){var n=e[0].trace,i="h"===n.orientation,s="waterfall"===n.type,l="funnel"===n.type;function c(e){return u(i?r:a,+e,!0).text}var f,d=n.textinfo,p=e[t],h=d.split("+"),v=[],m=function(e){return-1!==h.indexOf(e)};m("label")&&v.push((x=e[t].p,u(i?a:r,x,!0).text));var x;m("text")&&(0===(f=o.castOption(n,p.i,"text"))||f)&&v.push(f);if(s){var g=+p.rawS||p.s,y=p.v,b=y-g;m("initial")&&v.push(c(b)),m("delta")&&v.push(c(g)),m("final")&&v.push(c(y))}if(l){m("value")&&v.push(c(p.s));var w=0;m("percent initial")&&w++,m("percent previous")&&w++,m("percent total")&&w++;var T=w>1;m("percent initial")&&(f=o.formatPercent(p.begR),T&&(f+=" of initial"),v.push(f)),m("percent previous")&&(f=o.formatPercent(p.difR),T&&(f+=" of previous"),v.push(f)),m("percent total")&&(f=o.formatPercent(p.sumR),T&&(f+=" of total"),v.push(f))}return v.join("<br>")}(t,r,a,n):v.getValue(s.text,r);return v.coerceString(g,i)}(D,a,n,k,A);T=function(e,t){var r=v.getValue(e.textposition,t);return v.coerceEnumerated(y,r)}(P,n);var I="stack"===m.mode||"relative"===m.mode,N=a[n],B=!I||N._outmost;if(!V||"none"===T||(N.isBlank||s===c||f===p)&&("auto"===T||"inside"===T))return void r.select("text").remove();var j=D.font,F=h.getBarColor(a[n],P),H=h.getInsideTextFont(P,n,j,F),R=h.getOutsideTextFont(P,n,j),W=r.datum();O?"log"===k.type&&W.s0<=0&&(s=k.range[0]<k.range[1]?0:k._length):"log"===A.type&&W.s0<=0&&(f=A.range[0]<A.range[1]?A._length:0);var U,E,G,X,Y,K=Math.abs(c-s)-2*w,J=Math.abs(p-f)-2*w;"outside"===T&&(B||N.hasB||(T="inside"));if("auto"===T)if(B){T="inside",Y=o.ensureUniformFontSize(e,H),U=C(r,V,Y),E=l.bBox(U.node()),G=E.width,X=E.height;var Z=G<=K&&X<=J,q=G<=J&&X<=K,Q=O?K>=G*(J/X):J>=X*(K/G);G>0&&X>0&&(Z||q||Q)?T="inside":(T="outside",U.remove(),U=null)}else T="inside";if(!U){Y=o.ensureUniformFontSize(e,"outside"===T?R:H);var $=(U=C(r,V,Y)).attr("transform");if(U.attr("transform",""),E=l.bBox(U.node()),G=E.width,X=E.height,U.attr("transform",$),G<=0||X<=0)return void U.remove()}var ee,te,re=P.textangle;"outside"===T?(te="both"===P.constraintext||"outside"===P.constraintext,ee=function(e,t,r,a,n,o){var i,s=!!o.isHorizontal,l=!!o.constrained,c=o.angle||0,u=n.width,f=n.height,d=Math.abs(t-e),p=Math.abs(a-r);i=s?p>2*w?w:0:d>2*w?w:0;var h=1;l&&(h=s?Math.min(1,p/f):Math.min(1,d/u));var v=_(c),m=L(n,v),x=(s?m.x:m.y)/2,g=(n.left+n.right)/2,y=(n.top+n.bottom)/2,b=(e+t)/2,T=(r+a)/2,k=0,S=0,A=s?M(t,e):M(r,a);s?(b=t-A*i,k=A*x):(T=a+A*i,S=-A*x);return{textX:g,textY:y,targetX:b,targetY:T,anchorX:k,anchorY:S,scale:h,rotate:v}}(s,c,f,p,E,{isHorizontal:O,constrained:te,angle:re})):(te="both"===P.constraintext||"inside"===P.constraintext,ee=z(s,c,f,p,E,{isHorizontal:O,constrained:te,angle:re,anchor:P.insidetextanchor}));ee.fontSize=Y.size,d(P.type,ee,D),N.transform=ee,S(U,D,m,x).attr("transform",o.getTextTransform(ee))}(e,t,P,r,p,j,F,H,R,m,x),t.layerClipId&&l.hideOutsideRangePoint(c,P.select("text"),T,D,f.xcalendar,f.ycalendar)}));var H=!1===f.cliponaxis;l.setClipUrl(c,H?null:t.layerClipId,e)}));c.getComponentMethod("errorbars","plot")(e,P,t,m)},toMoveInsideBar:z}},740:function(e,t,r){"use strict";var a=r(12),n=r(6).isArrayOrTypedArray,o=r(25).BADNUM,i=r(23),s=r(105),l=r(110).getAxisGroup,c=r(883);function u(e,t,r,i,u){if(i.length){var b,w,T,k;switch(function(e,t){var r,o;for(r=0;r<t.length;r++){var i,s=t[r],l=s[0].trace,c="funnel"===l.type?l._base:l.base,u="h"===l.orientation?l.xcalendar:l.ycalendar,f="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(n(c)){for(o=0;o<Math.min(c.length,s.length);o++)i=f(c[o],0,u),a(i)?(s[o].b=+i,s[o].hasB=1):s[o].b=0;for(;o<s.length;o++)s[o].b=0}else{i=f(c,0,u);var d=a(i);for(i=d?i:0,o=0;o<s.length;o++)s[o].b=i,d&&(s[o].hasB=1)}}}(r,i),u.mode){case"overlay":f(t,r,i,u);break;case"group":for(b=[],w=[],T=0;T<i.length;T++)void 0===(k=i[T])[0].trace.offset?w.push(k):b.push(k);w.length&&function(e,t,r,a,n){var i=new c(a,{sepNegVal:!1,overlapNoMerge:!n.norm});(function(e,t,r,a){for(var n=e._fullLayout,o=r.positions,i=r.distinctPositions,s=r.minDiff,c=r.traces,u=c.length,f=o.length!==i.length,d=s*(1-a.gap),m=l(n,t._id)+c[0][0].trace.orientation,x=n._alignmentOpts[m]||{},g=0;g<u;g++){var y,b,w=c[g],T=w[0].trace,k=x[T.alignmentgroup]||{},M=Object.keys(k.offsetGroups||{}).length,S=(y=M?d/M:f?d/u:d)*(1-(a.groupgap||0));b=M?((2*T._offsetIndex+1-M)*y-S)/2:f?((2*g+1-u)*y-S)/2:-S/2;var A=w[0].t;A.barwidth=S,A.poffset=b,A.bargroupwidth=d,A.bardelta=s}r.binWidth=c[0][0].t.barwidth/100,p(r),h(t,r),v(t,r,f)})(e,t,i,n),function(e){for(var t=e.traces,r=0;r<t.length;r++){var a=t[r];if(void 0===a[0].trace.base)for(var n=new c([a],{sepNegVal:!0,overlapNoMerge:!0}),i=0;i<a.length;i++){var s=a[i];if(s.p!==o){var l=n.put(s.p,s.b+s.s);l&&(s.b=l)}}}}(i),n.norm?(x(i),g(r,i,n)):m(r,i)}(e,t,r,w,u),b.length&&f(t,r,b,u);break;case"stack":case"relative":for(b=[],w=[],T=0;T<i.length;T++)void 0===(k=i[T])[0].trace.base?w.push(k):b.push(k);w.length&&function(e,t,r,a,n){var i=new c(a,{sepNegVal:"relative"===n.mode,overlapNoMerge:!(n.norm||"stack"===n.mode||"relative"===n.mode)});d(t,i,n),function(e,t,r){var a,n,i,l,c,u,f=y(e),d=t.traces;for(l=0;l<d.length;l++)if(a=d[l],"funnel"===(n=a[0].trace).type)for(c=0;c<a.length;c++)(u=a[c]).s!==o&&t.put(u.p,-.5*u.s);for(l=0;l<d.length;l++){a=d[l],n=a[0].trace,i="funnel"===n.type;var p=[];for(c=0;c<a.length;c++)if((u=a[c]).s!==o){var h;h=i?u.s:u.s+u.b;var v=t.put(u.p,h),m=v+h;u.b=v,u[f]=m,r.norm||(p.push(m),u.hasB&&p.push(v))}r.norm||(n._extremes[e._id]=s.findExtremes(e,p,{tozero:!0,padded:!0}))}}(r,i,n);for(var l=0;l<a.length;l++)for(var u=a[l],f=0;f<u.length;f++){var p=u[f];if(p.s!==o)p.b+p.s===i.get(p.p,p.s)&&(p._outmost=!0)}n.norm&&g(r,i,n)}(0,t,r,w,u),b.length&&f(t,r,b,u)}!function(e,t){var r,n,o,i=y(t),s={},l=1/0,c=-1/0;for(r=0;r<e.length;r++)for(o=e[r],n=0;n<o.length;n++){var u=o[n].p;a(u)&&(l=Math.min(l,u),c=Math.max(c,u))}var f=1e4/(c-l),d=s.round=function(e){return String(Math.round(f*(e-l)))};for(r=0;r<e.length;r++){(o=e[r])[0].t.extents=s;var p=o[0].t.poffset,h=Array.isArray(p);for(n=0;n<o.length;n++){var v=o[n],m=v[i]-v.w/2;if(a(m)){var x=v[i]+v.w/2,g=d(v.p);s[g]?s[g]=[Math.min(m,s[g][0]),Math.max(x,s[g][1])]:s[g]=[m,x]}v.p0=v.p+(h?p[n]:p),v.p1=v.p0+v.w,v.s0=v.b,v.s1=v.s0+v.s}}}(i,t)}}function f(e,t,r,a){for(var n=0;n<r.length;n++){var o=r[n],i=new c([o],{sepNegVal:!1,overlapNoMerge:!a.norm});d(e,i,a),a.norm?(x(i),g(t,i,a)):m(t,i)}}function d(e,t,r){for(var a=t.minDiff,n=t.traces,o=a*(1-r.gap),i=o*(1-(r.groupgap||0)),s=-i/2,l=0;l<n.length;l++){var c=n[l][0].t;c.barwidth=i,c.poffset=s,c.bargroupwidth=o,c.bardelta=a}t.binWidth=n[0][0].t.barwidth/100,p(t),h(e,t),v(e,t)}function p(e){var t,r,o=e.traces;for(t=0;t<o.length;t++){var i,s=o[t],l=s[0],c=l.trace,u=l.t,f=c._offset||c.offset,d=u.poffset;if(n(f)){for(i=Array.prototype.slice.call(f,0,s.length),r=0;r<i.length;r++)a(i[r])||(i[r]=d);for(r=i.length;r<s.length;r++)i.push(d);u.poffset=i}else void 0!==f&&(u.poffset=f);var p=c._width||c.width,h=u.barwidth;if(n(p)){var v=Array.prototype.slice.call(p,0,s.length);for(r=0;r<v.length;r++)a(v[r])||(v[r]=h);for(r=v.length;r<s.length;r++)v.push(h);if(u.barwidth=v,void 0===f){for(i=[],r=0;r<s.length;r++)i.push(d+(h-v[r])/2);u.poffset=i}}else void 0!==p&&(u.barwidth=p,void 0===f&&(u.poffset=d+(h-p)/2))}}function h(e,t){for(var r=t.traces,a=y(e),n=0;n<r.length;n++)for(var o=r[n],i=o[0].t,s=i.poffset,l=Array.isArray(s),c=i.barwidth,u=Array.isArray(c),f=0;f<o.length;f++){var d=o[f],p=d.w=u?c[f]:c;d[a]=d.p+(l?s[f]:s)+p/2}}function v(e,t,r){var a=t.traces,n=t.minDiff/2;s.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var o=0;o<a.length;o++){var i,l,c,u,f=a[o],d=f[0],p=d.trace,h=[];for(u=0;u<f.length;u++)l=(i=f[u]).p-n,c=i.p+n,h.push(l,c);if(p.width||p.offset){var v=d.t,m=v.poffset,x=v.barwidth,g=Array.isArray(m),y=Array.isArray(x);for(u=0;u<f.length;u++){i=f[u];var b=g?m[u]:m,w=y?x[u]:x;c=(l=i.p+b)+w,h.push(l,c)}}p._extremes[e._id]=s.findExtremes(e,h,{padded:!1})}}function m(e,t){for(var r=t.traces,a=y(e),n=0;n<r.length;n++){for(var o=r[n],i=o[0].trace,l=[],c=!1,u=0;u<o.length;u++){var f=o[u],d=f.b,p=d+f.s;f[a]=p,l.push(p),f.hasB&&l.push(d),f.hasB&&f.b||(c=!0)}i._extremes[e._id]=s.findExtremes(e,l,{tozero:c,padded:!0})}}function x(e){for(var t=e.traces,r=0;r<t.length;r++)for(var a=t[r],n=0;n<a.length;n++){var i=a[n];i.s!==o&&e.put(i.p,i.b+i.s)}}function g(e,t,r){var n=t.traces,i=y(e),l="fraction"===r.norm?1:100,c=l/1e9,u=e.l2c(e.c2l(0)),f="stack"===r.mode?l:u;function d(t){return a(e.c2l(t))&&(t<u-c||t>f+c||!a(u))}for(var p=0;p<n.length;p++){for(var h=n[p],v=h[0].trace,m=[],x=!1,g=!1,b=0;b<h.length;b++){var w=h[b];if(w.s!==o){var T=Math.abs(l/t.get(w.p,w.s));w.b*=T,w.s*=T;var k=w.b,M=k+w.s;w[i]=M,m.push(M),g=g||d(M),w.hasB&&(m.push(k),g=g||d(k)),w.hasB&&w.b||(x=!0)}}v._extremes[e._id]=s.findExtremes(e,m,{tozero:x,padded:g})}}function y(e){return e._id.charAt(0)}e.exports={crossTraceCalc:function(e,t){for(var r=t.xaxis,a=t.yaxis,n=e._fullLayout,o=e._fullData,s=e.calcdata,l=[],c=[],f=0;f<o.length;f++){var d=o[f];if(!0===d.visible&&i.traceIs(d,"bar")&&d.xaxis===r._id&&d.yaxis===a._id&&("h"===d.orientation?l.push(s[f]):c.push(s[f]),d._computePh))for(var p=e.calcdata[f],h=0;h<p.length;h++)"function"==typeof p[h].ph0&&(p[h].ph0=p[h].ph0()),"function"==typeof p[h].ph1&&(p[h].ph1=p[h].ph1())}var v={mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap};u(e,r,a,c,v),u(e,a,r,l,v)},setGroupPositions:u}},741:function(e,t,r){"use strict";var a=r(623),n=r(23),o=r(57),i=r(6).fillText,s=r(667).getLineWidth,l=r(105).hoverLabelText,c=r(25).BADNUM;function u(e,t,r,n){var o,s,u,f,d,p,h,v=e.cd,m=v[0].trace,x=v[0].t,g="closest"===n,y="waterfall"===m.type,b=e.maxHoverDistance;function w(e){return e[u]-e.w/2}function T(e){return e[u]+e.w/2}var k=g?w:function(e){return Math.min(w(e),e.p-x.bardelta/2)},M=g?T:function(e){return Math.max(T(e),e.p+x.bardelta/2)};function S(e,t){return a.inbox(e-o,t-o,b+Math.min(1,Math.abs(t-e)/h)-1)}function A(e){return S(k(e),M(e))}function _(e){var t=s,r=e.b,n=e[f];if(y){var o=Math.abs(e.rawS)||0;t>0?n+=o:t<0&&(n-=o)}return a.inbox(r-t,n-t,b+(n-t)/(n-r)-1)}"h"===m.orientation?(o=r,s=t,u="y",f="x",d=_,p=A):(o=t,s=r,u="x",f="y",p=_,d=A);var L=e[u+"a"],z=e[f+"a"];h=Math.abs(L.r2c(L.range[1])-L.r2c(L.range[0]));var D=a.getDistanceFunction(n,d,p,(function(e){return(d(e)+p(e))/2}));if(a.getClosest(v,D,e),!1!==e.index&&v[e.index].p!==c){g||(k=function(e){return Math.min(w(e),e.p-x.bargroupwidth/2)},M=function(e){return Math.max(T(e),e.p+x.bargroupwidth/2)});var C=v[e.index],P=m.base?C.b+C.s:C.s;e[f+"0"]=e[f+"1"]=z.c2p(C[f],!0),e[f+"LabelVal"]=P;var O=x.extents[x.extents.round(C.p)];return e[u+"0"]=L.c2p(g?k(C):O[0],!0),e[u+"1"]=L.c2p(g?M(C):O[1],!0),e[u+"LabelVal"]=C.p,e.labelLabel=l(L,e[u+"LabelVal"]),e.valueLabel=l(z,e[f+"LabelVal"]),e.spikeDistance=(_(C)+function(e){return S(w(e),T(e))}(C))/2-b,e[u+"Spike"]=L.c2p(C.p,!0),i(C,m,e),e.hovertemplate=m.hovertemplate,e}}function f(e,t){var r=t.mcc||e.marker.color,a=t.mlcc||e.marker.line.color,n=s(e,t);return o.opacity(r)?r:o.opacity(a)&&n?a:void 0}e.exports={hoverPoints:function(e,t,r,a){var o=u(e,t,r,a);if(o){var i=o.cd,s=i[0].trace,l=i[o.index];return o.color=f(s,l),n.getComponentMethod("errorbars","hoverInfo")(l,s,o),[o]}},hoverOnBars:u,getTraceColor:f}},742:function(e,t,r){"use strict";function a(e,t,r,a,n){var o=t.c2p(a?e.s0:e.p0,!0),i=t.c2p(a?e.s1:e.p1,!0),s=r.c2p(a?e.p0:e.s0,!0),l=r.c2p(a?e.p1:e.s1,!0);return n?[(o+i)/2,(s+l)/2]:a?[i,(s+l)/2]:[(o+i)/2,l]}e.exports=function(e,t){var r,n=e.cd,o=e.xaxis,i=e.yaxis,s=n[0].trace,l="funnel"===s.type,c="h"===s.orientation,u=[];if(!1===t)for(r=0;r<n.length;r++)n[r].selected=0;else for(r=0;r<n.length;r++){var f=n[r],d="ct"in f?f.ct:a(f,o,i,c,l);t.contains(d,!1,r,e)?(u.push({pointNumber:r,x:o.c2d(f.x),y:i.c2d(f.y)}),f.selected=1):f.selected=0}return u}},791:function(e,t,r){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",role:"info",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divided by the sum of all","values at that location coordinate.","*percent* is the same but multiplied by 100 to show percentages."].join(" ")},bargap:{valType:"number",min:0,max:1,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},883:function(e,t,r){"use strict";e.exports=o;var a=r(6).distinctVals,n=r(25).BADNUM;function o(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var r=1/0,o=[],i=0;i<e.length;i++){for(var s=e[i],l=0;l<s.length;l++){var c=s[l];c.p!==n&&o.push(c.p)}s[0]&&s[0].width1&&(r=Math.min(s[0].width1,r))}this.positions=o;var u=a(o);this.distinctPositions=u.vals,1===u.vals.length&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(u.minDiff,r),this.binWidth=this.minDiff,this.bins={}}o.prototype.put=function(e,t){var r=this.getLabel(e,t),a=this.bins[r]||0;return this.bins[r]=a+t,a},o.prototype.get=function(e,t){var r=this.getLabel(e,t);return this.bins[r]||0},o.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},916:function(e,t,r){"use strict";var a=r(23),n=r(105),o=r(6),i=r(791);e.exports=function(e,t,r){function s(r,a){return o.coerce(e,t,i,r,a)}for(var l=!1,c=!1,u=!1,f={},d=s("barmode"),p=0;p<r.length;p++){var h=r[p];if(a.traceIs(h,"bar")&&h.visible){if(l=!0,"group"===d){var v=h.xaxis+h.yaxis;f[v]&&(u=!0),f[v]=!0}if(h.visible&&"histogram"===h.type)"category"!==n.getFromId({_fullLayout:t},h["v"===h.orientation?"xaxis":"yaxis"]).type&&(c=!0)}}l?("overlay"!==d&&s("barnorm"),s("bargap",c&&!u?0:.2),s("bargroupgap")):delete t.barmode}}}]);