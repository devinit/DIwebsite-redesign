(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1054:function(e,t,a){"use strict";var r=a(6),i=a(217),n=r.deg2rad,o=r.rad2deg;e.exports=function(e,t,a){switch(i(e,a),e._id){case"x":case"radialaxis":!function(e,t){var a=t._subplot;e.setGeometry=function(){var t=e._rl[0],r=e._rl[1],i=a.innerRadius,n=(a.radius-i)/(r-t),o=i/n,s=t>r?function(e){return e<=0}:function(e){return e>=0};e.c2g=function(a){var r=e.c2l(a)-t;return(s(r)?r:0)+o},e.g2c=function(a){return e.l2c(a+t-o)},e.g2p=function(e){return e*n},e.c2p=function(t){return e.g2p(e.c2g(t))}}}(e,t);break;case"angularaxis":!function(e,t){var a=e.type;if("linear"===a){var i=e.d2c,s=e.c2d;e.d2c=function(e,t){return function(e,t){return"degrees"===t?n(e):e}(i(e),t)},e.c2d=function(e,t){return s(function(e,t){return"degrees"===t?o(e):e}(e,t))}}e.makeCalcdata=function(t,i){var n,o,s=t[i],l=t._length,c=function(a){return e.d2c(a,t.thetaunit)};if(s){if(r.isTypedArray(s)&&"linear"===a){if(l===s.length)return s;if(s.subarray)return s.subarray(0,l)}for(n=new Array(l),o=0;o<l;o++)n[o]=c(s[o])}else{var d=i+"0",u="d"+i,h=d in t?c(t[d]):0,f=t[u]?c(t[u]):(e.period||2*Math.PI)/l;for(n=new Array(l),o=0;o<l;o++)n[o]=h+o*f}return n},e.setGeometry=function(){var i,s,l,c,d=t.sector,u=d.map(n),h={clockwise:-1,counterclockwise:1}[e.direction],f=n(e.rotation),p=function(e){return h*e+f},g=function(e){return(e-f)/h};switch(a){case"linear":s=i=r.identity,c=n,l=o,e.range=r.isFullCircle(u)?[d[0],d[0]+360]:u.map(g).map(o);break;case"category":var v=e._categories.length,x=e.period?Math.max(e.period,v):v;0===x&&(x=1),s=c=function(e){return 2*e*Math.PI/x},i=l=function(e){return e*x/Math.PI/2},e.range=[0,x]}e.c2g=function(e){return p(s(e))},e.g2c=function(e){return i(g(e))},e.t2g=function(e){return p(c(e))},e.g2t=function(e){return l(g(e))}}}(e,t)}}},1055:function(e,t,a){"use strict";var r=a(6),i=a(753).tester,n=r.findIndexOfMin,o=r.isAngleInsideSector,s=r.angleDelta,l=r.angleDist;function c(e,t,a,r){var i,n,o=r[0],s=r[1],l=u(Math.sin(t)-Math.sin(e)),c=u(Math.cos(t)-Math.cos(e)),d=Math.tan(a),h=u(1/d),f=l/c,p=s-f*o;return h?l&&c?n=d*(i=p/(d-f)):c?(i=s*h,n=s):(i=o,n=o*d):l&&c?(i=0,n=p):c?(i=0,n=s):i=n=NaN,[i,n]}function d(e,t,a,i){return r.isFullCircle([t,a])?function(e,t){var a,r=t.length,i=new Array(r+1);for(a=0;a<r;a++){var n=t[a];i[a]=[e*Math.cos(n),e*Math.sin(n)]}return i[a]=i[0].slice(),i}(e,i):function(e,t,a,i){var s,d,u=i.length,h=[];function f(t){return[e*Math.cos(t),e*Math.sin(t)]}function p(e,t,a){return c(e,t,a,f(e))}function g(e){return r.mod(e,u)}function v(e){return o(e,[t,a])}var x=n(i,(function(e){return v(e)?l(e,t):1/0})),y=p(i[x],i[g(x-1)],t);for(h.push(y),s=x,d=0;d<u;s++,d++){var m=i[g(s)];if(!v(m))break;h.push(f(m))}var b=n(i,(function(e){return v(e)?l(e,a):1/0})),k=p(i[b],i[g(b+1)],a);return h.push(k),h.push([0,0]),h.push(h[0].slice()),h}(e,t,a,i)}function u(e){return Math.abs(e)>1e-10?e:0}function h(e,t,a){t=t||0,a=a||0;for(var r=e.length,i=new Array(r),n=0;n<r;n++){var o=e[n];i[n]=[t+o[0],a-o[1]]}return i}e.exports={isPtInsidePolygon:function(e,t,a,r,n){if(!o(t,r))return!1;var s,l;a[0]<a[1]?(s=a[0],l=a[1]):(s=a[1],l=a[0]);var c=i(d(s,r[0],r[1],n)),u=i(d(l,r[0],r[1],n)),h=[e*Math.cos(t),e*Math.sin(t)];return u.contains(h)&&!c.contains(h)},findPolygonOffset:function(e,t,a,r){for(var i=1/0,n=1/0,o=d(e,t,a,r),s=0;s<o.length;s++){var l=o[s];i=Math.min(i,l[0]),n=Math.min(n,-l[1])}return[i,n]},findEnclosingVertexAngles:function(e,t){var a=n(t,(function(t){var a=s(t,e);return a>0?a:1/0})),i=r.mod(a+1,t.length);return[t[a],t[i]]},findIntersectionXY:c,findXYatLength:function(e,t,a,r){var i=-t*a,n=t*t+1,o=2*(t*i-a),s=i*i+a*a-e*e,l=Math.sqrt(o*o-4*n*s),c=(-o+l)/(2*n),d=(-o-l)/(2*n);return[[c,t*c+i+r],[d,t*d+i+r]]},clampTiny:u,pathPolygon:function(e,t,a,r,i,n){return"M"+h(d(e,t,a,r),i,n).join("L")},pathPolygonAnnulus:function(e,t,a,r,i,n,o){var s,l;e<t?(s=e,l=t):(s=t,l=e);var c=h(d(s,a,r,i),n,o);return"M"+h(d(l,a,r,i),n,o).reverse().join("L")+"M"+c.join("L")}}},1056:function(e,t,a){"use strict";var r=a(112),i=a(61),n=a(624).attributes,o=a(6).extendFlat,s=a(109).overrideAll,l=s({color:i.color,showline:o({},i.showline,{dflt:!0}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:o({},i.showgrid,{dflt:!0}),gridcolor:i.gridcolor,gridwidth:i.gridwidth},"plot","from-root"),c=s({tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,layer:i.layer},"plot","from-root"),d={visible:o({},i.visible,{dflt:!0}),type:o({},i.type,{values:["-","linear","log","date","category"]}),autorange:o({},i.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",role:"style",editType:"calc",description:["If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","If *normal*, the range is computed in relation to the extrema","of the input data (same behavior as for cartesian axes)."].join(" ")},range:o({},i.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:i.categoryorder,categoryarray:i.categoryarray,angle:{valType:"angle",editType:"plot",role:"info",description:["Sets the angle (in degrees) from which the radial axis is drawn.","Note that by default, radial axis line on the theta=0 line","corresponds to a line pointing right (like what mathematicians prefer).","Defaults to the first `polar.sector` angle."].join(" ")},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot",role:"info",description:["Determines on which side of radial axis line","the tick and tick labels appear."].join(" ")},title:{text:o({},i.title.text,{editType:"plot",dflt:""}),font:o({},i.title.font,{editType:"plot"}),editType:"plot"},hoverformat:i.hoverformat,uirevision:{valType:"any",role:"info",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, `angle`, and `title` if in `editable: true` configuration.","Defaults to `polar<N>.uirevision`."].join(" ")},editType:"calc",_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}};o(d,l,c);var u={visible:o({},i.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",role:"info",editType:"calc",_noTemplating:!0,description:["Sets the angular axis type.","If *linear*, set `thetaunit` to determine the unit in which axis value are shown.","If *category, use `period` to set the number of integer coordinates around polar axis."].join(" ")},categoryorder:i.categoryorder,categoryarray:i.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",role:"info",editType:"calc",description:["Sets the format unit of the formatted *theta* values.","Has an effect only when `angularaxis.type` is *linear*."].join(" ")},period:{valType:"number",editType:"calc",min:0,role:"info",description:["Set the angular period.","Has an effect only when `angularaxis.type` is *category*."].join(" ")},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",role:"info",editType:"calc",description:["Sets the direction corresponding to positive angles."].join(" ")},rotation:{valType:"angle",editType:"calc",role:"info",description:["Sets that start position (in degrees) of the angular axis","By default, polar subplots with `direction` set to *counterclockwise*","get a `rotation` of *0*","which corresponds to due East (like what mathematicians prefer).","In turn, polar with `direction` set to *clockwise* get a rotation of *90*","which corresponds to due North (like on a compass),"].join(" ")},hoverformat:i.hoverformat,uirevision:{valType:"any",role:"info",editType:"none",description:["Controls persistence of user-driven changes in axis `rotation`.","Defaults to `polar<N>.uirevision`."].join(" ")},editType:"calc"};o(u,l,c),e.exports={domain:n({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],role:"info",editType:"plot",description:["Sets angular span of this polar subplot with two angles (in degrees).","Sector are assumed to be spanned in the counterclockwise direction","with *0* corresponding to rightmost limit of the polar subplot."].join(" ")},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot",role:"info",description:["Sets the fraction of the radius to cut out of the polar subplot."].join(" ")},bgcolor:{valType:"color",role:"style",editType:"plot",dflt:r.background,description:"Set the background color of the subplot"},radialaxis:d,angularaxis:u,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",role:"style",editType:"plot",description:["Determines if the radial axis grid lines and angular axis line are drawn","as *circular* sectors or as *linear* (polygon) sectors.","Has an effect only when the angular axis has `type` *category*.","Note that `radialaxis.angle` is snapped to the angle of the closest","vertex when `gridshape` is *circular*","(so that radial axis scale is the same as the data scale)."].join(" ")},uirevision:{valType:"any",role:"info",editType:"none",description:["Controls persistence of user-driven changes in axis attributes,","if not overridden in the individual axes.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc"}},1098:function(e,t,a){"use strict";var r=a(212).getSubplotCalcData,i=a(6).counterRegex,n=a(1286),o=a(903),s=o.attr,l=o.name,c=i(l),d={};d[s]={valType:"subplotid",role:"info",dflt:l,editType:"calc",description:["Sets a reference between this trace's data coordinates and","a polar subplot.","If *polar* (the default value), the data refer to `layout.polar`.","If *polar2*, the data refer to `layout.polar2`, and so on."].join(" ")},e.exports={attr:s,name:l,idRoot:l,idRegex:c,attrRegex:c,attributes:d,layoutAttributes:a(1056),supplyLayoutDefaults:a(1287),plot:function(e){for(var t=e._fullLayout,a=e.calcdata,i=t._subplots[l],o=0;o<i.length;o++){var s=i[o],c=r(a,l,s),d=t[s]._subplot;d||(d=n(e,s),t[s]._subplot=d),d.plot(c,t,e._promises)}},clean:function(e,t,a,r){for(var i=r._subplots[l]||[],n=r._has&&r._has("gl"),o=t._has&&t._has("gl"),s=n&&!o,c=0;c<i.length;c++){var d=i[c],u=r[d]._subplot;if(!t[d]&&u)for(var h in u.framework.remove(),u.layers["radial-axis-title"].remove(),u.clipPaths)u.clipPaths[h].remove();s&&u._scene&&(u._scene.destroy(),u._scene=null)}},toSVG:a(626).toSVG}},1099:function(e,t,a){"use strict";var r=a(6),i=a(206),n=a(644),o=a(648),s=a(681),l=a(649),c=a(655),d=a(213).PTS_LINESONLY,u=a(943);function h(e,t,a,r){var i,n=r("r"),o=r("theta");if(n)o?i=Math.min(n.length,o.length):(i=n.length,r("theta0"),r("dtheta"));else{if(!o)return 0;i=t.theta.length,r("r0"),r("dr")}return t._length=i,i}e.exports={handleRThetaDefaults:h,supplyDefaults:function(e,t,a,f){function p(a,i){return r.coerce(e,t,u,a,i)}var g=h(e,t,f,p);if(g){p("thetaunit"),p("mode",g<d?"lines+markers":"lines"),p("text"),p("hovertext"),"fills"!==t.hoveron&&p("hovertemplate"),i.hasLines(t)&&(o(e,t,a,f,p),s(e,t,p),p("connectgaps")),i.hasMarkers(t)&&n(e,t,a,f,p,{gradient:!0}),i.hasText(t)&&(p("texttemplate"),l(e,t,f,p));var v=[];(i.hasMarkers(t)||i.hasText(t))&&(p("cliponaxis"),p("marker.maxdisplayed"),v.push("points")),p("fill"),"none"!==t.fill&&(c(e,t,a,p),i.hasLines(t)||s(e,t,p)),"tonext"!==t.fill&&"toself"!==t.fill||v.push("fills"),p("hoveron",v.join("+")||"points"),r.coerceSelectionMarkerOpacity(t,p)}else t.visible=!1}}},1100:function(e,t,a){"use strict";var r=a(6),i=a(105);e.exports=function(e,t,a){var n,o,s={},l=a[t.subplot]._subplot;l?(n=l.radialAxis,o=l.angularAxis):(n=(l=a[t.subplot]).radialaxis,o=l.angularaxis);var c=n.c2l(e.r);s.rLabel=i.tickText(n,c,!0).text;var d="degrees"===o.thetaunit?r.rad2deg(e.theta):e.theta;return s.thetaLabel=i.tickText(o,d,!0).text,s}},1101:function(e,t,a){"use strict";var r=a(682);function i(e,t,a,r){var i=a.radialAxis,n=a.angularAxis;i._hovertitle="r",n._hovertitle="θ";var o={};o[t.subplot]={_subplot:a};var s=t._module.formatLabels(e,t,o);r.rLabel=s.rLabel,r.thetaLabel=s.thetaLabel;var l=e.hi||t.hoverinfo,c=[];function d(e,t){c.push(e._hovertitle+": "+t)}if(!t.hovertemplate){var u=l.split("+");-1!==u.indexOf("all")&&(u=["r","theta","text"]),-1!==u.indexOf("r")&&d(i,r.rLabel),-1!==u.indexOf("theta")&&d(n,r.thetaLabel),-1!==u.indexOf("text")&&r.text&&(c.push(r.text),delete r.text),r.extraText=c.join("<br>")}}e.exports={hoverPoints:function(e,t,a,n){var o=r(e,t,a,n);if(o&&!1!==o[0].index){var s=o[0];if(void 0===s.index)return o;var l=e.subplot,c=s.cd[s.index],d=s.trace;if(l.isPtInside(c))return s.xLabelVal=void 0,s.yLabelVal=void 0,i(c,d,l,s),s.hovertemplate=d.hovertemplate,o}},makeHoverPointText:i}},1286:function(e,t,a){"use strict";var r=a(24),i=a(60),n=a(23),o=a(6),s=a(57),l=a(106),c=a(107),d=a(105),u=a(217),h=a(1054),f=a(214).doAutoRange,p=a(1319),g=a(650),v=a(623),x=a(216),y=a(641).prepSelect,m=a(641).selectOnClick,b=a(641).clearSelect,k=a(665),w=a(1284),T=a(882).redrawReglTraces,A=a(81).MID_SHIFT,M=a(903),_=a(1055),S=o._,L=o.mod,D=o.deg2rad,I=o.rad2deg;function F(e,t){this.id=t,this.gd=e,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var a=e._fullLayout,r="clip"+a._uid+t;this.clipIds.forTraces=r+"-for-traces",this.clipPaths.forTraces=a._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=a._polarlayer.append("g").attr("class",t),this.radialTickLayout=null,this.angularTickLayout=null}var O=F.prototype;function C(e){var t=e.ticks+String(e.ticklen)+String(e.showticklabels);return"side"in e&&(t+=e.side),t}function P(e,t){return t[o.findIndexOfMin(t,(function(t){return o.angleDist(e,t)}))]}function R(e,t,a){return t?(e.attr("display",null),e.attr(a)):e&&e.attr("display","none"),e}function j(e,t){return"translate("+e+","+t+")"}function z(e){return"rotate("+e+")"}e.exports=function(e,t){return new F(e,t)},O.plot=function(e,t){var a=t[this.id];this._hasClipOnAxisFalse=!1;for(var r=0;r<e.length;r++){if(!1===e[r][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}}this.updateLayers(t,a),this.updateLayout(t,a),c.generalUpdatePerTraceModule(this.gd,this,e,a),this.updateFx(t,a)},O.updateLayers=function(e,t){var a=this.layers,i=t.radialaxis,n=t.angularaxis,o=M.layerNames,s=o.indexOf("frontplot"),l=o.slice(0,s),c="below traces"===n.layer,d="below traces"===i.layer;c&&l.push("angular-line"),d&&l.push("radial-line"),c&&l.push("angular-axis"),d&&l.push("radial-axis"),l.push("frontplot"),c||l.push("angular-line"),d||l.push("radial-line"),c||l.push("angular-axis"),d||l.push("radial-axis");var u=this.framework.selectAll(".polarsublayer").data(l,String);u.enter().append("g").attr("class",(function(e){return"polarsublayer "+e})).each((function(e){var t=a[e]=r.select(this);switch(e){case"frontplot":t.append("g").classed("barlayer",!0),t.append("g").classed("scatterlayer",!0);break;case"backplot":t.append("g").classed("maplayer",!0);break;case"plotbg":a.bg=t.append("path");break;case"radial-grid":case"angular-grid":t.style("fill","none");break;case"radial-line":t.append("line").style("fill","none");break;case"angular-line":t.append("path").style("fill","none")}})),u.order()},O.updateLayout=function(e,t){var a=this.layers,r=e._size,i=t.radialaxis,n=t.angularaxis,o=t.domain.x,c=t.domain.y;this.xOffset=r.l+r.w*o[0],this.yOffset=r.t+r.h*(1-c[1]);var d=this.xLength=r.w*(o[1]-o[0]),u=this.yLength=r.h*(c[1]-c[0]),h=t.sector;this.sectorInRad=h.map(D);var f,p,g,v,x,y=this.sectorBBox=function(e){var t,a,r,i,n=e[0],o=e[1]-n,s=L(n,360),l=s+o,c=Math.cos(D(s)),d=Math.sin(D(s)),u=Math.cos(D(l)),h=Math.sin(D(l));i=s<=90&&l>=90||s>90&&l>=450?1:d<=0&&h<=0?0:Math.max(d,h);t=s<=180&&l>=180||s>180&&l>=540?-1:c>=0&&u>=0?0:Math.min(c,u);a=s<=270&&l>=270||s>270&&l>=630?-1:d>=0&&h>=0?0:Math.min(d,h);r=l>=360?1:c<=0&&u<=0?0:Math.max(c,u);return[t,a,r,i]}(h),m=y[2]-y[0],b=y[3]-y[1],k=u/d,w=Math.abs(b/m);k>w?(f=d,x=(u-(p=d*w))/r.h/2,g=[o[0],o[1]],v=[c[0]+x,c[1]-x]):(p=u,x=(d-(f=u/w))/r.w/2,g=[o[0]+x,o[1]-x],v=[c[0],c[1]]),this.xLength2=f,this.yLength2=p,this.xDomain2=g,this.yDomain2=v;var T=this.xOffset2=r.l+r.w*g[0],A=this.yOffset2=r.t+r.h*(1-v[1]),M=this.radius=f/m,_=this.innerRadius=t.hole*M,S=this.cx=T-M*y[0],I=this.cy=A+M*y[3],F=this.cxx=S-T,O=this.cyy=I-A;this.radialAxis=this.mockAxis(e,t,i,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[i.side],domain:[_/r.w,M/r.w]}),this.angularAxis=this.mockAxis(e,t,n,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(e,t),this.updateAngularAxis(e,t),this.updateRadialAxis(e,t),this.updateRadialAxisTitle(e,t),this.xaxis=this.mockCartesianAxis(e,t,{_id:"x",domain:g}),this.yaxis=this.mockCartesianAxis(e,t,{_id:"y",domain:v});var C=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",C).attr("transform",j(F,O)),a.frontplot.attr("transform",j(T,A)).call(l.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),a.bg.attr("d",C).attr("transform",j(S,I)).call(s.fill,t.bgcolor)},O.mockAxis=function(e,t,a,r){var i=o.extendFlat({},a,r);return h(i,t,e),i},O.mockCartesianAxis=function(e,t,a){var r=this,i=a._id,n=o.extendFlat({type:"linear"},a);u(n,e);var s={x:[0,2],y:[1,3]};return n.setRange=function(){var e=r.sectorBBox,a=s[i],o=r.radialAxis._rl,l=(o[1]-o[0])/(1-t.hole);n.range=[e[a[0]]*l,e[a[1]]*l]},n.isPtWithinRange="x"===i?function(e){return r.isPtInside(e)}:function(){return!0},n.setRange(),n.setScale(),n},O.doAutoRange=function(e,t){var a=this.gd,r=this.radialAxis,i=t.radialaxis;r.setScale(),f(a,r);var n=r.range;i.range=n.slice(),i._input.range=n.slice(),r._rl=[r.r2l(n[0],null,"gregorian"),r.r2l(n[1],null,"gregorian")]},O.updateRadialAxis=function(e,t){var a=this,r=a.gd,i=a.layers,n=a.radius,l=a.innerRadius,c=a.cx,u=a.cy,h=t.radialaxis,f=L(t.sector[0],360),p=a.radialAxis,g=l<n;a.fillViewInitialKey("radialaxis.angle",h.angle),a.fillViewInitialKey("radialaxis.range",p.range.slice()),p.setGeometry(),"auto"===p.tickangle&&f>90&&f<=270&&(p.tickangle=180);var v=function(e){return"translate("+(p.l2p(e.x)+l)+",0)"},x=C(h);if(a.radialTickLayout!==x&&(i["radial-axis"].selectAll(".xtick").remove(),a.radialTickLayout=x),g){p.setScale();var y=d.calcTicks(p),m=d.clipEnds(p,y),b=d.getTickSigns(p)[2];d.drawTicks(r,p,{vals:y,layer:i["radial-axis"],path:d.makeTickPath(p,0,b),transFn:v,crisp:!1}),d.drawGrid(r,p,{vals:m,layer:i["radial-grid"],path:function(e){return a.pathArc(p.r2p(e.x)+l)},transFn:o.noop,crisp:!1}),d.drawLabels(r,p,{vals:y,layer:i["radial-axis"],transFn:v,labelFns:d.makeLabelFns(p,0)})}var k=a.radialAxisAngle=a.vangles?I(P(D(h.angle),a.vangles)):h.angle,w=j(c,u),T=w+z(-k);R(i["radial-axis"],g&&(h.showticklabels||h.ticks),{transform:T}),R(i["radial-grid"],g&&h.showgrid,{transform:w}),R(i["radial-line"].select("line"),g&&h.showline,{x1:l,y1:0,x2:n,y2:0,transform:T}).attr("stroke-width",h.linewidth).call(s.stroke,h.linecolor)},O.updateRadialAxisTitle=function(e,t,a){var r=this.gd,i=this.radius,n=this.cx,o=this.cy,s=t.radialaxis,c=this.id+"title",d=void 0!==a?a:this.radialAxisAngle,u=D(d),h=Math.cos(u),f=Math.sin(u),p=0;if(s.title){var g=l.bBox(this.layers["radial-axis"].node()).height,v=s.title.font.size;p="counterclockwise"===s.side?-g-.4*v:g+.8*v}this.layers["radial-axis-title"]=x.draw(r,c,{propContainer:s,propName:this.id+".radialaxis.title",placeholder:S(r,"Click to enter radial axis title"),attributes:{x:n+i/2*h+p*f,y:o-i/2*f+p*h,"text-anchor":"middle"},transform:{rotate:-d}})},O.updateAngularAxis=function(e,t){var a=this,r=a.gd,i=a.layers,n=a.radius,l=a.innerRadius,c=a.cx,u=a.cy,h=t.angularaxis,f=a.angularAxis;a.fillViewInitialKey("angularaxis.rotation",h.rotation),f.setGeometry(),f.setScale();var p=function(e){return f.t2g(e.x)};"linear"===f.type&&"radians"===f.thetaunit&&(f.tick0=I(f.tick0),f.dtick=I(f.dtick));var g=function(e){return j(c+n*Math.cos(e),u-n*Math.sin(e))},v=d.makeLabelFns(f,0).labelStandoff,x={xFn:function(e){var t=p(e);return Math.cos(t)*v},yFn:function(e){var t=p(e),a=Math.sin(t)>0?.2:1;return-Math.sin(t)*(v+e.fontSize*a)+Math.abs(Math.cos(t))*(e.fontSize*A)},anchorFn:function(e){var t=p(e),a=Math.cos(t);return Math.abs(a)<.1?"middle":a>0?"start":"end"},heightFn:function(e,t,a){var r=p(e);return-.5*(1+Math.sin(r))*a}},y=C(h);a.angularTickLayout!==y&&(i["angular-axis"].selectAll("."+f._id+"tick").remove(),a.angularTickLayout=y);var m,b=d.calcTicks(f);if("linear"===t.gridshape?(m=b.map(p),o.angleDelta(m[0],m[1])<0&&(m=m.slice().reverse())):m=null,a.vangles=m,"category"===f.type&&(b=b.filter((function(e){return o.isAngleInsideSector(p(e),a.sectorInRad)}))),f.visible){var k="inside"===f.ticks?-1:1,w=(f.linewidth||1)/2;d.drawTicks(r,f,{vals:b,layer:i["angular-axis"],path:"M"+k*w+",0h"+k*f.ticklen,transFn:function(e){var t=p(e);return g(t)+z(-I(t))},crisp:!1}),d.drawGrid(r,f,{vals:b,layer:i["angular-grid"],path:function(e){var t=p(e),a=Math.cos(t),r=Math.sin(t);return"M"+[c+l*a,u-l*r]+"L"+[c+n*a,u-n*r]},transFn:o.noop,crisp:!1}),d.drawLabels(r,f,{vals:b,layer:i["angular-axis"],repositionOnUpdate:!0,transFn:function(e){return g(p(e))},labelFns:x})}R(i["angular-line"].select("path"),h.showline,{d:a.pathSubplot(),transform:j(c,u)}).attr("stroke-width",h.linewidth).call(s.stroke,h.linecolor)},O.updateFx=function(e,t){this.gd._context.staticPlot||(this.updateAngularDrag(e),this.updateRadialDrag(e,t,0),this.updateRadialDrag(e,t,1),this.updateMainDrag(e))},O.updateMainDrag=function(e){var t=this,a=t.gd,o=t.layers,s=e._zoomlayer,l=M.MINZOOM,c=M.OFFEDGE,d=t.radius,u=t.innerRadius,h=t.cx,f=t.cy,x=t.cxx,k=t.cyy,w=t.sectorInRad,T=t.vangles,A=t.radialAxis,S=_.clampTiny,L=_.findXYatLength,D=_.findEnclosingVertexAngles,I=M.cornerHalfWidth,F=M.cornerLen/2,O=p.makeDragger(o,"path","maindrag","crosshair");r.select(O).attr("d",t.pathSubplot()).attr("transform",j(h,f));var C,P,R,z,N,V,B,E,G,H={element:O,gd:a,subplot:t.id,plotinfo:{id:t.id,xaxis:t.xaxis,yaxis:t.yaxis},xaxes:[t.xaxis],yaxes:[t.yaxis]};function W(e,t){return Math.sqrt(e*e+t*t)}function U(e,t){return W(e-x,t-k)}function Z(e,t){return Math.atan2(k-t,e-x)}function q(e,t){return[e*Math.cos(t),e*Math.sin(-t)]}function K(e,a){if(0===e)return t.pathSector(2*I);var r=F/e,i=a-r,n=a+r,o=Math.max(0,Math.min(e,d)),s=o-I,l=o+I;return"M"+q(s,i)+"A"+[s,s]+" 0,0,0 "+q(s,n)+"L"+q(l,n)+"A"+[l,l]+" 0,0,1 "+q(l,i)+"Z"}function X(e,a,r){if(0===e)return t.pathSector(2*I);var i,n,o=q(e,a),s=q(e,r),l=S((o[0]+s[0])/2),c=S((o[1]+s[1])/2);if(l&&c){var d=c/l,u=-1/d,h=L(I,d,l,c);i=L(F,u,h[0][0],h[0][1]),n=L(F,u,h[1][0],h[1][1])}else{var f,p;c?(f=F,p=I):(f=I,p=F),i=[[l-f,c-p],[l+f,c-p]],n=[[l-f,c+p],[l+f,c+p]]}return"M"+i.join("L")+"L"+n.reverse().join("L")+"Z"}function Y(e,t){return t=Math.max(Math.min(t,d),u),e<c?e=0:d-e<c?e=d:t<c?t=0:d-t<c&&(t=d),Math.abs(t-e)>l?(e<t?(R=e,z=t):(R=t,z=e),!0):(R=null,z=null,!1)}function J(e,t){e=e||N,t=t||"M0,0Z",E.attr("d",e),G.attr("d",t),p.transitionZoombox(E,G,V,B),V=!0;var r={};ae(r),a.emit("plotly_relayouting",r)}function $(e,a){var r,i,n=C+e,o=P+a,s=U(C,P),l=Math.min(U(n,o),d),c=Z(C,P);Y(s,l)&&(r=N+t.pathSector(z),R&&(r+=t.pathSector(R)),i=K(R,c)+K(z,c)),J(r,i)}function Q(e,t,a,r){var i=_.findIntersectionXY(a,r,a,[e-x,k-t]);return W(i[0],i[1])}function ee(e,a){var r,i,n=C+e,o=P+a,s=Z(C,P),l=Z(n,o),c=D(s,T),u=D(l,T);Y(Q(C,P,c[0],c[1]),Math.min(Q(n,o,u[0],u[1]),d))&&(r=N+t.pathSector(z),R&&(r+=t.pathSector(R)),i=[X(R,c[0],c[1]),X(z,c[0],c[1])].join(" ")),J(r,i)}function te(){if(p.removeZoombox(a),null!==R&&null!==z){var e={};ae(e),p.showDoubleClickNotifier(a),n.call("_guiRelayout",a,e)}}function ae(e){var a=A._rl,r=(a[1]-a[0])/(1-u/d)/d,i=[a[0]+(R-u)*r,a[0]+(z-u)*r];e[t.id+".radialaxis.range"]=i}function re(e,r){var i=a._fullLayout.clickmode;if(p.removeZoombox(a),2===e){var o={};for(var s in t.viewInitial)o[t.id+"."+s]=t.viewInitial[s];a.emit("plotly_doubleclick",null),n.call("_guiRelayout",a,o)}i.indexOf("select")>-1&&1===e&&m(r,a,[t.xaxis],[t.yaxis],t.id,H),i.indexOf("event")>-1&&v.click(a,r,t.id)}H.prepFn=function(e,r,n){var o=a._fullLayout.dragmode,l=O.getBoundingClientRect();if(C=r-l.left,P=n-l.top,T){var c=_.findPolygonOffset(d,w[0],w[1],T);C+=x+c[0],P+=k+c[1]}switch(o){case"zoom":H.moveFn=T?ee:$,H.clickFn=re,H.doneFn=te,function(){R=null,z=null,N=t.pathSubplot(),V=!1;var e=a._fullLayout[t.id];B=i(e.bgcolor).getLuminance(),(E=p.makeZoombox(s,B,h,f,N)).attr("fill-rule","evenodd"),G=p.makeCorners(s,h,f),b(a)}();break;case"select":case"lasso":y(e,r,n,H,o)}},O.onmousemove=function(e){v.hover(a,e,t.id),a._fullLayout._lasthover=O,a._fullLayout._hoversubplot=t.id},O.onmouseout=function(e){a._dragging||g.unhover(a,e)},g.init(H)},O.updateRadialDrag=function(e,t,a){var i=this,s=i.gd,l=i.layers,c=i.radius,d=i.innerRadius,u=i.cx,h=i.cy,f=i.radialAxis,v=M.radialDragBoxSize,x=v/2;if(f.visible){var y,m,k,A=D(i.radialAxisAngle),_=f._rl,S=_[0],L=_[1],F=_[a],O=.75*(_[1]-_[0])/(1-t.hole)/c;a?(y=u+(c+x)*Math.cos(A),m=h-(c+x)*Math.sin(A),k="radialdrag"):(y=u+(d-x)*Math.cos(A),m=h-(d-x)*Math.sin(A),k="radialdrag-inner");var C,N,V,B=p.makeRectDragger(l,k,"crosshair",-x,-x,v,v),E={element:B,gd:s};R(r.select(B),f.visible&&d<c,{transform:j(y,m)}),E.prepFn=function(){C=null,N=null,V=null,E.moveFn=G,E.doneFn=H,b(s)},E.clampFn=function(e,t){return Math.sqrt(e*e+t*t)<M.MINDRAG&&(e=0,t=0),[e,t]},g.init(E)}function G(e,t){if(C)C(e,t);else{var r=[e,-t],n=[Math.cos(A),Math.sin(A)],l=Math.abs(o.dot(r,n)/Math.sqrt(o.dot(r,r)));isNaN(l)||(C=l<.5?W:U)}var c={};!function(e){null!==N?e[i.id+".radialaxis.angle"]=N:null!==V&&(e[i.id+".radialaxis.range["+a+"]"]=V)}(c),s.emit("plotly_relayouting",c)}function H(){null!==N?n.call("_guiRelayout",s,i.id+".radialaxis.angle",N):null!==V&&n.call("_guiRelayout",s,i.id+".radialaxis.range["+a+"]",V)}function W(e,t){if(0!==a){var r=y+e,n=m+t;N=Math.atan2(h-n,r-u),i.vangles&&(N=P(N,i.vangles)),N=I(N);var o=j(u,h)+z(-N);l["radial-axis"].attr("transform",o),l["radial-line"].select("line").attr("transform",o);var s=i.gd._fullLayout,c=s[i.id];i.updateRadialAxisTitle(s,c,N)}}function U(e,t){var r=o.dot([e,-t],[Math.cos(A),Math.sin(A)]);if(V=F-O*r,O>0==(a?V>S:V<L)){var l=s._fullLayout,c=l[i.id];f.range[a]=V,f._rl[a]=V,i.updateRadialAxis(l,c),i.xaxis.setRange(),i.xaxis.setScale(),i.yaxis.setRange(),i.yaxis.setScale();var d=!1;for(var u in i.traceHash){var h=i.traceHash[u],p=o.filterVisible(h);h[0][0].trace._module.plot(s,i,p,c),n.traceIs(u,"gl")&&p.length&&(d=!0)}d&&(w(s),T(s))}else V=null}},O.updateAngularDrag=function(e){var t=this,a=t.gd,i=t.layers,s=t.radius,c=t.angularAxis,d=t.cx,u=t.cy,h=t.cxx,f=t.cyy,v=M.angularDragBoxSize,x=p.makeDragger(i,"path","angulardrag","move"),y={element:x,gd:a};function m(e,t){return Math.atan2(f+v-t,e-h-v)}r.select(x).attr("d",t.pathAnnulus(s,s+v)).attr("transform",j(d,u)).call(k,"move");var A,_,S,L,D,F,O=i.frontplot.select(".scatterlayer").selectAll(".trace"),C=O.selectAll(".point"),P=O.selectAll(".textpoint");function R(e,s){var p=t.gd._fullLayout,g=p[t.id],v=m(A+e,_+s),x=I(v-F);if(L=S+x,i.frontplot.attr("transform",j(t.xOffset2,t.yOffset2)+z([-x,h,f])),t.vangles){D=t.radialAxisAngle+x;var y=j(d,u)+z(-x),b=j(d,u)+z(-D);i.bg.attr("transform",y),i["radial-grid"].attr("transform",y),i["radial-axis"].attr("transform",b),i["radial-line"].select("line").attr("transform",b),t.updateRadialAxisTitle(p,g,D)}else t.clipPaths.forTraces.select("path").attr("transform",j(h,f)+z(x));C.each((function(){var e=r.select(this),t=l.getTranslate(e);e.attr("transform",j(t.x,t.y)+z([x]))})),P.each((function(){var e=r.select(this),t=e.select("text"),a=l.getTranslate(e);e.attr("transform",z([x,t.attr("x"),t.attr("y")])+j(a.x,a.y))})),c.rotation=o.modHalf(L,360),t.updateAngularAxis(p,g),t._hasClipOnAxisFalse&&!o.isFullCircle(t.sectorInRad)&&O.call(l.hideOutsideRangePoints,t);var k=!1;for(var M in t.traceHash)if(n.traceIs(M,"gl")){var R=t.traceHash[M],V=o.filterVisible(R);R[0][0].trace._module.plot(a,t,V,g),V.length&&(k=!0)}k&&(w(a),T(a));var B={};N(B),a.emit("plotly_relayouting",B)}function N(e){e[t.id+".angularaxis.rotation"]=L,t.vangles&&(e[t.id+".radialaxis.angle"]=D)}function V(){P.select("text").attr("transform",null);var e={};N(e),n.call("_guiRelayout",a,e)}y.prepFn=function(r,i,n){var o=e[t.id];S=o.angularaxis.rotation;var s=x.getBoundingClientRect();A=i-s.left,_=n-s.top,F=m(A,_),y.moveFn=R,y.doneFn=V,b(a)},t.vangles&&!o.isFullCircle(t.sectorInRad)&&(y.prepFn=o.noop,k(r.select(x),null)),g.init(y)},O.isPtInside=function(e){var t=this.sectorInRad,a=this.vangles,r=this.angularAxis.c2g(e.theta),i=this.radialAxis,n=i.c2l(e.r),s=i._rl;return(a?_.isPtInsidePolygon:o.isPtInsideSector)(n,r,s,t,a)},O.pathArc=function(e){var t=this.sectorInRad,a=this.vangles;return(a?_.pathPolygon:o.pathArc)(e,t[0],t[1],a)},O.pathSector=function(e){var t=this.sectorInRad,a=this.vangles;return(a?_.pathPolygon:o.pathSector)(e,t[0],t[1],a)},O.pathAnnulus=function(e,t){var a=this.sectorInRad,r=this.vangles;return(r?_.pathPolygonAnnulus:o.pathAnnulus)(e,t,a[0],a[1],r)},O.pathSubplot=function(){var e=this.innerRadius,t=this.radius;return e?this.pathAnnulus(e,t):this.pathSector(t)},O.fillViewInitialKey=function(e,t){e in this.viewInitial||(this.viewInitial[e]=t)}},1287:function(e,t,a){"use strict";var r=a(6),i=a(57),n=a(58),o=a(731),s=a(212).getSubplotData,l=a(219),c=a(223),d=a(220),u=a(754),h=a(739),f=a(224),p=a(1056),g=a(1054),v=a(903),x=v.axisNames;function y(e,t,a,o){var f=a("bgcolor");o.bgColor=i.combine(f,o.paper_bgcolor);var y=a("sector");a("hole");var b,k=s(o.fullData,v.name,o.id),w=o.layoutOut;function T(e,t){return a(b+"."+e,t)}for(var A=0;A<x.length;A++){b=x[A],r.isPlainObject(e[b])||(e[b]={});var M=e[b],_=n.newContainer(t,b);_._id=_._name=b,_._attr=o.id+"."+b,_._traceIndices=k.map((function(e){return e._expandedIndex}));var S=v.axisName2dataArray[b],L=m(M,_,T,k,S);u(M,_,T,{axData:k,dataAttr:S});var D,I,F=T("visible");switch(g(_,t,w),T("uirevision",t.uirevision),F&&(I=(D=T("color"))===M.color?D:o.font.color),_._m=1,b){case"radialaxis":var O=T("autorange",!_.isValidRange(M.range));M.autorange=O,!O||"linear"!==L&&"-"!==L||T("rangemode"),"reversed"===O&&(_._m=-1),T("range"),_.cleanRange("range",{dfltRange:[0,1]}),F&&(T("side"),T("angle",y[0]),T("title.text"),r.coerceFont(T,"title.font",{family:o.font.family,size:Math.round(1.2*o.font.size),color:I}));break;case"angularaxis":if("date"===L){r.log("Polar plots do not support date angular axes yet.");for(var C=0;C<k.length;C++)k[C].visible=!1;L=M.type=_.type="linear"}T("linear"===L?"thetaunit":"period");var P=T("direction");T("rotation",{counterclockwise:0,clockwise:90}[P])}if(F)l(M,_,T,_.type),d(M,_,T,_.type,{tickSuffixDflt:"degrees"===_.thetaunit?"°":void 0}),c(M,_,T,{outerTicks:!0}),T("showticklabels")&&(r.coerceFont(T,"tickfont",{family:o.font.family,size:o.font.size,color:I}),T("tickangle"),T("tickformat")),h(M,_,T,{dfltColor:D,bgColor:o.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:p[b]}),T("layer");"category"!==L&&T("hoverformat"),_._input=M}"category"===t.angularaxis.type&&a("gridshape")}function m(e,t,a,r,i){if("-"===a("type")){for(var n,o=0;o<r.length;o++)if(r[o].visible){n=r[o];break}n&&n[i]&&(t.type=f(n[i],"gregorian")),"-"===t.type?t.type="linear":e.type=t.type}return t.type}e.exports=function(e,t,a){o(e,t,a,{type:v.name,attributes:p,handleDefaults:y,font:t.font,paper_bgcolor:t.paper_bgcolor,fullData:a,layoutOut:t})}},1320:function(e,t,a){"use strict";var r=a(150).hovertemplateAttrs,i=a(32).extendFlat,n=a(943),o=a(627);e.exports={r:n.r,theta:n.theta,r0:n.r0,dr:n.dr,theta0:n.theta0,dtheta:n.dtheta,thetaunit:n.thetaunit,base:i({},o.base,{description:["Sets where the bar base is drawn (in radial axis units).","In *stack* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")}),offset:i({},o.offset,{description:["Shifts the angular position where the bar is drawn","(in *thetatunit* units)."].join(" ")}),width:i({},o.width,{description:["Sets the bar angular width (in *thetaunit* units)."].join(" ")}),text:i({},o.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:i({},o.hovertext,{description:"Same as `text`."}),marker:o.marker,hoverinfo:n.hoverinfo,hovertemplate:r(),selected:o.selected,unselected:o.unselected}},1321:function(e,t,a){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},bargap:{valType:"number",dflt:.1,min:0,max:1,role:"style",editType:"calc",description:["Sets the gap between bars of","adjacent location coordinates.","Values are unitless, they represent fractions of the minimum difference","in bar positions in the data."].join(" ")}}},1322:function(e,t,a){"use strict";var r=a(79).hasColorscale,i=a(210),n=a(680),o=a(740).setGroupPositions,s=a(631),l=a(23).traceIs,c=a(6).extendFlat;e.exports={calc:function(e,t){for(var a=e._fullLayout,o=t.subplot,l=a[o].radialaxis,c=a[o].angularaxis,d=l.makeCalcdata(t,"r"),u=c.makeCalcdata(t,"theta"),h=t._length,f=new Array(h),p=d,g=u,v=0;v<h;v++)f[v]={p:g[v],s:p[v]};function x(e){var a=t[e];void 0!==a&&(t["_"+e]=Array.isArray(a)?c.makeCalcdata(t,e):c.d2c(a,t.thetaunit))}return"linear"===c.type&&(x("width"),x("offset")),r(t,"marker")&&i(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&i(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),n(f,t),s(f,t),f},crossTraceCalc:function(e,t,a){for(var r=e.calcdata,i=[],n=0;n<r.length;n++){var s=r[n],d=s[0].trace;!0===d.visible&&l(d,"bar")&&d.subplot===a&&i.push(s)}var u=c({},t.radialaxis,{_id:"x"}),h=t.angularaxis;o(e,h,u,i,{mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap})}}},1660:function(e,t,a){"use strict";e.exports={moduleType:"trace",name:"barpolar",basePlotModule:a(1098),categories:["polar","bar","showLegend"],attributes:a(1320),layoutAttributes:a(1321),supplyDefaults:a(1661),supplyLayoutDefaults:a(1662),calc:a(1322).calc,crossTraceCalc:a(1322).crossTraceCalc,plot:a(1663),colorbar:a(633),formatLabels:a(1100),style:a(653).style,styleOnSelect:a(653).styleOnSelect,hoverPoints:a(1664),selectPoints:a(742),meta:{hrName:"bar_polar",description:["The data visualized by the radial span of the bars is set in `r`"].join(" ")}}},1661:function(e,t,a){"use strict";var r=a(6),i=a(1099).handleRThetaDefaults,n=a(693),o=a(1320);e.exports=function(e,t,a,s){function l(a,i){return r.coerce(e,t,o,a,i)}i(e,t,s,l)?(l("thetaunit"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate"),n(e,t,l,a,s),r.coerceSelectionMarkerOpacity(t,l)):t.visible=!1}},1662:function(e,t,a){"use strict";var r=a(6),i=a(1321);e.exports=function(e,t,a){var n,o={};function s(a,o){return r.coerce(e[n]||{},t[n],i,a,o)}for(var l=0;l<a.length;l++){var c=a[l];"barpolar"===c.type&&!0===c.visible&&(o[n=c.subplot]||(s("barmode"),s("bargap"),o[n]=1))}}},1663:function(e,t,a){"use strict";var r=a(24),i=a(12),n=a(6),o=a(106),s=a(1055);e.exports=function(e,t,a){var l=t.xaxis,c=t.yaxis,d=t.radialAxis,u=t.angularAxis,h=function(e){var t=e.cxx,a=e.cyy;if(e.vangles)return function(r,i,o,l){var c,d;n.angleDelta(o,l)>0?(c=o,d=l):(c=l,d=o);var u=[s.findEnclosingVertexAngles(c,e.vangles)[0],(c+d)/2,s.findEnclosingVertexAngles(d,e.vangles)[1]];return s.pathPolygonAnnulus(r,i,c,d,u,t,a)};return function(e,r,i,o){return n.pathAnnulus(e,r,i,o,t,a)}}(t),f=t.layers.frontplot.select("g.barlayer");n.makeTraceGroups(f,a,"trace bars").each((function(){var a=r.select(this),s=n.ensureSingle(a,"g","points").selectAll("g.point").data(n.identity);s.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),s.exit().remove(),s.each((function(e){var t,a=r.select(this),o=e.rp0=d.c2p(e.s0),s=e.rp1=d.c2p(e.s1),f=e.thetag0=u.c2g(e.p0),p=e.thetag1=u.c2g(e.p1);if(i(o)&&i(s)&&i(f)&&i(p)&&o!==s&&f!==p){var g=d.c2g(e.s1),v=(f+p)/2;e.ct=[l.c2p(g*Math.cos(v)),c.c2p(g*Math.sin(v))],t=h(o,s,f,p)}else t="M0,0Z";n.ensureSingle(a,"path").attr("d",t)})),o.setClipUrl(a,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,e)}))}},1664:function(e,t,a){"use strict";var r=a(623),i=a(6),n=a(741).getTraceColor,o=i.fillText,s=a(1101).makeHoverPointText,l=a(1055).isPtInsidePolygon;e.exports=function(e,t,a){var c=e.cd,d=c[0].trace,u=e.subplot,h=u.radialAxis,f=u.angularAxis,p=u.vangles,g=p?l:i.isPtInsideSector,v=e.maxHoverDistance,x=f._period||2*Math.PI,y=Math.abs(h.g2p(Math.sqrt(t*t+a*a))),m=Math.atan2(a,t);h.range[0]>h.range[1]&&(m+=Math.PI);if(r.getClosest(c,(function(e){return g(y,m,[e.rp0,e.rp1],[e.thetag0,e.thetag1],p)?v+Math.min(1,Math.abs(e.thetag1-e.thetag0)/x)-1+(e.rp1-y)/(e.rp1-e.rp0)-1:1/0}),e),!1!==e.index){var b=c[e.index];e.x0=e.x1=b.ct[0],e.y0=e.y1=b.ct[1];var k=i.extendFlat({},b,{r:b.s,theta:b.p});return o(b,d,e),s(k,d,u,e),e.hovertemplate=d.hovertemplate,e.color=n(d,b),e.xLabelVal=e.yLabelVal=void 0,b.s<0&&(e.idealAlign="left"),[e]}}},269:function(e,t,a){"use strict";e.exports=a(1660)},624:function(e,t,a){"use strict";var r=a(32).extendFlat;t.attributes=function(e,t){t=t||{};var a={valType:"info_array",role:"info",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=e.name?e.name+" ":"",n=e.trace?"trace ":"subplot ",o=t.description?" "+t.description:"",s={x:r({},a,{description:["Sets the horizontal domain of this ",i,n,"(in plot fraction).",o].join("")}),y:r({},a,{description:["Sets the vertical domain of this ",i,n,"(in plot fraction).",o].join("")}),editType:e.editType};return e.noGridCell||(s.row={valType:"integer",min:0,dflt:0,role:"info",editType:e.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",i,n,".",o].join("")},s.column={valType:"integer",min:0,dflt:0,role:"info",editType:e.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",i,n,".",o].join("")}),s},t.defaults=function(e,t,a,r){var i=r&&r.x||[0,1],n=r&&r.y||[0,1],o=t.grid;if(o){var s=a("domain.column");void 0!==s&&(s<o.columns?i=o._domains.x[s]:delete e.domain.column);var l=a("domain.row");void 0!==l&&(l<o.rows?n=o._domains.y[l]:delete e.domain.row)}var c=a("domain.x",i),d=a("domain.y",n);c[0]<c[1]||(e.domain.x=i.slice()),d[0]<d[1]||(e.domain.y=n.slice())}},627:function(e,t,a){"use strict";var r=a(207),i=a(150).hovertemplateAttrs,n=a(150).texttemplateAttrs,o=a(111),s=a(46),l=a(657),c=a(32).extendFlat,d=s({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),u=c({},r.marker.line.width,{dflt:0}),h=c({width:u,editType:"calc"},o("marker.line")),f=c({line:h,editType:"calc"},o("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,role:"style",editType:"style",description:"Sets the opacity of the bars."}});e.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,texttemplate:n({editType:"plot"},{keys:l.eventDataKeys}),hovertext:r.hovertext,hovertemplate:i({},{keys:l.eventDataKeys}),textposition:{valType:"enumerated",role:"info",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",role:"info",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",role:"info",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:c({},d,{description:"Sets the font used for `text`."}),insidetextfont:c({},d,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:c({},d,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],role:"info",dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:c({},r.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",role:"info",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,role:"info",editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:f,offsetgroup:{valType:"string",role:"info",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",role:"info",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,_deprecated:{bardir:{valType:"enumerated",role:"info",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}}},631:function(e,t,a){"use strict";var r=a(6);e.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},633:function(e,t,a){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},637:function(e,t,a){"use strict";var r=a(24),i=a(6);function n(e){return"_"+e+"Text_minsize"}e.exports={recordMinTextSize:function(e,t,a){if(a.uniformtext.mode){var r=n(e),i=a.uniformtext.minsize,o=t.scale*t.fontSize;t.hide=o<i,a[r]=a[r]||1/0,t.hide||(a[r]=Math.min(a[r],Math.max(o,i)))}},clearMinTextSize:function(e,t){t[n(e)]=void 0},resizeText:function(e,t,a){var n=e._fullLayout,o=n["_"+a+"Text_minsize"];if(o){var s,l="hide"===n.uniformtext.mode;switch(a){case"funnelarea":case"pie":case"sunburst":s="g.slice";break;case"treemap":s="g.slice, g.pathbar";break;default:s="g.points > g.point"}t.selectAll(s).each((function(e){var t=e.transform;t&&(t.scale=l&&t.hide?0:o/t.fontSize,r.select(this).select("text").attr("transform",i.getTextTransform(t)))}))}}}},644:function(e,t,a){"use strict";var r=a(57),i=a(79).hasColorscale,n=a(151),o=a(206);e.exports=function(e,t,a,s,l,c){var d=o.isBubble(e),u=(e.line||{}).color;(c=c||{},u&&(a=u),l("marker.symbol"),l("marker.opacity",d?.7:1),l("marker.size"),l("marker.color",a),i(e,"marker")&&n(e,t,s,l,{prefix:"marker.",cLetter:"c"}),c.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size")),c.noLine||(l("marker.line.color",u&&!Array.isArray(u)&&t.marker.color!==u?u:d?r.background:r.defaultLine),i(e,"marker.line")&&n(e,t,s,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",d?1:0)),d&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode")),c.gradient)&&("none"!==l("marker.gradient.type")&&l("marker.gradient.color"))}},648:function(e,t,a){"use strict";var r=a(6).isArrayOrTypedArray,i=a(79).hasColorscale,n=a(151);e.exports=function(e,t,a,o,s,l){var c=(e.marker||{}).color;(s("line.color",a),i(e,"line"))?n(e,t,o,s,{prefix:"line.",cLetter:"c"}):s("line.color",!r(c)&&c||a);s("line.width"),(l||{}).noDash||s("line.dash")}},649:function(e,t,a){"use strict";var r=a(6);e.exports=function(e,t,a,i,n){n=n||{},i("textposition"),r.coerceFont(i,"textfont",a.font),n.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}},651:function(e,t,a){"use strict";var r=a(57),i=a(206);e.exports=function(e,t){var a,n;if("lines"===e.mode)return(a=e.line.color)&&r.opacity(a)?a:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var o=t.mcc||(e.marker||{}).color,s=t.mlcc||((e.marker||{}).line||{}).color;return(n=o&&r.opacity(o)?o:s&&r.opacity(s)&&(t.mlw||((e.marker||{}).line||{}).width)?s:"")?r.opacity(n)<.3?r.addOpacity(n,.3):n:(a=(e.line||{}).color)&&r.opacity(a)&&i.hasLines(e)&&e.line.width?a:e.fillcolor}},653:function(e,t,a){"use strict";var r=a(24),i=a(57),n=a(106),o=a(6),s=a(23),l=a(637).resizeText,c=a(627),d=c.textfont,u=c.insidetextfont,h=c.outsidetextfont,f=a(667);function p(e,t,a){n.pointStyle(e.selectAll("path"),t,a),g(e,t,a)}function g(e,t,a){e.selectAll("text").each((function(e){var i=r.select(this),s=o.ensureUniformFontSize(a,v(i,e,t,a));n.font(i,s)}))}function v(e,t,a,r){var i=r._fullLayout.font,n=a.textfont;if(e.classed("bartext-inside")){var o=k(t,a);n=y(a,t.i,i,o)}else e.classed("bartext-outside")&&(n=m(a,t.i,i));return n}function x(e,t,a){return b(d,e.textfont,t,a)}function y(e,t,a,r){var n=x(e,t,a);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(n={color:i.contrast(r),family:n.family,size:n.size}),b(u,e.insidetextfont,t,n)}function m(e,t,a){var r=x(e,t,a);return b(h,e.outsidetextfont,t,r)}function b(e,t,a,r){t=t||{};var i=f.getValue(t.family,a),n=f.getValue(t.size,a),o=f.getValue(t.color,a);return{family:f.coerceString(e.family,i,r.family),size:f.coerceNumber(e.size,n,r.size),color:f.coerceColor(e.color,o,r.color)}}function k(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mc||t.marker.color}e.exports={style:function(e){var t=r.select(e).selectAll("g.barlayer").selectAll("g.trace");l(e,t,"bar");var a=t.size(),i=e._fullLayout;t.style("opacity",(function(e){return e[0].trace.opacity})).each((function(e){("stack"===i.barmode&&a>1||0===i.bargap&&0===i.bargroupgap&&!e[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")})),t.selectAll("g.points").each((function(t){p(r.select(this),t[0].trace,e)})),s.getComponentMethod("errorbars","style")(t)},styleTextPoints:g,styleOnSelect:function(e,t,a){var i=t[0].trace;i.selectedpoints?function(e,t,a){n.selectedPointStyle(e.selectAll("path"),t),function(e,t,a){e.each((function(e){var i,s=r.select(this);if(e.selected){i=o.ensureUniformFontSize(a,v(s,e,t,a));var l=t.selected.textfont&&t.selected.textfont.color;l&&(i.color=l),n.font(s,i)}else n.selectedTextStyle(s,t)}))}(e.selectAll("text"),t,a)}(a,i,e):(p(a,i,e),s.getComponentMethod("errorbars","style")(a))},getInsideTextFont:y,getOutsideTextFont:m,getBarColor:k,resizeText:l}},655:function(e,t,a){"use strict";var r=a(57),i=a(6).isArrayOrTypedArray;e.exports=function(e,t,a,n){var o=!1;if(t.marker){var s=t.marker.color,l=(t.marker.line||{}).color;s&&!i(s)?o=s:l&&!i(l)&&(o=l)}n("fillcolor",r.addOpacity((t.line||{}).color||o||a,.5))}},657:function(e,t,a){"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},667:function(e,t,a){"use strict";var r=a(12),i=a(60),n=a(6).isArrayOrTypedArray;t.coerceString=function(e,t,a){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==a?a:e.dflt},t.coerceNumber=function(e,t,a){if(r(t)){t=+t;var i=e.min,n=e.max;if(!(void 0!==i&&t<i||void 0!==n&&t>n))return t}return void 0!==a?a:e.dflt},t.coerceColor=function(e,t,a){return i(t).isValid()?t:void 0!==a?a:e.dflt},t.coerceEnumerated=function(e,t,a){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==a?a:e.dflt},t.getValue=function(e,t){var a;return Array.isArray(e)?t<e.length&&(a=e[t]):a=e,a},t.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:n(e.marker.line.width)?0:e.marker.line.width}},680:function(e,t,a){"use strict";var r=a(6);e.exports=function(e,t){for(var a=0;a<e.length;a++)e[a].i=a;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");var i=t.marker;if(i){r.mergeArray(i.opacity,e,"mo",!0),r.mergeArray(i.color,e,"mc");var n=i.line;n&&(r.mergeArray(n.color,e,"mlc"),r.mergeArrayCastPositive(n.width,e,"mlw"))}}},681:function(e,t,a){"use strict";e.exports=function(e,t,a){"spline"===a("line.shape")&&a("line.smoothing")}},682:function(e,t,a){"use strict";var r=a(6),i=a(623),n=a(23),o=a(651),s=a(57),l=r.fillText;e.exports=function(e,t,a,c){var d=e.cd,u=d[0].trace,h=e.xa,f=e.ya,p=h.c2p(t),g=f.c2p(a),v=[p,g],x=u.hoveron||"",y=-1!==u.mode.indexOf("markers")?3:.5;if(-1!==x.indexOf("points")){var m=function(e){var t=Math.max(y,e.mrc||0),a=h.c2p(e.x)-p,r=f.c2p(e.y)-g;return Math.max(Math.sqrt(a*a+r*r)-t,1-y/t)},b=i.getDistanceFunction(c,(function(e){var t=Math.max(3,e.mrc||0),a=1-1/t,r=Math.abs(h.c2p(e.x)-p);return r<t?a*r/t:r-t+a}),(function(e){var t=Math.max(3,e.mrc||0),a=1-1/t,r=Math.abs(f.c2p(e.y)-g);return r<t?a*r/t:r-t+a}),m);if(i.getClosest(d,b,e),!1!==e.index){var k=d[e.index],w=h.c2p(k.x,!0),T=f.c2p(k.y,!0),A=k.mrc||1;e.index=k.i;var M=d[0].t.orientation,_=M&&(k.sNorm||k.s),S="h"===M?_:k.x,L="v"===M?_:k.y;return r.extendFlat(e,{color:o(u,k),x0:w-A,x1:w+A,xLabelVal:S,y0:T-A,y1:T+A,yLabelVal:L,spikeDistance:m(k),hovertemplate:u.hovertemplate}),l(k,u,e),n.getComponentMethod("errorbars","hoverInfo")(k,u,e),[e]}}if(-1!==x.indexOf("fills")&&u._polygons){var D,I,F,O,C,P,R,j,z,N=u._polygons,V=[],B=!1,E=1/0,G=-1/0,H=1/0,W=-1/0;for(D=0;D<N.length;D++)(F=N[D]).contains(v)&&(B=!B,V.push(F),H=Math.min(H,F.ymin),W=Math.max(W,F.ymax));if(B){var U=((H=Math.max(H,0))+(W=Math.min(W,f._length)))/2;for(D=0;D<V.length;D++)for(O=V[D].pts,I=1;I<O.length;I++)(j=O[I-1][1])>U!=(z=O[I][1])>=U&&(P=O[I-1][0],R=O[I][0],z-j&&(C=P+(R-P)*(U-j)/(z-j),E=Math.min(E,C),G=Math.max(G,C)));E=Math.max(E,0),G=Math.min(G,h._length);var Z=s.defaultLine;return s.opacity(u.fillcolor)?Z=u.fillcolor:s.opacity((u.line||{}).color)&&(Z=u.line.color),r.extendFlat(e,{distance:e.maxHoverDistance,x0:E,x1:G,y0:U,y1:U,color:Z,hovertemplate:!1}),delete e.index,u.text&&!Array.isArray(u.text)?e.text=String(u.text):e.text=u.name,[e]}}}},693:function(e,t,a){"use strict";var r=a(57),i=a(79).hasColorscale,n=a(151);e.exports=function(e,t,a,o,s){a("marker.color",o),i(e,"marker")&&n(e,t,s,a,{prefix:"marker.",cLetter:"c"}),a("marker.line.color",r.defaultLine),i(e,"marker.line")&&n(e,t,s,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width"),a("marker.opacity"),a("selected.marker.color"),a("unselected.marker.color")}},731:function(e,t,a){"use strict";var r=a(6),i=a(58),n=a(624).defaults;e.exports=function(e,t,a,o){var s,l,c=o.type,d=o.attributes,u=o.handleDefaults,h=o.partition||"x",f=t._subplots[c],p=f.length,g=p&&f[0].replace(/\d+$/,"");function v(e,t){return r.coerce(s,l,d,e,t)}for(var x=0;x<p;x++){var y=f[x];s=e[y]?e[y]:e[y]={},l=i.newContainer(t,y,g),v("uirevision",t.uirevision);var m={};m[h]=[x/p,(x+1)/p],n(l,t,v,m),o.id=y,u(s,l,v,o)}}},740:function(e,t,a){"use strict";var r=a(12),i=a(6).isArrayOrTypedArray,n=a(25).BADNUM,o=a(23),s=a(105),l=a(110).getAxisGroup,c=a(883);function d(e,t,a,o,d){if(o.length){var b,k,w,T;switch(function(e,t){var a,n;for(a=0;a<t.length;a++){var o,s=t[a],l=s[0].trace,c="funnel"===l.type?l._base:l.base,d="h"===l.orientation?l.xcalendar:l.ycalendar,u="category"===e.type||"multicategory"===e.type?function(){return null}:e.d2c;if(i(c)){for(n=0;n<Math.min(c.length,s.length);n++)o=u(c[n],0,d),r(o)?(s[n].b=+o,s[n].hasB=1):s[n].b=0;for(;n<s.length;n++)s[n].b=0}else{o=u(c,0,d);var h=r(o);for(o=h?o:0,n=0;n<s.length;n++)s[n].b=o,h&&(s[n].hasB=1)}}}(a,o),d.mode){case"overlay":u(t,a,o,d);break;case"group":for(b=[],k=[],w=0;w<o.length;w++)void 0===(T=o[w])[0].trace.offset?k.push(T):b.push(T);k.length&&function(e,t,a,r,i){var o=new c(r,{sepNegVal:!1,overlapNoMerge:!i.norm});(function(e,t,a,r){for(var i=e._fullLayout,n=a.positions,o=a.distinctPositions,s=a.minDiff,c=a.traces,d=c.length,u=n.length!==o.length,h=s*(1-r.gap),v=l(i,t._id)+c[0][0].trace.orientation,x=i._alignmentOpts[v]||{},y=0;y<d;y++){var m,b,k=c[y],w=k[0].trace,T=x[w.alignmentgroup]||{},A=Object.keys(T.offsetGroups||{}).length,M=(m=A?h/A:u?h/d:h)*(1-(r.groupgap||0));b=A?((2*w._offsetIndex+1-A)*m-M)/2:u?((2*y+1-d)*m-M)/2:-M/2;var _=k[0].t;_.barwidth=M,_.poffset=b,_.bargroupwidth=h,_.bardelta=s}a.binWidth=c[0][0].t.barwidth/100,f(a),p(t,a),g(t,a,u)})(e,t,o,i),function(e){for(var t=e.traces,a=0;a<t.length;a++){var r=t[a];if(void 0===r[0].trace.base)for(var i=new c([r],{sepNegVal:!0,overlapNoMerge:!0}),o=0;o<r.length;o++){var s=r[o];if(s.p!==n){var l=i.put(s.p,s.b+s.s);l&&(s.b=l)}}}}(o),i.norm?(x(o),y(a,o,i)):v(a,o)}(e,t,a,k,d),b.length&&u(t,a,b,d);break;case"stack":case"relative":for(b=[],k=[],w=0;w<o.length;w++)void 0===(T=o[w])[0].trace.base?k.push(T):b.push(T);k.length&&function(e,t,a,r,i){var o=new c(r,{sepNegVal:"relative"===i.mode,overlapNoMerge:!(i.norm||"stack"===i.mode||"relative"===i.mode)});h(t,o,i),function(e,t,a){var r,i,o,l,c,d,u=m(e),h=t.traces;for(l=0;l<h.length;l++)if(r=h[l],"funnel"===(i=r[0].trace).type)for(c=0;c<r.length;c++)(d=r[c]).s!==n&&t.put(d.p,-.5*d.s);for(l=0;l<h.length;l++){r=h[l],i=r[0].trace,o="funnel"===i.type;var f=[];for(c=0;c<r.length;c++)if((d=r[c]).s!==n){var p;p=o?d.s:d.s+d.b;var g=t.put(d.p,p),v=g+p;d.b=g,d[u]=v,a.norm||(f.push(v),d.hasB&&f.push(g))}a.norm||(i._extremes[e._id]=s.findExtremes(e,f,{tozero:!0,padded:!0}))}}(a,o,i);for(var l=0;l<r.length;l++)for(var d=r[l],u=0;u<d.length;u++){var f=d[u];if(f.s!==n)f.b+f.s===o.get(f.p,f.s)&&(f._outmost=!0)}i.norm&&y(a,o,i)}(0,t,a,k,d),b.length&&u(t,a,b,d)}!function(e,t){var a,i,n,o=m(t),s={},l=1/0,c=-1/0;for(a=0;a<e.length;a++)for(n=e[a],i=0;i<n.length;i++){var d=n[i].p;r(d)&&(l=Math.min(l,d),c=Math.max(c,d))}var u=1e4/(c-l),h=s.round=function(e){return String(Math.round(u*(e-l)))};for(a=0;a<e.length;a++){(n=e[a])[0].t.extents=s;var f=n[0].t.poffset,p=Array.isArray(f);for(i=0;i<n.length;i++){var g=n[i],v=g[o]-g.w/2;if(r(v)){var x=g[o]+g.w/2,y=h(g.p);s[y]?s[y]=[Math.min(v,s[y][0]),Math.max(x,s[y][1])]:s[y]=[v,x]}g.p0=g.p+(p?f[i]:f),g.p1=g.p0+g.w,g.s0=g.b,g.s1=g.s0+g.s}}}(o,t)}}function u(e,t,a,r){for(var i=0;i<a.length;i++){var n=a[i],o=new c([n],{sepNegVal:!1,overlapNoMerge:!r.norm});h(e,o,r),r.norm?(x(o),y(t,o,r)):v(t,o)}}function h(e,t,a){for(var r=t.minDiff,i=t.traces,n=r*(1-a.gap),o=n*(1-(a.groupgap||0)),s=-o/2,l=0;l<i.length;l++){var c=i[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=n,c.bardelta=r}t.binWidth=i[0][0].t.barwidth/100,f(t),p(e,t),g(e,t)}function f(e){var t,a,n=e.traces;for(t=0;t<n.length;t++){var o,s=n[t],l=s[0],c=l.trace,d=l.t,u=c._offset||c.offset,h=d.poffset;if(i(u)){for(o=Array.prototype.slice.call(u,0,s.length),a=0;a<o.length;a++)r(o[a])||(o[a]=h);for(a=o.length;a<s.length;a++)o.push(h);d.poffset=o}else void 0!==u&&(d.poffset=u);var f=c._width||c.width,p=d.barwidth;if(i(f)){var g=Array.prototype.slice.call(f,0,s.length);for(a=0;a<g.length;a++)r(g[a])||(g[a]=p);for(a=g.length;a<s.length;a++)g.push(p);if(d.barwidth=g,void 0===u){for(o=[],a=0;a<s.length;a++)o.push(h+(p-g[a])/2);d.poffset=o}}else void 0!==f&&(d.barwidth=f,void 0===u&&(d.poffset=h+(p-f)/2))}}function p(e,t){for(var a=t.traces,r=m(e),i=0;i<a.length;i++)for(var n=a[i],o=n[0].t,s=o.poffset,l=Array.isArray(s),c=o.barwidth,d=Array.isArray(c),u=0;u<n.length;u++){var h=n[u],f=h.w=d?c[u]:c;h[r]=h.p+(l?s[u]:s)+f/2}}function g(e,t,a){var r=t.traces,i=t.minDiff/2;s.minDtick(e,t.minDiff,t.distinctPositions[0],a);for(var n=0;n<r.length;n++){var o,l,c,d,u=r[n],h=u[0],f=h.trace,p=[];for(d=0;d<u.length;d++)l=(o=u[d]).p-i,c=o.p+i,p.push(l,c);if(f.width||f.offset){var g=h.t,v=g.poffset,x=g.barwidth,y=Array.isArray(v),m=Array.isArray(x);for(d=0;d<u.length;d++){o=u[d];var b=y?v[d]:v,k=m?x[d]:x;c=(l=o.p+b)+k,p.push(l,c)}}f._extremes[e._id]=s.findExtremes(e,p,{padded:!1})}}function v(e,t){for(var a=t.traces,r=m(e),i=0;i<a.length;i++){for(var n=a[i],o=n[0].trace,l=[],c=!1,d=0;d<n.length;d++){var u=n[d],h=u.b,f=h+u.s;u[r]=f,l.push(f),u.hasB&&l.push(h),u.hasB&&u.b||(c=!0)}o._extremes[e._id]=s.findExtremes(e,l,{tozero:c,padded:!0})}}function x(e){for(var t=e.traces,a=0;a<t.length;a++)for(var r=t[a],i=0;i<r.length;i++){var o=r[i];o.s!==n&&e.put(o.p,o.b+o.s)}}function y(e,t,a){var i=t.traces,o=m(e),l="fraction"===a.norm?1:100,c=l/1e9,d=e.l2c(e.c2l(0)),u="stack"===a.mode?l:d;function h(t){return r(e.c2l(t))&&(t<d-c||t>u+c||!r(d))}for(var f=0;f<i.length;f++){for(var p=i[f],g=p[0].trace,v=[],x=!1,y=!1,b=0;b<p.length;b++){var k=p[b];if(k.s!==n){var w=Math.abs(l/t.get(k.p,k.s));k.b*=w,k.s*=w;var T=k.b,A=T+k.s;k[o]=A,v.push(A),y=y||h(A),k.hasB&&(v.push(T),y=y||h(T)),k.hasB&&k.b||(x=!0)}}g._extremes[e._id]=s.findExtremes(e,v,{tozero:x,padded:y})}}function m(e){return e._id.charAt(0)}e.exports={crossTraceCalc:function(e,t){for(var a=t.xaxis,r=t.yaxis,i=e._fullLayout,n=e._fullData,s=e.calcdata,l=[],c=[],u=0;u<n.length;u++){var h=n[u];if(!0===h.visible&&o.traceIs(h,"bar")&&h.xaxis===a._id&&h.yaxis===r._id&&("h"===h.orientation?l.push(s[u]):c.push(s[u]),h._computePh))for(var f=e.calcdata[u],p=0;p<f.length;p++)"function"==typeof f[p].ph0&&(f[p].ph0=f[p].ph0()),"function"==typeof f[p].ph1&&(f[p].ph1=f[p].ph1())}var g={mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap};d(e,a,r,c,g),d(e,r,a,l,g)},setGroupPositions:d}},741:function(e,t,a){"use strict";var r=a(623),i=a(23),n=a(57),o=a(6).fillText,s=a(667).getLineWidth,l=a(105).hoverLabelText,c=a(25).BADNUM;function d(e,t,a,i){var n,s,d,u,h,f,p,g=e.cd,v=g[0].trace,x=g[0].t,y="closest"===i,m="waterfall"===v.type,b=e.maxHoverDistance;function k(e){return e[d]-e.w/2}function w(e){return e[d]+e.w/2}var T=y?k:function(e){return Math.min(k(e),e.p-x.bardelta/2)},A=y?w:function(e){return Math.max(w(e),e.p+x.bardelta/2)};function M(e,t){return r.inbox(e-n,t-n,b+Math.min(1,Math.abs(t-e)/p)-1)}function _(e){return M(T(e),A(e))}function S(e){var t=s,a=e.b,i=e[u];if(m){var n=Math.abs(e.rawS)||0;t>0?i+=n:t<0&&(i-=n)}return r.inbox(a-t,i-t,b+(i-t)/(i-a)-1)}"h"===v.orientation?(n=a,s=t,d="y",u="x",h=S,f=_):(n=t,s=a,d="x",u="y",f=S,h=_);var L=e[d+"a"],D=e[u+"a"];p=Math.abs(L.r2c(L.range[1])-L.r2c(L.range[0]));var I=r.getDistanceFunction(i,h,f,(function(e){return(h(e)+f(e))/2}));if(r.getClosest(g,I,e),!1!==e.index&&g[e.index].p!==c){y||(T=function(e){return Math.min(k(e),e.p-x.bargroupwidth/2)},A=function(e){return Math.max(w(e),e.p+x.bargroupwidth/2)});var F=g[e.index],O=v.base?F.b+F.s:F.s;e[u+"0"]=e[u+"1"]=D.c2p(F[u],!0),e[u+"LabelVal"]=O;var C=x.extents[x.extents.round(F.p)];return e[d+"0"]=L.c2p(y?T(F):C[0],!0),e[d+"1"]=L.c2p(y?A(F):C[1],!0),e[d+"LabelVal"]=F.p,e.labelLabel=l(L,e[d+"LabelVal"]),e.valueLabel=l(D,e[u+"LabelVal"]),e.spikeDistance=(S(F)+function(e){return M(k(e),w(e))}(F))/2-b,e[d+"Spike"]=L.c2p(F.p,!0),o(F,v,e),e.hovertemplate=v.hovertemplate,e}}function u(e,t){var a=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,i=s(e,t);return n.opacity(a)?a:n.opacity(r)&&i?r:void 0}e.exports={hoverPoints:function(e,t,a,r){var n=d(e,t,a,r);if(n){var o=n.cd,s=o[0].trace,l=o[n.index];return n.color=u(s,l),i.getComponentMethod("errorbars","hoverInfo")(l,s,n),[n]}},hoverOnBars:d,getTraceColor:u}},742:function(e,t,a){"use strict";function r(e,t,a,r,i){var n=t.c2p(r?e.s0:e.p0,!0),o=t.c2p(r?e.s1:e.p1,!0),s=a.c2p(r?e.p0:e.s0,!0),l=a.c2p(r?e.p1:e.s1,!0);return i?[(n+o)/2,(s+l)/2]:r?[o,(s+l)/2]:[(n+o)/2,l]}e.exports=function(e,t){var a,i=e.cd,n=e.xaxis,o=e.yaxis,s=i[0].trace,l="funnel"===s.type,c="h"===s.orientation,d=[];if(!1===t)for(a=0;a<i.length;a++)i[a].selected=0;else for(a=0;a<i.length;a++){var u=i[a],h="ct"in u?u.ct:r(u,n,o,c,l);t.contains(h,!1,a,e)?(d.push({pointNumber:a,x:n.c2d(u.x),y:o.c2d(u.y)}),u.selected=1):u.selected=0}return d}},883:function(e,t,a){"use strict";e.exports=n;var r=a(6).distinctVals,i=a(25).BADNUM;function n(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var a=1/0,n=[],o=0;o<e.length;o++){for(var s=e[o],l=0;l<s.length;l++){var c=s[l];c.p!==i&&n.push(c.p)}s[0]&&s[0].width1&&(a=Math.min(s[0].width1,a))}this.positions=n;var d=r(n);this.distinctPositions=d.vals,1===d.vals.length&&a!==1/0?this.minDiff=a:this.minDiff=Math.min(d.minDiff,a),this.binWidth=this.minDiff,this.bins={}}n.prototype.put=function(e,t){var a=this.getLabel(e,t),r=this.bins[a]||0;return this.bins[a]=r+t,r},n.prototype.get=function(e,t){var a=this.getLabel(e,t);return this.bins[a]||0},n.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},903:function(e,t,a){"use strict";e.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},943:function(e,t,a){"use strict";var r=a(150).hovertemplateAttrs,i=a(150).texttemplateAttrs,n=a(32).extendFlat,o=a(207),s=a(59),l=o.line;e.exports={mode:o.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the radial coordinates"},theta:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the angular coordinates"},r0:{valType:"any",dflt:0,role:"info",editType:"calc+clearAxisTypes",description:["Alternate to `r`.","Builds a linear space of r coordinates.","Use with `dr`","where `r0` is the starting coordinate and `dr` the step."].join(" ")},dr:{valType:"number",dflt:1,role:"info",editType:"calc",description:"Sets the r coordinate step."},theta0:{valType:"any",dflt:0,role:"info",editType:"calc+clearAxisTypes",description:["Alternate to `theta`.","Builds a linear space of theta coordinates.","Use with `dtheta`","where `theta0` is the starting coordinate and `dtheta` the step."].join(" ")},dtheta:{valType:"number",role:"info",editType:"calc",description:["Sets the theta coordinate step.","By default, the `dtheta` step equals the subplot's period divided","by the length of the `r` coordinates."].join(" ")},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",role:"info",editType:"calc+clearAxisTypes",description:["Sets the unit of input *theta* values.","Has an effect only when on *linear* angular axes."].join(" ")},text:o.text,texttemplate:i({editType:"plot"},{keys:["r","theta","text"]}),hovertext:o.hovertext,line:{color:l.color,width:l.width,dash:l.dash,shape:n({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:o.connectgaps,marker:o.marker,cliponaxis:n({},o.cliponaxis,{dflt:!1}),textposition:o.textposition,textfont:o.textfont,fill:n({},o.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterpolar has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:o.fillcolor,hoverinfo:n({},s.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:o.hoveron,hovertemplate:r(),selected:o.selected,unselected:o.unselected}}}]);