/*! For license information please see chart97124fd1ecd6ae34814d.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[14,4,6,9,12,27,34,44,52,57],Array(218).concat([function(t,e,r){"use strict";t.exports=r(810)},,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";t.exports=r(1339)},,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";t.exports=r(1537)},function(t,e,r){"use strict";t.exports=r(1567)},function(t,e,r){"use strict";t.exports=r(1576)},function(t,e,r){"use strict";t.exports=r(1588)},function(t,e,r){"use strict";t.exports=r(1589)},function(t,e,r){"use strict";t.exports=r(1592)},,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var i=r(218);i.register([r(259),r(260),r(261),r(262),r(263),r(239),r(264)]),t.exports=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var i=r(32).extendFlat;e.attributes=function(t,e){e=e||{};var r={valType:"info_array",role:"info",editType:(t=t||{}).editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},n=t.name?t.name+" ":"",a=t.trace?"trace ":"subplot ",o=e.description?" "+e.description:"",s={x:i({},r,{description:["Sets the horizontal domain of this ",n,a,"(in plot fraction).",o].join("")}),y:i({},r,{description:["Sets the vertical domain of this ",n,a,"(in plot fraction).",o].join("")}),editType:t.editType};return t.noGridCell||(s.row={valType:"integer",min:0,dflt:0,role:"info",editType:t.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",n,a,".",o].join("")},s.column={valType:"integer",min:0,dflt:0,role:"info",editType:t.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",n,a,".",o].join("")}),s},e.defaults=function(t,e,r,i){var n=i&&i.x||[0,1],a=i&&i.y||[0,1],o=e.grid;if(o){var s=r("domain.column");void 0!==s&&(s<o.columns?n=o._domains.x[s]:delete t.domain.column);var l=r("domain.row");void 0!==l&&(l<o.rows?a=o._domains.y[l]:delete t.domain.row)}var u=r("domain.x",n),h=r("domain.y",a);u[0]<u[1]||(t.domain.x=n.slice()),h[0]<h[1]||(t.domain.y=a.slice())}},function(t,e,r){"use strict";(function(t){var i=r(643),n=r(762),a=r(746).Buffer;t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,l="undefined"!=typeof BigInt64Array,u=t.__TYPEDARRAY_POOL;u.UINT8C||(u.UINT8C=n([32,0])),u.BIGUINT64||(u.BIGUINT64=n([32,0])),u.BIGINT64||(u.BIGINT64=n([32,0])),u.BUFFER||(u.BUFFER=n([32,0]));var h=u.DATA,c=u.BUFFER;function f(t){if(t){var e=t.length||t.byteLength,r=i.log2(e);h[r].push(t)}}function d(t){t=i.nextPow2(t);var e=i.log2(t),r=h[e];return r.length>0?r.pop():new ArrayBuffer(t)}function p(t){return new Uint8Array(d(t),0,t)}function g(t){return new Uint16Array(d(2*t),0,t)}function v(t){return new Uint32Array(d(4*t),0,t)}function m(t){return new Int8Array(d(t),0,t)}function y(t){return new Int16Array(d(2*t),0,t)}function x(t){return new Int32Array(d(4*t),0,t)}function b(t){return new Float32Array(d(4*t),0,t)}function _(t){return new Float64Array(d(8*t),0,t)}function w(t){return o?new Uint8ClampedArray(d(t),0,t):p(t)}function A(t){return s?new BigUint64Array(d(8*t),0,t):null}function T(t){return l?new BigInt64Array(d(8*t),0,t):null}function M(t){return new DataView(d(t),0,t)}function k(t){t=i.nextPow2(t);var e=i.log2(t),r=c[e];return r.length>0?r.pop():new a(t)}e.free=function(t){if(a.isBuffer(t))c[i.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,r=0|i.log2(e);h[r].push(t)}},e.freeUint8=e.freeUint16=e.freeUint32=e.freeBigUint64=e.freeInt8=e.freeInt16=e.freeInt32=e.freeBigInt64=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(t){f(t.buffer)},e.freeArrayBuffer=f,e.freeBuffer=function(t){c[i.log2(t.length)].push(t)},e.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return d(t);switch(e){case"uint8":return p(t);case"uint16":return g(t);case"uint32":return v(t);case"int8":return m(t);case"int16":return y(t);case"int32":return x(t);case"float":case"float32":return b(t);case"double":case"float64":return _(t);case"uint8_clamped":return w(t);case"bigint64":return T(t);case"biguint64":return A(t);case"buffer":return k(t);case"data":case"dataview":return M(t);default:return null}return null},e.mallocArrayBuffer=d,e.mallocUint8=p,e.mallocUint16=g,e.mallocUint32=v,e.mallocInt8=m,e.mallocInt16=y,e.mallocInt32=x,e.mallocFloat32=e.mallocFloat=b,e.mallocFloat64=e.mallocDouble=_,e.mallocUint8Clamped=w,e.mallocBigUint64=A,e.mallocBigInt64=T,e.mallocDataView=M,e.mallocBuffer=k,e.clearCache=function(){for(var t=0;t<32;++t)u.UINT8[t].length=0,u.UINT16[t].length=0,u.UINT32[t].length=0,u.INT8[t].length=0,u.INT16[t].length=0,u.INT32[t].length=0,u.FLOAT[t].length=0,u.DOUBLE[t].length=0,u.BIGUINT64[t].length=0,u.BIGINT64[t].length=0,u.UINT8C[t].length=0,h[t].length=0,c[t].length=0}}).call(this,r(211))},,,function(t,e,r){"use strict";var i=r(625),n=r(763),a=r(646),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(t,e,r,i,n){this.gl=t,this.type=e,this.handle=r,this.length=i,this.usage=n}var l=s.prototype;function u(t,e,r,i,n,a){var o=n.length*n.BYTES_PER_ELEMENT;if(a<0)return t.bufferData(e,n,i),o;if(o+a>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,a,n),r}function h(t,e){for(var r=i.malloc(t.length,e),n=t.length,a=0;a<n;++a)r[a]=t[a];return r}l.bind=function(){this.gl.bindBuffer(this.type,this.handle)},l.unbind=function(){this.gl.bindBuffer(this.type,null)},l.dispose=function(){this.gl.deleteBuffer(this.handle)},l.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&void 0!==t.shape){var r=t.dtype;if(o.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER)r=gl.getExtension("OES_element_index_uint")&&"uint16"!==r?"uint32":"uint16";if(r===t.dtype&&function(t,e){for(var r=1,i=e.length-1;i>=0;--i){if(e[i]!==r)return!1;r*=t[i]}return!0}(t.shape,t.stride))0===t.offset&&t.data.length===t.shape[0]?this.length=u(this.gl,this.type,this.length,this.usage,t.data,e):this.length=u(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var s=i.malloc(t.size,r),l=a(s,t.shape);n.assign(l,t),this.length=u(this.gl,this.type,this.length,this.usage,e<0?s:s.subarray(0,t.size),e),i.free(s)}}else if(Array.isArray(t)){var c;c=this.type===this.gl.ELEMENT_ARRAY_BUFFER?h(t,"uint16"):h(t,"float32"),this.length=u(this.gl,this.type,this.length,this.usage,e<0?c:c.subarray(0,t.length),e),i.free(c)}else if("object"==typeof t&&"number"==typeof t.length)this.length=u(this.gl,this.type,this.length,this.usage,t,e);else{if("number"!=typeof t&&void 0!==t)throw new Error("gl-buffer: Invalid data type");if(e>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(t|=0)<=0&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}},t.exports=function(t,e,r,i){if(r=r||t.ARRAY_BUFFER,i=i||t.DYNAMIC_DRAW,r!==t.ARRAY_BUFFER&&r!==t.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(i!==t.DYNAMIC_DRAW&&i!==t.STATIC_DRAW&&i!==t.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var n=t.createBuffer(),a=new s(t,r,n,0,i);return a.update(e),a}},function(t,e,r){"use strict";var i=r(6);t.exports=function(t,e){for(var r=0;r<t.length;r++)t[r].i=r;i.mergeArray(e.text,t,"tx"),i.mergeArray(e.texttemplate,t,"txt"),i.mergeArray(e.hovertext,t,"htx"),i.mergeArray(e.customdata,t,"data"),i.mergeArray(e.textposition,t,"tp"),e.textfont&&(i.mergeArrayCastPositive(e.textfont.size,t,"ts"),i.mergeArray(e.textfont.color,t,"tc"),i.mergeArray(e.textfont.family,t,"tf"));var n=e.marker;if(n){i.mergeArrayCastPositive(n.size,t,"ms"),i.mergeArrayCastPositive(n.opacity,t,"mo"),i.mergeArray(n.symbol,t,"mx"),i.mergeArray(n.color,t,"mc");var a=n.line;n.line&&(i.mergeArray(a.color,t,"mlc"),i.mergeArrayCastPositive(a.width,t,"mlw"));var o=n.gradient;o&&"none"!==o.type&&(i.mergeArray(o.type,t,"mgt"),i.mergeArray(o.color,t,"mgc"))}}},function(t,e){t.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],i=0;i<t.length-1;i++)r.push(t[i],e[i]||"");return r.push(t[i]),r.join("")}},function(t,e,r){"use strict";var i=r(6);t.exports=function(t,e){i.isArrayOrTypedArray(e.selectedpoints)&&i.tagSelected(t,e)}},function(t,e,r){"use strict";var i=r(23);e.getDelay=function(t){return t._has&&(t._has("gl3d")||t._has("gl2d")||t._has("mapbox"))?500:0},e.getRedrawFunc=function(t){return function(){var e=t._fullLayout||{};!(e._has&&e._has("polar"))&&t.data&&t.data[0]&&t.data[0].r||i.getComponentMethod("colorbar","draw")(t)}},e.encodeSVG=function(t){return"data:image/svg+xml,"+encodeURIComponent(t)},e.encodeJSON=function(t){return"data:application/json,"+encodeURIComponent(t)};var n=window.URL||window.webkitURL;e.createObjectURL=function(t){return n.createObjectURL(t)},e.revokeObjectURL=function(t){return n.revokeObjectURL(t)},e.createBlob=function(t,e){if("svg"===e)return new window.Blob([t],{type:"image/svg+xml;charset=utf-8"});if("full-json"===e)return new window.Blob([t],{type:"application/json;charset=utf-8"});var r=function(t){for(var e=t.length,r=new ArrayBuffer(e),i=new Uint8Array(r),n=0;n<e;n++)i[n]=t.charCodeAt(n);return r}(window.atob(t));return new window.Blob([r],{type:"image/"+e})},e.octetStream=function(t){document.location.href="data:application/octet-stream"+t},e.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,e.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},function(t,e,r){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},function(t,e,r){"use strict";var i=r(668),n=r(654),a=r(702),o=r(794);function s(t,e){for(var r=new Array(t.length-1),i=1;i<t.length;++i)for(var n=r[i-1]=new Array(t.length-1),a=0,o=0;a<t.length;++a)a!==e&&(n[o++]=t[i][a]);return r}function l(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",l(t.slice(0,e)),",",l(t.slice(e)),")"].join("")}function u(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",l(u(s(t,r))),",",(i=r,1&i?"-":""),t[0][r],")"].join(""));return e;var i}function h(t){for(var e=[],r=[],h=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var i=0;i<t;++i)e[r][i]=["m",i,"[",t-r-1,"]"].join("")}return e}(t),c=[],f=0;f<t;++f)0==(1&f)?e.push.apply(e,u(s(h,f))):r.push.apply(r,u(s(h,f))),c.push("m"+f);var d=l(e),p=l(r),g="orientation"+t+"Exact",v=["function ",g,"(",c.join(),"){var p=",d,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",g].join("");return new Function("sum","prod","scale","sub",v)(n,i,a,o)}var c=h(3),f=h(4),d=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var i,n=(t[1]-r[1])*(e[0]-r[0]),a=(t[0]-r[0])*(e[1]-r[1]),o=n-a;if(n>0){if(a<=0)return o;i=n+a}else{if(!(n<0))return o;if(a>=0)return o;i=-(n+a)}var s=33306690738754716e-32*i;return o>=s||o<=-s?o:c(t,e,r)},function(t,e,r,i){var n=t[0]-i[0],a=e[0]-i[0],o=r[0]-i[0],s=t[1]-i[1],l=e[1]-i[1],u=r[1]-i[1],h=t[2]-i[2],c=e[2]-i[2],d=r[2]-i[2],p=a*u,g=o*l,v=o*s,m=n*u,y=n*l,x=a*s,b=h*(p-g)+c*(v-m)+d*(y-x),_=7771561172376103e-31*((Math.abs(p)+Math.abs(g))*Math.abs(h)+(Math.abs(v)+Math.abs(m))*Math.abs(c)+(Math.abs(y)+Math.abs(x))*Math.abs(d));return b>_||-b>_?b:f(t,e,r,i)}];function p(t){var e=d[t.length];return e||(e=d[t.length]=h(t.length)),e.apply(void 0,t)}!function(){for(;d.length<=5;)d.push(h(d.length));for(var e=[],r=["slow"],i=0;i<=5;++i)e.push("a"+i),r.push("o"+i);var n=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)n.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(n.join(""));var a=Function.apply(void 0,r);for(t.exports=a.apply(void 0,[p].concat(d)),i=0;i<=5;++i)t.exports[i]=d[i]}()},function(t,e,r){"use strict";var i=r(1002),n=r(1003),a=r(803),o=r(1004),s=r(1022),l=r(685);function u(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var h=u.prototype;function c(t,e){return t.name<e.name?-1:1}h.bind=function(){var t;this.program||this._relink();var e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(e>r)for(t=r;t<e;t++)this.gl.enableVertexAttribArray(t);else if(r>e)for(t=e;t<r;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},h.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},h.update=function(t,e,r,u){if(!e||1===arguments.length){var h=t;t=h.vertex,e=h.fragment,r=h.uniforms,u=h.attributes}var f=this,d=f.gl,p=f._vref;f._vref=o.shader(d,d.VERTEX_SHADER,t),p&&p.dispose(),f.vertShader=f._vref.shader;var g=this._fref;if(f._fref=o.shader(d,d.FRAGMENT_SHADER,e),g&&g.dispose(),f.fragShader=f._fref.shader,!r||!u){var v=d.createProgram();if(d.attachShader(v,f.fragShader),d.attachShader(v,f.vertShader),d.linkProgram(v),!d.getProgramParameter(v,d.LINK_STATUS)){var m=d.getProgramInfoLog(v);throw new l(m,"Error linking program:"+m)}r=r||s.uniforms(d,v),u=u||s.attributes(d,v),d.deleteProgram(v)}(u=u.slice()).sort(c);var y,x=[],b=[],_=[];for(y=0;y<u.length;++y){var w=u[y];if(w.type.indexOf("mat")>=0){for(var A=0|w.type.charAt(w.type.length-1),T=new Array(A),M=0;M<A;++M)T[M]=_.length,b.push(w.name+"["+M+"]"),"number"==typeof w.location?_.push(w.location+M):Array.isArray(w.location)&&w.location.length===A&&"number"==typeof w.location[M]?_.push(0|w.location[M]):_.push(-1);x.push({name:w.name,type:w.type,locations:T})}else x.push({name:w.name,type:w.type,locations:[_.length]}),b.push(w.name),"number"==typeof w.location?_.push(0|w.location):_.push(-1)}var k=0;for(y=0;y<_.length;++y)if(_[y]<0){for(;_.indexOf(k)>=0;)k+=1;_[y]=k}var E=new Array(r.length);function S(){f.program=o.program(d,f._vref,f._fref,b,_);for(var t=0;t<r.length;++t)E[t]=d.getUniformLocation(f.program,r[t].name)}S(),f._relink=S,f.types={uniforms:a(r),attributes:a(u)},f.attributes=n(d,f,x,_),Object.defineProperty(f,"uniforms",i(d,f,r,E))},t.exports=function(t,e,r,i,n){var a=new u(t);return a.update(e,r,i,n),a}},function(t,e,r){"use strict";var i=r(79).hasColorscale,n=r(210),a=r(206);t.exports=function(t,e){a.hasLines(e)&&i(e,"line")&&n(t,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),a.hasMarkers(e)&&(i(e,"marker")&&n(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),i(e,"marker.line")&&n(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},,,function(t,e,r){"use strict";function i(t,e,r,i,n){var a=["function ",t,"(a,l,h,",i.join(","),"){",n?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return n?e.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",e,"){i=m;"),r?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),n?a.push("return -1};"):a.push("return i};"),a.join("")}function n(t,e,r,n){return new Function([i("A","x"+t+"y",e,["y"],n),i("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}t.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},function(t,e,r){"use strict";var i=r(24),n=r(106),a=r(23);function o(t,e,r){n.pointStyle(t.selectAll("path.point"),e,r)}function s(t,e,r){n.textPointStyle(t.selectAll("text"),e,r)}t.exports={style:function(t){var e=i.select(t).selectAll("g.trace.scatter");e.style("opacity",(function(t){return t[0].trace.opacity})),e.selectAll("g.points").each((function(e){o(i.select(this),e.trace||e[0].trace,t)})),e.selectAll("g.text").each((function(e){s(i.select(this),e.trace||e[0].trace,t)})),e.selectAll("g.trace path.js-line").call(n.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(n.fillGroupStyle),a.getComponentMethod("errorbars","style")(e)},stylePoints:o,styleText:s,styleOnSelect:function(t,e,r){var i=e[0].trace;i.selectedpoints?(n.selectedPointStyle(r.selectAll("path.point"),i),n.selectedTextStyle(r.selectAll("text"),i)):(o(r,i,t),s(r,i,t))}}},,function(t,e,r){"use strict";var i=r(12),n=r(6),a=r(105),o=r(25).BADNUM,s=r(206),l=r(636),u=r(629),h=r(631);function c(t,e,r,i,n,o,l){var u=e._length,h=t._fullLayout,c=r._id,f=i._id,d=h._firstScatter[p(e)]===e.uid,v=(g(e,h,r,i)||{}).orientation,m=e.fill;r._minDtick=0,i._minDtick=0;var y={padded:!0},x={padded:!0};l&&(y.ppad=x.ppad=l);var b=u<2||n[0]!==n[u-1]||o[0]!==o[u-1];b&&("tozerox"===m||"tonextx"===m&&(d||"h"===v))?y.tozero=!0:(e.error_y||{}).visible||"tonexty"!==m&&"tozeroy"!==m&&(s.hasMarkers(e)||s.hasText(e))||(y.padded=!1,y.ppad=0),b&&("tozeroy"===m||"tonexty"===m&&(d||"v"===v))?x.tozero=!0:"tonextx"!==m&&"tozerox"!==m||(x.padded=!1),c&&(e._extremes[c]=a.findExtremes(r,n,y)),f&&(e._extremes[f]=a.findExtremes(i,o,x))}function f(t,e){if(s.hasMarkers(t)){var r,i=t.marker,o=1.6*(t.marker.sizeref||1);if(r="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/o),3)}:function(t){return Math.max((t||0)/o,3)},n.isArrayOrTypedArray(i.size)){var l={type:"linear"};a.setConvert(l);for(var u=l.makeCalcdata(t.marker,"size"),h=new Array(e),c=0;c<e;c++)h[c]=r(u[c]);return h}return r(i.size)}}function d(t,e){var r=p(e),i=t._firstScatter;i[r]||(i[r]=e.uid)}function p(t){var e=t.stackgroup;return t.xaxis+t.yaxis+t.type+(e?"-"+e:"")}function g(t,e,r,i){var n=t.stackgroup;if(n){var a=e._scatterStackOpts[r._id+i._id][n],o="v"===a.orientation?i:r;return"linear"===o.type||"log"===o.type?a:void 0}}t.exports={calc:function(t,e){var r,s,p,v,m,y,x=t._fullLayout,b=a.getFromId(t,e.xaxis||"x"),_=a.getFromId(t,e.yaxis||"y"),w=b.makeCalcdata(e,"x"),A=_.makeCalcdata(e,"y"),T=e._length,M=new Array(T),k=e.ids,E=g(e,x,b,_),S=!1;d(x,e);var C,L="x",I="y";for(E?(n.pushUnique(E.traceIndices,e._expandedIndex),(r="v"===E.orientation)?(I="s",C="x"):(L="s",C="y"),m="interpolate"===E.stackgaps):c(t,e,b,_,w,A,f(e,T)),s=0;s<T;s++){var j=M[s]={},R=i(w[s]),P=i(A[s]);R&&P?(j[L]=w[s],j[I]=A[s]):E&&(r?R:P)?(j[C]=r?w[s]:A[s],j.gap=!0,m?(j.s=o,S=!0):j.s=0):j[L]=j[I]=o,k&&(j.id=String(k[s]))}if(u(M,e),l(t,e),h(M,e),E){for(s=0;s<M.length;)M[s][C]===o?M.splice(s,1):s++;if(n.sort(M,(function(t,e){return t[C]-e[C]||t.i-e.i})),S){for(s=0;s<M.length-1&&M[s].gap;)s++;for((y=M[s].s)||(y=M[s].s=0),p=0;p<s;p++)M[p].s=y;for(v=M.length-1;v>s&&M[v].gap;)v--;for(y=M[v].s,p=M.length-1;p>v;p--)M[p].s=y;for(;s<v;)if(M[++s].gap){for(p=s+1;M[p].gap;)p++;for(var O=M[s-1][C],z=M[s-1].s,N=(M[p].s-z)/(M[p][C]-O);s<p;)M[s].s=z+(M[s][C]-O)*N,s++}}}return M},calcMarkerSize:f,calcAxisExpansion:c,setFirstScatter:d,getStackOpts:g}},function(t,e,r){"use strict";function i(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=i,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,i=e,n=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=1&r,--n;t[e]=i<<n&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},function(t,e,r){"use strict";var i=r(57),n=r(79).hasColorscale,a=r(151),o=r(206);t.exports=function(t,e,r,s,l,u){var h=o.isBubble(t),c=(t.line||{}).color;(u=u||{},c&&(r=c),l("marker.symbol"),l("marker.opacity",h?.7:1),l("marker.size"),l("marker.color",r),n(t,"marker")&&a(t,e,s,l,{prefix:"marker.",cLetter:"c"}),u.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size")),u.noLine||(l("marker.line.color",c&&!Array.isArray(c)&&e.marker.color!==c?c:h?i.background:i.defaultLine),n(t,"marker.line")&&a(t,e,s,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",h?1:0)),h&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode")),u.gradient)&&("none"!==l("marker.gradient.type")&&l("marker.gradient.color"))}},,function(t,e,r){var i=r(866),n=r(948),a="undefined"!=typeof Float64Array;function o(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(o);var i=new Array(r.length);for(t=0;t<i.length;++t)i[t]=r[t][1];return i}function l(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n="generic"===t;if(-1===e){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(a)()}if(0===e){a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",a)(u[t][0])}a=["'use strict'"];var o=i(e),l=o.map((function(t){return"i"+t})),h="this.offset+"+o.map((function(t){return"this.stride["+t+"]*i"+t})).join("+"),c=o.map((function(t){return"b"+t})).join(","),f=o.map((function(t){return"c"+t})).join(",");a.push("function "+r+"(a,"+c+","+f+",d){this.data=a","this.shape=["+c+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+o.map((function(t){return"this.shape["+t+"]"})).join("*"),"}})"),1===e?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),e<4?(a.push("function "+r+"_order(){"),2===e?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+r+"_set("+l.join(",")+",v){"),n?a.push("return this.data.set("+h+",v)}"):a.push("return this.data["+h+"]=v}"),a.push("proto.get=function "+r+"_get("+l.join(",")+"){"),n?a.push("return this.data.get("+h+")}"):a.push("return this.data["+h+"]}"),a.push("proto.index=function "+r+"_index(",l.join(),"){return "+h+"}"),a.push("proto.hi=function "+r+"_hi("+l.join(",")+"){return new "+r+"(this.data,"+o.map((function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")})).join(",")+","+o.map((function(t){return"this.stride["+t+"]"})).join(",")+",this.offset)}");var d=o.map((function(t){return"a"+t+"=this.shape["+t+"]"})),p=o.map((function(t){return"c"+t+"=this.stride["+t+"]"}));a.push("proto.lo=function "+r+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+p.join(","));for(var g=0;g<e;++g)a.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");a.push("return new "+r+"(this.data,"+o.map((function(t){return"a"+t})).join(",")+","+o.map((function(t){return"c"+t})).join(",")+",b)}"),a.push("proto.step=function "+r+"_step("+l.join(",")+"){var "+o.map((function(t){return"a"+t+"=this.shape["+t+"]"})).join(",")+","+o.map((function(t){return"b"+t+"=this.stride["+t+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(g=0;g<e;++g)a.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");a.push("return new "+r+"(this.data,"+o.map((function(t){return"a"+t})).join(",")+","+o.map((function(t){return"b"+t})).join(",")+",c)}");var v=new Array(e),m=new Array(e);for(g=0;g<e;++g)v[g]="a[i"+g+"]",m[g]="b[i"+g+"]";a.push("proto.transpose=function "+r+"_transpose("+l+"){"+l.map((function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+v.join(",")+","+m.join(",")+",this.offset)}"),a.push("proto.pick=function "+r+"_pick("+l+"){var a=[],b=[],c=this.offset");for(g=0;g<e;++g)a.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");return a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+o.map((function(t){return"shape["+t+"]"})).join(",")+","+o.map((function(t){return"stride["+t+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",a.join("\n"))(u[t],s)}var u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};t.exports=function(t,e,r,i){if(void 0===t)return(0,u.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var o=e.length;if(void 0===r){r=new Array(o);for(var s=o-1,h=1;s>=0;--s)r[s]=h,h*=e[s]}if(void 0===i){i=0;for(s=0;s<o;++s)r[s]<0&&(i-=(e[s]-1)*r[s])}for(var c=function(t){if(n(t))return"buffer";if(a)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),f=u[c];f.length<=o+1;)f.push(l(c,f.length-1));return(0,f[o+1])(t,e,r,i)}},function(t,e,r){"use strict";var i=r(6),n=r(23);t.exports=function(t,e,r,a){var o,s=a("x"),l=a("y");if(n.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],r),s){var u=i.minRowLength(s);l?o=Math.min(u,i.minRowLength(l)):(o=u,a("y0"),a("dy"))}else{if(!l)return 0;o=i.minRowLength(l),a("x0"),a("dx")}return e._length=o,o}},function(t,e,r){"use strict";var i=r(6).isArrayOrTypedArray,n=r(79).hasColorscale,a=r(151);t.exports=function(t,e,r,o,s,l){var u=(t.marker||{}).color;(s("line.color",r),n(t,"line"))?a(t,e,o,s,{prefix:"line.",cLetter:"c"}):s("line.color",!i(u)&&u||r);s("line.width"),(l||{}).noDash||s("line.dash")}},function(t,e,r){"use strict";var i=r(6);t.exports=function(t,e,r,n,a){a=a||{},n("textposition"),i.coerceFont(n,"textfont",r.font),a.noSelect||(n("selected.textfont.color"),n("unselected.textfont.color"))}},,function(t,e,r){"use strict";var i=r(57),n=r(206);t.exports=function(t,e){var r,a;if("lines"===t.mode)return(r=t.line.color)&&i.opacity(r)?r:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var o=e.mcc||(t.marker||{}).color,s=e.mlcc||((t.marker||{}).line||{}).color;return(a=o&&i.opacity(o)?o:s&&i.opacity(s)&&(e.mlw||((t.marker||{}).line||{}).width)?s:"")?i.opacity(a)<.3?i.addOpacity(a,.3):a:(r=(t.line||{}).color)&&i.opacity(r)&&n.hasLines(t)&&t.line.width?r:t.fillcolor}},function(t,e,r){"use strict";var i=r(698),n=r(46),a=r(80),o=r(58).templatedArray;t.exports=o("annotation",{visible:{valType:"boolean",role:"info",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",role:"info",editType:"calc+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,role:"style",editType:"calc+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:n({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,role:"style",editType:"calc+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,role:"style",editType:"calc+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,role:"style",editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",role:"style",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",role:"style",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",role:"style",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",role:"style",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,role:"style",editType:"calc+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"calc+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,role:"style",editType:"calc+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",role:"style",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:i.length,dflt:1,role:"style",editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:i.length,dflt:1,role:"style",editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",role:"style",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,role:"style",editType:"calc+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,role:"style",editType:"calc+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,role:"style",editType:"calc+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,role:"style",editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,role:"style",editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",role:"info",editType:"calc+arraydraw",description:["Sets the x component of the arrow tail about the arrow head.","If `axref` is `pixel`, a positive (negative) ","component corresponds to an arrow pointing","from right to left (left to right).","If `axref` is an axis, this is an absolute value on that axis,","like `x`, NOT a relative value."].join(" ")},ay:{valType:"any",role:"info",editType:"calc+arraydraw",description:["Sets the y component of the arrow tail about the arrow head.","If `ayref` is `pixel`, a positive (negative) ","component corresponds to an arrow pointing","from bottom to top (top to bottom).","If `ayref` is an axis, this is an absolute value on that axis,","like `y`, NOT a relative value."].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.x.toString()],role:"info",editType:"calc",description:["Indicates in what terms the tail of the annotation (ax,ay) ","is specified. If `pixel`, `ax` is a relative offset in pixels ","from `x`. If set to an x axis id (e.g. *x* or *x2*), `ax` is ","specified in the same terms as that axis. This is useful ","for trendline annotations which should continue to indicate ","the correct trend when zoomed."].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.y.toString()],role:"info",editType:"calc",description:["Indicates in what terms the tail of the annotation (ax,ay) ","is specified. If `pixel`, `ay` is a relative offset in pixels ","from `y`. If set to a y axis id (e.g. *y* or *y2*), `ay` is ","specified in the same terms as that axis. This is useful ","for trendline annotations which should continue to indicate ","the correct trend when zoomed."].join(" ")},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],role:"info",editType:"calc",description:["Sets the annotation's x coordinate axis.","If set to an x axis id (e.g. *x* or *x2*), the `x` position","refers to an x coordinate","If set to *paper*, the `x` position refers to the distance from","the left side of the plotting area in normalized coordinates","where 0 (1) corresponds to the left (right) side."].join(" ")},x:{valType:"any",role:"info",editType:"calc+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",role:"info",editType:"calc+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,role:"style",editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],role:"info",editType:"calc",description:["Sets the annotation's y coordinate axis.","If set to an y axis id (e.g. *y* or *y2*), the `y` position","refers to an y coordinate","If set to *paper*, the `y` position refers to the distance from","the bottom of the plotting area in normalized coordinates","where 0 (1) corresponds to the bottom (top)."].join(" ")},y:{valType:"any",role:"info",editType:"calc+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",role:"info",editType:"calc+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,role:"style",editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,role:"style",editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",role:"info",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",role:"info",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",role:"info",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",role:"style",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",role:"style",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:n({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",role:"info",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc",_deprecated:{ref:{valType:"string",role:"info",editType:"calc",description:["Obsolete. Set `xref` and `yref` separately instead."].join(" ")}}})},,function(t,e,r){"use strict";t.exports=function(t,e){var r=0|t.length,i=0|e.length;if(1===r&&1===i)return function(t,e){var r=t+e,i=r-t,n=t-(r-i)+(e-i);if(n)return[n,r];return[r]}(t[0],e[0]);var n,a,o=new Array(r+i),s=0,l=0,u=0,h=Math.abs,c=t[l],f=h(c),d=e[u],p=h(d);f<p?(a=c,(l+=1)<r&&(c=t[l],f=h(c))):(a=d,(u+=1)<i&&(d=e[u],p=h(d)));l<r&&f<p||u>=i?(n=c,(l+=1)<r&&(c=t[l],f=h(c))):(n=d,(u+=1)<i&&(d=e[u],p=h(d)));var g,v,m=n+a,y=m-n,x=a-y,b=x,_=m;for(;l<r&&u<i;)f<p?(n=c,(l+=1)<r&&(c=t[l],f=h(c))):(n=d,(u+=1)<i&&(d=e[u],p=h(d))),(x=(a=b)-(y=(m=n+a)-n))&&(o[s++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g;for(;l<r;)(x=(a=b)-(y=(m=(n=c)+a)-n))&&(o[s++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(l+=1)<r&&(c=t[l]);for(;u<i;)(x=(a=b)-(y=(m=(n=d)+a)-n))&&(o[s++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(u+=1)<i&&(d=e[u]);b&&(o[s++]=b);_&&(o[s++]=_);s||(o[s++]=0);return o.length=s,o}},function(t,e,r){"use strict";var i=r(57),n=r(6).isArrayOrTypedArray;t.exports=function(t,e,r,a){var o=!1;if(e.marker){var s=e.marker.color,l=(e.marker.line||{}).color;s&&!n(s)?o=s:l&&!n(l)&&(o=l)}a("fillcolor",i.addOpacity((e.line||{}).color||o||r,.5))}},function(t,e,r){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},,function(t,e,r){"use strict";var i=r(764),n=r(659),a=r(722);t.exports=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var r=new(a(e))(4),o="uint8"!==e&&"uint8_clamped"!==e;return t.length&&"string"!=typeof t||((t=i(t))[0]/=255,t[1]/=255,t[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||0===t[0])&&(t[1]>1||0===t[1])&&(t[2]>1||0===t[2])&&(!t[3]||t[3]>1))}(t)?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=null!=t[3]?t[3]:255,o&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(o?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=null!=t[3]?t[3]:1):(r[0]=n(Math.floor(255*t[0]),0,255),r[1]=n(Math.floor(255*t[1]),0,255),r[2]=n(Math.floor(255*t[2]),0,255),r[3]=null==t[3]?255:n(Math.floor(255*t[3]),0,255)),r)}},function(t,e){t.exports=function(t,e,r){return e<r?t<e?e:t>r?r:t:t<r?r:t>e?e:t}},,,function(t,e,r){"use strict";var i=r(658);t.exports=function(t){return t?i(t):[0,0,0,1]}},,function(t,e){var r,i,n=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var l,u=[],h=!1,c=-1;function f(){h&&l&&(h=!1,l.length?u=l.concat(u):c=-1,u.length&&d())}function d(){if(!h){var t=s(f);h=!0;for(var e=u.length;e;){for(l=u,u=[];++c<e;)l&&l[c].run();c=-1,e=u.length}l=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new p(t,e)),1!==u.length||h||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},,function(t,e,r){"use strict";var i=r(798),n=r(728);t.exports=function(t,e){var r=n(t),a=n(e);if(0===r)return[i(0),i(1)];if(0===a)return[i(0),i(0)];a<0&&(t=t.neg(),e=e.neg());var o=t.gcd(e);if(o.cmpn(1))return[t.div(o),e.div(o)];return[t,e]}},,function(t,e,r){"use strict";t.exports=function(t,e,r){var n=t*e,a=i*t,o=a-(a-t),s=t-o,l=i*e,u=l-(l-e),h=e-u,c=s*h-(n-o*u-s*u-o*h);if(r)return r[0]=c,r[1]=n,r;return[c,n]};var i=+(Math.pow(2,27)+1)},function(t,e,r){"use strict";var i=r(24),n=r(6),a=r(106),o=r(57),s=r(152),l=/"/g,u=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");t.exports=function(t,e,r){var h,c=t._fullLayout,f=c._paper,d=c._toppaper,p=c.width,g=c.height;f.insert("rect",":first-child").call(a.setRect,0,0,p,g).call(o.fill,c.paper_bgcolor);var v=c._basePlotModules||[];for(h=0;h<v.length;h++){var m=v[h];m.toSVG&&m.toSVG(t)}if(d){var y=d.node().childNodes,x=Array.prototype.slice.call(y);for(h=0;h<x.length;h++){var b=x[h];b.childNodes.length&&f.node().appendChild(b)}}if(c._draggers&&c._draggers.remove(),f.node().style.background="",f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each((function(){var t=i.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){t.style({visibility:null,display:null});var e=this.style.fontFamily;e&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(l,"TOBESTRIPPED"))}else t.remove()})),c._gradientUrlQueryParts){var _=[];for(var w in c._gradientUrlQueryParts)_.push(w);_.length&&f.selectAll(_.join(",")).each((function(){var t=i.select(this),e=this.style.fill;e&&-1!==e.indexOf("url(")&&t.style("fill",e.replace(l,"TOBESTRIPPED"));var r=this.style.stroke;r&&-1!==r.indexOf("url(")&&t.style("stroke",r.replace(l,"TOBESTRIPPED"))}))}"pdf"!==e&&"eps"!==e||f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),f.node().setAttributeNS(s.xmlns,"xmlns",s.svg),f.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink),"svg"===e&&r&&(f.attr("width",r*p),f.attr("height",r*g),f.attr("viewBox","0 0 "+p+" "+g));var A=(new window.XMLSerializer).serializeToString(f.node());return A=function(t){var e=i.select("body").append("div").style({display:"none"}).html(""),r=t.replace(/(&[^;]*;)/gi,(function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":e.html(t).text()}));return e.remove(),r}(A),A=(A=A.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(u,"'"),n.isIE()&&(A=(A=(A=A.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),A}},function(t,e,r){"use strict";var i=r(6),n=r(770).EventEmitter,a=r(632);t.exports=function(t){var e=t.emitter||new n,r=new Promise((function(n,o){var s=window.Image,l=t.svg,u=t.format||"png";if(i.isIE()&&"svg"!==u){var h=new Error(a.MSG_IE_BAD_FORMAT);return o(h),t.promise?r:e.emit("error",h)}var c,f,d=t.canvas,p=t.scale||1,g=t.width||300,v=t.height||150,m=p*g,y=p*v,x=d.getContext("2d"),b=new s;"svg"===u||i.isIE9orBelow()||i.isSafari()?f=a.encodeSVG(l):(c=a.createBlob(l,"svg"),f=a.createObjectURL(c)),d.width=m,d.height=y,b.onload=function(){var r;switch(c=null,a.revokeObjectURL(f),"svg"!==u&&x.drawImage(b,0,0,m,y),u){case"jpeg":r=d.toDataURL("image/jpeg");break;case"png":r=d.toDataURL("image/png");break;case"webp":r=d.toDataURL("image/webp");break;case"svg":r=f;break;default:var i="Image format is not jpeg, png, svg or webp.";if(o(new Error(i)),!t.promise)return e.emit("error",i)}n(r),t.promise||e.emit("success",r)},b.onerror=function(r){if(c=null,a.revokeObjectURL(f),o(r),!t.promise)return e.emit("error",r)},b.src=f}));return t.promise?r:e}},function(t,e,r){"use strict";var i=r(24),n=r(23),a=r(107),o=r(6),s=r(105),l=r(57),u=r(106),h=r(623),c=r(108),f=r(665),d=r(650),p=r(58).arrayEditor,g=r(820);function v(t,e){var r=t._fullLayout.annotations[e]||{},i=s.getFromId(t,r.xref),n=s.getFromId(t,r.yref);i&&i.setScale(),n&&n.setScale(),m(t,r,e,!1,i,n)}function m(t,e,r,a,s,v){var m,y,x=t._fullLayout,b=t._fullLayout._size,_=t._context.edits;a?(m="annotation-"+a,y=a+".annotations"):(m="annotation",y="annotations");var w=p(t.layout,y,e),A=w.modifyBase,T=w.modifyItem,M=w.getUpdateObj;x._infolayer.selectAll("."+m+'[data-index="'+r+'"]').remove();var k="clip"+x._uid+"_ann"+r;if(e._input&&!1!==e.visible){var E={x:{},y:{}},S=+e.textangle||0,C=x._infolayer.append("g").classed(m,!0).attr("data-index",String(r)).style("opacity",e.opacity),L=C.append("g").classed("annotation-text-g",!0),I=_[e.showarrow?"annotationTail":"annotationPosition"],j=e.captureevents||_.annotationText||I,R=L.append("g").style("pointer-events",j?"all":null).call(f,"pointer").on("click",(function(){t._dragging=!1,t.emit("plotly_clickannotation",X(i.event))}));e.hovertext&&R.on("mouseover",(function(){var r=e.hoverlabel,i=r.font,n=this.getBoundingClientRect(),a=t.getBoundingClientRect();h.loneHover({x0:n.left-a.left,x1:n.right-a.left,y:(n.top+n.bottom)/2-a.top,text:e.hovertext,color:r.bgcolor,borderColor:r.bordercolor,fontFamily:i.family,fontSize:i.size,fontColor:i.color},{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:t})})).on("mouseout",(function(){h.loneUnhover(x._hoverlayer.node())}));var P=e.borderwidth,O=e.borderpad,z=P+O,N=R.append("rect").attr("class","bg").style("stroke-width",P+"px").call(l.stroke,e.bordercolor).call(l.fill,e.bgcolor),B=e.width||e.height,F=x._topclips.selectAll("#"+k).data(B?[0]:[]);F.enter().append("clipPath").classed("annclip",!0).attr("id",k).append("rect"),F.exit().remove();var D=e.font,U=x._meta?o.templateString(e.text,x._meta):e.text,V=R.append("text").classed("annotation-text",!0).text(U);_.annotationText?V.call(c.makeEditable,{delegate:R,gd:t}).call(G).on("edit",(function(r){e.text=r,this.call(G),T("text",r),s&&s.autorange&&A(s._name+".autorange",!0),v&&v.autorange&&A(v._name+".autorange",!0),n.call("_guiRelayout",t,M())})):V.call(G)}else i.selectAll("#"+k).remove();function X(t){var i={index:r,annotation:e._input,fullAnnotation:e,event:t};return a&&(i.subplotId=a),i}function G(r){return r.call(u.font,D).attr({"text-anchor":{left:"start",right:"end"}[e.align]||"middle"}),c.convertToTspans(r,t,W),r}function W(){var r=V.selectAll("a");1===r.size()&&r.text()===V.text()&&R.insert("a",":first-child").attr({"xlink:xlink:href":r.attr("xlink:href"),"xlink:xlink:show":r.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(N.node());var i=R.select(".annotation-text-math-group"),h=!i.empty(),p=u.bBox((h?i:V).node()),m=p.width,y=p.height,w=e.width||m,j=e.height||y,O=Math.round(w+2*z),D=Math.round(j+2*z);function U(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}for(var G=!1,W=["x","y"],H=0;H<W.length;H++){var q,Y,Z,Q,K,J=W[H],$=e[J+"ref"]||J,tt=e["a"+J+"ref"],et={x:s,y:v}[J],rt=(S+("x"===J?0:-90))*Math.PI/180,it=O*Math.cos(rt),nt=D*Math.sin(rt),at=Math.abs(it)+Math.abs(nt),ot=e[J+"anchor"],st=e[J+"shift"]*("x"===J?1:-1),lt=E[J];if(et){var ut=et.r2fraction(e[J]);(ut<0||ut>1)&&(tt===$?((ut=et.r2fraction(e["a"+J]))<0||ut>1)&&(G=!0):G=!0),q=et._offset+et.r2p(e[J]),Q=.5}else"x"===J?(Z=e[J],q=b.l+b.w*Z):(Z=1-e[J],q=b.t+b.h*Z),Q=e.showarrow?.5:Z;if(e.showarrow){lt.head=q;var ht=e["a"+J];K=it*U(.5,e.xanchor)-nt*U(.5,e.yanchor),tt===$?(lt.tail=et._offset+et.r2p(ht),Y=K):(lt.tail=q+ht,Y=K+ht),lt.text=lt.tail+K;var ct=x["x"===J?"width":"height"];if("paper"===$&&(lt.head=o.constrain(lt.head,1,ct-1)),"pixel"===tt){var ft=-Math.max(lt.tail-3,lt.text),dt=Math.min(lt.tail+3,lt.text)-ct;ft>0?(lt.tail+=ft,lt.text+=ft):dt>0&&(lt.tail-=dt,lt.text-=dt)}lt.tail+=st,lt.head+=st}else Y=K=at*U(Q,ot),lt.text=q+K;lt.text+=st,K+=st,Y+=st,e["_"+J+"padplus"]=at/2+Y,e["_"+J+"padminus"]=at/2-Y,e["_"+J+"size"]=at,e["_"+J+"shift"]=K}if(G)R.remove();else{var pt=0,gt=0;if("left"!==e.align&&(pt=(w-m)*("center"===e.align?.5:1)),"top"!==e.valign&&(gt=(j-y)*("middle"===e.valign?.5:1)),h)i.select("svg").attr({x:z+pt-1,y:z+gt}).call(u.setClipUrl,B?k:null,t);else{var vt=z+gt-p.top,mt=z+pt-p.left;V.call(c.positionText,mt,vt).call(u.setClipUrl,B?k:null,t)}F.select("rect").call(u.setRect,z,z,w,j),N.call(u.setRect,P/2,P/2,O-P,D-P),R.call(u.setTranslate,Math.round(E.x.text-O/2),Math.round(E.y.text-D/2)),L.attr({transform:"rotate("+S+","+E.x.text+","+E.y.text+")"});var yt,xt=function(r,i){C.selectAll(".annotation-arrow-g").remove();var h=E.x.head,c=E.y.head,f=E.x.tail+r,p=E.y.tail+i,m=E.x.text+r,y=E.y.text+i,x=o.rotationXYMatrix(S,m,y),w=o.apply2DTransform(x),k=o.apply2DTransform2(x),I=+N.attr("width"),j=+N.attr("height"),P=m-.5*I,O=P+I,z=y-.5*j,B=z+j,F=[[P,z,P,B],[P,B,O,B],[O,B,O,z],[O,z,P,z]].map(k);if(!F.reduce((function(t,e){return t^!!o.segmentsIntersect(h,c,h+1e6,c+1e6,e[0],e[1],e[2],e[3])}),!1)){F.forEach((function(t){var e=o.segmentsIntersect(f,p,h,c,t[0],t[1],t[2],t[3]);e&&(f=e.x,p=e.y)}));var D=e.arrowwidth,U=e.arrowcolor,V=e.arrowside,X=C.append("g").style({opacity:l.opacity(U)}).classed("annotation-arrow-g",!0),G=X.append("path").attr("d","M"+f+","+p+"L"+h+","+c).style("stroke-width",D+"px").call(l.stroke,l.rgb(U));if(g(G,V,e),_.annotationPosition&&G.node().parentNode&&!a){var W=h,H=c;if(e.standoff){var q=Math.sqrt(Math.pow(h-f,2)+Math.pow(c-p,2));W+=e.standoff*(f-h)/q,H+=e.standoff*(p-c)/q}var Y,Z,Q=X.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(f-W)+","+(p-H),transform:"translate("+W+","+H+")"}).style("stroke-width",D+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");d.init({element:Q.node(),gd:t,prepFn:function(){var t=u.getTranslate(R);Y=t.x,Z=t.y,s&&s.autorange&&A(s._name+".autorange",!0),v&&v.autorange&&A(v._name+".autorange",!0)},moveFn:function(t,r){var i=w(Y,Z),n=i[0]+t,a=i[1]+r;R.call(u.setTranslate,n,a),T("x",s?s.p2r(s.r2p(e.x)+t):e.x+t/b.w),T("y",v?v.p2r(v.r2p(e.y)+r):e.y-r/b.h),e.axref===e.xref&&T("ax",s.p2r(s.r2p(e.ax)+t)),e.ayref===e.yref&&T("ay",v.p2r(v.r2p(e.ay)+r)),X.attr("transform","translate("+t+","+r+")"),L.attr({transform:"rotate("+S+","+n+","+a+")"})},doneFn:function(){n.call("_guiRelayout",t,M());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}};if(e.showarrow&&xt(0,0),I)d.init({element:R.node(),gd:t,prepFn:function(){yt=L.attr("transform")},moveFn:function(t,r){var i="pointer";if(e.showarrow)e.axref===e.xref?T("ax",s.p2r(s.r2p(e.ax)+t)):T("ax",e.ax+t),e.ayref===e.yref?T("ay",v.p2r(v.r2p(e.ay)+r)):T("ay",e.ay+r),xt(t,r);else{if(a)return;var n,o;if(s)n=s.p2r(s.r2p(e.x)+t);else{var l=e._xsize/b.w,u=e.x+(e._xshift-e.xshift)/b.w-l/2;n=d.align(u+t/b.w,l,0,1,e.xanchor)}if(v)o=v.p2r(v.r2p(e.y)+r);else{var h=e._ysize/b.h,c=e.y-(e._yshift+e.yshift)/b.h-h/2;o=d.align(c-r/b.h,h,0,1,e.yanchor)}T("x",n),T("y",o),s&&v||(i=d.getCursor(s?.5:n,v?.5:o,e.xanchor,e.yanchor))}L.attr({transform:"translate("+t+","+r+")"+yt}),f(R,i)},clickFn:function(r,i){e.captureevents&&t.emit("plotly_clickannotation",X(i))},doneFn:function(){f(R),n.call("_guiRelayout",t,M());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}}t.exports={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var r=0;r<e.annotations.length;r++)e.annotations[r].visible&&v(t,r);return a.previousPromises(t)},drawOne:v,drawRaw:m}},function(t,e,r){"use strict";var i=r(23),n=r(6);t.exports=function(t){return function(e,r){var a=e[t];if(Array.isArray(a))for(var o=i.subplotsRegistry.cartesian,s=o.idRegex,l=r._subplots,u=l.xaxis,h=l.yaxis,c=l.cartesian,f=r._has("cartesian")||r._has("gl2d"),d=0;d<a.length;d++){var p=a[d];if(n.isPlainObject(p)){var g=p.xref,v=p.yref,m=s.x.test(g),y=s.y.test(v);if(m||y){f||n.pushUnique(r._basePlotModules,o);var x=!1;m&&-1===u.indexOf(g)&&(u.push(g),x=!0),y&&-1===h.indexOf(v)&&(h.push(v),x=!0),x&&m&&y&&c.push(g+v)}}}}}},function(t,e,r){"use strict";var i=r(652),n=r(109).overrideAll,a=r(58).templatedArray;t.exports=n(a("annotation",{visible:i.visible,x:{valType:"any",role:"info",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",role:"info",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",role:"info",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",role:"info",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",role:"info",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:i.xanchor,xshift:i.xshift,yanchor:i.yanchor,yshift:i.yshift,text:i.text,textangle:i.textangle,font:i.font,width:i.width,height:i.height,opacity:i.opacity,align:i.align,valign:i.valign,bgcolor:i.bgcolor,bordercolor:i.bordercolor,borderpad:i.borderpad,borderwidth:i.borderwidth,showarrow:i.showarrow,arrowcolor:i.arrowcolor,arrowhead:i.arrowhead,startarrowhead:i.startarrowhead,arrowside:i.arrowside,arrowsize:i.arrowsize,startarrowsize:i.startarrowsize,arrowwidth:i.arrowwidth,standoff:i.standoff,startstandoff:i.startstandoff,hovertext:i.hovertext,hoverlabel:i.hoverlabel,captureevents:i.captureevents}),"calc","from-root")},function(t,e,r){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},function(t,e,r){"use strict";var i=r(112);t.exports={bgcolor:{valType:"color",dflt:i.background,role:"style",editType:"plot",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:i.defaultLine,role:"style",editType:"plot",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,role:"style",editType:"plot",description:"Sets the border width of the range slider."},autorange:{valType:"boolean",dflt:!0,role:"style",editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",role:"info",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,role:"style",editType:"plot",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,role:"info",editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"}},function(t,e,r){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},function(t,e,r){"use strict";var i=r(46),n=r(112),a=(0,r(58).templatedArray)("button",{visible:{valType:"boolean",role:"info",dflt:!0,editType:"plot",description:"Determines whether or not this button is visible."},step:{valType:"enumerated",role:"info",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",role:"info",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",role:"info",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",role:"info",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")});t.exports={visible:{valType:"boolean",role:"info",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:a,x:{valType:"number",min:-2,max:3,role:"style",editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",role:"info",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,role:"style",editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",role:"info",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:i({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:n.lightLine,role:"style",editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",role:"style",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:n.defaultLine,role:"style",editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,role:"style",editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"}},,,,function(t,e,r){"use strict";t.exports=function(t,e,r){"spline"===r("line.shape")&&r("line.smoothing")}},function(t,e,r){"use strict";var i=r(6),n=r(623),a=r(23),o=r(651),s=r(57),l=i.fillText;t.exports=function(t,e,r,u){var h=t.cd,c=h[0].trace,f=t.xa,d=t.ya,p=f.c2p(e),g=d.c2p(r),v=[p,g],m=c.hoveron||"",y=-1!==c.mode.indexOf("markers")?3:.5;if(-1!==m.indexOf("points")){var x=function(t){var e=Math.max(y,t.mrc||0),r=f.c2p(t.x)-p,i=d.c2p(t.y)-g;return Math.max(Math.sqrt(r*r+i*i)-e,1-y/e)},b=n.getDistanceFunction(u,(function(t){var e=Math.max(3,t.mrc||0),r=1-1/e,i=Math.abs(f.c2p(t.x)-p);return i<e?r*i/e:i-e+r}),(function(t){var e=Math.max(3,t.mrc||0),r=1-1/e,i=Math.abs(d.c2p(t.y)-g);return i<e?r*i/e:i-e+r}),x);if(n.getClosest(h,b,t),!1!==t.index){var _=h[t.index],w=f.c2p(_.x,!0),A=d.c2p(_.y,!0),T=_.mrc||1;t.index=_.i;var M=h[0].t.orientation,k=M&&(_.sNorm||_.s),E="h"===M?k:_.x,S="v"===M?k:_.y;return i.extendFlat(t,{color:o(c,_),x0:w-T,x1:w+T,xLabelVal:E,y0:A-T,y1:A+T,yLabelVal:S,spikeDistance:x(_),hovertemplate:c.hovertemplate}),l(_,c,t),a.getComponentMethod("errorbars","hoverInfo")(_,c,t),[t]}}if(-1!==m.indexOf("fills")&&c._polygons){var C,L,I,j,R,P,O,z,N,B=c._polygons,F=[],D=!1,U=1/0,V=-1/0,X=1/0,G=-1/0;for(C=0;C<B.length;C++)(I=B[C]).contains(v)&&(D=!D,F.push(I),X=Math.min(X,I.ymin),G=Math.max(G,I.ymax));if(D){var W=((X=Math.max(X,0))+(G=Math.min(G,d._length)))/2;for(C=0;C<F.length;C++)for(j=F[C].pts,L=1;L<j.length;L++)(z=j[L-1][1])>W!=(N=j[L][1])>=W&&(P=j[L-1][0],O=j[L][0],N-z&&(R=P+(O-P)*(W-z)/(N-z),U=Math.min(U,R),V=Math.max(V,R)));U=Math.max(U,0),V=Math.min(V,f._length);var H=s.defaultLine;return s.opacity(c.fillcolor)?H=c.fillcolor:s.opacity((c.line||{}).color)&&(H=c.line.color),i.extendFlat(t,{distance:t.maxHoverDistance,x0:U,x1:V,y0:W,y1:W,color:H,hovertemplate:!1}),delete t.index,c.text&&!Array.isArray(c.text)?t.text=String(c.text):t.text=c.name,[t]}}}},function(t,e,r){"use strict";var i=r(1366),n=r(1367);function a(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}t.exports=function(t,e,r,o){var s,l=t.createVertexArray?new a(t):t.getExtension("OES_vertex_array_object");return(s=l?i(t,l):n(t)).update(e,r,o),s}},function(t,e,r){(function(t){!function(t,e){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function a(t,e,r){if(a.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof t?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;try{o=r(867).Buffer}catch(t){}function s(t,e,r){for(var i=0,n=Math.min(t.length,r),a=e;a<n;a++){var o=t.charCodeAt(a)-48;i<<=4,i|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return i}function l(t,e,r,i){for(var n=0,a=Math.min(t.length,r),o=e;o<a;o++){var s=t.charCodeAt(o)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}a.isBN=function(t){return t instanceof a||null!==t&&"object"==typeof t&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)},a.max=function(t,e){return t.cmp(e)>0?t:e},a.min=function(t,e){return t.cmp(e)<0?t:e},a.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===e?this._parseHex(t,n):this._parseBase(t,e,n),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},a.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},a.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var a,o,s=0;if("be"===r)for(n=t.length-1,a=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===r)for(n=0,a=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},a.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,a=0;for(r=t.length-6,i=0;r>=e;r-=6)n=s(t,r,r+6),this.words[i]|=n<<a&67108863,this.words[i+1]|=n>>>26-a&4194303,(a+=24)>=26&&(a-=26,i++);r+6!==e&&(n=s(t,e,r+6),this.words[i]|=n<<a&67108863,this.words[i+1]|=n>>>26-a&4194303),this.strip()},a.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var a=t.length-r,o=a%i,s=Math.min(a,a-o)+r,u=0,h=r;h<s;h+=i)u=l(t,h,h+i,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var c=1;for(u=l(t,h,t.length,e),h=0;h<o;h++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},a.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},a.prototype.clone=function(){var t=new a(null);return this.copy(t),t},a.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],a=0|e.words[0],o=n*a,s=67108863&o,l=o/67108864|0;r.words[0]=s;for(var u=1;u<i;u++){for(var h=l>>>26,c=67108863&l,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;h+=(o=(n=0|t.words[p])*(a=0|e.words[d])+c)/67108864|0,c=67108863&o}r.words[u]=0|c,l=0|h}return 0!==l?r.words[u]=0|l:r.length--,r.strip()}a.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,a=0,o=0;o<this.length;o++){var s=this.words[o],l=(16777215&(s<<n|a)).toString(16);r=0!==(a=s>>>24-n&16777215)||o!==this.length-1?u[6-l.length]+l+r:l+r,(n+=2)>=26&&(n-=26,o--)}for(0!==a&&(r=a.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=h[t],d=c[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?g+r:u[f-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(t,e){return i(void 0!==o),this.toArrayLike(o,t,e)},a.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},a.prototype.toArrayLike=function(t,e,r){var n=this.byteLength(),a=r||Math.max(1,n);i(n<=a,"byte array longer than desired length"),i(a>0,"Requested array length <= 0"),this.strip();var o,s,l="le"===e,u=new t(a),h=this.clone();if(l){for(s=0;!h.isZero();s++)o=h.andln(255),h.iushrn(8),u[s]=o;for(;s<a;s++)u[s]=0}else{for(s=0;s<a-n;s++)u[s]=0;for(s=0;!h.isZero();s++)o=h.andln(255),h.iushrn(8),u[a-s-1]=o}return u},Math.clz32?a.prototype._countBits=function(t){return 32-Math.clz32(t)}:a.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},a.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},a.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},a.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},a.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},a.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},a.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},a.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},a.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},a.prototype.notn=function(t){return this.clone().inotn(t)},a.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},a.prototype.iadd=function(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,a=0;a<i.length;a++)e=(0|r.words[a])+(0|i.words[a])+n,this.words[a]=67108863&e,n=e>>>26;for(;0!==n&&a<r.length;a++)e=(0|r.words[a])+n,this.words[a]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},a.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var a=0,o=0;o<i.length;o++)a=(e=(0|r.words[o])-(0|i.words[o])+a)>>26,this.words[o]=67108863&e;for(;0!==a&&o<r.length;o++)a=(e=(0|r.words[o])+a)>>26,this.words[o]=67108863&e;if(0===a&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var i,n,a,o=t.words,s=e.words,l=r.words,u=0,h=0|o[0],c=8191&h,f=h>>>13,d=0|o[1],p=8191&d,g=d>>>13,v=0|o[2],m=8191&v,y=v>>>13,x=0|o[3],b=8191&x,_=x>>>13,w=0|o[4],A=8191&w,T=w>>>13,M=0|o[5],k=8191&M,E=M>>>13,S=0|o[6],C=8191&S,L=S>>>13,I=0|o[7],j=8191&I,R=I>>>13,P=0|o[8],O=8191&P,z=P>>>13,N=0|o[9],B=8191&N,F=N>>>13,D=0|s[0],U=8191&D,V=D>>>13,X=0|s[1],G=8191&X,W=X>>>13,H=0|s[2],q=8191&H,Y=H>>>13,Z=0|s[3],Q=8191&Z,K=Z>>>13,J=0|s[4],$=8191&J,tt=J>>>13,et=0|s[5],rt=8191&et,it=et>>>13,nt=0|s[6],at=8191&nt,ot=nt>>>13,st=0|s[7],lt=8191&st,ut=st>>>13,ht=0|s[8],ct=8191&ht,ft=ht>>>13,dt=0|s[9],pt=8191&dt,gt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var vt=(u+(i=Math.imul(c,U))|0)+((8191&(n=(n=Math.imul(c,V))+Math.imul(f,U)|0))<<13)|0;u=((a=Math.imul(f,V))+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(p,U),n=(n=Math.imul(p,V))+Math.imul(g,U)|0,a=Math.imul(g,V);var mt=(u+(i=i+Math.imul(c,G)|0)|0)+((8191&(n=(n=n+Math.imul(c,W)|0)+Math.imul(f,G)|0))<<13)|0;u=((a=a+Math.imul(f,W)|0)+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,i=Math.imul(m,U),n=(n=Math.imul(m,V))+Math.imul(y,U)|0,a=Math.imul(y,V),i=i+Math.imul(p,G)|0,n=(n=n+Math.imul(p,W)|0)+Math.imul(g,G)|0,a=a+Math.imul(g,W)|0;var yt=(u+(i=i+Math.imul(c,q)|0)|0)+((8191&(n=(n=n+Math.imul(c,Y)|0)+Math.imul(f,q)|0))<<13)|0;u=((a=a+Math.imul(f,Y)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(b,U),n=(n=Math.imul(b,V))+Math.imul(_,U)|0,a=Math.imul(_,V),i=i+Math.imul(m,G)|0,n=(n=n+Math.imul(m,W)|0)+Math.imul(y,G)|0,a=a+Math.imul(y,W)|0,i=i+Math.imul(p,q)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(g,q)|0,a=a+Math.imul(g,Y)|0;var xt=(u+(i=i+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,K)|0)+Math.imul(f,Q)|0))<<13)|0;u=((a=a+Math.imul(f,K)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(A,U),n=(n=Math.imul(A,V))+Math.imul(T,U)|0,a=Math.imul(T,V),i=i+Math.imul(b,G)|0,n=(n=n+Math.imul(b,W)|0)+Math.imul(_,G)|0,a=a+Math.imul(_,W)|0,i=i+Math.imul(m,q)|0,n=(n=n+Math.imul(m,Y)|0)+Math.imul(y,q)|0,a=a+Math.imul(y,Y)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,K)|0)+Math.imul(g,Q)|0,a=a+Math.imul(g,K)|0;var bt=(u+(i=i+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((a=a+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(k,U),n=(n=Math.imul(k,V))+Math.imul(E,U)|0,a=Math.imul(E,V),i=i+Math.imul(A,G)|0,n=(n=n+Math.imul(A,W)|0)+Math.imul(T,G)|0,a=a+Math.imul(T,W)|0,i=i+Math.imul(b,q)|0,n=(n=n+Math.imul(b,Y)|0)+Math.imul(_,q)|0,a=a+Math.imul(_,Y)|0,i=i+Math.imul(m,Q)|0,n=(n=n+Math.imul(m,K)|0)+Math.imul(y,Q)|0,a=a+Math.imul(y,K)|0,i=i+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(g,$)|0,a=a+Math.imul(g,tt)|0;var _t=(u+(i=i+Math.imul(c,rt)|0)|0)+((8191&(n=(n=n+Math.imul(c,it)|0)+Math.imul(f,rt)|0))<<13)|0;u=((a=a+Math.imul(f,it)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(C,U),n=(n=Math.imul(C,V))+Math.imul(L,U)|0,a=Math.imul(L,V),i=i+Math.imul(k,G)|0,n=(n=n+Math.imul(k,W)|0)+Math.imul(E,G)|0,a=a+Math.imul(E,W)|0,i=i+Math.imul(A,q)|0,n=(n=n+Math.imul(A,Y)|0)+Math.imul(T,q)|0,a=a+Math.imul(T,Y)|0,i=i+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,K)|0)+Math.imul(_,Q)|0,a=a+Math.imul(_,K)|0,i=i+Math.imul(m,$)|0,n=(n=n+Math.imul(m,tt)|0)+Math.imul(y,$)|0,a=a+Math.imul(y,tt)|0,i=i+Math.imul(p,rt)|0,n=(n=n+Math.imul(p,it)|0)+Math.imul(g,rt)|0,a=a+Math.imul(g,it)|0;var wt=(u+(i=i+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(f,at)|0))<<13)|0;u=((a=a+Math.imul(f,ot)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(j,U),n=(n=Math.imul(j,V))+Math.imul(R,U)|0,a=Math.imul(R,V),i=i+Math.imul(C,G)|0,n=(n=n+Math.imul(C,W)|0)+Math.imul(L,G)|0,a=a+Math.imul(L,W)|0,i=i+Math.imul(k,q)|0,n=(n=n+Math.imul(k,Y)|0)+Math.imul(E,q)|0,a=a+Math.imul(E,Y)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,K)|0)+Math.imul(T,Q)|0,a=a+Math.imul(T,K)|0,i=i+Math.imul(b,$)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(_,$)|0,a=a+Math.imul(_,tt)|0,i=i+Math.imul(m,rt)|0,n=(n=n+Math.imul(m,it)|0)+Math.imul(y,rt)|0,a=a+Math.imul(y,it)|0,i=i+Math.imul(p,at)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(g,at)|0,a=a+Math.imul(g,ot)|0;var At=(u+(i=i+Math.imul(c,lt)|0)|0)+((8191&(n=(n=n+Math.imul(c,ut)|0)+Math.imul(f,lt)|0))<<13)|0;u=((a=a+Math.imul(f,ut)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,U),n=(n=Math.imul(O,V))+Math.imul(z,U)|0,a=Math.imul(z,V),i=i+Math.imul(j,G)|0,n=(n=n+Math.imul(j,W)|0)+Math.imul(R,G)|0,a=a+Math.imul(R,W)|0,i=i+Math.imul(C,q)|0,n=(n=n+Math.imul(C,Y)|0)+Math.imul(L,q)|0,a=a+Math.imul(L,Y)|0,i=i+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,K)|0)+Math.imul(E,Q)|0,a=a+Math.imul(E,K)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(T,$)|0,a=a+Math.imul(T,tt)|0,i=i+Math.imul(b,rt)|0,n=(n=n+Math.imul(b,it)|0)+Math.imul(_,rt)|0,a=a+Math.imul(_,it)|0,i=i+Math.imul(m,at)|0,n=(n=n+Math.imul(m,ot)|0)+Math.imul(y,at)|0,a=a+Math.imul(y,ot)|0,i=i+Math.imul(p,lt)|0,n=(n=n+Math.imul(p,ut)|0)+Math.imul(g,lt)|0,a=a+Math.imul(g,ut)|0;var Tt=(u+(i=i+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((a=a+Math.imul(f,ft)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(B,U),n=(n=Math.imul(B,V))+Math.imul(F,U)|0,a=Math.imul(F,V),i=i+Math.imul(O,G)|0,n=(n=n+Math.imul(O,W)|0)+Math.imul(z,G)|0,a=a+Math.imul(z,W)|0,i=i+Math.imul(j,q)|0,n=(n=n+Math.imul(j,Y)|0)+Math.imul(R,q)|0,a=a+Math.imul(R,Y)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,K)|0)+Math.imul(L,Q)|0,a=a+Math.imul(L,K)|0,i=i+Math.imul(k,$)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(E,$)|0,a=a+Math.imul(E,tt)|0,i=i+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,it)|0)+Math.imul(T,rt)|0,a=a+Math.imul(T,it)|0,i=i+Math.imul(b,at)|0,n=(n=n+Math.imul(b,ot)|0)+Math.imul(_,at)|0,a=a+Math.imul(_,ot)|0,i=i+Math.imul(m,lt)|0,n=(n=n+Math.imul(m,ut)|0)+Math.imul(y,lt)|0,a=a+Math.imul(y,ut)|0,i=i+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(g,ct)|0,a=a+Math.imul(g,ft)|0;var Mt=(u+(i=i+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,gt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((a=a+Math.imul(f,gt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(B,G),n=(n=Math.imul(B,W))+Math.imul(F,G)|0,a=Math.imul(F,W),i=i+Math.imul(O,q)|0,n=(n=n+Math.imul(O,Y)|0)+Math.imul(z,q)|0,a=a+Math.imul(z,Y)|0,i=i+Math.imul(j,Q)|0,n=(n=n+Math.imul(j,K)|0)+Math.imul(R,Q)|0,a=a+Math.imul(R,K)|0,i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(L,$)|0,a=a+Math.imul(L,tt)|0,i=i+Math.imul(k,rt)|0,n=(n=n+Math.imul(k,it)|0)+Math.imul(E,rt)|0,a=a+Math.imul(E,it)|0,i=i+Math.imul(A,at)|0,n=(n=n+Math.imul(A,ot)|0)+Math.imul(T,at)|0,a=a+Math.imul(T,ot)|0,i=i+Math.imul(b,lt)|0,n=(n=n+Math.imul(b,ut)|0)+Math.imul(_,lt)|0,a=a+Math.imul(_,ut)|0,i=i+Math.imul(m,ct)|0,n=(n=n+Math.imul(m,ft)|0)+Math.imul(y,ct)|0,a=a+Math.imul(y,ft)|0;var kt=(u+(i=i+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;u=((a=a+Math.imul(g,gt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(B,q),n=(n=Math.imul(B,Y))+Math.imul(F,q)|0,a=Math.imul(F,Y),i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,K)|0)+Math.imul(z,Q)|0,a=a+Math.imul(z,K)|0,i=i+Math.imul(j,$)|0,n=(n=n+Math.imul(j,tt)|0)+Math.imul(R,$)|0,a=a+Math.imul(R,tt)|0,i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(L,rt)|0,a=a+Math.imul(L,it)|0,i=i+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(E,at)|0,a=a+Math.imul(E,ot)|0,i=i+Math.imul(A,lt)|0,n=(n=n+Math.imul(A,ut)|0)+Math.imul(T,lt)|0,a=a+Math.imul(T,ut)|0,i=i+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(_,ct)|0,a=a+Math.imul(_,ft)|0;var Et=(u+(i=i+Math.imul(m,pt)|0)|0)+((8191&(n=(n=n+Math.imul(m,gt)|0)+Math.imul(y,pt)|0))<<13)|0;u=((a=a+Math.imul(y,gt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(B,Q),n=(n=Math.imul(B,K))+Math.imul(F,Q)|0,a=Math.imul(F,K),i=i+Math.imul(O,$)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(z,$)|0,a=a+Math.imul(z,tt)|0,i=i+Math.imul(j,rt)|0,n=(n=n+Math.imul(j,it)|0)+Math.imul(R,rt)|0,a=a+Math.imul(R,it)|0,i=i+Math.imul(C,at)|0,n=(n=n+Math.imul(C,ot)|0)+Math.imul(L,at)|0,a=a+Math.imul(L,ot)|0,i=i+Math.imul(k,lt)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(E,lt)|0,a=a+Math.imul(E,ut)|0,i=i+Math.imul(A,ct)|0,n=(n=n+Math.imul(A,ft)|0)+Math.imul(T,ct)|0,a=a+Math.imul(T,ft)|0;var St=(u+(i=i+Math.imul(b,pt)|0)|0)+((8191&(n=(n=n+Math.imul(b,gt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((a=a+Math.imul(_,gt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(B,$),n=(n=Math.imul(B,tt))+Math.imul(F,$)|0,a=Math.imul(F,tt),i=i+Math.imul(O,rt)|0,n=(n=n+Math.imul(O,it)|0)+Math.imul(z,rt)|0,a=a+Math.imul(z,it)|0,i=i+Math.imul(j,at)|0,n=(n=n+Math.imul(j,ot)|0)+Math.imul(R,at)|0,a=a+Math.imul(R,ot)|0,i=i+Math.imul(C,lt)|0,n=(n=n+Math.imul(C,ut)|0)+Math.imul(L,lt)|0,a=a+Math.imul(L,ut)|0,i=i+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(E,ct)|0,a=a+Math.imul(E,ft)|0;var Ct=(u+(i=i+Math.imul(A,pt)|0)|0)+((8191&(n=(n=n+Math.imul(A,gt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((a=a+Math.imul(T,gt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(B,rt),n=(n=Math.imul(B,it))+Math.imul(F,rt)|0,a=Math.imul(F,it),i=i+Math.imul(O,at)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(z,at)|0,a=a+Math.imul(z,ot)|0,i=i+Math.imul(j,lt)|0,n=(n=n+Math.imul(j,ut)|0)+Math.imul(R,lt)|0,a=a+Math.imul(R,ut)|0,i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,ft)|0)+Math.imul(L,ct)|0,a=a+Math.imul(L,ft)|0;var Lt=(u+(i=i+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,gt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((a=a+Math.imul(E,gt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,i=Math.imul(B,at),n=(n=Math.imul(B,ot))+Math.imul(F,at)|0,a=Math.imul(F,ot),i=i+Math.imul(O,lt)|0,n=(n=n+Math.imul(O,ut)|0)+Math.imul(z,lt)|0,a=a+Math.imul(z,ut)|0,i=i+Math.imul(j,ct)|0,n=(n=n+Math.imul(j,ft)|0)+Math.imul(R,ct)|0,a=a+Math.imul(R,ft)|0;var It=(u+(i=i+Math.imul(C,pt)|0)|0)+((8191&(n=(n=n+Math.imul(C,gt)|0)+Math.imul(L,pt)|0))<<13)|0;u=((a=a+Math.imul(L,gt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(B,lt),n=(n=Math.imul(B,ut))+Math.imul(F,lt)|0,a=Math.imul(F,ut),i=i+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(z,ct)|0,a=a+Math.imul(z,ft)|0;var jt=(u+(i=i+Math.imul(j,pt)|0)|0)+((8191&(n=(n=n+Math.imul(j,gt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((a=a+Math.imul(R,gt)|0)+(n>>>13)|0)+(jt>>>26)|0,jt&=67108863,i=Math.imul(B,ct),n=(n=Math.imul(B,ft))+Math.imul(F,ct)|0,a=Math.imul(F,ft);var Rt=(u+(i=i+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,gt)|0)+Math.imul(z,pt)|0))<<13)|0;u=((a=a+Math.imul(z,gt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Pt=(u+(i=Math.imul(B,pt))|0)+((8191&(n=(n=Math.imul(B,gt))+Math.imul(F,pt)|0))<<13)|0;return u=((a=Math.imul(F,gt))+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,l[0]=vt,l[1]=mt,l[2]=yt,l[3]=xt,l[4]=bt,l[5]=_t,l[6]=wt,l[7]=At,l[8]=Tt,l[9]=Mt,l[10]=kt,l[11]=Et,l[12]=St,l[13]=Ct,l[14]=Lt,l[15]=It,l[16]=jt,l[17]=Rt,l[18]=Pt,0!==u&&(l[19]=u,r.length++),r};function p(t,e,r){return(new g).mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(d=f),a.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,a=0;a<r.length-1;a++){var o=n;n=0;for(var s=67108863&i,l=Math.min(a,e.length-1),u=Math.max(0,a-t.length+1);u<=l;u++){var h=a-u,c=(0|t.words[h])*(0|e.words[u]),f=67108863&c;s=67108863&(f=f+s|0),n+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}r.words[a]=s,i=o,o=n}return 0!==i?r.words[a]=i:r.length--,r.strip()}(this,t,e):p(this,t,e)},g.prototype.makeRBT=function(t){for(var e=new Array(t),r=a.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},g.prototype.permute=function(t,e,r,i,n,a){for(var o=0;o<a;o++)i[o]=e[t[o]],n[o]=r[t[o]]},g.prototype.transform=function(t,e,r,i,n,a){this.permute(a,t,e,r,i,n);for(var o=1;o<n;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),u=Math.sin(2*Math.PI/s),h=0;h<n;h+=s)for(var c=l,f=u,d=0;d<o;d++){var p=r[h+d],g=i[h+d],v=r[h+d+o],m=i[h+d+o],y=c*v-f*m;m=c*m+f*v,v=y,r[h+d]=p+v,i[h+d]=g+m,r[h+d+o]=p-v,i[h+d+o]=g-m,d!==s&&(y=l*c-u*f,f=l*f+u*c,c=y)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},g.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},g.prototype.convert13b=function(t,e,r,n){for(var a=0,o=0;o<e;o++)a+=0|t[o],r[2*o]=8191&a,a>>>=13,r[2*o+1]=8191&a,a>>>=13;for(o=2*e;o<n;++o)r[o]=0;i(0===a),i(0==(-8192&a))},g.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),a=this.stub(i),o=new Array(i),s=new Array(i),l=new Array(i),u=new Array(i),h=new Array(i),c=new Array(i),f=r.words;f.length=i,this.convert13b(t.words,t.length,o,i),this.convert13b(e.words,e.length,u,i),this.transform(o,a,s,l,i,n),this.transform(u,a,h,c,i,n);for(var d=0;d<i;d++){var p=s[d]*h[d]-l[d]*c[d];l[d]=s[d]*c[d]+l[d]*h[d],s[d]=p}return this.conjugate(s,l,i),this.transform(s,l,f,a,i,n),this.conjugate(f,a,i),this.normalize13b(f,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},a.prototype.mul=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},a.prototype.mulf=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),p(this,t,e)},a.prototype.imul=function(t){return this.clone().mulTo(t,this)},a.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,a=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=a>>>26,this.words[r]=67108863&a}return 0!==e&&(this.words[r]=e,this.length++),this},a.prototype.muln=function(t){return this.clone().imuln(t)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new a(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},a.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,a=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var s=this.words[e]&a,l=(0|this.words[e])-s<<r;this.words[e]=l|o,o=s>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},a.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},a.prototype.iushrn=function(t,e,r){var n;i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,l=r;if(n-=o,n=Math.max(0,n),l){for(var u=0;u<o;u++)l.words[u]=this.words[u];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=n);u--){var c=0|this.words[u];this.words[u]=h<<26-a|c>>>a,h=c&s}return l&&0!==h&&(l.words[l.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},a.prototype.shln=function(t){return this.clone().ishln(t)},a.prototype.ushln=function(t){return this.clone().iushln(t)},a.prototype.shrn=function(t){return this.clone().ishrn(t)},a.prototype.ushrn=function(t){return this.clone().iushrn(t)},a.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},a.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},a.prototype.maskn=function(t){return this.clone().imaskn(t)},a.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},a.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},a.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},a.prototype.addn=function(t){return this.clone().iaddn(t)},a.prototype.subn=function(t){return this.clone().isubn(t)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(t,e,r){var n,a,o=t.length+r;this._expand(o);var s=0;for(n=0;n<t.length;n++){a=(0|this.words[n+r])+s;var l=(0|t.words[n])*e;s=((a-=67108863&l)>>26)-(l/67108864|0),this.words[n+r]=67108863&a}for(;n<this.length-r;n++)s=(a=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&a;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(a=-(0|this.words[n])+s)>>26,this.words[n]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(t,e){var r=(this.length,t.length),i=this.clone(),n=t,o=0|n.words[n.length-1];0!==(r=26-this._countBits(o))&&(n=n.ushln(r),i.iushln(r),o=0|n.words[n.length-1]);var s,l=i.length-n.length;if("mod"!==e){(s=new a(null)).length=l+1,s.words=new Array(s.length);for(var u=0;u<s.length;u++)s.words[u]=0}var h=i.clone()._ishlnsubmul(n,1,l);0===h.negative&&(i=h,s&&(s.words[l]=1));for(var c=l-1;c>=0;c--){var f=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(f=Math.min(f/o|0,67108863),i._ishlnsubmul(n,f,c);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);s&&(s.words[c]=f)}return s&&s.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},a.prototype.divmod=function(t,e,r){return i(!t.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new a(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new a(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,o,s},a.prototype.div=function(t){return this.divmod(t,"div",!1).div},a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},a.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),a=r.cmp(i);return a<0||1===n&&0===a?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},a.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},a.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},a.prototype.divn=function(t){return this.clone().idivn(t)},a.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new a(1),o=new a(0),s=new a(0),l=new a(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),c=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(h),o.isub(c)),n.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(h),l.isub(c)),s.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s),o.isub(l)):(r.isub(e),s.isub(n),l.isub(o))}return{a:s,b:l,gcd:r.iushln(u)}},a.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new a(1),s=new a(0),l=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0==(e.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(e.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var c=0,f=1;0==(r.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(s)):(r.isub(e),s.isub(o))}return(n=0===e.cmpn(1)?o:s).cmpn(0)<0&&n.iadd(t),n},a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var a=e;e=r,r=a}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},a.prototype.invm=function(t){return this.egcd(t).a.umod(t)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(t){return this.words[0]&t},a.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var a=n,o=r;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},a.prototype.gtn=function(t){return 1===this.cmpn(t)},a.prototype.gt=function(t){return 1===this.cmp(t)},a.prototype.gten=function(t){return this.cmpn(t)>=0},a.prototype.gte=function(t){return this.cmp(t)>=0},a.prototype.ltn=function(t){return-1===this.cmpn(t)},a.prototype.lt=function(t){return-1===this.cmp(t)},a.prototype.lten=function(t){return this.cmpn(t)<=0},a.prototype.lte=function(t){return this.cmp(t)<=0},a.prototype.eqn=function(t){return 0===this.cmpn(t)},a.prototype.eq=function(t){return 0===this.cmp(t)},a.red=function(t){return new w(t)},a.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(t){return this.red=t,this},a.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},a.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},a.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},a.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},a.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},a.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},a.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},a.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new a(e,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function w(t){if("string"==typeof t){var e=a._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){w.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new a(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},n(y,m),y.prototype.split=function(t,e){for(var r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,i=10;i<t.length;i++){var a=0|t.words[i];t.words[i-10]=(4194303&a)<<4|n>>>22,n=a}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},y.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(x,m),n(b,m),n(_,m),_.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},a._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new y;else if("p224"===t)e=new x;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new _}return v[t]=e,e},w.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},w.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},w.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},w.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},w.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},w.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},w.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},w.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},w.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},w.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},w.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},w.prototype.isqr=function(t){return this.imul(t,t.clone())},w.prototype.sqr=function(t){return this.mul(t,t)},w.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new a(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var s=new a(1).toRed(this),l=s.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new a(2*h*h).toRed(this);0!==this.pow(h,u).cmp(l);)h.redIAdd(l);for(var c=this.pow(h,n),f=this.pow(t,n.addn(1).iushrn(1)),d=this.pow(t,n),p=o;0!==d.cmp(s);){for(var g=d,v=0;0!==g.cmp(s);v++)g=g.redSqr();i(v<p);var m=this.pow(c,new a(1).iushln(p-v-1));f=f.redMul(m),c=m.redSqr(),d=d.redMul(c),p=v}return f},w.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},w.prototype.pow=function(t,e){if(e.isZero())return new a(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new a(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],o=0,s=0,l=e.bitLength()%26;for(0===l&&(l=26),i=e.length-1;i>=0;i--){for(var u=e.words[i],h=l-1;h>=0;h--){var c=u>>h&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4===++s||0===i&&0===h)&&(n=this.mul(n,r[o]),s=0,o=0)):s=0}l=26}return n},w.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},w.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},a.mont=function(t){return new A(t)},n(A,w),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new a(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(969)(t))},function(t,e){function r(t,e,r){this.shortMessage=e||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(r?"\n"+r:""),this.stack=(new Error).stack}r.prototype=new Error,r.prototype.name="GLError",r.prototype.constructor=r,t.exports=r},,function(t,e,r){"use strict";var i={tonextx:1,tonexty:1,tonext:1};t.exports=function(t,e,r){var n,a,o,s,l,u={},h=!1,c=-1,f=0,d=-1;for(a=0;a<r.length;a++)(o=(n=r[a][0].trace).stackgroup||"")?o in u?l=u[o]:(l=u[o]=f,f++):n.fill in i&&d>=0?l=d:(l=d=f,f++),l<c&&(h=!0),n._groupIndex=c=l;var p=r.slice();h&&p.sort((function(t,e){var r=t[0].trace,i=e[0].trace;return r._groupIndex-i._groupIndex||r.index-i.index}));var g={};for(a=0;a<p.length;a++)o=(n=p[a][0].trace).stackgroup||"",!0===n.visible?(n._nexttrace=null,n.fill in i&&(s=g[o],n._prevtrace=s||null,s&&(s._nexttrace=n)),n._ownfill=n.fill&&("tozero"===n.fill.substr(0,6)||"toself"===n.fill||"to"===n.fill.substr(0,2)&&!n._prevtrace),g[o]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return p}},,,function(t,e,r){"use strict";var i=r(24),n=r(12),a=r(1030),o=r(6),s=o.nestedProperty,l=r(895),u=r(694),h=r(23),c=r(113),f=r(107),d=r(771),p=r(105),g=r(106),v=r(57),m=r(1031).initInteractions,y=r(152),x=r(108),b=r(641).clearSelect,_=r(153).dfltConfig,w=r(775),A=r(777),T=r(882),M=r(109),k=r(80).AX_NAME_PATTERN,E=0;function S(t){var e=t._fullLayout;e._redrawFromAutoMarginCount?e._redrawFromAutoMarginCount--:t.emit("plotly_afterplot")}function C(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){o.error(t)}}function L(t,e){C(t,v.combine(e,"white"))}function I(t,e){if(!t._context){t._context=o.extendDeep({},_);var r=i.select("base");t._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var n,s,l,u=t._context;if(e){for(s=Object.keys(e),n=0;n<s.length;n++)"editable"!==(l=s[n])&&"edits"!==l&&l in u&&("setBackground"===l&&"opaque"===e[l]?u[l]=L:u[l]=e[l]);e.plot3dPixelRatio&&!u.plotGlPixelRatio&&(u.plotGlPixelRatio=u.plot3dPixelRatio);var h=e.editable;if(void 0!==h)for(u.editable=h,s=Object.keys(u.edits),n=0;n<s.length;n++)u.edits[s[n]]=h;if(e.edits)for(s=Object.keys(e.edits),n=0;n<s.length;n++)(l=s[n])in u.edits&&(u.edits[l]=e.edits[l]);u._exportedPlot=e._exportedPlot}u.staticPlot&&(u.editable=!1,u.edits={},u.autosizable=!1,u.scrollZoom=!1,u.doubleClick=!1,u.showTips=!1,u.showLink=!1,u.displayModeBar=!1),"hover"!==u.displayModeBar||a||(u.displayModeBar=!0),"transparent"!==u.setBackground&&"function"==typeof u.setBackground||(u.setBackground=C),u._hasZeroHeight=u._hasZeroHeight||0===t.clientHeight,u._hasZeroWidth=u._hasZeroWidth||0===t.clientWidth;var c=u.scrollZoom,f=u._scrollZoom={};if(!0===c)f.cartesian=1,f.gl3d=1,f.geo=1,f.mapbox=1;else if("string"==typeof c){var d=c.split("+");for(n=0;n<d.length;n++)f[d[n]]=1}else!1!==c&&(f.gl3d=1,f.geo=1,f.mapbox=1)}function j(t,e){var r,i,n=e+1,a=[];for(r=0;r<t.length;r++)(i=t[r])<0?a.push(n+i):a.push(i);return a}function R(t,e,r){var i,n;for(i=0;i<e.length;i++){if((n=e[i])!==parseInt(n,10))throw new Error("all values in "+r+" must be integers");if(n>=t.data.length||n<-t.data.length)throw new Error(r+" must be valid indices for gd.data.");if(e.indexOf(n,i+1)>-1||n>=0&&e.indexOf(-t.data.length+n)>-1||n<0&&e.indexOf(t.data.length+n)>-1)throw new Error("each index in "+r+" must be unique.")}}function P(t,e,r){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),R(t,e,"currentIndices"),void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&R(t,r,"newIndices"),void 0!==r&&e.length!==r.length)throw new Error("current and new indices must be of equal length.")}function O(t,e,r,i,a){!function(t,e,r,i){var n=o.isPlainObject(i);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!o.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===r)throw new Error("indices must be an integer or array of integers");for(var a in R(t,r,"indices"),e){if(!Array.isArray(e[a])||e[a].length!==r.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(n&&(!(a in i)||!Array.isArray(i[a])||i[a].length!==e[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,e,r,i);for(var l=function(t,e,r,i){var a,l,u,h,c,f=o.isPlainObject(i),d=[];for(var p in Array.isArray(r)||(r=[r]),r=j(r,t.data.length-1),e)for(var g=0;g<r.length;g++){if(a=t.data[r[g]],l=(u=s(a,p)).get(),h=e[p][g],!o.isArrayOrTypedArray(h))throw new Error("attribute: "+p+" index: "+g+" must be an array");if(!o.isArrayOrTypedArray(l))throw new Error("cannot extend missing or non-array attribute: "+p);if(l.constructor!==h.constructor)throw new Error("cannot extend array with an array of a different type: "+p);c=f?i[p][g]:i,n(c)||(c=-1),d.push({prop:u,target:l,insert:h,maxp:Math.floor(c)})}return d}(t,e,r,i),u={},h={},c=0;c<l.length;c++){var f=l[c].prop,d=l[c].maxp,p=a(l[c].target,l[c].insert,d);f.set(p[0]),Array.isArray(u[f.astr])||(u[f.astr]=[]),u[f.astr].push(p[1]),Array.isArray(h[f.astr])||(h[f.astr]=[]),h[f.astr].push(l[c].target.length)}return{update:u,maxPoints:h}}function z(t,e){var r=new t.constructor(t.length+e.length);return r.set(t),r.set(e,t.length),r}function N(t,r,i,n){t=o.getGraphDiv(t),A.clearPromiseQueue(t);var a={};if("string"==typeof r)a[r]=i;else{if(!o.isPlainObject(r))return o.warn("Restyle fail.",r,i,n),Promise.reject();a=o.extendFlat({},r),void 0===n&&(n=i)}Object.keys(a).length&&(t.changed=!0);var s=A.coerceTraceIndices(t,n),l=U(t,a,s),h=l.flags;h.calc&&(t.calcdata=void 0),h.clearAxisTypes&&A.clearAxisTypes(t,s,{});var c=[];h.fullReplot?c.push(e.plot):(c.push(f.previousPromises),f.supplyDefaults(t),h.markerSize&&(f.doCalcdata(t),W(c)),h.style&&c.push(T.doTraceStyle),h.colorbars&&c.push(T.doColorBars),c.push(S)),c.push(f.rehover,f.redrag),u.add(t,N,[t,l.undoit,l.traces],N,[t,l.redoit,l.traces]);var d=o.syncOrAsync(c,t);return d&&d.then||(d=Promise.resolve()),d.then((function(){return t.emit("plotly_restyle",l.eventData),t}))}function B(t){return void 0===t?null:t}function F(t,e){return e?function(e,r,i){var n=s(e,r),a=n.set;return n.set=function(e){D((i||"")+r,n.get(),e,t),a(e)},n}:s}function D(t,e,r,i){if(Array.isArray(e)||Array.isArray(r))for(var n=Array.isArray(e)?e:[],a=Array.isArray(r)?r:[],s=Math.max(n.length,a.length),l=0;l<s;l++)D(t+"["+l+"]",n[l],a[l],i);else if(o.isPlainObject(e)||o.isPlainObject(r)){var u=o.isPlainObject(e)?e:{},h=o.isPlainObject(r)?r:{},c=o.extendFlat({},u,h);for(var f in c)D(t+"."+f,u[f],h[f],i)}else void 0===i[t]&&(i[t]=B(e))}function U(t,e,r){var i,n=t._fullLayout,a=t._fullData,l=t.data,u=n._guiEditing,d=F(n._preGUI,u),g=o.extendDeepAll({},e);V(e);var v,m=M.traceFlags(),y={},x={};function b(){return r.map((function(){}))}function _(t){var e=p.id2name(t);-1===v.indexOf(e)&&v.push(e)}function w(t){return"LAYOUT"+t+".autorange"}function T(t){return"LAYOUT"+t+".range"}function k(t){for(var e=t;e<a.length;e++)if(a[e]._input===l[t])return a[e]}function E(i,a,o){if(Array.isArray(i))i.forEach((function(t){E(t,a,o)}));else if(!(i in e)&&!A.hasParent(e,i)){var s;if("LAYOUT"===i.substr(0,6))s=d(t.layout,i.replace("LAYOUT",""));else{var h=r[o];s=F(n._tracePreGUI[k(h)._fullInput.uid],u)(l[h],i)}i in x||(x[i]=b()),void 0===x[i][o]&&(x[i][o]=B(s.get())),void 0!==a&&s.set(a)}}function S(t){return function(e){return a[e][t]}}function C(t){return function(e,i){return!1===e?a[r[i]][t]:null}}for(var L in e){if(A.hasParent(e,L))throw new Error("cannot set "+L+" and a parent attribute simultaneously");var I,j,R,P,O,z,N=e[L];if("autobinx"!==L&&"autobiny"!==L||(L=L.charAt(L.length-1)+"bins",N=Array.isArray(N)?N.map(C(L)):!1===N?r.map(S(L)):null),y[L]=N,"LAYOUT"!==L.substr(0,6)){for(x[L]=b(),i=0;i<r.length;i++){if(I=l[r[i]],j=k(r[i]),P=(R=F(n._tracePreGUI[j._fullInput.uid],u)(I,L)).get(),void 0!==(O=Array.isArray(N)?N[i%N.length]:N)){var D=R.parts[R.parts.length-1],U=L.substr(0,L.length-D.length-1),X=U?U+".":"",G=U?s(j,U).get():j;if((z=c.getTraceValObject(j,R.parts))&&z.impliedEdits&&null!==O)for(var W in z.impliedEdits)E(o.relativeAttr(L,W),z.impliedEdits[W],i);else if("thicknessmode"!==D&&"lenmode"!==D||P===O||"fraction"!==O&&"pixels"!==O||!G){if("type"===L&&("pie"===O!=("pie"===P)||"funnelarea"===O!=("funnelarea"===P))){var H="x",q="y";"bar"!==O&&"bar"!==P||"h"!==I.orientation||(H="y",q="x"),o.swapAttrs(I,["?","?src"],"labels",H),o.swapAttrs(I,["d?","?0"],"label",H),o.swapAttrs(I,["?","?src"],"values",q),"pie"===P||"funnelarea"===P?(s(I,"marker.color").set(s(I,"marker.colors").get()),n._pielayer.selectAll("g.trace").remove()):h.traceIs(I,"cartesian")&&s(I,"marker.colors").set(s(I,"marker.color").get())}}else{var Y=n._size,Z=G.orient,Q="top"===Z||"bottom"===Z;if("thicknessmode"===D){var K=Q?Y.h:Y.w;E(X+"thickness",G.thickness*("fraction"===O?1/K:K),i)}else{var J=Q?Y.w:Y.h;E(X+"len",G.len*("fraction"===O?1/J:J),i)}}x[L][i]=B(P);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(L)){if("orientation"===L){R.set(O);var $=I.x&&!I.y?"h":"v";if((R.get()||$)===j.orientation)continue}else"orientationaxes"===L&&(I.orientation={v:"h",h:"v"}[j.orientation]);A.swapXYData(I),m.calc=m.clearAxisTypes=!0}else-1!==f.dataArrayContainers.indexOf(R.parts[0])?(A.manageArrayContainers(R,O,x),m.calc=!0):(z?z.arrayOk&&!h.traceIs(j,"regl")&&(o.isArrayOrTypedArray(O)||o.isArrayOrTypedArray(P))?m.calc=!0:M.update(m,z):m.calc=!0,R.set(O))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(L)&&p.swap(t,r),"orientationaxes"===L){var tt=s(t.layout,"hovermode");"x"===tt.get()?tt.set("y"):"y"===tt.get()?tt.set("x"):"x unified"===tt.get()?tt.set("y unified"):"y unified"===tt.get()&&tt.set("x unified")}if(-1!==["orientation","type"].indexOf(L)){for(v=[],i=0;i<r.length;i++){var et=l[r[i]];h.traceIs(et,"cartesian")&&(_(et.xaxis||"x"),_(et.yaxis||"y"))}E(v.map(w),!0,0),E(v.map(T),[0,1],0)}}else R=d(t.layout,L.replace("LAYOUT","")),x[L]=[B(R.get())],R.set(Array.isArray(N)?N[0]:N),m.calc=!0}return(m.calc||m.plot)&&(m.fullReplot=!0),{flags:m,undoit:x,redoit:y,traces:r,eventData:o.extendDeepNoArrays([],[g,r])}}function V(t){var e,r,i,n=o.counterRegex("axis",".title",!1,!1),a=/colorbar\.title$/,s=Object.keys(t);for(e=0;e<s.length;e++)r=s[e],i=t[r],"title"!==r&&!n.test(r)&&!a.test(r)||"string"!=typeof i&&"number"!=typeof i?r.indexOf("titlefont")>-1?l(r,r.replace("titlefont","title.font")):r.indexOf("titleposition")>-1?l(r,r.replace("titleposition","title.position")):r.indexOf("titleside")>-1?l(r,r.replace("titleside","title.side")):r.indexOf("titleoffset")>-1&&l(r,r.replace("titleoffset","title.offset")):l(r,r.replace("title","title.text"));function l(e,r){t[r]=t[e],delete t[e]}}function X(t,e,r){if(t=o.getGraphDiv(t),A.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);var i={};if("string"==typeof e)i[e]=r;else{if(!o.isPlainObject(e))return o.warn("Relayout fail.",e,r),Promise.reject();i=o.extendFlat({},e)}Object.keys(i).length&&(t.changed=!0);var n=Z(t,i),a=n.flags;a.calc&&(t.calcdata=void 0);var s=[f.previousPromises];a.layoutReplot?s.push(T.layoutReplot):Object.keys(i).length&&(G(t,a,n)||f.supplyDefaults(t),a.legend&&s.push(T.doLegend),a.layoutstyle&&s.push(T.layoutStyles),a.axrange&&W(s,n.rangesAltered),a.ticks&&s.push(T.doTicksRelayout),a.modebar&&s.push(T.doModeBar),a.camera&&s.push(T.doCamera),a.colorbars&&s.push(T.doColorBars),s.push(S)),s.push(f.rehover,f.redrag),u.add(t,X,[t,n.undoit],X,[t,n.redoit]);var l=o.syncOrAsync(s,t);return l&&l.then||(l=Promise.resolve(t)),l.then((function(){return t.emit("plotly_relayout",n.eventData),t}))}function G(t,e,r){var i=t._fullLayout;if(!e.axrange)return!1;for(var n in e)if("axrange"!==n&&e[n])return!1;for(var a in r.rangesAltered){var o=p.id2name(a),s=t.layout[o],l=i[o];if(l.autorange=s.autorange,l.range=s.range.slice(),l.cleanRange(),l._matchGroup)for(var u in l._matchGroup)if(u!==a){var h=i[p.id2name(u)];h.autorange=l.autorange,h.range=l.range.slice(),h._input.range=l.range.slice()}}return!0}function W(t,e){var r=e?function(t){var r=[],i=!0;for(var n in e){var a=p.getFromId(t,n);if(r.push(n),a._matchGroup)for(var o in a._matchGroup)e[o]||r.push(o);a.automargin&&(i=!1)}return p.draw(t,r,{skipTitle:i})}:function(t){return p.draw(t,"redraw")};t.push(b,T.doAutoRangeAndConstraints,r,T.drawData,T.finalDraw)}var H=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,q=/^[xyz]axis[0-9]*\.autorange$/,Y=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Z(t,e){var r,i,n,a=t.layout,l=t._fullLayout,u=l._guiEditing,f=F(l._preGUI,u),d=Object.keys(e),g=p.list(t),v=o.extendDeepAll({},e),m={};for(V(e),d=Object.keys(e),i=0;i<d.length;i++)if(0===d[i].indexOf("allaxes")){for(n=0;n<g.length;n++){var y=g[n]._id.substr(1),x=-1!==y.indexOf("scene")?y+".":"",b=d[i].replace("allaxes",x+g[n]._name);e[b]||(e[b]=e[d[i]])}delete e[d[i]]}var _=M.layoutFlags(),T={},E={};function S(t,r){if(Array.isArray(t))t.forEach((function(t){S(t,r)}));else if(!(t in e)&&!A.hasParent(e,t)){var i=f(a,t);t in E||(E[t]=B(i.get())),void 0!==r&&i.set(r)}}var C,L={};function I(t){var e=p.name2id(t.split(".")[0]);return L[e]=1,e}for(var j in e){if(A.hasParent(e,j))throw new Error("cannot set "+j+" and a parent attribute simultaneously");for(var R=f(a,j),P=e[j],O=R.parts.length-1;O>0&&"string"!=typeof R.parts[O];)O--;var z=R.parts[O],N=R.parts[O-1]+"."+z,D=R.parts.slice(0,O).join("."),U=s(t.layout,D).get(),X=s(l,D).get(),G=R.get();if(void 0!==P){T[j]=P,E[j]="reverse"===z?P:B(G);var W=c.getLayoutValObject(l,R.parts);if(W&&W.impliedEdits&&null!==P)for(var Z in W.impliedEdits)S(o.relativeAttr(j,Z),W.impliedEdits[Z]);if(-1!==["width","height"].indexOf(j))if(P){S("autosize",null);var K="height"===j?"width":"height";S(K,l[K])}else l[j]=t._initialAutoSize[j];else if("autosize"===j)S("width",P?null:l.width),S("height",P?null:l.height);else if(N.match(H))I(N),s(l,D+"._inputRange").set(null);else if(N.match(q)){I(N),s(l,D+"._inputRange").set(null);var J=s(l,D).get();J._inputDomain&&(J._input.domain=J._inputDomain.slice())}else N.match(Y)&&s(l,D+"._inputDomain").set(null);if("type"===z){var $=U,tt="linear"===X.type&&"log"===P,et="log"===X.type&&"linear"===P;if(tt||et){if($&&$.range)if(X.autorange)tt&&($.range=$.range[1]>$.range[0]?[1,2]:[2,1]);else{var rt=$.range[0],it=$.range[1];tt?(rt<=0&&it<=0&&S(D+".autorange",!0),rt<=0?rt=it/1e6:it<=0&&(it=rt/1e6),S(D+".range[0]",Math.log(rt)/Math.LN10),S(D+".range[1]",Math.log(it)/Math.LN10)):(S(D+".range[0]",Math.pow(10,rt)),S(D+".range[1]",Math.pow(10,it)))}else S(D+".autorange",!0);Array.isArray(l._subplots.polar)&&l._subplots.polar.length&&l[R.parts[0]]&&"radialaxis"===R.parts[1]&&delete l[R.parts[0]]._subplot.viewInitial["radialaxis.range"],h.getComponentMethod("annotations","convertCoords")(t,X,P,S),h.getComponentMethod("images","convertCoords")(t,X,P,S)}else S(D+".autorange",!0),S(D+".range",null);s(l,D+"._inputRange").set(null)}else if(z.match(k)){var nt=s(l,j).get(),at=(P||{}).type;at&&"-"!==at||(at="linear"),h.getComponentMethod("annotations","convertCoords")(t,nt,at,S),h.getComponentMethod("images","convertCoords")(t,nt,at,S)}var ot=w.containerArrayMatch(j);if(ot){r=ot.array,i=ot.index;var st=ot.property,lt=W||{editType:"calc"};""!==i&&""===st&&(w.isAddVal(P)?E[j]=null:w.isRemoveVal(P)?E[j]=(s(a,r).get()||[])[i]:o.warn("unrecognized full object value",e)),M.update(_,lt),m[r]||(m[r]={});var ut=m[r][i];ut||(ut=m[r][i]={}),ut[st]=P,delete e[j]}else"reverse"===z?(U.range?U.range.reverse():(S(D+".autorange",!0),U.range=[1,0]),X.autorange?_.calc=!0:_.plot=!0):(l._has("scatter-like")&&l._has("regl")&&"dragmode"===j&&("lasso"===P||"select"===P)&&"lasso"!==G&&"select"!==G||l._has("gl2d")?_.plot=!0:W?M.update(_,W):_.calc=!0,R.set(P))}}for(r in m){w.applyContainerArrayChanges(t,f(a,r),m[r],_,f)||(_.plot=!0)}var ht=l._axisConstraintGroups||[];for(C in L)for(i=0;i<ht.length;i++){var ct=ht[i];if(ct[C])for(var ft in _.calc=!0,ct)L[ft]||(p.getFromId(t,ft)._constraintShrinkable=!0)}return(Q(t)||e.height||e.width)&&(_.plot=!0),(_.plot||_.calc)&&(_.layoutReplot=!0),{flags:_,rangesAltered:L,undoit:E,redoit:T,eventData:v}}function Q(t){var e=t._fullLayout,r=e.width,i=e.height;return t.layout.autosize&&f.plotAutoSize(t,t.layout,e),e.width!==r||e.height!==i}function K(t,r,i,n){if(t=o.getGraphDiv(t),A.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);o.isPlainObject(r)||(r={}),o.isPlainObject(i)||(i={}),Object.keys(r).length&&(t.changed=!0),Object.keys(i).length&&(t.changed=!0);var a=A.coerceTraceIndices(t,n),s=U(t,o.extendFlat({},r),a),l=s.flags,h=Z(t,o.extendFlat({},i)),c=h.flags;(l.calc||c.calc)&&(t.calcdata=void 0),l.clearAxisTypes&&A.clearAxisTypes(t,a,i);var d=[];c.layoutReplot?d.push(T.layoutReplot):l.fullReplot?d.push(e.plot):(d.push(f.previousPromises),G(t,c,h)||f.supplyDefaults(t),l.style&&d.push(T.doTraceStyle),(l.colorbars||c.colorbars)&&d.push(T.doColorBars),c.legend&&d.push(T.doLegend),c.layoutstyle&&d.push(T.layoutStyles),c.axrange&&W(d,h.rangesAltered),c.ticks&&d.push(T.doTicksRelayout),c.modebar&&d.push(T.doModeBar),c.camera&&d.push(T.doCamera),d.push(S)),d.push(f.rehover,f.redrag),u.add(t,K,[t,s.undoit,h.undoit,s.traces],K,[t,s.redoit,h.redoit,s.traces]);var p=o.syncOrAsync(d,t);return p&&p.then||(p=Promise.resolve(t)),p.then((function(){return t.emit("plotly_update",{data:s.eventData,layout:h.eventData}),t}))}function J(t){return function(e){e._fullLayout._guiEditing=!0;var r=t.apply(null,arguments);return e._fullLayout._guiEditing=!1,r}}var $=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],tt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function et(t,e){for(var r=0;r<e.length;r++){var i=e[r],n=t.match(i.pattern);if(n)return{head:n[1],attr:i.attr}}}function rt(t,e){var r=s(e,t).get();if(void 0!==r)return r;var i=t.split(".");for(i.pop();i.length>1;)if(i.pop(),void 0!==(r=s(e,i.join(".")+".uirevision").get()))return r;return e.uirevision}function it(t,e){for(var r=0;r<e.length;r++)if(e[r]._fullInput.uid===t)return r;return-1}function nt(t,e,r){for(var i=0;i<e.length;i++)if(e[i].uid===t)return i;return!e[r]||e[r].uid?-1:r}function at(t,e){var r=o.isPlainObject(t),i=Array.isArray(t);return r||i?(r&&o.isPlainObject(e)||i&&Array.isArray(e))&&JSON.stringify(t)===JSON.stringify(e):t===e}function ot(t,e,r,i){var n,a,l,u=i.getValObject,h=i.flags,c=i.immutable,f=i.inArray,d=i.arrayIndex;function p(){var t=n.editType;f&&-1!==t.indexOf("arraydraw")?o.pushUnique(h.arrays[f],d):(M.update(h,n),"none"!==t&&h.nChanges++,i.transition&&n.anim&&h.nChangesAnim++,(H.test(l)||q.test(l))&&(h.rangesAltered[r[0]]=1),Y.test(l)&&s(e,"_inputDomain").set(null),"datarevision"===a&&(h.newDataRevision=1))}function g(t){return"data_array"===t.valType||t.arrayOk}for(a in t){if(h.calc&&!i.transition)return;var v=t[a],m=e[a],y=r.concat(a);if(l=y.join("."),"_"!==a.charAt(0)&&"function"!=typeof v&&v!==m){if(("tick0"===a||"dtick"===a)&&"geo"!==r[0]){var x=e.tickmode;if("auto"===x||"array"===x||!x)continue}if(("range"!==a||!e.autorange)&&("zmin"!==a&&"zmax"!==a||"contourcarpet"!==e.type)&&(n=u(y))&&(!n._compareAsJSON||JSON.stringify(v)!==JSON.stringify(m))){var b,_=n.valType,w=g(n),A=Array.isArray(v),T=Array.isArray(m);if(A&&T){var k="_input_"+a,E=t[k],S=e[k];if(Array.isArray(E)&&E===S)continue}if(void 0===m)w&&A?h.calc=!0:p();else if(n._isLinkedToArray){var C=[],L=!1;f||(h.arrays[a]=C);var I=Math.min(v.length,m.length),j=Math.max(v.length,m.length);if(I!==j){if("arraydraw"!==n.editType){p();continue}L=!0}for(b=0;b<I;b++)ot(v[b],m[b],y.concat(b),o.extendFlat({inArray:a,arrayIndex:b},i));if(L)for(b=I;b<j;b++)C.push(b)}else!_&&o.isPlainObject(v)?ot(v,m,y,i):w?A&&T?(c&&(h.calc=!0),(c||i.newDataRevision)&&p()):A!==T?h.calc=!0:p():A&&T&&v.length===m.length&&String(v)===String(m)||p()}}}for(a in e)if(!(a in t)&&"_"!==a.charAt(0)&&"function"!=typeof e[a]){if(g(n=u(r.concat(a)))&&Array.isArray(e[a]))return void(h.calc=!0);p()}}function st(t){var e=i.select(t),r=t._fullLayout;if(r._container=e.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._paperdiv.selectAll(".main-svg").remove(),r._paperdiv.select(".modebar-container").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),r._modebardiv=r._paperdiv.append("div"),r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",!0),!r._uid){var n={};i.selectAll("defs").each((function(){this.id&&(n[this.id.split("-")[1]]=1)})),r._uid=o.randstr(n)}r._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);var a=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=a.append("g").classed("imagelayer",!0),r._shapeLowerLayer=a.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._treemaplayer=r._paper.append("g").classed("treemaplayer",!0),r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",!0),r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);var s=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=s.append("g").classed("imagelayer",!0),r._shapeUpperLayer=s.append("g").classed("shapelayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",!0),r._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),t.emit("plotly_framework")}e.animate=function(t,e,r){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var i=t._transitionData;i._frameQueue||(i._frameQueue=[]);var n=(r=f.supplyAnimationDefaults(r)).transition,a=r.frame;function s(t){return Array.isArray(n)?t>=n.length?n[0]:n[t]:n}function l(t){return Array.isArray(a)?t>=a.length?a[0]:a[t]:a}function u(t,e){var r=0;return function(){if(t&&++r===e)return t()}}return void 0===i._frameWaitingCnt&&(i._frameWaitingCnt=0),new Promise((function(a,h){function c(){i._currentFrame&&i._currentFrame.onComplete&&i._currentFrame.onComplete();var e=i._currentFrame=i._frameQueue.shift();if(e){var r=e.name?e.name.toString():null;t._fullLayout._currentFrame=r,i._lastFrameAt=Date.now(),i._timeToNext=e.frameOpts.duration,f.transition(t,e.frame.data,e.frame.layout,A.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then((function(){e.onComplete&&e.onComplete()})),t.emit("plotly_animatingframe",{name:r,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(i._animationRaf),i._animationRaf=null}function d(){t.emit("plotly_animating"),i._lastFrameAt=-1/0,i._timeToNext=0,i._runningTransitions=0,i._currentFrame=null;var e=function(){i._animationRaf=window.requestAnimationFrame(e),Date.now()-i._lastFrameAt>i._timeToNext&&c()};e()}var p,g,v=0;function m(t){return Array.isArray(n)?v>=n.length?t.transitionOpts=n[v]:t.transitionOpts=n[0]:t.transitionOpts=n,v++,t}var y=[],x=null==e,b=Array.isArray(e);if(!x&&!b&&o.isPlainObject(e))y.push({type:"object",data:m(o.extendFlat({},e))});else if(x||-1!==["string","number"].indexOf(typeof e))for(p=0;p<i._frames.length;p++)(g=i._frames[p])&&(x||String(g.group)===String(e))&&y.push({type:"byname",name:String(g.name),data:m({name:g.name})});else if(b)for(p=0;p<e.length;p++){var _=e[p];-1!==["number","string"].indexOf(typeof _)?(_=String(_),y.push({type:"byname",name:_,data:m({name:_})})):o.isPlainObject(_)&&y.push({type:"object",data:m(o.extendFlat({},_))})}for(p=0;p<y.length;p++)if("byname"===(g=y[p]).type&&!i._frameHash[g.data.name])return o.warn('animate failure: frame not found: "'+g.data.name+'"'),void h();-1!==["next","immediate"].indexOf(r.mode)&&function(){if(0!==i._frameQueue.length){for(;i._frameQueue.length;){var e=i._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===r.direction&&y.reverse();var w=t._fullLayout._currentFrame;if(w&&r.fromcurrent){var T=-1;for(p=0;p<y.length;p++)if("byname"===(g=y[p]).type&&g.name===w){T=p;break}if(T>0&&T<y.length-1){var M=[];for(p=0;p<y.length;p++)g=y[p],("byname"!==y[p].type||p>T)&&M.push(g);y=M}}y.length>0?function(e){if(0!==e.length){for(var n=0;n<e.length;n++){var o;o="byname"===e[n].type?f.computeFrame(t,e[n].name):e[n].data;var c=l(n),p=s(n);p.duration=Math.min(p.duration,c.duration);var g={frame:o,name:e[n].name,frameOpts:c,transitionOpts:p};n===e.length-1&&(g.onComplete=u(a,2),g.onInterrupt=h),i._frameQueue.push(g)}"immediate"===r.mode&&(i._lastFrameAt=-1/0),i._animationRaf||d()}}(y):(t.emit("plotly_animated"),a())}))},e.addFrames=function(t,e,r){if(t=o.getGraphDiv(t),null==e)return Promise.resolve();if(!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var i,n,a,s,l=t._transitionData._frames,h=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var c=l.length+2*e.length,d=[],p={};for(i=e.length-1;i>=0;i--)if(o.isPlainObject(e[i])){var g=e[i].name,v=(h[g]||p[g]||{}).name,m=e[i].name,y=h[v]||p[v];v&&m&&"number"==typeof m&&y&&E<5&&(E++,o.warn('addFrames: overwriting frame "'+(h[v]||p[v]).name+'" with a frame whose name of type "number" also equates to "'+v+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===E&&o.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),p[g]={name:g},d.push({frame:f.supplyFrameDefaults(e[i]),index:r&&void 0!==r[i]&&null!==r[i]?r[i]:c+i})}d.sort((function(t,e){return t.index>e.index?-1:t.index<e.index?1:0}));var x=[],b=[],_=l.length;for(i=d.length-1;i>=0;i--){if("number"==typeof(n=d[i].frame).name&&o.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!n.name)for(;h[n.name="frame "+t._transitionData._counter++];);if(h[n.name]){for(a=0;a<l.length&&(l[a]||{}).name!==n.name;a++);x.push({type:"replace",index:a,value:n}),b.unshift({type:"replace",index:a,value:l[a]})}else s=Math.max(0,Math.min(d[i].index,_)),x.push({type:"insert",index:s,value:n}),b.unshift({type:"delete",index:s}),_++}var w=f.modifyFrames,A=f.modifyFrames,T=[t,b],M=[t,x];return u&&u.add(t,w,T,A,M),f.modifyFrames(t,x)},e.deleteFrames=function(t,e){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var r,i,n=t._transitionData._frames,a=[],s=[];if(!e)for(e=[],r=0;r<n.length;r++)e.push(r);for((e=e.slice()).sort(),r=e.length-1;r>=0;r--)i=e[r],a.push({type:"delete",index:i}),s.unshift({type:"insert",index:i,value:n[i]});var l=f.modifyFrames,h=f.modifyFrames,c=[t,s],d=[t,a];return u&&u.add(t,l,c,h,d),f.modifyFrames(t,a)},e.addTraces=function t(r,i,n){r=o.getGraphDiv(r);var a,s,l=[],h=e.deleteTraces,c=t,f=[r,l],d=[r,i];for(function(t,e,r){var i,n;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),i=0;i<e.length;i++)if("object"!=typeof(n=e[i])||Array.isArray(n)||null===n)throw new Error("all values in traces array must be non-array objects");if(void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&r.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(r,i,n),Array.isArray(i)||(i=[i]),i=i.map((function(t){return o.extendFlat({},t)})),A.cleanData(i),a=0;a<i.length;a++)r.data.push(i[a]);for(a=0;a<i.length;a++)l.push(-i.length+a);if(void 0===n)return s=e.redraw(r),u.add(r,h,f,c,d),s;Array.isArray(n)||(n=[n]);try{P(r,l,n)}catch(t){throw r.data.splice(r.data.length-i.length,i.length),t}return u.startSequence(r),u.add(r,h,f,c,d),s=e.moveTraces(r,l,n),u.stopSequence(r),s},e.deleteTraces=function t(r,i){r=o.getGraphDiv(r);var n,a,s=[],l=e.addTraces,h=t,c=[r,s,i],f=[r,i];if(void 0===i)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(i)||(i=[i]),R(r,i,"indices"),(i=j(i,r.data.length-1)).sort(o.sorterDes),n=0;n<i.length;n+=1)a=r.data.splice(i[n],1)[0],s.push(a);var d=e.redraw(r);return u.add(r,l,c,h,f),d},e.extendTraces=function t(r,i,n,a){function s(t,e,r){var i,n;if(o.isTypedArray(t))if(r<0){var a=new t.constructor(0),s=z(t,e);r<0?(i=s,n=a):(i=a,n=s)}else if(i=new t.constructor(r),n=new t.constructor(t.length+e.length-r),r===e.length)i.set(e),n.set(t);else if(r<e.length){var l=e.length-r;i.set(e.subarray(l)),n.set(t),n.set(e.subarray(0,l),t.length)}else{var u=r-e.length,h=t.length-u;i.set(t.subarray(h)),i.set(e,u),n.set(t.subarray(0,h))}else i=t.concat(e),n=r>=0&&r<i.length?i.splice(0,i.length-r):[];return[i,n]}var l=O(r=o.getGraphDiv(r),i,n,a,s),h=e.redraw(r),c=[r,l.update,n,l.maxPoints];return u.add(r,e.prependTraces,c,t,arguments),h},e.moveTraces=function t(r,i,n){var a,s=[],l=[],h=t,c=t,f=[r=o.getGraphDiv(r),n,i],d=[r,i,n];if(P(r,i,n),i=Array.isArray(i)?i:[i],void 0===n)for(n=[],a=0;a<i.length;a++)n.push(-i.length+a);for(n=Array.isArray(n)?n:[n],i=j(i,r.data.length-1),n=j(n,r.data.length-1),a=0;a<r.data.length;a++)-1===i.indexOf(a)&&s.push(r.data[a]);for(a=0;a<i.length;a++)l.push({newIndex:n[a],trace:r.data[i[a]]});for(l.sort((function(t,e){return t.newIndex-e.newIndex})),a=0;a<l.length;a+=1)s.splice(l[a].newIndex,0,l[a].trace);r.data=s;var p=e.redraw(r);return u.add(r,h,f,c,d),p},e.prependTraces=function t(r,i,n,a){function s(t,e,r){var i,n;if(o.isTypedArray(t))if(r<=0){var a=new t.constructor(0),s=z(e,t);r<0?(i=s,n=a):(i=a,n=s)}else if(i=new t.constructor(r),n=new t.constructor(t.length+e.length-r),r===e.length)i.set(e),n.set(t);else if(r<e.length){var l=e.length-r;i.set(e.subarray(0,l)),n.set(e.subarray(l)),n.set(t,l)}else{var u=r-e.length;i.set(e),i.set(t.subarray(0,u),e.length),n.set(t.subarray(u))}else i=e.concat(t),n=r>=0&&r<i.length?i.splice(r,i.length):[];return[i,n]}var l=O(r=o.getGraphDiv(r),i,n,a,s),h=e.redraw(r),c=[r,l.update,n,l.maxPoints];return u.add(r,e.extendTraces,c,t,arguments),h},e.newPlot=function(t,r,i,n){return t=o.getGraphDiv(t),f.cleanPlot([],{},t._fullData||[],t._fullLayout||{}),f.purge(t),e.plot(t,r,i,n)},e.plot=function(t,r,n,a){var s;if(t=o.getGraphDiv(t),l.init(t),o.isPlainObject(r)){var u=r;r=u.data,n=u.layout,a=u.config,s=u.frames}if(!1===l.triggerHandler(t,"plotly_beforeplot",[r,n,a]))return Promise.reject();r||n||o.isPlotDiv(t)||o.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",t),I(t,a),n||(n={}),i.select(t).classed("js-plotly-plot",!0),g.makeTester(),Array.isArray(t._promises)||(t._promises=[]);var c=0===(t.data||[]).length&&Array.isArray(r);Array.isArray(r)&&(A.cleanData(r),c?t.data=r:t.data.push.apply(t.data,r),t.empty=!1),t.layout&&!c||(t.layout=A.cleanLayout(n)),f.supplyDefaults(t);var v=t._fullLayout,y=v._has("cartesian");if(!v._has("polar")&&r&&r[0]&&r[0].r)return o.log("Legacy polar charts are deprecated!"),function(t,e,r){var n=i.select(t).selectAll(".plot-container").data([0]);n.enter().insert("div",":first-child").classed("plot-container plotly",!0);var a=n.selectAll(".svg-container").data([0]);a.enter().append("div").classed("svg-container",!0).style("position","relative"),a.html(""),e&&(t.data=e);r&&(t.layout=r);d.manager.fillLayout(t),a.style({width:t._fullLayout.width+"px",height:t._fullLayout.height+"px"}),t.framework=d.manager.framework(t),t.framework({data:t.data,layout:t.layout},a.node()),t.framework.setUndoPoint();var s=t.framework.svg(),l=1,u=t._fullLayout.title?t._fullLayout.title.text:"";""!==u&&u||(l=0);var h=function(){this.call(x.convertToTspans,t)},c=s.select(".title-group text").call(h);if(t._context.edits.titleText){var p=o._(t,"Click to enter Plot title");u&&u!==p||(l=.2,c.attr({"data-unformatted":p}).text(p).style({opacity:l}).on("mouseover.opacity",(function(){i.select(this).transition().duration(100).style("opacity",1)})).on("mouseout.opacity",(function(){i.select(this).transition().duration(1e3).style("opacity",0)})));var g=function(){this.call(x.makeEditable,{gd:t}).on("edit",(function(e){t.framework({layout:{title:{text:e}}}),this.text(e).call(h),this.call(g)})).on("cancel",(function(){var t=this.attr("data-unformatted");this.text(t).call(h)}))};c.call(g)}return t._context.setBackground(t,t._fullLayout.paper_bgcolor),f.addLinks(t),Promise.resolve()}(t,r,n);v._replotting=!0,(c||v._shouldCreateBgLayer)&&(st(t),v._shouldCreateBgLayer&&delete v._shouldCreateBgLayer),t.framework!==st&&(t.framework=st,st(t)),g.initGradients(t),c&&p.saveShowSpikeInitial(t);var b=!t.calcdata||t.calcdata.length!==(t._fullData||[]).length;b&&f.doCalcdata(t);for(var _=0;_<t.calcdata.length;_++)t.calcdata[_][0].trace=t._fullData[_];t._context.responsive?t._responsiveChartHandler||(t._responsiveChartHandler=function(){o.isHidden(t)||f.resize(t)},window.addEventListener("resize",t._responsiveChartHandler)):o.clearResponsive(t);var w=o.extendFlat({},v._size),M=0;function k(){if(f.clearAutoMarginIds(t),T.drawMarginPushers(t),p.allowAutoMargin(t),v._has("pie"))for(var e=t._fullData,r=0;r<e.length;r++){var i=e[r];"pie"===i.type&&i.automargin&&f.allowAutoMargin(t,"pie."+i.uid+".automargin")}return f.doAutoMargin(t),f.previousPromises(t)}function E(){t._transitioning||(T.doAutoRangeAndConstraints(t),c&&p.saveRangeInitial(t),h.getComponentMethod("rangeslider","calcAutorange")(t))}var C=[f.previousPromises,function(){if(s)return e.addFrames(t,s)},function e(){for(var r=v._basePlotModules,i=0;i<r.length;i++)r[i].drawFramework&&r[i].drawFramework(t);if(!v._glcanvas&&v._has("gl")&&(v._glcanvas=v._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],(function(t){return t.key})),v._glcanvas.enter().append("canvas").attr("class",(function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")})).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),v._glcanvas){v._glcanvas.attr("width",v.width).attr("height",v.height);var n=v._glcanvas.data()[0].regl;if(n&&(Math.floor(v.width)!==n._gl.drawingBufferWidth||Math.floor(v.height)!==n._gl.drawingBufferHeight)){var a="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!M)return o.log(a+" Clearing graph and plotting again."),f.cleanPlot([],{},t._fullData,v),f.supplyDefaults(t),v=t._fullLayout,f.doCalcdata(t),M++,e();o.error(a)}}return"h"===v.modebar.orientation?v._modebardiv.style("height",null).style("width","100%"):v._modebardiv.style("width",null).style("height",v.height+"px"),f.previousPromises(t)},k,function(){if(f.didMarginChange(w,v._size))return o.syncOrAsync([k,T.layoutStyles],t)}];y&&C.push((function(){if(b)return o.syncOrAsync([h.getComponentMethod("shapes","calcAutorange"),h.getComponentMethod("annotations","calcAutorange"),E],t);E()})),C.push(T.layoutStyles),y&&C.push((function(){return p.draw(t,c?"":"redraw")})),C.push(T.drawData,T.finalDraw,m,f.addLinks,f.rehover,f.redrag,f.doAutoMargin,f.previousPromises);var L=o.syncOrAsync(C,t);return L&&L.then||(L=Promise.resolve()),L.then((function(){return S(t),t}))},e.purge=function(t){var e=(t=o.getGraphDiv(t))._fullLayout||{},r=t._fullData||[];return f.cleanPlot([],{},r,e),f.purge(t),l.purge(t),e._container&&e._container.remove(),delete t._context,t},e.react=function(t,r,i,n){var a,l;t=o.getGraphDiv(t),A.clearPromiseQueue(t);var u=t._fullData,d=t._fullLayout;if(o.isPlotDiv(t)&&u&&d){if(o.isPlainObject(r)){var p=r;r=p.data,i=p.layout,n=p.config,a=p.frames}var g=!1;if(n){var v=o.extendDeep({},t._context);t._context=void 0,I(t,n),g=function t(e,r){var i;for(i in e)if("_"!==i.charAt(0)){var n=e[i],a=r[i];if(n!==a)if(o.isPlainObject(n)&&o.isPlainObject(a)){if(t(n,a))return!0}else{if(!Array.isArray(n)||!Array.isArray(a))return!0;if(n.length!==a.length)return!0;for(var s=0;s<n.length;s++)if(n[s]!==a[s]){if(!o.isPlainObject(n[s])||!o.isPlainObject(a[s]))return!0;if(t(n[s],a[s]))return!0}}}}(v,t._context)}t.data=r||[],A.cleanData(t.data),t.layout=i||{},A.cleanLayout(t.layout),function(t,e,r,i){var n,a,l,u,h,c,f,d,p=i._preGUI,g=[],v={};for(n in p){if(h=et(n,$)){if(a=h.attr||h.head+".uirevision",(u=(l=s(i,a).get())&&rt(a,e))&&u===l&&(null===(c=p[n])&&(c=void 0),at(d=(f=s(e,n)).get(),c))){void 0===d&&"autorange"===n.substr(n.length-9)&&g.push(n.substr(0,n.length-10)),f.set(B(s(i,n).get()));continue}}else o.warn("unrecognized GUI edit: "+n);delete p[n],"range["===n.substr(n.length-8,6)&&(v[n.substr(0,n.length-9)]=1)}for(var m=0;m<g.length;m++){var y=g[m];if(v[y]){var x=s(e,y).get();x&&delete x.autorange}}var b=i._tracePreGUI;for(var _ in b){var w,A=b[_],T=null;for(n in A){if(!T){var M=it(_,r);if(M<0){delete b[_];break}var k=nt(_,t,(w=r[M]._fullInput).index);if(k<0){delete b[_];break}T=t[k]}if(h=et(n,tt)){if(h.attr?u=(l=s(i,h.attr).get())&&rt(h.attr,e):(l=w.uirevision,void 0===(u=T.uirevision)&&(u=e.uirevision)),u&&u===l&&(null===(c=A[n])&&(c=void 0),at(d=(f=s(T,n)).get(),c))){f.set(B(s(w,n).get()));continue}}else o.warn("unrecognized GUI edit: "+n+" in trace uid "+_);delete A[n]}}}(t.data,t.layout,u,d),f.supplyDefaults(t,{skipUpdateCalc:!0});var m=t._fullData,y=t._fullLayout,x=void 0===y.datarevision,b=y.transition,_=function(t,e,r,i,n){var a=M.layoutFlags();function o(t){return c.getLayoutValObject(r,t)}a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0,ot(e,r,[],{getValObject:o,flags:a,immutable:i,transition:n,gd:t}),(a.plot||a.calc)&&(a.layoutReplot=!0);n&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some");return a}(t,d,y,x,b),w=_.newDataRevision,k=function(t,e,r,i,n,a){var o=e.length===r.length;if(!n&&!o)return{fullReplot:!0,calc:!0};var s,l,u=M.traceFlags();u.arrays={},u.nChanges=0,u.nChangesAnim=0;var h={getValObject:function(t){var e=c.getTraceValObject(l,t);return!l._module.animatable&&e.anim&&(e.anim=!1),e},flags:u,immutable:i,transition:n,newDataRevision:a,gd:t},d={};for(s=0;s<e.length;s++)if(r[s]){if(l=r[s]._fullInput,f.hasMakesDataTransform(l)&&(l=r[s]),d[l.uid])continue;d[l.uid]=1,ot(e[s]._fullInput,l,[],h)}(u.calc||u.plot)&&(u.fullReplot=!0);n&&u.nChanges&&u.nChangesAnim&&(u.anim=u.nChanges===u.nChangesAnim&&o?"all":"some");return u}(t,u,m,x,b,w);Q(t)&&(_.layoutReplot=!0),k.calc||_.calc?t.calcdata=void 0:f.supplyDefaultsUpdateCalc(t.calcdata,m);var E=[];if(a&&(t._transitionData={},f.createTransitionData(t),E.push((function(){return e.addFrames(t,a)}))),y.transition&&!g&&(k.anim||_.anim))f.doCalcdata(t),T.doAutoRangeAndConstraints(t),E.push((function(){return f.transitionFromReact(t,k,_,d)}));else if(k.fullReplot||_.layoutReplot||g)t._fullLayout._skipDefaults=!0,E.push(e.plot);else{for(var C in _.arrays){var L=_.arrays[C];if(L.length){var j=h.getComponentMethod(C,"drawOne");if(j!==o.noop)for(var R=0;R<L.length;R++)j(t,L[R]);else{var P=h.getComponentMethod(C,"draw");if(P===o.noop)throw new Error("cannot draw components: "+C);P(t)}}}E.push(f.previousPromises),k.style&&E.push(T.doTraceStyle),(k.colorbars||_.colorbars)&&E.push(T.doColorBars),_.legend&&E.push(T.doLegend),_.layoutstyle&&E.push(T.layoutStyles),_.axrange&&W(E),_.ticks&&E.push(T.doTicksRelayout),_.modebar&&E.push(T.doModeBar),_.camera&&E.push(T.doCamera),E.push(S)}E.push(f.rehover,f.redrag),(l=o.syncOrAsync(E,t))&&l.then||(l=Promise.resolve(t))}else l=e.newPlot(t,r,i,n);return l.then((function(){return t.emit("plotly_react",{data:r,layout:i}),t}))},e.redraw=function(t){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return A.cleanData(t.data),A.cleanLayout(t.layout),t.calcdata=void 0,e.plot(t).then((function(){return t.emit("plotly_redraw"),t}))},e.relayout=X,e.restyle=N,e.setPlotConfig=function(t){return o.extendFlat(_,t)},e.update=K,e._guiRelayout=J(X),e._guiRestyle=J(N),e._guiUpdate=J(K),e._storeDirectGUIEdit=function(t,e,r){for(var i in r){D(i,s(t,i).get(),r[i],e)}}},function(t,e,r){var i=r(24),n=r(6).extendDeepAll,a=r(81).MID_SHIFT,o=t.exports={version:"0.2.2"};o.Axis=function(){var t,e,r,s,l={data:[],layout:{}},u={},h={},c=i.dispatch("hover"),f={};return f.render=function(u){return function(u){e=u||e;var c=l.data,f=l.layout;("string"==typeof e||e.nodeName)&&(e=i.select(e)),e.datum(c).each((function(e,l){var u=e.slice();h={data:o.util.cloneJson(u),layout:o.util.cloneJson(f)};var c=0;u.forEach((function(t,e){t.color||(t.color=f.defaultColorRange[c],c=(c+1)%f.defaultColorRange.length),t.strokeColor||(t.strokeColor="LinePlot"===t.geometry?t.color:i.rgb(t.color).darker().toString()),h.data[e].color=t.color,h.data[e].strokeColor=t.strokeColor,h.data[e].strokeDash=t.strokeDash,h.data[e].strokeSize=t.strokeSize}));var d=u.filter((function(t,e){var r=t.visible;return void 0===r||!0===r})),p=!1,g=d.map((function(t,e){return p=p||void 0!==t.groupId,t}));if(p){var v=i.nest().key((function(t,e){return void 0!==t.groupId?t.groupId:"unstacked"})).entries(g),m=[],y=v.map((function(t,e){if("unstacked"===t.key)return t.values;var r=t.values[0].r.map((function(t,e){return 0}));return t.values.forEach((function(t,e,i){t.yStack=[r],m.push(r),r=o.util.sumArrays(t.r,r)})),t.values}));d=i.merge(y)}d.forEach((function(t,e){t.t=Array.isArray(t.t[0])?t.t:[t.t],t.r=Array.isArray(t.r[0])?t.r:[t.r]}));var x=Math.min(f.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2;x=Math.max(10,x);var b,_=[f.margin.left+x,f.margin.top+x];p?b=[0,i.max(o.util.sumArrays(o.util.arrayLast(d).r[0],o.util.arrayLast(m)))]:b=i.extent(o.util.flattenArray(d.map((function(t,e){return t.r}))));f.radialAxis.domain!=o.DATAEXTENT&&(b[0]=0),r=i.scale.linear().domain(f.radialAxis.domain!=o.DATAEXTENT&&f.radialAxis.domain?f.radialAxis.domain:b).range([0,x]),h.layout.radialAxis.domain=r.domain();var w,A=o.util.flattenArray(d.map((function(t,e){return t.t}))),T="string"==typeof A[0];T&&(A=o.util.deduplicate(A),w=A.slice(),A=i.range(A.length),d=d.map((function(t,e){var r=t;return t.t=[A],p&&(r.yStack=t.yStack),r})));var M=d.filter((function(t,e){return"LinePlot"===t.geometry||"DotPlot"===t.geometry})).length===d.length,k=null===f.needsEndSpacing?T||!M:f.needsEndSpacing,E=f.angularAxis.domain&&f.angularAxis.domain!=o.DATAEXTENT&&!T&&f.angularAxis.domain[0]>=0?f.angularAxis.domain:i.extent(A),S=Math.abs(A[1]-A[0]);M&&!T&&(S=0);var C=E.slice();k&&T&&(C[1]+=S);var L=f.angularAxis.ticksCount||4;L>8&&(L=L/(L/8)+L%8),f.angularAxis.ticksStep&&(L=(C[1]-C[0])/L);var I=f.angularAxis.ticksStep||(C[1]-C[0])/(L*(f.minorTicks+1));w&&(I=Math.max(Math.round(I),1)),C[2]||(C[2]=I);var j=i.range.apply(this,C);if(j=j.map((function(t,e){return parseFloat(t.toPrecision(12))})),s=i.scale.linear().domain(C.slice(0,2)).range("clockwise"===f.direction?[0,360]:[360,0]),h.layout.angularAxis.domain=s.domain(),h.layout.angularAxis.endPadding=k?S:0,void 0===(t=i.select(this).select("svg.chart-root"))||t.empty()){var R=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),P=this.appendChild(this.ownerDocument.importNode(R.documentElement,!0));t=i.select(P)}t.select(".guides-group").style({"pointer-events":"none"}),t.select(".angular.axis-group").style({"pointer-events":"none"}),t.select(".radial.axis-group").style({"pointer-events":"none"});var O,z=t.select(".chart-group"),N={fill:"none",stroke:f.tickColor},B={"font-size":f.font.size,"font-family":f.font.family,fill:f.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map((function(t,e){return" "+t+" 0 "+f.font.outlineColor})).join(",")};if(f.showLegend){O=t.select(".legend-group").attr({transform:"translate("+[x,f.margin.top]+")"}).style({display:"block"});var F=d.map((function(t,e){var r=o.util.cloneJson(t);return r.symbol="DotPlot"===t.geometry?t.dotType||"circle":"LinePlot"!=t.geometry?"square":"line",r.visibleInLegend=void 0===t.visibleInLegend||t.visibleInLegend,r.color="LinePlot"===t.geometry?t.strokeColor:t.color,r}));o.Legend().config({data:d.map((function(t,e){return t.name||"Element"+e})),legendConfig:n({},o.Legend.defaultConfig().legendConfig,{container:O,elements:F,reverseOrder:f.legend.reverseOrder})})();var D=O.node().getBBox();x=Math.min(f.width-D.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2,x=Math.max(10,x),_=[f.margin.left+x,f.margin.top+x],r.range([0,x]),h.layout.radialAxis.domain=r.domain(),O.attr("transform","translate("+[_[0]+x,_[1]-x]+")")}else O=t.select(".legend-group").style({display:"none"});t.attr({width:f.width,height:f.height}).style({opacity:f.opacity}),z.attr("transform","translate("+_+")").style({cursor:"crosshair"});var U=[(f.width-(f.margin.left+f.margin.right+2*x+(D?D.width:0)))/2,(f.height-(f.margin.top+f.margin.bottom+2*x))/2];if(U[0]=Math.max(0,U[0]),U[1]=Math.max(0,U[1]),t.select(".outer-group").attr("transform","translate("+U+")"),f.title&&f.title.text){var V=t.select("g.title-group text").style(B).text(f.title.text),X=V.node().getBBox();V.attr({x:_[0]-X.width/2,y:_[1]-x-20})}var G=t.select(".radial.axis-group");if(f.radialAxis.gridLinesVisible){var W=G.selectAll("circle.grid-circle").data(r.ticks(5));W.enter().append("circle").attr({class:"grid-circle"}).style(N),W.attr("r",r),W.exit().remove()}G.select("circle.outside-circle").attr({r:x}).style(N);var H=t.select("circle.background-circle").attr({r:x}).style({fill:f.backgroundColor,stroke:f.stroke});function q(t,e){return s(t)%360+f.orientation}if(f.radialAxis.visible){var Y=i.svg.axis().scale(r).ticks(5).tickSize(5);G.call(Y).attr({transform:"rotate("+f.radialAxis.orientation+")"}),G.selectAll(".domain").style(N),G.selectAll("g>text").text((function(t,e){return this.textContent+f.radialAxis.ticksSuffix})).style(B).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(t,e){return"horizontal"===f.radialAxis.tickOrientation?"rotate("+-f.radialAxis.orientation+") translate("+[0,B["font-size"]]+")":"translate("+[0,B["font-size"]]+")"}}),G.selectAll("g>line").style({stroke:"black"})}var Z=t.select(".angular.axis-group").selectAll("g.angular-tick").data(j),Q=Z.enter().append("g").classed("angular-tick",!0);Z.attr({transform:function(t,e){return"rotate("+q(t)+")"}}).style({display:f.angularAxis.visible?"block":"none"}),Z.exit().remove(),Q.append("line").classed("grid-line",!0).classed("major",(function(t,e){return e%(f.minorTicks+1)==0})).classed("minor",(function(t,e){return!(e%(f.minorTicks+1)==0)})).style(N),Q.selectAll(".minor").style({stroke:f.minorTickColor}),Z.select("line.grid-line").attr({x1:f.tickLength?x-f.tickLength:0,x2:x}).style({display:f.angularAxis.gridLinesVisible?"block":"none"}),Q.append("text").classed("axis-text",!0).style(B);var K=Z.select("text.axis-text").attr({x:x+f.labelOffset,dy:a+"em",transform:function(t,e){var r=q(t),i=x+f.labelOffset,n=f.angularAxis.tickOrientation;return"horizontal"==n?"rotate("+-r+" "+i+" 0)":"radial"==n?r<270&&r>90?"rotate(180 "+i+" 0)":null:"rotate("+(r<=180&&r>0?-90:90)+" "+i+" 0)"}}).style({"text-anchor":"middle",display:f.angularAxis.labelsVisible?"block":"none"}).text((function(t,e){return e%(f.minorTicks+1)!=0?"":w?w[t]+f.angularAxis.ticksSuffix:t+f.angularAxis.ticksSuffix})).style(B);f.angularAxis.rewriteTicks&&K.text((function(t,e){return e%(f.minorTicks+1)!=0?"":f.angularAxis.rewriteTicks(this.textContent,e)}));var J=i.max(z.selectAll(".angular-tick text")[0].map((function(t,e){return t.getCTM().e+t.getBBox().width})));O.attr({transform:"translate("+[x+J,f.margin.top]+")"});var $=t.select("g.geometry-group").selectAll("g").size()>0,tt=t.select("g.geometry-group").selectAll("g.geometry").data(d);if(tt.enter().append("g").attr({class:function(t,e){return"geometry geometry"+e}}),tt.exit().remove(),d[0]||$){var et=[];d.forEach((function(t,e){var i={};i.radialScale=r,i.angularScale=s,i.container=tt.filter((function(t,r){return r==e})),i.geometry=t.geometry,i.orientation=f.orientation,i.direction=f.direction,i.index=e,et.push({data:t,geometryConfig:i})}));var rt=i.nest().key((function(t,e){return void 0!==t.data.groupId||"unstacked"})).entries(et),it=[];rt.forEach((function(t,e){"unstacked"===t.key?it=it.concat(t.values.map((function(t,e){return[t]}))):it.push(t.values)})),it.forEach((function(t,e){var r;r=Array.isArray(t)?t[0].geometryConfig.geometry:t.geometryConfig.geometry;var i=t.map((function(t,e){return n(o[r].defaultConfig(),t)}));o[r]().config(i)()}))}var nt,at,ot=t.select(".guides-group"),st=t.select(".tooltips-group"),lt=o.tooltipPanel().config({container:st,fontSize:8})(),ut=o.tooltipPanel().config({container:st,fontSize:8})(),ht=o.tooltipPanel().config({container:st,hasTick:!0})();if(!T){var ct=ot.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});z.on("mousemove.angular-guide",(function(t,e){var r=o.util.getMousePos(H).angle;ct.attr({x2:-x,transform:"rotate("+r+")"}).style({opacity:.5});var i=(r+180+360-f.orientation)%360;nt=s.invert(i);var n=o.util.convertToCartesian(x+12,r+180);lt.text(o.util.round(nt)).move([n[0]+_[0],n[1]+_[1]])})).on("mouseout.angular-guide",(function(t,e){ot.select("line").style({opacity:0})}))}var ft=ot.select("circle").style({stroke:"grey",fill:"none"});z.on("mousemove.radial-guide",(function(t,e){var i=o.util.getMousePos(H).radius;ft.attr({r:i}).style({opacity:.5}),at=r.invert(o.util.getMousePos(H).radius);var n=o.util.convertToCartesian(i,f.radialAxis.orientation);ut.text(o.util.round(at)).move([n[0]+_[0],n[1]+_[1]])})).on("mouseout.radial-guide",(function(t,e){ft.style({opacity:0}),ht.hide(),lt.hide(),ut.hide()})),t.selectAll(".geometry-group .mark").on("mouseover.tooltip",(function(e,r){var n=i.select(this),a=this.style.fill,s="black",l=this.style.opacity||1;if(n.attr({"data-opacity":l}),a&&"none"!==a){n.attr({"data-fill":a}),s=i.hsl(a).darker().toString(),n.style({fill:s,opacity:1});var u={t:o.util.round(e[0]),r:o.util.round(e[1])};T&&(u.t=w[e[0]]);var h="t: "+u.t+", r: "+u.r,c=this.getBoundingClientRect(),f=t.node().getBoundingClientRect(),d=[c.left+c.width/2-U[0]-f.left,c.top+c.height/2-U[1]-f.top];ht.config({color:s}).text(h),ht.move(d)}else a=this.style.stroke||"black",n.attr({"data-stroke":a}),s=i.hsl(a).darker().toString(),n.style({stroke:s,opacity:1})})).on("mousemove.tooltip",(function(t,e){if(0!=i.event.which)return!1;i.select(this).attr("data-fill")&&ht.show()})).on("mouseout.tooltip",(function(t,e){ht.hide();var r=i.select(this),n=r.attr("data-fill");n?r.style({fill:n,opacity:r.attr("data-opacity")}):r.style({stroke:r.attr("data-stroke"),opacity:r.attr("data-opacity")})}))}))}(u),this},f.config=function(t){if(!arguments.length)return l;var e=o.util.cloneJson(t);return e.data.forEach((function(t,e){l.data[e]||(l.data[e]={}),n(l.data[e],o.Axis.defaultConfig().data[0]),n(l.data[e],t)})),n(l.layout,o.Axis.defaultConfig().layout),n(l.layout,e.layout),this},f.getLiveConfig=function(){return h},f.getinputConfig=function(){return u},f.radialScale=function(t){return r},f.angularScale=function(t){return s},f.svg=function(){return t},i.rebind(f,c,"on"),f},o.Axis.defaultConfig=function(t,e){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:i.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},o.util={},o.DATAEXTENT="dataExtent",o.AREA="AreaChart",o.LINE="LinePlot",o.DOT="DotPlot",o.BAR="BarChart",o.util._override=function(t,e){for(var r in t)r in e&&(e[r]=t[r])},o.util._extend=function(t,e){for(var r in t)e[r]=t[r]},o.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},o.util.dataFromEquation2=function(t,e){var r=e||6;return i.range(0,360+r,r).map((function(e,r){var i=e*Math.PI/180;return[e,t(i)]}))},o.util.dataFromEquation=function(t,e,r){var n=e||6,a=[],o=[];i.range(0,360+n,n).forEach((function(e,r){var i=e*Math.PI/180,n=t(i);a.push(e),o.push(n)}));var s={t:a,r:o};return r&&(s.name=r),s},o.util.ensureArray=function(t,e){if(void 0===t)return null;var r=[].concat(t);return i.range(e).map((function(t,e){return r[e]||r[0]}))},o.util.fillArrays=function(t,e,r){return e.forEach((function(e,i){t[e]=o.util.ensureArray(t[e],r)})),t},o.util.cloneJson=function(t){return JSON.parse(JSON.stringify(t))},o.util.validateKeys=function(t,e){"string"==typeof e&&(e=e.split("."));var r=e.shift();return t[r]&&(!e.length||objHasKeys(t[r],e))},o.util.sumArrays=function(t,e){return i.zip(t,e).map((function(t,e){return i.sum(t)}))},o.util.arrayLast=function(t){return t[t.length-1]},o.util.arrayEqual=function(t,e){for(var r=Math.max(t.length,e.length,1);r-- >=0&&t[r]===e[r];);return-2===r},o.util.flattenArray=function(t){for(var e=[];!o.util.arrayEqual(e,t);)e=t,t=[].concat.apply([],t);return t},o.util.deduplicate=function(t){return t.filter((function(t,e,r){return r.indexOf(t)==e}))},o.util.convertToCartesian=function(t,e){var r=e*Math.PI/180;return[t*Math.cos(r),t*Math.sin(r)]},o.util.round=function(t,e){var r=e||2,i=Math.pow(10,r);return Math.round(t*i)/i},o.util.getMousePos=function(t){var e=i.mouse(t.node()),r=e[0],n=e[1],a={};return a.x=r,a.y=n,a.pos=e,a.angle=180*(Math.atan2(n,r)+Math.PI)/Math.PI,a.radius=Math.sqrt(r*r+n*n),a},o.util.duplicatesCount=function(t){for(var e,r={},i={},n=0,a=t.length;n<a;n++)(e=t[n])in r?(r[e]++,i[e]=r[e]):r[e]=1;return i},o.util.duplicates=function(t){return Object.keys(o.util.duplicatesCount(t))},o.util.translator=function(t,e,r,i){if(i){var n=r.slice();r=e,e=n}var a=e.reduce((function(t,e){if(void 0!==t)return t[e]}),t);void 0!==a&&(e.reduce((function(t,r,i){if(void 0!==t)return i===e.length-1&&delete t[r],t[r]}),t),r.reduce((function(t,e,i){return void 0===t[e]&&(t[e]={}),i===r.length-1&&(t[e]=a),t[e]}),t))},o.PolyChart=function(){var t=[o.PolyChart.defaultConfig()],e=i.dispatch("hover"),r={solid:"none",dash:[5,2],dot:[2,5]};function a(){var e=t[0].geometryConfig,n=e.container;"string"==typeof n&&(n=i.select(n)),n.datum(t).each((function(t,n){var a=!!t[0].data.yStack,o=t.map((function(t,e){return a?i.zip(t.data.t[0],t.data.r[0],t.data.yStack[0]):i.zip(t.data.t[0],t.data.r[0])})),s=e.angularScale,l=e.radialScale.domain()[0],u={bar:function(r,n,a){var o=t[a].data,l=e.radialScale(r[1])-e.radialScale(0),u=e.radialScale(r[2]||0),h=o.barWidth;i.select(this).attr({class:"mark bar",d:"M"+[[l+u,-h/2],[l+u,h/2],[u,h/2],[u,-h/2]].join("L")+"Z",transform:function(t,r){return"rotate("+(e.orientation+s(t[0]))+")"}})}};u.dot=function(r,n,a){var o=r[2]?[r[0],r[1]+r[2]]:r,s=i.svg.symbol().size(t[a].data.dotSize).type(t[a].data.dotType)(r,n);i.select(this).attr({class:"mark dot",d:s,transform:function(t,r){var i,n,a,s=(i=function(t,r){var i=e.radialScale(t[1]),n=(e.angularScale(t[0])+e.orientation)*Math.PI/180;return{r:i,t:n}}(o),n=i.r*Math.cos(i.t),a=i.r*Math.sin(i.t),{x:n,y:a});return"translate("+[s.x,s.y]+")"}})};var h=i.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius((function(t){return e.radialScale(t[1])})).angle((function(t){return e.angularScale(t[0])*Math.PI/180}));u.line=function(r,n,a){var s=r[2]?o[a].map((function(t,e){return[t[0],t[1]+t[2]]})):o[a];if(i.select(this).each(u.dot).style({opacity:function(e,r){return+t[a].data.dotVisible},fill:p.stroke(r,n,a)}).attr({class:"mark dot"}),!(n>0)){var l=i.select(this.parentNode).selectAll("path.line").data([0]);l.enter().insert("path"),l.attr({class:"line",d:h(s),transform:function(t,r){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(t,e){return p.fill(r,n,a)},"fill-opacity":0,stroke:function(t,e){return p.stroke(r,n,a)},"stroke-width":function(t,e){return p["stroke-width"](r,n,a)},"stroke-dasharray":function(t,e){return p["stroke-dasharray"](r,n,a)},opacity:function(t,e){return p.opacity(r,n,a)},display:function(t,e){return p.display(r,n,a)}})}};var c=e.angularScale.range(),f=Math.abs(c[1]-c[0])/o[0].length*Math.PI/180,d=i.svg.arc().startAngle((function(t){return-f/2})).endAngle((function(t){return f/2})).innerRadius((function(t){return e.radialScale(l+(t[2]||0))})).outerRadius((function(t){return e.radialScale(l+(t[2]||0))+e.radialScale(t[1])}));u.arc=function(t,r,n){i.select(this).attr({class:"mark arc",d:d,transform:function(t,r){return"rotate("+(e.orientation+s(t[0])+90)+")"}})};var p={fill:function(e,r,i){return t[i].data.color},stroke:function(e,r,i){return t[i].data.strokeColor},"stroke-width":function(e,r,i){return t[i].data.strokeSize+"px"},"stroke-dasharray":function(e,i,n){return r[t[n].data.strokeDash]},opacity:function(e,r,i){return t[i].data.opacity},display:function(e,r,i){return void 0===t[i].data.visible||t[i].data.visible?"block":"none"}},g=i.select(this).selectAll("g.layer").data(o);g.enter().append("g").attr({class:"layer"});var v=g.selectAll("path.mark").data((function(t,e){return t}));v.enter().append("path").attr({class:"mark"}),v.style(p).each(u[e.geometryType]),v.exit().remove(),g.exit().remove()}))}return a.config=function(e){return arguments.length?(e.forEach((function(e,r){t[r]||(t[r]={}),n(t[r],o.PolyChart.defaultConfig()),n(t[r],e)})),this):t},a.getColorScale=function(){},i.rebind(a,e,"on"),a},o.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:i.scale.category20()}}},o.BarChart=function(){return o.PolyChart()},o.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},o.AreaChart=function(){return o.PolyChart()},o.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},o.DotPlot=function(){return o.PolyChart()},o.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},o.LinePlot=function(){return o.PolyChart()},o.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},o.Legend=function(){var t=o.Legend.defaultConfig(),e=i.dispatch("hover");function r(){var e=t.legendConfig,a=t.data.map((function(t,r){return[].concat(t).map((function(t,i){var a=n({},e.elements[r]);return a.name=t,a.color=[].concat(e.elements[r].color)[i],a}))})),o=i.merge(a);o=o.filter((function(t,r){return e.elements[r]&&(e.elements[r].visibleInLegend||void 0===e.elements[r].visibleInLegend)})),e.reverseOrder&&(o=o.reverse());var s=e.container;("string"==typeof s||s.nodeName)&&(s=i.select(s));var l=o.map((function(t,e){return t.color})),u=e.fontSize,h=null==e.isContinuous?"number"==typeof o[0]:e.isContinuous,c=h?e.height:u*o.length,f=s.classed("legend-group",!0).selectAll("svg").data([0]),d=f.enter().append("svg").attr({width:300,height:c+u,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});d.append("g").classed("legend-axis",!0),d.append("g").classed("legend-marks",!0);var p=i.range(o.length),g=i.scale[h?"linear":"ordinal"]().domain(p).range(l),v=i.scale[h?"linear":"ordinal"]().domain(p)[h?"range":"rangePoints"]([0,c]);if(h){var m=f.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(l);m.enter().append("stop"),m.attr({offset:function(t,e){return e/(l.length-1)*100+"%"}}).style({"stop-color":function(t,e){return t}}),f.append("rect").classed("legend-mark",!0).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})}else{var y=f.select(".legend-marks").selectAll("path.legend-mark").data(o);y.enter().append("path").classed("legend-mark",!0),y.attr({transform:function(t,e){return"translate("+[u/2,v(e)+u/2]+")"},d:function(t,e){var r,n,a,o=t.symbol;return a=3*(n=u),"line"===(r=o)?"M"+[[-n/2,-n/12],[n/2,-n/12],[n/2,n/12],[-n/2,n/12]]+"Z":-1!=i.svg.symbolTypes.indexOf(r)?i.svg.symbol().type(r).size(a)():i.svg.symbol().type("square").size(a)()},fill:function(t,e){return g(e)}}),y.exit().remove()}var x=i.svg.axis().scale(v).orient("right"),b=f.select("g.legend-axis").attr({transform:"translate("+[h?e.colorBandWidth:u,u/2]+")"}).call(x);return b.selectAll(".domain").style({fill:"none",stroke:"none"}),b.selectAll("line").style({fill:"none",stroke:h?e.textColor:"none"}),b.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text((function(t,e){return o[e].name})),r}return r.config=function(e){return arguments.length?(n(t,e),this):t},i.rebind(r,e,"on"),r},o.Legend.defaultConfig=function(t,e){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},o.tooltipPanel=function(){var t,e,r,a={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},s="tooltip-"+o.tooltipPanel.uid++,l=10,u=function(){var i=(t=a.container.selectAll("g."+s).data([0])).enter().append("g").classed(s,!0).style({"pointer-events":"none",display:"none"});return r=i.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),e=i.append("text").attr({dx:a.padding+l,dy:.3*+a.fontSize}),u};return u.text=function(n){var o=i.hsl(a.color).l,s=o>=.5?"#aaa":"white",h=o>=.5?"black":"white",c=n||"";e.style({fill:h,"font-size":a.fontSize+"px"}).text(c);var f=a.padding,d=e.node().getBBox(),p={fill:a.color,stroke:s,"stroke-width":"2px"},g=d.width+2*f+l,v=d.height+2*f;return r.attr({d:"M"+[[l,-v/2],[l,-v/4],[a.hasTick?0:l,0],[l,v/4],[l,v/2],[g,v/2],[g,-v/2]].join("L")+"Z"}).style(p),t.attr({transform:"translate("+[l,-v/2+2*f]+")"}),t.style({display:"block"}),u},u.move=function(e){if(t)return t.attr({transform:"translate("+[e[0],e[1]]+")"}).style({display:"block"}),u},u.hide=function(){if(t)return t.style({display:"none"}),u},u.show=function(){if(t)return t.style({display:"block"}),u},u.config=function(t){return n(a,t),u},u},o.tooltipPanel.uid=1,o.adapter={},o.adapter.plotly=function(){var t={convert:function(t,e){var r={};if(t.data&&(r.data=t.data.map((function(t,r){var i=n({},t);return[[i,["marker","color"],["color"]],[i,["marker","opacity"],["opacity"]],[i,["marker","line","color"],["strokeColor"]],[i,["marker","line","dash"],["strokeDash"]],[i,["marker","line","width"],["strokeSize"]],[i,["marker","symbol"],["dotType"]],[i,["marker","size"],["dotSize"]],[i,["marker","barWidth"],["barWidth"]],[i,["line","interpolation"],["lineInterpolation"]],[i,["showlegend"],["visibleInLegend"]]].forEach((function(t,r){o.util.translator.apply(null,t.concat(e))})),e||delete i.marker,e&&delete i.groupId,e?("LinePlot"===i.geometry?(i.type="scatter",!0===i.dotVisible?(delete i.dotVisible,i.mode="lines+markers"):i.mode="lines"):"DotPlot"===i.geometry?(i.type="scatter",i.mode="markers"):"AreaChart"===i.geometry?i.type="area":"BarChart"===i.geometry&&(i.type="bar"),delete i.geometry):("scatter"===i.type?"lines"===i.mode?i.geometry="LinePlot":"markers"===i.mode?i.geometry="DotPlot":"lines+markers"===i.mode&&(i.geometry="LinePlot",i.dotVisible=!0):"area"===i.type?i.geometry="AreaChart":"bar"===i.type&&(i.geometry="BarChart"),delete i.mode,delete i.type),i})),!e&&t.layout&&"stack"===t.layout.barmode)){var a=o.util.duplicates(r.data.map((function(t,e){return t.geometry})));r.data.forEach((function(t,e){var i=a.indexOf(t.geometry);-1!=i&&(r.data[e].groupId=i)}))}if(t.layout){var s=n({},t.layout);if([[s,["plot_bgcolor"],["backgroundColor"]],[s,["showlegend"],["showLegend"]],[s,["radialaxis"],["radialAxis"]],[s,["angularaxis"],["angularAxis"]],[s.angularaxis,["showline"],["gridLinesVisible"]],[s.angularaxis,["showticklabels"],["labelsVisible"]],[s.angularaxis,["nticks"],["ticksCount"]],[s.angularaxis,["tickorientation"],["tickOrientation"]],[s.angularaxis,["ticksuffix"],["ticksSuffix"]],[s.angularaxis,["range"],["domain"]],[s.angularaxis,["endpadding"],["endPadding"]],[s.radialaxis,["showline"],["gridLinesVisible"]],[s.radialaxis,["tickorientation"],["tickOrientation"]],[s.radialaxis,["ticksuffix"],["ticksSuffix"]],[s.radialaxis,["range"],["domain"]],[s.angularAxis,["showline"],["gridLinesVisible"]],[s.angularAxis,["showticklabels"],["labelsVisible"]],[s.angularAxis,["nticks"],["ticksCount"]],[s.angularAxis,["tickorientation"],["tickOrientation"]],[s.angularAxis,["ticksuffix"],["ticksSuffix"]],[s.angularAxis,["range"],["domain"]],[s.angularAxis,["endpadding"],["endPadding"]],[s.radialAxis,["showline"],["gridLinesVisible"]],[s.radialAxis,["tickorientation"],["tickOrientation"]],[s.radialAxis,["ticksuffix"],["ticksSuffix"]],[s.radialAxis,["range"],["domain"]],[s.font,["outlinecolor"],["outlineColor"]],[s.legend,["traceorder"],["reverseOrder"]],[s,["labeloffset"],["labelOffset"]],[s,["defaultcolorrange"],["defaultColorRange"]]].forEach((function(t,r){o.util.translator.apply(null,t.concat(e))})),e?(void 0!==s.tickLength&&(s.angularaxis.ticklen=s.tickLength,delete s.tickLength),s.tickColor&&(s.angularaxis.tickcolor=s.tickColor,delete s.tickColor)):(s.angularAxis&&void 0!==s.angularAxis.ticklen&&(s.tickLength=s.angularAxis.ticklen),s.angularAxis&&void 0!==s.angularAxis.tickcolor&&(s.tickColor=s.angularAxis.tickcolor)),s.legend&&"boolean"!=typeof s.legend.reverseOrder&&(s.legend.reverseOrder="normal"!=s.legend.reverseOrder),s.legend&&"boolean"==typeof s.legend.traceorder&&(s.legend.traceorder=s.legend.traceorder?"reversed":"normal",delete s.legend.reverseOrder),s.margin&&void 0!==s.margin.t){var l=["t","r","b","l","pad"],u=["top","right","bottom","left","pad"],h={};i.entries(s.margin).forEach((function(t,e){h[u[l.indexOf(t.key)]]=t.value})),s.margin=h}e&&(delete s.needsEndSpacing,delete s.minorTickColor,delete s.minorTicks,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksStep,delete s.angularaxis.rewriteTicks,delete s.angularaxis.nticks,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksStep,delete s.radialaxis.rewriteTicks,delete s.radialaxis.nticks),r.layout=s}return r}};return t}},,function(t,e,r){"use strict";var i=r(12),n=r(60),a=r(658),o=r(208),s=r(112).defaultLine,l=r(63).isArrayOrTypedArray,u=a(s);function h(t,e){var r=t;return r[3]*=e,r}function c(t){if(i(t))return u;var e=a(t);return e.length?e:u}function f(t){return i(t)?t:1}t.exports={formatColor:function(t,e,r){var i,n,s,d,p,g=t.color,v=l(g),m=l(e),y=o.extractOpts(t),x=[];if(i=void 0!==y.colorscale?o.makeColorScaleFuncFromTrace(t):c,n=v?function(t,e){return void 0===t[e]?u:a(i(t[e]))}:c,s=m?function(t,e){return void 0===t[e]?1:f(t[e])}:f,v||m)for(var b=0;b<r;b++)d=n(g,b),p=s(e,b),x[b]=h(d,p);else x=h(a(g),e);return x},parseColorScale:function(t,e){void 0===e&&(e=1);var r=o.extractOpts(t);return(r.reversescale?o.flipScale(r.colorscale):r.colorscale).map((function(t){var r=t[0],i=n(t[1]).toRgb();return{index:r,rgb:[i.r,i.g,i.b,e]}}))}}},function(t,e,r){"use strict";var i=r(6),n=r(153).dfltConfig;var a={add:function(t,e,r,i,a){var o,s;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},s=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(s,t.undoQueue.queue.length-s,o),t.undoQueue.index+=1):o=t.undoQueue.queue[s-1],t.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(e),o.undo.args.unshift(r),o.redo.calls.push(i),o.redo.args.push(a)),t.undoQueue.queue.length>n.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,r;if(t.framework&&t.framework.isPolar)t.framework.undo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.undo.calls.length;r++)a.plotDo(t,e.undo.calls[r],e.undo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,r;if(t.framework&&t.framework.isPolar)t.framework.redo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.redo.calls.length;r++)a.plotDo(t,e.redo.calls[r],e.redo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}}};a.plotDo=function(t,e,r){t.autoplay=!0,r=function(t,e){for(var r,n=[],a=0;a<e.length;a++)r=e[a],n[a]=r===t?r:"object"==typeof r?Array.isArray(r)?i.extendDeep([],r):i.extendDeepAll({},r):r;return n}(t,r),e.apply(null,r)},t.exports=a},function(t,e,r){"use strict";var i=r(24),n=r(23),a=r(6),o=a.ensureSingle,s=a.identity,l=r(106),u=r(206),h=r(696),c=r(687),f=r(752).tester;function d(t,e,r,c,d,p,g){var v;!function(t,e,r,n,o){var s=r.xaxis,l=r.yaxis,h=i.extent(a.simpleMap(s.range,s.r2c)),c=i.extent(a.simpleMap(l.range,l.r2c)),f=n[0].trace;if(!u.hasMarkers(f))return;var d=f.marker.maxdisplayed;if(0===d)return;var p=n.filter((function(t){return t.x>=h[0]&&t.x<=h[1]&&t.y>=c[0]&&t.y<=c[1]})),g=Math.ceil(p.length/d),v=0;o.forEach((function(t,r){var i=t[0].trace;u.hasMarkers(i)&&i.marker.maxdisplayed>0&&r<e&&v++}));var m=Math.round(v*g/3+Math.floor(v/3)*g/7.1);n.forEach((function(t){delete t.vis})),p.forEach((function(t,e){0===Math.round((e+m)%g)&&(t.vis=!0)}))}(0,e,r,c,d);var m=!!g&&g.duration>0;function y(t){return m?t.transition():t}var x=r.xaxis,b=r.yaxis,_=c[0].trace,w=_.line,A=i.select(p),T=o(A,"g","errorbars"),M=o(A,"g","lines"),k=o(A,"g","points"),E=o(A,"g","text");if(n.getComponentMethod("errorbars","plot")(t,T,r,g),!0===_.visible){var S,C;y(A).style("opacity",_.opacity);var L=_.fill.charAt(_.fill.length-1);"x"!==L&&"y"!==L&&(L=""),c[0][r.isRangePlot?"nodeRangePlot3":"node3"]=A;var I,j,R="",P=[],O=_._prevtrace;O&&(R=O._prevRevpath||"",C=O._nextFill,P=O._polygons);var z,N,B,F,D,U,V,X="",G="",W=[],H=a.noop;if(S=_._ownFill,u.hasLines(_)||"none"!==_.fill){for(C&&C.datum(c),-1!==["hv","vh","hvh","vhv"].indexOf(w.shape)?(z=l.steps(w.shape),N=l.steps(w.shape.split("").reverse().join(""))):z=N="spline"===w.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?l.smoothclosed(t.slice(1),w.smoothing):l.smoothopen(t,w.smoothing)}:function(t){return"M"+t.join("L")},B=function(t){return N(t.reverse())},W=h(c,{xaxis:x,yaxis:b,connectGaps:_.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,simplify:w.simplify,fill:_.fill}),V=_._polygons=new Array(W.length),v=0;v<W.length;v++)_._polygons[v]=f(W[v]);W.length&&(F=W[0][0],U=(D=W[W.length-1])[D.length-1]),H=function(t){return function(e){if(I=z(e),j=B(e),X?L?(X+="L"+I.substr(1),G=j+"L"+G.substr(1)):(X+="Z"+I,G=j+"Z"+G):(X=I,G=j),u.hasLines(_)&&e.length>1){var r=i.select(this);if(r.datum(c),t)y(r.style("opacity",0).attr("d",I).call(l.lineGroupStyle)).style("opacity",1);else{var n=y(r);n.attr("d",I),l.singleLineStyle(c,n)}}}}}var q=M.selectAll(".js-line").data(W);y(q.exit()).style("opacity",0).remove(),q.each(H(!1)),q.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(l.lineGroupStyle).each(H(!0)),l.setClipUrl(q,r.layerClipId,t),W.length?(S?(S.datum(c),F&&U&&(L?("y"===L?F[1]=U[1]=b.c2p(0,!0):"x"===L&&(F[0]=U[0]=x.c2p(0,!0)),y(S).attr("d","M"+U+"L"+F+"L"+X.substr(1)).call(l.singleFillStyle)):y(S).attr("d",X+"Z").call(l.singleFillStyle))):C&&("tonext"===_.fill.substr(0,6)&&X&&R?("tonext"===_.fill?y(C).attr("d",X+"Z"+R+"Z").call(l.singleFillStyle):y(C).attr("d",X+"L"+R.substr(1)+"Z").call(l.singleFillStyle),_._polygons=_._polygons.concat(P)):(Z(C),_._polygons=null)),_._prevRevpath=G,_._prevPolygons=V):(S?Z(S):C&&Z(C),_._polygons=_._prevRevpath=_._prevPolygons=null),k.datum(c),E.datum(c),function(e,n,a){var o,h=a[0].trace,c=u.hasMarkers(h),f=u.hasText(h),d=tt(h),p=et,g=et;if(c||f){var v=s,_=h.stackgroup,w=_&&"infer zero"===t._fullLayout._scatterStackOpts[x._id+b._id][_].stackgaps;h.marker.maxdisplayed||h._needsCull?v=w?K:Q:_&&!w&&(v=J),c&&(p=v),f&&(g=v)}var A,T=(o=e.selectAll("path.point").data(p,d)).enter().append("path").classed("point",!0);m&&T.call(l.pointStyle,h,t).call(l.translatePoints,x,b).style("opacity",0).transition().style("opacity",1),o.order(),c&&(A=l.makePointStyleFns(h)),o.each((function(e){var n=i.select(this),a=y(n);l.translatePoint(e,a,x,b)?(l.singlePointStyle(e,a,h,A,t),r.layerClipId&&l.hideOutsideRangePoint(e,a,x,b,h.xcalendar,h.ycalendar),h.customdata&&n.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):a.remove()})),m?o.exit().transition().style("opacity",0).remove():o.exit().remove(),(o=n.selectAll("g").data(g,d)).enter().append("g").classed("textpoint",!0).append("text"),o.order(),o.each((function(t){var e=i.select(this),n=y(e.select("text"));l.translatePoint(t,n,x,b)?r.layerClipId&&l.hideOutsideRangePoint(t,e,x,b,h.xcalendar,h.ycalendar):e.remove()})),o.selectAll("text").call(l.textPointStyle,h,t).each((function(t){var e=x.c2p(t.x),r=b.c2p(t.y);i.select(this).selectAll("tspan.line").each((function(){y(i.select(this)).attr({x:e,y:r})}))})),o.exit().remove()}(k,E,c);var Y=!1===_.cliponaxis?null:r.layerClipId;l.setClipUrl(k,Y,t),l.setClipUrl(E,Y,t)}function Z(t){y(t).attr("d","M0,0Z")}function Q(t){return t.filter((function(t){return!t.gap&&t.vis}))}function K(t){return t.filter((function(t){return t.vis}))}function J(t){return t.filter((function(t){return!t.gap}))}function $(t){return t.id}function tt(t){if(t.ids)return $}function et(){return!1}}t.exports=function(t,e,r,n,a,u){var h,f,p=!a,g=!!a&&a.duration>0,v=c(t,e,r);((h=n.selectAll("g.trace").data(v,(function(t){return t[0].trace.uid}))).enter().append("g").attr("class",(function(t){return"trace scatter trace"+t[0].trace.uid})).style("stroke-miterlimit",2),h.order(),function(t,e,r){e.each((function(e){var n=o(i.select(this),"g","fills");l.setClipUrl(n,r.layerClipId,t);var a=e[0].trace,u=[];a._ownfill&&u.push("_ownFill"),a._nexttrace&&u.push("_nextFill");var h=n.selectAll("g").data(u,s);h.enter().append("g"),h.exit().each((function(t){a[t]=null})).remove(),h.order().each((function(t){a[t]=o(i.select(this),"path","js-fill")}))}))}(t,h,e),g)?(u&&(f=u()),i.transition().duration(a.duration).ease(a.easing).each("end",(function(){f&&f()})).each("interrupt",(function(){f&&f()})).each((function(){n.selectAll("g.trace").each((function(r,i){d(t,i,e,r,v,this,a)}))}))):h.each((function(r,i){d(t,i,e,r,v,this,a)}));p&&h.exit().remove(),n.selectAll("path:not([d])").remove()}},function(t,e,r){"use strict";var i=r(25),n=i.BADNUM,a=i.LOG_CLIP,o=a+.5,s=a-.5,l=r(6),u=l.segmentsIntersect,h=l.constrain,c=r(213);t.exports=function(t,e){var r,i,a,f,d,p,g,v,m,y,x,b,_,w,A,T,M,k,E=e.xaxis,S=e.yaxis,C="log"===E.type,L="log"===S.type,I=E._length,j=S._length,R=e.connectGaps,P=e.baseTolerance,O=e.shape,z="linear"===O,N=e.fill&&"none"!==e.fill,B=[],F=c.minTolerance,D=t.length,U=new Array(D),V=0;function X(r){var i=t[r];if(!i)return!1;var a=e.linearized?E.l2p(i.x):E.c2p(i.x),l=e.linearized?S.l2p(i.y):S.c2p(i.y);if(a===n){if(C&&(a=E.c2p(i.x,!0)),a===n)return!1;L&&l===n&&(a*=Math.abs(E._m*j*(E._m>0?o:s)/(S._m*I*(S._m>0?o:s)))),a*=1e3}if(l===n){if(L&&(l=S.c2p(i.y,!0)),l===n)return!1;l*=1e3}return[a,l]}function G(t,e,r,i){var n=r-t,a=i-e,o=.5-t,s=.5-e,l=n*n+a*a,u=n*o+a*s;if(u>0&&u<l){var h=o*a-s*n;if(h*h<l)return!0}}function W(t,e){var r=t[0]/I,i=t[1]/j,n=Math.max(0,-r,r-1,-i,i-1);return n&&void 0!==M&&G(r,i,M,k)&&(n=0),n&&e&&G(r,i,e[0]/I,e[1]/j)&&(n=0),(1+c.toleranceGrowth*n)*P}function H(t,e){var r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}var q,Y,Z,Q,K,J,$,tt=c.maxScreensAway,et=-I*tt,rt=I*(1+tt),it=-j*tt,nt=j*(1+tt),at=[[et,it,rt,it],[rt,it,rt,nt],[rt,nt,et,nt],[et,nt,et,it]];function ot(t){if(t[0]<et||t[0]>rt||t[1]<it||t[1]>nt)return[h(t[0],et,rt),h(t[1],it,nt)]}function st(t,e){return t[0]===e[0]&&(t[0]===et||t[0]===rt)||(t[1]===e[1]&&(t[1]===it||t[1]===nt)||void 0)}function lt(t,e,r){return function(i,n){var a=ot(i),o=ot(n),s=[];if(a&&o&&st(a,o))return s;a&&s.push(a),o&&s.push(o);var u=2*l.constrain((i[t]+n[t])/2,e,r)-((a||i)[t]+(o||n)[t]);u&&((a&&o?u>0==a[t]>o[t]?a:o:a||o)[t]+=u);return s}}function ut(t){var e=t[0],r=t[1],i=e===U[V-1][0],n=r===U[V-1][1];if(!i||!n)if(V>1){var a=e===U[V-2][0],o=r===U[V-2][1];i&&(e===et||e===rt)&&a?o?V--:U[V-1]=t:n&&(r===it||r===nt)&&o?a?V--:U[V-1]=t:U[V++]=t}else U[V++]=t}function ht(t){U[V-1][0]!==t[0]&&U[V-1][1]!==t[1]&&ut([Z,Q]),ut(t),K=null,Z=Q=0}function ct(t){if(M=t[0]/I,k=t[1]/j,q=t[0]<et?et:t[0]>rt?rt:0,Y=t[1]<it?it:t[1]>nt?nt:0,q||Y){if(V)if(K){var e=$(K,t);e.length>1&&(ht(e[0]),U[V++]=e[1])}else J=$(U[V-1],t)[0],U[V++]=J;else U[V++]=[q||t[0],Y||t[1]];var r=U[V-1];q&&Y&&(r[0]!==q||r[1]!==Y)?(K&&(Z!==q&&Q!==Y?ut(Z&&Q?(i=K,a=(n=t)[0]-i[0],o=(n[1]-i[1])/a,(i[1]*n[0]-n[1]*i[0])/a>0?[o>0?et:rt,nt]:[o>0?rt:et,it]):[Z||q,Q||Y]):Z&&Q&&ut([Z,Q])),ut([q,Y])):Z-q&&Q-Y&&ut([q||Z,Y||Q]),K=t,Z=q,Q=Y}else K&&ht($(K,t)[0]),U[V++]=t;var i,n,a,o}for("linear"===O||"spline"===O?$=function(t,e){for(var r=[],i=0,n=0;n<4;n++){var a=at[n],o=u(t[0],t[1],e[0],e[1],a[0],a[1],a[2],a[3]);o&&(!i||Math.abs(o.x-r[0][0])>1||Math.abs(o.y-r[0][1])>1)&&(o=[o.x,o.y],i&&H(o,t)<H(r[0],t)?r.unshift(o):r.push(o),i++)}return r}:"hv"===O||"vh"===O?$=function(t,e){var r=[],i=ot(t),n=ot(e);return i&&n&&st(i,n)||(i&&r.push(i),n&&r.push(n)),r}:"hvh"===O?$=lt(0,et,rt):"vhv"===O&&($=lt(1,it,nt)),r=0;r<D;r++)if(i=X(r)){for(V=0,K=null,ct(i),r++;r<D;r++){if(!(f=X(r))){if(R)continue;break}if(z&&e.simplify){var ft=X(r+1);if(y=H(f,i),N&&(0===V||V===D-1)||!(y<W(f,ft)*F)){for(v=[(f[0]-i[0])/y,(f[1]-i[1])/y],d=i,x=y,b=w=A=0,g=!1,a=f,r++;r<t.length;r++){if(p=ft,ft=X(r+1),!p){if(R)continue;break}if(T=(m=[p[0]-i[0],p[1]-i[1]])[0]*v[1]-m[1]*v[0],w=Math.min(w,T),(A=Math.max(A,T))-w>W(p,ft))break;a=p,(_=m[0]*v[0]+m[1]*v[1])>x?(x=_,f=p,g=!1):_<b&&(b=_,d=p,g=!0)}if(g?(ct(f),a!==d&&ct(d)):(d!==i&&ct(d),a!==f&&ct(f)),ct(a),r>=t.length||!p)break;ct(p),i=p}}else ct(f)}K&&ut([Z||K[0],Q||K[1]]),B.push(U.slice(0,V))}return B}},function(t,e,r){"use strict";var i=r(206);t.exports=function(t,e){var r,n,a,o,s=t.cd,l=t.xaxis,u=t.yaxis,h=[],c=s[0].trace;if(!i.hasMarkers(c)&&!i.hasText(c))return[];if(!1===e)for(r=0;r<s.length;r++)s[r].selected=0;else for(r=0;r<s.length;r++)n=s[r],a=l.c2p(n.x),o=u.c2p(n.y),null!==n.i&&e.contains([a,o],!1,r,t)?(h.push({pointNumber:n.i,x:l.c2d(n.x),y:u.c2d(n.y)}),n.selected=1):n.selected=0;return h}},function(t,e,r){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},function(t,e,r){"use strict";t.exports=function(t,e,r){return 0===t.length?t:e?(r||t.sort(e),function(t,e){for(var r=1,i=t.length,n=t[0],a=t[0],o=1;o<i;++o)if(a=n,e(n=t[o],a)){if(o===r){r++;continue}t[r++]=n}return t.length=r,t}(t,e)):(r||t.sort(),function(t){for(var e=1,r=t.length,i=t[0],n=t[0],a=1;a<r;++a,n=i)if(n=i,(i=t[a])!==n){if(a===e){e++;continue}t[e++]=i}return t.length=e,t}(t))}},,,function(t,e,r){"use strict";var i=r(668),n=r(793);t.exports=function(t,e){var r=t.length;if(1===r){var a=i(t[0],e);return a[0]?a:[a[1]]}var o=new Array(2*r),s=[.1,.1],l=[.1,.1],u=0;i(t[0],e,s),s[0]&&(o[u++]=s[0]);for(var h=1;h<r;++h){i(t[h],e,l);var c=s[1];n(c,l[0],s),s[0]&&(o[u++]=s[0]);var f=l[1],d=s[1],p=f+d,g=d-(p-f);s[1]=p,g&&(o[u++]=g)}s[1]&&(o[u++]=s[1]);0===u&&(o[u++]=0);return o.length=u,o}},,,,,,function(t,e,r){"use strict";e.version="1.54.5"},function(t,e,r){"use strict";var i=r(12),n=r(690),a=r(107),o=r(6),s=r(632),l=r(669),u=r(670),h=r(708).version,c={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`","If set to *null*, the exported image width will match the current graph width."].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`","If set to *null*, the exported image height will match the current graph height."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}};t.exports=function(t,e){var r,f,d,p;function g(t){return!(t in e)||o.validate(e[t],c[t])}if(e=e||{},o.isPlainObject(t)?(r=t.data||[],f=t.layout||{},d=t.config||{},p={}):(t=o.getGraphDiv(t),r=o.extendDeep([],t.data),f=o.extendDeep({},t.layout),d=t._context,p=t._fullLayout||{}),!g("width")&&null!==e.width||!g("height")&&null!==e.height)throw new Error("Height and width should be pixel values.");if(!g("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var v={};function m(t,r){return o.coerce(e,v,c,t,r)}var y=m("format"),x=m("width"),b=m("height"),_=m("scale"),w=m("setBackground"),A=m("imageDataOnly"),T=document.createElement("div");T.style.position="absolute",T.style.left="-5000px",document.body.appendChild(T);var M=o.extendFlat({},f);x?M.width=x:null===e.width&&i(p.width)&&(M.width=p.width),b?M.height=b:null===e.height&&i(p.height)&&(M.height=p.height);var k=o.extendFlat({},d,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),E=s.getRedrawFunc(T);function S(){return new Promise((function(t){setTimeout(t,s.getDelay(T._fullLayout))}))}function C(){return new Promise((function(t,e){var r=l(T,y,_),i=T._fullLayout.width,c=T._fullLayout.height;function f(){n.purge(T),document.body.removeChild(T)}if("full-json"===y){var d=a.graphJson(T,!1,"keepdata","object",!0,!0);return d.version=h,d=JSON.stringify(d),f(),t(A?d:s.encodeJSON(d))}if(f(),"svg"===y)return t(A?r:s.encodeSVG(r));var p=document.createElement("canvas");p.id=o.randstr(),u({format:y,width:i,height:c,scale:_,canvas:p,svg:r,promise:!0}).then(t).catch(e)}))}return new Promise((function(t,e){n.plot(T,r,M,k).then(E).then(S).then(C).then((function(e){t(function(t){return A?t.replace(s.IMAGE_URL_PREFIX,""):t}(e))})).catch((function(t){e(t)}))}))}},function(t,e,r){"use strict";var i=r(6),n=r(709),a=r(816),o=r(632);t.exports=function(t,e){var r;return i.isPlainObject(t)||(r=i.getGraphDiv(t)),(e=e||{}).format=e.format||"png",e.imageDataOnly=!0,new Promise((function(s,l){r&&r._snapshotInProgress&&l(new Error("Snapshotting already in progress.")),i.isIE()&&"svg"!==e.format&&l(new Error(o.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var u=n(t,e),h=e.filename||t.fn||"newplot";h+="."+e.format.replace("-","."),u.then((function(t){return r&&(r._snapshotInProgress=!1),a(t,h,e.format)})).then((function(t){s(t)})).catch((function(t){r&&(r._snapshotInProgress=!1),l(t)}))}))}},function(t,e,r){"use strict";var i=r(6),n=r(57);t.exports=function(t,e,r,a){a("opacity");var o=a("bgcolor"),s=a("bordercolor"),l=n.opacity(s);a("borderpad");var u=a("borderwidth"),h=a("showarrow");if(a("text",h?" ":r._dfltTitle.annotation),a("textangle"),i.coerceFont(a,"font",r.font),a("width"),a("align"),a("height")&&a("valign"),h){var c,f,d=a("arrowside");-1!==d.indexOf("end")&&(c=a("arrowhead"),f=a("arrowsize")),-1!==d.indexOf("start")&&(a("startarrowhead",c),a("startarrowsize",f)),a("arrowcolor",l?e.bordercolor:n.defaultLine),a("arrowwidth",2*(l&&u||1)),a("standoff"),a("startstandoff")}var p=a("hovertext"),g=r.hoverlabel||{};if(p){var v=a("hoverlabel.bgcolor",g.bgcolor||(n.opacity(o)?n.rgb(o):n.defaultLine)),m=a("hoverlabel.bordercolor",g.bordercolor||n.contrast(v));i.coerceFont(a,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||m})}a("captureevents",!!p)}},function(t,e,r){"use strict";var i=r(652),n=r(207).line,a=r(114).dash,o=r(32).extendFlat,s=r(58).templatedArray;t.exports=s("shape",{visible:{valType:"boolean",role:"info",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this shape is visible."].join(" ")},type:{valType:"enumerated",values:["circle","rect","path","line"],role:"info",editType:"calc+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","with respect to the axes' sizing mode.","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","with respect to the axes' sizing mode.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","with respect to the axes' sizing mode.","If *path*, draw a custom SVG path using `path`.","with respect to the axes' sizing mode."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",role:"info",editType:"arraydraw",description:"Specifies whether shapes are drawn below or above traces."},xref:o({},i.xref,{description:["Sets the shape's x coordinate axis.","If set to an x axis id (e.g. *x* or *x2*), the `x` position","refers to an x coordinate.","If set to *paper*, the `x` position refers to the distance from","the left side of the plotting area in normalized coordinates","where *0* (*1*) corresponds to the left (right) side.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, then you must convert","the date to unix time in milliseconds."].join(" ")}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",role:"info",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the x axis.","If set to *scaled*, `x0`, `x1` and x coordinates within `path` refer to","data values on the x axis or a fraction of the plot area's width","(`xref` set to *paper*).","If set to *pixel*, `xanchor` specifies the x position in terms","of data or plot fraction but `x0`, `x1` and x coordinates within `path`","are pixels relative to `xanchor`. This way, the shape can have","a fixed width while maintaining a position relative to data or","plot fraction."].join(" ")},xanchor:{valType:"any",role:"info",editType:"calc+arraydraw",description:["Only relevant in conjunction with `xsizemode` set to *pixel*.","Specifies the anchor point on the x axis to which `x0`, `x1`","and x coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `xsizemode` not set to *pixel*."].join(" ")},x0:{valType:"any",role:"info",editType:"calc+arraydraw",description:["Sets the shape's starting x position.","See `type` and `xsizemode` for more info."].join(" ")},x1:{valType:"any",role:"info",editType:"calc+arraydraw",description:["Sets the shape's end x position.","See `type` and `xsizemode` for more info."].join(" ")},yref:o({},i.yref,{description:["Sets the annotation's y coordinate axis.","If set to an y axis id (e.g. *y* or *y2*), the `y` position","refers to an y coordinate","If set to *paper*, the `y` position refers to the distance from","the bottom of the plotting area in normalized coordinates","where *0* (*1*) corresponds to the bottom (top)."].join(" ")}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",role:"info",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the y axis.","If set to *scaled*, `y0`, `y1` and y coordinates within `path` refer to","data values on the y axis or a fraction of the plot area's height","(`yref` set to *paper*).","If set to *pixel*, `yanchor` specifies the y position in terms","of data or plot fraction but `y0`, `y1` and y coordinates within `path`","are pixels relative to `yanchor`. This way, the shape can have","a fixed height while maintaining a position relative to data or","plot fraction."].join(" ")},yanchor:{valType:"any",role:"info",editType:"calc+arraydraw",description:["Only relevant in conjunction with `ysizemode` set to *pixel*.","Specifies the anchor point on the y axis to which `y0`, `y1`","and y coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `ysizemode` not set to *pixel*."].join(" ")},y0:{valType:"any",role:"info",editType:"calc+arraydraw",description:["Sets the shape's starting y position.","See `type` and `ysizemode` for more info."].join(" ")},y1:{valType:"any",role:"info",editType:"calc+arraydraw",description:["Sets the shape's end y position.","See `type` and `ysizemode` for more info."].join(" ")},path:{valType:"string",role:"info",editType:"calc+arraydraw",description:["For `type` *path* - a valid SVG path with the pixel values","replaced by data values in `xsizemode`/`ysizemode` being *scaled*","and taken unmodified as pixels relative to `xanchor` and `yanchor`","in case of *pixel* size mode.","There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,role:"info",editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:o({},n.color,{editType:"arraydraw"}),width:o({},n.width,{editType:"calc+arraydraw"}),dash:o({},a,{editType:"arraydraw"}),role:"info",editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",role:"info",editType:"arraydraw",description:["Sets the color filling the shape's interior. Only applies to closed shapes."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",role:"info",editType:"arraydraw",description:["Determines which regions of complex paths constitute the interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},editable:{valType:"boolean",role:"info",dflt:!1,editType:"calc+arraydraw",description:["Determines whether the shape could be activated for edit or not.","Has no effect when the older editable shapes mode is enabled via","`config.editable` or `config.edits.shapePosition`."].join(" ")},editType:"arraydraw"})},function(t,e,r){"use strict";var i=r(80),n=r(58).templatedArray;t.exports=n("image",{visible:{valType:"boolean",role:"info",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",role:"info",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",role:"info",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width."].join(" ")},sizey:{valType:"number",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",role:"info",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",role:"info",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",role:"info",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",role:"info",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",role:"info",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],dflt:"paper",role:"info",editType:"arraydraw",description:["Sets the images's x coordinate axis.","If set to a x axis id (e.g. *x* or *x2*), the `x` position","refers to an x data coordinate","If set to *paper*, the `x` position refers to the distance from","the left of plot in normalized coordinates","where *0* (*1*) corresponds to the left (right)."].join(" ")},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],dflt:"paper",role:"info",editType:"arraydraw",description:["Sets the images's y coordinate axis.","If set to a y axis id (e.g. *y* or *y2*), the `y` position","refers to a y data coordinate.","If set to *paper*, the `y` position refers to the distance from","the bottom of the plot in normalized coordinates","where *0* (*1*) corresponds to the bottom (top)."].join(" ")},editType:"arraydraw"})},function(t,e,r){"use strict";var i=r(46),n=r(112),a=r(32).extendFlat,o=r(109).overrideAll,s=r(221),l=r(58).templatedArray,u=l("button",{visible:{valType:"boolean",role:"info",description:"Determines whether or not this button is visible."},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",role:"info",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",role:"info",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},args2:{valType:"info_array",role:"info",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets a 2nd set of `args`,","these arguments values are passed to the Plotly","method set in `method` when clicking this button while in the active state.","Use this to create toggle buttons."].join(" ")},label:{valType:"string",role:"info",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",role:"info",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}});t.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",role:"info",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",role:"info",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",role:"info",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",role:"info",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",role:"info",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:u,x:{valType:"number",min:-2,max:3,dflt:-.05,role:"style",description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",role:"info",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,role:"style",description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",role:"info",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:a(s({editType:"arraydraw"}),{description:"Sets the padding around the buttons or dropdown menu."}),font:i({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",role:"style",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:n.borderLine,role:"style",description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,role:"style",editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}}),"arraydraw","from-root")},function(t,e,r){"use strict";var i=r(46),n=r(221),a=r(32).extendDeepAll,o=r(109).overrideAll,s=r(116),l=r(58).templatedArray,u=r(656),h=l("step",{visible:{valType:"boolean",role:"info",dflt:!0,description:["Determines whether or not this step is included in the slider."].join(" ")},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",role:"info",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",role:"info",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",role:"info",description:"Sets the text label to appear on the slider"},value:{valType:"string",role:"info",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",role:"info",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}});t.exports=o(l("slider",{visible:{valType:"boolean",role:"info",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",role:"info",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:h,lenmode:{valType:"enumerated",values:["fraction","pixels"],role:"info",dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,role:"style",description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,role:"style",description:"Sets the x position (in normalized coordinates) of the slider."},pad:a(n({editType:"arraydraw"}),{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",role:"info",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,role:"style",description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",role:"info",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",role:"info",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:s.transition.easing.values,role:"info",dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",role:"info",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",role:"info",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,role:"info",description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",role:"info",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",role:"info",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:i({description:"Sets the font of the current value label text."})},font:i({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",role:"style",dflt:u.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",role:"style",dflt:u.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:u.railBorderColor,role:"style",description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:u.railBorderWidth,role:"style",description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:u.tickLength,role:"style",description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:u.tickColor,role:"style",description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,role:"style",description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:u.minorTickLength,role:"style",description:"Sets the length in pixels of minor step tick marks"}}),"arraydraw","from-root")},function(t,e,r){"use strict";t.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",role:"style",editType:"calc",description:["Determines whether or not the range of this axis in","the rangeslider use the same value than in the main plot","when zooming in/out.","If *auto*, the autorange will be used.","If *fixed*, the `range` is used.","If *match*, the current range of the corresponding y-axis on the main subplot is used."].join(" ")},range:{valType:"info_array",role:"style",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Sets the range of this axis for the rangeslider."].join(" ")},editType:"calc"}},function(t,e,r){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},function(t,e,r){"use strict";t.exports={visible:{valType:"boolean",role:"info",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],role:"info",editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the sqaure of the","underlying data.","If *data*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",role:"info",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,role:"info",editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,role:"info",editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,role:"info",editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,role:"info",editType:"style"},copy_ystyle:{valType:"boolean",role:"style",editType:"plot"},copy_zstyle:{valType:"boolean",role:"style",editType:"style"},color:{valType:"color",role:"style",editType:"style",description:"Sets the stoke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,role:"style",editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,role:"style",editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc",_deprecated:{opacity:{valType:"number",role:"style",editType:"style",description:["Obsolete.","Use the alpha channel in error bar `color` to set the opacity."].join(" ")}}}},function(t,e,r){"use strict";function i(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}t.exports=function(t){var e=t.type,r=t.symmetric;if("data"===e){var n=t.array||[];if(r)return function(t,e){var r=+n[e];return[r,r]};var a=t.arrayminus||[];return function(t,e){var r=+n[e],i=+a[e];return isNaN(r)&&isNaN(i)?[NaN,NaN]:[i||0,r||0]}}var o=i(e,t.value),s=i(e,t.valueminus);return r||void 0===t.valueminus?function(t){var e=o(t);return[e,e]}:function(t){return[s(t),o(t)]}}},function(t,e,r){"use strict";var i=r(23),n=r(6),a=n.extendFlat,o=n.extendDeep;function s(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}t.exports=function(t,e){var r;t.framework&&t.framework.isPolar&&(t=t.framework.getConfig());var n,l=t.data,u=t.layout,h=o([],l),c=o({},u,s(e.tileClass)),f=t._context||{};if(e.width&&(c.width=e.width),e.height&&(c.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){c.annotations=[];var d=Object.keys(c);for(r=0;r<d.length;r++)n=d[r],["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))>-1&&(c[d[r]].title={text:""});for(r=0;r<h.length;r++){var p=h[r];p.showscale=!1,p.marker&&(p.marker.showscale=!1),i.traceIs(p,"pie-like")&&(p.textposition="none")}}if(Array.isArray(e.annotations))for(r=0;r<e.annotations.length;r++)c.annotations.push(e.annotations[r]);var g=Object.keys(c).filter((function(t){return t.match(/^scene\d*$/)}));if(g.length){var v={};for("thumbnail"===e.tileClass&&(v={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),r=0;r<g.length;r++){var m=c[g[r]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),a(m.xaxis,v),a(m.yaxis,v),a(m.zaxis,v),m._scene=null}}var y=document.createElement("div");e.tileClass&&(y.className=e.tileClass);var x={gd:y,td:y,layout:c,data:h,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:f.mapboxAccessToken}};return"transparent"!==e.setBackground&&(x.config.setBackground=e.setBackground||"opaque"),x.gd.defaultLayout=s(e.tileClass),x}},,function(t,e){t.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},,,,function(t,e,r){"use strict";var i=r(968),n=r(797),a=r(798),o=r(970),s=r(666),l=r(799);t.exports=function t(e,r){if(i(e))return r?l(e,t(r)):[e[0].clone(),e[1].clone()];var u,h,c=0;if(n(e))u=e.clone();else if("string"==typeof e)u=o(e);else{if(0===e)return[a(0),a(1)];if(e===Math.floor(e))u=a(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),c-=256;u=a(e)}}if(i(r))u.mul(r[1]),h=r[0].clone();else if(n(r))h=r.clone();else if("string"==typeof r)h=o(r);else if(r)if(r===Math.floor(r))h=a(r);else{for(;r!==Math.floor(r);)r*=Math.pow(2,256),c+=256;h=a(r)}else h=a(1);c>0?u=u.ushln(c):c<0&&(h=h.ushln(-c));return s(u,h)}},function(t,e,r){(function(e){var r=!1;if("undefined"!=typeof Float64Array){var i=new Float64Array(1),n=new Uint32Array(i.buffer);if(i[0]=1,r=!0,1072693248===n[1]){t.exports=function(t){return i[0]=t,[n[0],n[1]]},t.exports.pack=function(t,e){return n[0]=t,n[1]=e,i[0]},t.exports.lo=function(t){return i[0]=t,n[0]},t.exports.hi=function(t){return i[0]=t,n[1]}}else if(1072693248===n[0]){t.exports=function(t){return i[0]=t,[n[1],n[0]]},t.exports.pack=function(t,e){return n[1]=t,n[0]=e,i[0]},t.exports.lo=function(t){return i[0]=t,n[1]},t.exports.hi=function(t){return i[0]=t,n[0]}}else r=!1}if(!r){var a=new e(8);t.exports=function(t){return a.writeDoubleLE(t,0,!0),[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]},t.exports.pack=function(t,e){return a.writeUInt32LE(t,0,!0),a.writeUInt32LE(e,4,!0),a.readDoubleLE(0,!0)},t.exports.lo=function(t){return a.writeDoubleLE(t,0,!0),a.readUInt32LE(0,!0)},t.exports.hi=function(t){return a.writeDoubleLE(t,0,!0),a.readUInt32LE(4,!0)}}t.exports.sign=function(e){return t.exports.hi(e)>>>31},t.exports.exponent=function(e){return(t.exports.hi(e)<<1>>>21)-1023},t.exports.fraction=function(e){var r=t.exports.lo(e),i=t.exports.hi(e),n=1048575&i;return 2146435072&i&&(n+=1<<20),[r,n]},t.exports.denormalized=function(e){return!(2146435072&t.exports.hi(e))}}).call(this,r(746).Buffer)},function(t,e,r){"use strict";var i=r(684);t.exports=function(t){return t.cmp(new i(0))}},,function(t,e,r){"use strict";var i=r(6),n=r(58),a=r(624).defaults;t.exports=function(t,e,r,o){var s,l,u=o.type,h=o.attributes,c=o.handleDefaults,f=o.partition||"x",d=e._subplots[u],p=d.length,g=p&&d[0].replace(/\d+$/,"");function v(t,e){return i.coerce(s,l,h,t,e)}for(var m=0;m<p;m++){var y=d[m];s=t[y]?t[y]:t[y]={},l=n.newContainer(e,y,g),v("uirevision",e.uirevision);var x={};x[f]=[m/p,(m+1)/p],a(l,e,v,x),o.id=y,c(s,l,v,o)}}},function(t,e,r){"use strict";var i=r(946);function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function(t){var e=new n;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var a=0;a<r.length;++a){var o=r[a];if("array"===o||"object"==typeof o&&o.blockIndices){if(e.argTypes[a]="array",e.arrayArgs.push(a),e.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),e.shimArgs.push("array"+a),a<e.pre.args.length&&e.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array args");if(a<e.post.args.length&&e.post.args[a].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)e.scalarArgs.push(a),e.shimArgs.push("scalar"+a);else if("index"===o){if(e.indexArgs.push(a),a<e.pre.args.length&&e.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array index");if(a<e.body.args.length&&e.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array index");if(a<e.post.args.length&&e.post.args[a].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(e.shapeArgs.push(a),a<e.pre.args.length&&e.pre.args[a].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(a<e.body.args.length&&e.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array shape");if(a<e.post.args.length&&e.post.args[a].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+r[a]);e.argTypes[a]="offset",e.offsetArgs.push({array:o.array,offset:o.offset}),e.offsetArgIndex.push(a)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,i(e)}},function(t,e){t.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},,function(t,e){t.exports=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=r+r,s=i+i,l=n+n,u=r*o,h=i*o,c=i*s,f=n*o,d=n*s,p=n*l,g=a*o,v=a*s,m=a*l;return t[0]=1-c-p,t[1]=h+m,t[2]=f-v,t[3]=0,t[4]=h-m,t[5]=1-u-p,t[6]=d+g,t[7]=0,t[8]=f+v,t[9]=d-g,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e,r){"use strict";t.exports=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("scatter"===r.type){var i=r.fill;if("none"!==i&&"toself"!==i&&(r.opacity=void 0,"tonexty"===i||"tonextx"===i))for(var n=e-1;n>=0;n--){var a=t[n];if("scatter"===a.type&&a.xaxis===r.xaxis&&a.yaxis===r.yaxis){a.opacity=void 0;break}}}}}},function(t,e,r){"use strict";var i=r(105);t.exports=function(t,e,r){var n={},a={_fullLayout:r},o=i.getFromTrace(a,e,"x"),s=i.getFromTrace(a,e,"y");return n.xLabel=i.tickText(o,t.x,!0).text,n.yLabel=i.tickText(s,t.y,!0).text,n}},,,,,,function(t,e,r){"use strict";var i=r(646),n=r(763),a=r(625);t.exports=function(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");o||u(t);if("number"==typeof arguments[1])return m(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return m(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var e=arguments[1],r=h(e)?e:e.raw;if(r)return y(t,r,0|e.width,0|e.height,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return x(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var o=null,s=null,l=null;function u(t){o=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],s=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],l=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]}function h(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var c=function(t,e){n.muls(t,e,255)};function f(t,e,r){var i=t.gl,n=i.getParameter(i.MAX_TEXTURE_SIZE);if(e<0||e>n||r<0||r>n)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,r],t.bind(),i.texImage2D(i.TEXTURE_2D,0,t.format,e,r,0,t.format,t.type,null),t._mipLevels=[0],t}function d(t,e,r,i,n,a){this.gl=t,this.handle=e,this.format=n,this.type=a,this._shape=[r,i],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(t){return o.wrapS=t}},{get:function(){return o._wrapT},set:function(t){return o.wrapT=t}}]),this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return o._shape[0]},set:function(t){return o.width=t}},{get:function(){return o._shape[1]},set:function(t){return o.height=t}}]),this._shapeVector=l}var p=d.prototype;function g(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function v(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function m(t,e,r,i,n){var a=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>a||r<0||r>a)throw new Error("gl-texture2d: Invalid texture shape");if(n===t.FLOAT&&!t.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=v(t);return t.texImage2D(t.TEXTURE_2D,0,i,e,r,0,i,n,null),new d(t,o,e,r,i,n)}function y(t,e,r,i,n,a){var o=v(t);return t.texImage2D(t.TEXTURE_2D,0,n,n,a,e),new d(t,o,r,i,n,a)}function x(t,e){var r=e.dtype,o=e.shape.slice(),s=t.getParameter(t.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>s||o[1]<0||o[1]>s)throw new Error("gl-texture2d: Invalid texture size");var l=g(o,e.stride.slice()),u=0;"float32"===r?u=t.FLOAT:"float64"===r?(u=t.FLOAT,l=!1,r="float32"):"uint8"===r?u=t.UNSIGNED_BYTE:(u=t.UNSIGNED_BYTE,l=!1,r="uint8");var h,f,p=0;if(2===o.length)p=t.LUMINANCE,o=[o[0],o[1],1],e=i(e.data,o,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==o.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===o[2])p=t.ALPHA;else if(2===o[2])p=t.LUMINANCE_ALPHA;else if(3===o[2])p=t.RGB;else{if(4!==o[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");p=t.RGBA}}u!==t.FLOAT||t.getExtension("OES_texture_float")||(u=t.UNSIGNED_BYTE,l=!1);var m=e.size;if(l)h=0===e.offset&&e.data.length===m?e.data:e.data.subarray(e.offset,e.offset+m);else{var y=[o[2],o[2]*o[0],1];f=a.malloc(m,r);var x=i(f,o,y,0);"float32"!==r&&"float64"!==r||u!==t.UNSIGNED_BYTE?n.assign(x,e):c(x,e),h=f.subarray(0,m)}var b=v(t);return t.texImage2D(t.TEXTURE_2D,0,p,o[0],o[1],0,p,u,h),l||a.free(f),new d(t,b,o[0],o[1],p,u)}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&o.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),s.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&o.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),s.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),l.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),l.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(l.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return f(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return f(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,f(this,this._shape[0],t),t}}}),p.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},p.setPixels=function(t,e,r,o){var s=this.gl;this.bind(),Array.isArray(e)?(o=r,r=0|e[1],e=0|e[0]):(e=e||0,r=r||0),o=o||0;var l=h(t)?t:t.raw;if(l){this._mipLevels.indexOf(o)<0?(s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,this.type,l),this._mipLevels.push(o)):s.texSubImage2D(s.TEXTURE_2D,o,e,r,this.format,this.type,l)}else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>o||r+t.shape[0]>this._shape[0]>>>o||e<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(t,e,r,o,s,l,u,h){var f=h.dtype,d=h.shape.slice();if(d.length<2||d.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var p=0,v=0,m=g(d,h.stride.slice());"float32"===f?p=t.FLOAT:"float64"===f?(p=t.FLOAT,m=!1,f="float32"):"uint8"===f?p=t.UNSIGNED_BYTE:(p=t.UNSIGNED_BYTE,m=!1,f="uint8");if(2===d.length)v=t.LUMINANCE,d=[d[0],d[1],1],h=i(h.data,d,[h.stride[0],h.stride[1],1],h.offset);else{if(3!==d.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===d[2])v=t.ALPHA;else if(2===d[2])v=t.LUMINANCE_ALPHA;else if(3===d[2])v=t.RGB;else{if(4!==d[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");v=t.RGBA}d[2]}v!==t.LUMINANCE&&v!==t.ALPHA||s!==t.LUMINANCE&&s!==t.ALPHA||(v=s);if(v!==s)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var y=h.size,x=u.indexOf(o)<0;x&&u.push(o);if(p===l&&m)0===h.offset&&h.data.length===y?x?t.texImage2D(t.TEXTURE_2D,o,s,d[0],d[1],0,s,l,h.data):t.texSubImage2D(t.TEXTURE_2D,o,e,r,d[0],d[1],s,l,h.data):x?t.texImage2D(t.TEXTURE_2D,o,s,d[0],d[1],0,s,l,h.data.subarray(h.offset,h.offset+y)):t.texSubImage2D(t.TEXTURE_2D,o,e,r,d[0],d[1],s,l,h.data.subarray(h.offset,h.offset+y));else{var b;b=l===t.FLOAT?a.mallocFloat32(y):a.mallocUint8(y);var _=i(b,d,[d[2],d[2]*d[0],1]);p===t.FLOAT&&l===t.UNSIGNED_BYTE?c(_,h):n.assign(_,h),x?t.texImage2D(t.TEXTURE_2D,o,s,d[0],d[1],0,s,l,b.subarray(0,y)):t.texSubImage2D(t.TEXTURE_2D,o,e,r,d[0],d[1],s,l,b.subarray(0,y)),l===t.FLOAT?a.freeFloat32(b):a.freeUint8(b)}}(s,e,r,o,this.format,this.type,this._mipLevels,t)}}},function(t,e,r){"use strict";var i=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===i.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},function(t,e,r){"use strict";var i=r(6),n=[[-1,0],[1,0],[0,-1],[0,1]];function a(t){return.5-.25*Math.min(1,.5*t)}function o(t,e,r){var i,a,o,s,l,u,h,c,f,d,p,g,v,m=0;for(s=0;s<e.length;s++){for(a=(i=e[s])[0],o=i[1],p=t[a][o],d=0,f=0,l=0;l<4;l++)(h=t[a+(u=n[l])[0]])&&void 0!==(c=h[o+u[1]])&&(0===d?g=v=c:(g=Math.min(g,c),v=Math.max(v,c)),f++,d+=c);if(0===f)throw"iterateInterp2d order is wrong: no defined neighbors";t[a][o]=d/f,void 0===p?f<4&&(m=1):(t[a][o]=(1+r)*t[a][o]-r*p,v>g&&(m=Math.max(m,Math.abs(t[a][o]-p)/(v-g))))}return m}t.exports=function(t,e){var r,n=1;for(o(t,e),r=0;r<e.length&&!(e[r][2]<4);r++);for(e=e.slice(r),r=0;r<100&&n>.01;r++)n=o(t,e,a(n));return n>.01&&i.log("interp2d didn't converge quickly",n),t}},function(t,e,r){"use strict";var i=r(6).maxRowLength;t.exports=function(t){var e,r,n,a,o,s,l,u,h=[],c={},f=[],d=t[0],p=[],g=[0,0,0],v=i(t);for(r=0;r<t.length;r++)for(e=p,p=d,d=t[r+1]||[],n=0;n<v;n++)void 0===p[n]&&((s=(void 0!==p[n-1]?1:0)+(void 0!==p[n+1]?1:0)+(void 0!==e[n]?1:0)+(void 0!==d[n]?1:0))?(0===r&&s++,0===n&&s++,r===t.length-1&&s++,n===p.length-1&&s++,s<4&&(c[[r,n]]=[r,n,s]),h.push([r,n,s])):f.push([r,n]));for(;f.length;){for(l={},u=!1,o=f.length-1;o>=0;o--)(s=((c[[(r=(a=f[o])[0])-1,n=a[1]]]||g)[2]+(c[[r+1,n]]||g)[2]+(c[[r,n-1]]||g)[2]+(c[[r,n+1]]||g)[2])/20)&&(l[a]=[r,n,s],f.splice(o,1),u=!0);if(!u)throw"findEmpties iterated with no new neighbors";for(a in l)c[a]=l[a],h.push(l[a])}return h.sort((function(t,e){return e[2]-t[2]}))}},function(t,e,r){"use strict";(function(t){var i=r(886),n=r(887),a=r(888);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return u(this,t,e,r)}function u(t,e,r,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,i){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,r):new Uint8Array(e,r,i);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e);return t}(t,e,r,i):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(e,r),n=(t=s(t,i)).write(e,r);n!==i&&(t=t.slice(0,n));return t}(t,e,r):function(t,e){if(l.isBuffer(e)){var r=0|d(e.length);return 0===(t=s(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?s(t,0):f(t,e);if("Buffer"===e.type&&a(e.data))return f(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(h(e),t=s(t,e<0?0:0|d(e)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|d(e.length);t=s(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(t).length;default:if(i)return D(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,r);case"utf8":case"utf-8":return k(this,e,r);case"ascii":return E(this,e,r);case"latin1":case"binary":return S(this,e,r);case"base64":return M(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function v(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function m(t,e,r,i,n){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:y(t,e,r,i,n);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,i,n){var a,o=1,s=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;o=2,s/=2,l/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){var h=-1;for(a=r;a<s;a++)if(u(t,a)===u(e,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===l)return h*o}else-1!==h&&(a-=a-h),h=-1}else for(r+l>s&&(r=s-l),a=r;a>=0;a--){for(var c=!0,f=0;f<l;f++)if(u(t,a+f)!==u(e,f)){c=!1;break}if(c)return a}return-1}function x(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i))>n&&(i=n):i=n;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var o=0;o<i;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[r+o]=s}return o}function b(t,e,r,i){return V(D(e,t.length-r),t,r,i)}function _(t,e,r,i){return V(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,i)}function w(t,e,r,i){return _(t,e,r,i)}function A(t,e,r,i){return V(U(e),t,r,i)}function T(t,e,r,i){return V(function(t,e){for(var r,i,n,a=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),i=r>>8,n=r%256,a.push(n),a.push(i);return a}(e,t.length-r),t,r,i)}function M(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function k(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var a,o,s,l,u=t[n],h=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c<=r)switch(c){case 1:u<128&&(h=u);break;case 2:128==(192&(a=t[n+1]))&&(l=(31&u)<<6|63&a)>127&&(h=l);break;case 3:a=t[n+1],o=t[n+2],128==(192&a)&&128==(192&o)&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:a=t[n+1],o=t[n+2],s=t[n+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(h=l)}null===h?(h=65533,c=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),n+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return r}(i)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,r){return u(null,t,e,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,r){return function(t,e,r,i){return h(e),e<=0?s(t,e):void 0!==r?"string"==typeof i?s(t,e).fill(r,i):s(t,e).fill(r):s(t,e)}(null,t,e,r)},l.allocUnsafe=function(t){return c(null,t)},l.allocUnsafeSlow=function(t){return c(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,n=0,a=Math.min(r,i);n<a;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var i=l.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){var o=t[r];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):g.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,r,i,n){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||r>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&e>=r)return 0;if(i>=n)return-1;if(e>=r)return 1;if(this===t)return 0;for(var a=(n>>>=0)-(i>>>=0),o=(r>>>=0)-(e>>>=0),s=Math.min(a,o),u=this.slice(i,n),h=t.slice(e,r),c=0;c<s;++c)if(u[c]!==h[c]){a=u[c],o=h[c];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},l.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},l.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},l.prototype.write=function(t,e,r,i){if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-e;if((void 0===r||r>n)&&(r=n),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return x(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return _(this,t,e,r);case"latin1":case"binary":return w(this,t,e,r);case"base64":return A(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}function S(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function C(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var n="",a=e;a<r;++a)n+=F(t[a]);return n}function L(t,e,r){for(var i=t.slice(e,r),n="",a=0;a<i.length;a+=2)n+=String.fromCharCode(i[a]+256*i[a+1]);return n}function I(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,r,i,n,a){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<a)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function R(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,a=Math.min(t.length-r,2);n<a;++n)t[r+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function P(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,a=Math.min(t.length-r,4);n<a;++n)t[r+n]=e>>>8*(i?n:3-n)&255}function O(t,e,r,i,n,a){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,i,a){return a||O(t,0,r,4),n.write(t,e,r,i,23,4),r+4}function N(t,e,r,i,a){return a||O(t,0,r,8),n.write(t,e,r,i,52,8),r+8}l.prototype.slice=function(t,e){var r,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=l.prototype;else{var n=e-t;r=new l(n,void 0);for(var a=0;a<n;++a)r[a]=this[a+t]}return r},l.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var i=this[t],n=1,a=0;++a<e&&(n*=256);)i+=this[t+a]*n;return i},l.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var i=this[t+--e],n=1;e>0&&(n*=256);)i+=this[t+--e]*n;return i},l.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var i=this[t],n=1,a=0;++a<e&&(n*=256);)i+=this[t+a]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var i=e,n=1,a=this[t+--i];i>0&&(n*=256);)a+=this[t+--i]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*e)),a},l.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),n.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),n.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),n.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),n.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||j(this,t,e,r,Math.pow(2,8*r)-1,0);var n=1,a=0;for(this[e]=255&t;++a<r&&(n*=256);)this[e+a]=t/n&255;return e+r},l.prototype.writeUIntBE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||j(this,t,e,r,Math.pow(2,8*r)-1,0);var n=r-1,a=1;for(this[e+n]=255&t;--n>=0&&(a*=256);)this[e+n]=t/a&255;return e+r},l.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);j(this,t,e,r,n-1,-n)}var a=0,o=1,s=0;for(this[e]=255&t;++a<r&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},l.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);j(this,t,e,r,n-1,-n)}var a=r-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},l.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},l.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},l.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},l.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},l.prototype.copy=function(t,e,r,i){if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var n,a=i-r;if(this===t&&r<e&&e<i)for(n=a-1;n>=0;--n)t[n+e]=this[n+r];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+a),e);return a},l.prototype.fill=function(t,e,r,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var a;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var o=l.isBuffer(t)?t:D(new l(t,i).toString()),s=o.length;for(a=0;a<r-e;++a)this[a+e]=o[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function D(t,e){var r;e=e||1/0;for(var i=t.length,n=null,a=[],o=0;o<i;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(e-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(e-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function U(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}}).call(this,r(211))},function(t,e,r){"use strict";var i=r(57),n=function(){};t.exports=function(t){for(var e in t)"function"==typeof t[e]&&(t[e]=n);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var r=document.createElement("div");r.className="no-webgl",r.style.cursor="pointer",r.style.fontSize="24px",r.style.color=i.defaults[0],r.style.position="absolute",r.style.left=r.style.top="0px",r.style.width=r.style.height="100%",r.style["background-color"]=i.lightLine,r.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",r.appendChild(a),t.container.appendChild(r),t.container.style.background="#FFFFFF",t.container.onclick=function(){window.open("https://get.webgl.org")},!1}},,,,,,,function(t,e,r){"use strict";function i(t,e){var r,i,n=[0,0,0,0];for(r=0;r<4;++r)for(i=0;i<4;++i)n[i]+=t[4*r+i]*e[r];return n}t.exports=function(t,e){return i(t.projection,i(t.view,i(t.model,[e[0],e[1],e[2],1])))}},function(t,e,r){"use strict";var i=r(6),n=r(84).counter,a=r(624).attributes,o=r(80).idRegex,s=r(58),l={rows:{valType:"integer",min:1,role:"info",editType:"plot",description:["The number of rows in the grid. If you provide a 2D `subplots`","array or a `yaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",role:"info",editType:"plot",description:["Is the first row the top or the bottom? Note that columns","are always enumerated from left to right."].join(" ")},columns:{valType:"integer",min:1,role:"info",editType:"plot",description:["The number of columns in the grid. If you provide a 2D `subplots`","array, the length of its longest row is used as the default.","If you give an `xaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[n("xy").toString(),""],editType:"plot"},role:"info",editType:"plot",description:["Used for freeform grids, where some axes may be shared across subplots","but others are not. Each entry should be a cartesian subplot id, like","*xy* or *x3y2*, or ** to leave that cell empty. You may reuse x axes","within the same column, and y axes within the same row.","Non-cartesian subplots and traces that support `domain` can place themselves","in this grid separately using the `gridcell` attribute."].join(" ")},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},role:"info",editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an x axis id like *x*, *x2*, etc., or ** to","not put an x axis in that column. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `yaxes` is present,","will generate consecutive IDs."].join(" ")},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},role:"info",editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an y axis id like *y*, *y2*, etc., or ** to","not put a y axis in that row. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `xaxes` is present,","will generate consecutive IDs."].join(" ")},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",role:"info",editType:"plot",description:["If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`,","we can generate defaults using consecutive axis IDs, in two ways:","*coupled* gives one x axis per column and one y axis per row.","*independent* uses a new xy pair for each cell, left-to-right across each row","then iterating rows according to `roworder`."].join(" ")},xgap:{valType:"number",min:0,max:1,role:"info",editType:"plot",description:["Horizontal space between grid cells, expressed as a fraction","of the total width available to one cell. Defaults to 0.1","for coupled-axes grids and 0.2 for independent grids."].join(" ")},ygap:{valType:"number",min:0,max:1,role:"info",editType:"plot",description:["Vertical space between grid cells, expressed as a fraction","of the total height available to one cell. Defaults to 0.1","for coupled-axes grids and 0.3 for independent grids."].join(" ")},domain:a({name:"grid",editType:"plot",noGridCell:!0},{description:["The first and last cells end exactly at the domain","edges, with no grout around the edges."].join(" ")}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",role:"info",editType:"plot",description:["Sets where the x axis labels and titles go. *bottom* means","the very bottom of the grid. *bottom plot* is the lowest plot","that each x axis is used in. *top* and *top plot* are similar."].join(" ")},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",role:"info",editType:"plot",description:["Sets where the y axis labels and titles go. *left* means","the very left edge of the grid. *left plot* is the leftmost plot","that each y axis is used in. *right* and *right plot* are similar."].join(" ")},editType:"plot"};function u(t,e,r){var i=e[r+"axes"],n=Object.keys((t._splomAxes||{})[r]||{});return Array.isArray(i)?i:n.length?n:void 0}function h(t,e,r,i,n,a){var o=e(t+"gap",r),s=e("domain."+t);e(t+"side",i);for(var l=new Array(n),u=s[0],h=(s[1]-u)/(n-o),c=h*(1-o),f=0;f<n;f++){var d=u+h*f;l[a?n-1-f:f]=[d,d+c]}return l}function c(t,e,r,i,n){var a,o=new Array(r);function s(t,r){-1!==e.indexOf(r)&&void 0===i[r]?(o[t]=r,i[r]=t):o[t]=""}if(Array.isArray(t))for(a=0;a<r;a++)s(a,t[a]);else for(s(0,n),a=1;a<r;a++)s(a,n+(a+1));return o}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:function(t,e){var r=t.grid||{},n=u(e,r,"x"),a=u(e,r,"y");if(t.grid||n||a){var o,c,f=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),d=Array.isArray(n),p=Array.isArray(a),g=d&&n!==r.xaxes&&p&&a!==r.yaxes;f?(o=r.subplots.length,c=r.subplots[0].length):(p&&(o=a.length),d&&(c=n.length));var v=s.newContainer(e,"grid"),m=T("rows",o),y=T("columns",c);if(m*y>1){if(!f&&!d&&!p)"independent"===T("pattern")&&(f=!0);v._hasSubplotGrid=f;var x,b,_="top to bottom"===T("roworder"),w=f?.2:.1,A=f?.3:.1;g&&e._splomGridDflt&&(x=e._splomGridDflt.xside,b=e._splomGridDflt.yside),v._domains={x:h("x",T,w,x,y),y:h("y",T,A,b,m,_)}}else delete e.grid}function T(t,e){return i.coerce(r,v,l,t,e)}},contentDefaults:function(t,e){var r=e.grid;if(r&&r._domains){var i,n,a,o,s,l,h,f=t.grid||{},d=e._subplots,p=r._hasSubplotGrid,g=r.rows,v=r.columns,m="independent"===r.pattern,y=r._axisMap={};if(p){var x=f.subplots||[];l=r.subplots=new Array(g);var b=1;for(i=0;i<g;i++){var _=l[i]=new Array(v),w=x[i]||[];for(n=0;n<v;n++)if(m?(s=1===b?"xy":"x"+b+"y"+b,b++):s=w[n],_[n]="",-1!==d.cartesian.indexOf(s)){if(h=s.indexOf("y"),a=s.slice(0,h),o=s.slice(h),void 0!==y[a]&&y[a]!==n||void 0!==y[o]&&y[o]!==i)continue;_[n]=s,y[a]=n,y[o]=i}}}else{var A=u(e,f,"x"),T=u(e,f,"y");r.xaxes=c(A,d.xaxis,v,y,"x"),r.yaxes=c(T,d.yaxis,g,y,"y")}var M=r._anchors={},k="top to bottom"===r.roworder;for(var E in y){var S,C,L,I=E.charAt(0),j=r[I+"side"];if(j.length<8)M[E]="free";else if("x"===I){if("t"===j.charAt(0)===k?(S=0,C=1,L=g):(S=g-1,C=-1,L=-1),p){var R=y[E];for(i=S;i!==L;i+=C)if((s=l[i][R])&&(h=s.indexOf("y"),s.slice(0,h)===E)){M[E]=s.slice(h);break}}else for(i=S;i!==L;i+=C)if(o=r.yaxes[i],-1!==d.cartesian.indexOf(E+o)){M[E]=o;break}}else if("l"===j.charAt(0)?(S=0,C=1,L=v):(S=v-1,C=-1,L=-1),p){var P=y[E];for(i=S;i!==L;i+=C)if((s=l[P][i])&&(h=s.indexOf("y"),s.slice(h)===E)){M[E]=s.slice(0,h);break}}else for(i=S;i!==L;i+=C)if(a=r.xaxes[i],-1!==d.cartesian.indexOf(a+E)){M[E]=a;break}}}}}},,,,function(t,e,r){"use strict";var i=r(109).overrideAll,n=r(226),a=r(1340),o=r(212).getSubplotData,s=r(6),l=r(152);e.name="gl3d",e.attr="scene",e.idRoot="scene",e.idRegex=e.attrRegex=s.counterRegex("scene"),e.attributes=r(1384),e.layoutAttributes=r(1225),e.baseLayoutAttrOverrides=i({hoverlabel:n.hoverlabel},"plot","nested"),e.supplyLayoutDefaults=r(1385),e.plot=function(t){for(var e=t._fullLayout,r=t._fullData,i=e._subplots.gl3d,n=0;n<i.length;n++){var s=i[n],l=o(r,"gl3d",s),u=e[s],h=u.camera,c=u._scene;c||(c=new a({id:s,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:h},e),u._scene=c),c.viewInitial||(c.viewInitial={up:{x:h.up.x,y:h.up.y,z:h.up.z},eye:{x:h.eye.x,y:h.eye.y,z:h.eye.z},center:{x:h.center.x,y:h.center.y,z:h.center.z}}),c.plot(l,e,t.layout)}},e.clean=function(t,e,r,i){for(var n=i._subplots.gl3d||[],a=0;a<n.length;a++){var o=n[a];!e[o]&&i[o]._scene&&(i[o]._scene.destroy(),i._infolayer&&i._infolayer.selectAll(".annotation-"+o).remove())}},e.toSVG=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,i=e._size,n=0;n<r.length;n++){var a=e[r[n]],o=a.domain,s=a._scene,u=s.toImage("png");e._glimages.append("svg:image").attr({xmlns:l.svg,"xlink:href":u,x:i.l+i.w*o.x[0],y:i.t+i.h*(1-o.y[1]),width:i.w*(o.x[1]-o.x[0]),height:i.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}},e.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var e=t.substr(5);return"1"===e&&(e=""),"scene"+e}},e.updateFx=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,i=0;i<r.length;i++){e[r[i]]._scene.updateFx(e.dragmode,e.hovermode)}}},function(t,e){t.exports=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],h=e[8],c=e[9],f=e[10],d=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=r*s-i*o,x=r*l-n*o,b=r*u-a*o,_=i*l-n*s,w=i*u-a*s,A=n*u-a*l,T=h*g-c*p,M=h*v-f*p,k=h*m-d*p,E=c*v-f*g,S=c*m-d*g,C=f*m-d*v,L=y*C-x*S+b*E+_*k-w*M+A*T;if(!L)return null;return L=1/L,t[0]=(s*C-l*S+u*E)*L,t[1]=(n*S-i*C-a*E)*L,t[2]=(g*A-v*w+m*_)*L,t[3]=(f*w-c*A-d*_)*L,t[4]=(l*k-o*C-u*M)*L,t[5]=(r*C-n*k+a*M)*L,t[6]=(v*b-p*A-m*x)*L,t[7]=(h*A-f*b+d*x)*L,t[8]=(o*S-s*k+u*T)*L,t[9]=(i*k-r*S-a*T)*L,t[10]=(p*w-g*b+m*y)*L,t[11]=(c*b-h*w-d*y)*L,t[12]=(s*M-o*E-l*T)*L,t[13]=(r*E-i*M+n*T)*L,t[14]=(g*x-p*_-v*y)*L,t[15]=(h*_-c*x+f*y)*L,t}},function(t,e){t.exports=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],h=e[7],c=e[8],f=e[9],d=e[10],p=e[11],g=e[12],v=e[13],m=e[14],y=e[15],x=r[0],b=r[1],_=r[2],w=r[3];return t[0]=x*i+b*s+_*c+w*g,t[1]=x*n+b*l+_*f+w*v,t[2]=x*a+b*u+_*d+w*m,t[3]=x*o+b*h+_*p+w*y,x=r[4],b=r[5],_=r[6],w=r[7],t[4]=x*i+b*s+_*c+w*g,t[5]=x*n+b*l+_*f+w*v,t[6]=x*a+b*u+_*d+w*m,t[7]=x*o+b*h+_*p+w*y,x=r[8],b=r[9],_=r[10],w=r[11],t[8]=x*i+b*s+_*c+w*g,t[9]=x*n+b*l+_*f+w*v,t[10]=x*a+b*u+_*d+w*m,t[11]=x*o+b*h+_*p+w*y,x=r[12],b=r[13],_=r[14],w=r[15],t[12]=x*i+b*s+_*c+w*g,t[13]=x*n+b*l+_*f+w*v,t[14]=x*a+b*u+_*d+w*m,t[15]=x*o+b*h+_*p+w*y,t}},function(t,e,r){"use strict";t.exports=function(t,e){switch(void 0===e&&(e=0),typeof t){case"number":if(t>0)return function(t,e){var r,i;for(r=new Array(t),i=0;i<t;++i)r[i]=e;return r}(0|t,e);break;case"object":if("number"==typeof t.length)return function t(e,r,i){var n=0|e[i];if(n<=0)return[];var a,o=new Array(n);if(i===e.length-1)for(a=0;a<n;++a)o[a]=r;else for(a=0;a<n;++a)o[a]=t(e,r,i+1);return o}(t,e,0)}return[]}},function(t,e,r){"use strict";var i=r(731),n={body:"",args:[],thisVars:[],localVars:[]};function a(t){if(!t)return n;for(var e=0;e<t.args.length;++e){var r=t.args[e];t.args[e]=0===e?{name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function o(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);return new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""))(function(t){return i({args:t.args,pre:a(t.pre),body:a(t.body),post:a(t.proc),funcName:t.funcName})}(t))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in s){var r=s[t];e[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:t}),e[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:t+"eq"}),e[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:t+"s"}),e[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:t+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in l){var r=l[t];e[t]=o({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:t}),e[t+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in u){var r=u[t];e[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:t}),e[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:t+"s"}),e[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:t+"eq"}),e[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var h=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<h.length;++t){var r=h[t];e[r]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),e[r+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var c=["max","min","atan2","pow"];!function(){for(var t=0;t<c.length;++t){var r=c[t];e[r]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),e[r+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),e[r+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),e[r+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var f=["atan2","pow"];!function(){for(var t=0;t<f.length;++t){var r=f[t];e[r+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),e[r+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),e[r+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),e[r+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),e.any=i({args:["array"],pre:n,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=i({args:["array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=i({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=i({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=i({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=i({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=i({args:["array","array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},function(t,e,r){"use strict";var i=r(784),n=r(786),a=r(659);t.exports=function(t){var e,r=i(t);return r.space?((e=Array(3))[0]=a(r.values[0],0,255),e[1]=a(r.values[1],0,255),e[2]=a(r.values[2],0,255),"h"===r.space[0]&&(e=n.rgb(e)),e.push(a(r.alpha,0,1)),e):[]}},,,,,,,function(t,e,r){"use strict";(t.exports=r(691)).manager=r(772)},function(t,e,r){"use strict";var i=r(24),n=r(6),a=r(57),o=r(691),s=r(773),l=n.extendDeepAll,u=t.exports={};u.framework=function(t){var e,r,n,a,h,c=new s;function f(r,s){return s&&(h=s),i.select(i.select(h).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),e=e?l(e,r):r,n||(n=o.Axis()),a=o.adapter.plotly().convert(e),n.config(a).render(h),t.data=e.data,t.layout=e.layout,u.fillLayout(t),e}return f.isPolar=!0,f.svg=function(){return n.svg()},f.getConfig=function(){return e},f.getLiveConfig=function(){return o.adapter.plotly().convert(n.getLiveConfig(),!0)},f.getLiveScales=function(){return{t:n.angularScale(),r:n.radialScale()}},f.setUndoPoint=function(){var t,i,n=this,a=o.util.cloneJson(e);t=a,i=r,c.add({undo:function(){i&&n(i)},redo:function(){n(t)}}),r=o.util.cloneJson(a)},f.undo=function(){c.undo()},f.redo=function(){c.redo()},f},u.fillLayout=function(t){var e=i.select(t).selectAll(".plot-container"),r=e.selectAll(".svg-container"),n=t.framework&&t.framework.svg&&t.framework.svg(),o={width:800,height:600,paper_bgcolor:a.background,_container:e,_paperdiv:r,_paper:n};t._fullLayout=l(o,t.layout)}},function(t,e,r){"use strict";t.exports=function(){var t,e=[],r=-1,i=!1;function n(t,e){return t?(i=!0,t[e](),i=!1,this):this}return{add:function(t){return i||(e.splice(r+1,e.length-r),e.push(t),r=e.length-1),this},setCallback:function(e){t=e},undo:function(){var i=e[r];return i?(n(i,"undo"),r-=1,t&&t(i.undo),this):this},redo:function(){var i=e[r+1];return i?(n(i,"redo"),r+=1,t&&t(i.redo),this):this},clear:function(){e=[],r=-1},hasUndo:function(){return-1!==r},hasRedo:function(){return r<e.length-1},getCommands:function(){return e},getPreviousCommand:function(){return e[r-1]},getIndex:function(){return r}}}},,function(t,e,r){"use strict";var i=r(83),n=r(154),a=r(62),o=r(227).sorterAsc,s=r(23);e.containerArrayMatch=r(776);var l=e.isAddVal=function(t){return"add"===t||i(t)},u=e.isRemoveVal=function(t){return null===t||"remove"===t};e.applyContainerArrayChanges=function(t,e,r,i,h){var c=e.astr,f=s.getComponentMethod(c,"supplyLayoutDefaults"),d=s.getComponentMethod(c,"draw"),p=s.getComponentMethod(c,"drawOne"),g=i.replot||i.recalc||f===n||d===n,v=t.layout,m=t._fullLayout;if(r[""]){Object.keys(r).length>1&&a.warn("Full array edits are incompatible with other edits",c);var y=r[""][""];if(u(y))e.set(null);else{if(!Array.isArray(y))return a.warn("Unrecognized full array edit value",c,y),!0;e.set(y)}return!g&&(f(v,m),d(t),!0)}var x,b,_,w,A,T,M,k,E=Object.keys(r).map(Number).sort(o),S=e.get(),C=S||[],L=h(m,c).get(),I=[],j=-1,R=C.length;for(x=0;x<E.length;x++)if(w=r[_=E[x]],A=Object.keys(w),T=w[""],M=l(T),_<0||_>C.length-(M?0:1))a.warn("index out of range",c,_);else if(void 0!==T)A.length>1&&a.warn("Insertion & removal are incompatible with edits to the same index.",c,_),u(T)?I.push(_):M?("add"===T&&(T={}),C.splice(_,0,T),L&&L.splice(_,0,{})):a.warn("Unrecognized full object edit value",c,_,T),-1===j&&(j=_);else for(b=0;b<A.length;b++)k=c+"["+_+"].",h(C[_],A[b],k).set(w[A[b]]);for(x=I.length-1;x>=0;x--)C.splice(I[x],1),L&&L.splice(I[x],1);if(C.length?S||e.set(C):e.set(null),g)return!1;if(f(v,m),p!==n){var P;if(-1===j)P=E;else{for(R=Math.max(C.length,R),P=[],x=0;x<E.length&&!((_=E[x])>=j);x++)P.push(_);for(x=j;x<R;x++)P.push(x)}for(x=0;x<P.length;x++)p(t,P[x])}else d(t);return!0}},function(t,e,r){"use strict";var i=r(23);t.exports=function(t){for(var e,r,n=i.layoutArrayContainers,a=i.layoutArrayRegexes,o=t.split("[")[0],s=0;s<a.length;s++)if((r=t.match(a[s]))&&0===r.index){e=r[0];break}if(e||(e=n[n.indexOf(o)]),!e)return!1;var l=t.substr(e.length);return l?!!(r=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(r[1]),property:r[3]||""}:{array:e,index:"",property:""}}},function(t,e,r){"use strict";var i=r(12),n=r(734),a=r(23),o=r(6),s=r(107),l=r(110),u=r(57),h=l.cleanId,c=l.getFromTrace,f=a.traceIs;function d(t,e){var r=t[e],i=e.charAt(0);r&&"paper"!==r&&(t[e]=h(r,i))}function p(t){function e(e,r){var i=t[e],n=t.title&&t.title[r];i&&!n&&(t.title||(t.title={}),t.title[r]=t[e],delete t[e])}t&&("string"!=typeof t.title&&"number"!=typeof t.title||(t.title={text:t.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function g(t){if(!o.isPlainObject(t))return!1;var e=t.name;return delete t.name,delete t.showlegend,("string"==typeof e||"number"==typeof e)&&String(e)}function v(t,e,r,i){if(r&&!i)return t;if(i&&!r)return e;if(!t.trim())return e;if(!e.trim())return t;var n,a=Math.min(t.length,e.length);for(n=0;n<a&&t.charAt(n)===e.charAt(n);n++);return t.substr(0,n).trim()}function m(t){var e="middle",r="center";return"string"==typeof t&&(-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?r="left":-1!==t.indexOf("right")&&(r="right")),e+" "+r}function y(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}e.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&o.log("Clearing previous rejected promises from queue."),t._promises=[]},e.cleanLayout=function(t){var r,i;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var a=(s.subplotsRegistry.cartesian||{}).attrRegex,l=(s.subplotsRegistry.polar||{}).attrRegex,c=(s.subplotsRegistry.ternary||{}).attrRegex,f=(s.subplotsRegistry.gl3d||{}).attrRegex,g=Object.keys(t);for(r=0;r<g.length;r++){var v=g[r];if(a&&a.test(v)){var m=t[v];m.anchor&&"free"!==m.anchor&&(m.anchor=h(m.anchor)),m.overlaying&&(m.overlaying=h(m.overlaying)),m.type||(m.isdate?m.type="date":m.islog?m.type="log":!1===m.isdate&&!1===m.islog&&(m.type="linear")),"withzero"!==m.autorange&&"tozero"!==m.autorange||(m.autorange=!0,m.rangemode="tozero"),delete m.islog,delete m.isdate,delete m.categories,y(m,"domain")&&delete m.domain,void 0!==m.autotick&&(void 0===m.tickmode&&(m.tickmode=m.autotick?"auto":"linear"),delete m.autotick),p(m)}else if(l&&l.test(v)){p(t[v].radialaxis)}else if(c&&c.test(v)){var x=t[v];p(x.aaxis),p(x.baxis),p(x.caxis)}else if(f&&f.test(v)){var b=t[v],_=b.cameraposition;if(Array.isArray(_)&&4===_[0].length){var w=_[0],A=_[1],T=_[2],M=n([],w),k=[];for(i=0;i<3;++i)k[i]=A[i]+T*M[2+4*i];b.camera={eye:{x:k[0],y:k[1],z:k[2]},center:{x:A[0],y:A[1],z:A[2]},up:{x:0,y:0,z:1}},delete b.cameraposition}p(b.xaxis),p(b.yaxis),p(b.zaxis)}}var E=Array.isArray(t.annotations)?t.annotations.length:0;for(r=0;r<E;r++){var S=t.annotations[r];o.isPlainObject(S)&&(S.ref&&("paper"===S.ref?(S.xref="paper",S.yref="paper"):"data"===S.ref&&(S.xref="x",S.yref="y"),delete S.ref),d(S,"xref"),d(S,"yref"))}var C=Array.isArray(t.shapes)?t.shapes.length:0;for(r=0;r<C;r++){var L=t.shapes[r];o.isPlainObject(L)&&(d(L,"xref"),d(L,"yref"))}var I=t.legend;return I&&(I.x>3?(I.x=1.02,I.xanchor="left"):I.x<-2&&(I.x=-.02,I.xanchor="right"),I.y>3?(I.y=1.02,I.yanchor="bottom"):I.y<-2&&(I.y=-.02,I.yanchor="top")),p(t),"rotate"===t.dragmode&&(t.dragmode="orbit"),u.clean(t),t.template&&t.template.layout&&e.cleanLayout(t.template.layout),t},e.cleanData=function(t){for(var r=0;r<t.length;r++){var i,n=t[r];if("histogramy"===n.type&&"xbins"in n&&!("ybins"in n)&&(n.ybins=n.xbins,delete n.xbins),n.error_y&&"opacity"in n.error_y){var l=u.defaults,c=n.error_y.color||(f(n,"bar")?u.defaultLine:l[r%l.length]);n.error_y.color=u.addOpacity(u.rgb(c),u.opacity(c)*n.error_y.opacity),delete n.error_y.opacity}if("bardir"in n&&("h"!==n.bardir||!f(n,"bar")&&"histogram"!==n.type.substr(0,9)||(n.orientation="h",e.swapXYData(n)),delete n.bardir),"histogramy"===n.type&&e.swapXYData(n),"histogramx"!==n.type&&"histogramy"!==n.type||(n.type="histogram"),"scl"in n&&!("colorscale"in n)&&(n.colorscale=n.scl,delete n.scl),"reversescl"in n&&!("reversescale"in n)&&(n.reversescale=n.reversescl,delete n.reversescl),n.xaxis&&(n.xaxis=h(n.xaxis,"x")),n.yaxis&&(n.yaxis=h(n.yaxis,"y")),f(n,"gl3d")&&n.scene&&(n.scene=s.subplotsRegistry.gl3d.cleanId(n.scene)),!f(n,"pie-like")&&!f(n,"bar-like"))if(Array.isArray(n.textposition))for(i=0;i<n.textposition.length;i++)n.textposition[i]=m(n.textposition[i]);else n.textposition&&(n.textposition=m(n.textposition));var d=a.getModule(n);if(d&&d.colorbar){var x=d.colorbar.container,b=x?n[x]:n;b&&b.colorscale&&("YIGnBu"===b.colorscale&&(b.colorscale="YlGnBu"),"YIOrRd"===b.colorscale&&(b.colorscale="YlOrRd"))}if("surface"===n.type&&o.isPlainObject(n.contours)){var _=["x","y","z"];for(i=0;i<_.length;i++){var w=n.contours[_[i]];o.isPlainObject(w)&&(w.highlightColor&&(w.highlightcolor=w.highlightColor,delete w.highlightColor),w.highlightWidth&&(w.highlightwidth=w.highlightWidth,delete w.highlightWidth))}}if("candlestick"===n.type||"ohlc"===n.type){var A=!1!==(n.increasing||{}).showlegend,T=!1!==(n.decreasing||{}).showlegend,M=g(n.increasing),k=g(n.decreasing);if(!1!==M&&!1!==k){var E=v(M,k,A,T);E&&(n.name=E)}else!M&&!k||n.name||(n.name=M||k)}if(Array.isArray(n.transforms)){var S=n.transforms;for(i=0;i<S.length;i++){var C=S[i];if(o.isPlainObject(C))switch(C.type){case"filter":C.filtersrc&&(C.target=C.filtersrc,delete C.filtersrc),C.calendar&&(C.valuecalendar||(C.valuecalendar=C.calendar),delete C.calendar);break;case"groupby":if(C.styles=C.styles||C.style,C.styles&&!Array.isArray(C.styles)){var L=C.styles,I=Object.keys(L);C.styles=[];for(var j=0;j<I.length;j++)C.styles.push({target:I[j],value:L[I[j]]})}}}}y(n,"line")&&delete n.line,"marker"in n&&(y(n.marker,"line")&&delete n.marker.line,y(n,"marker")&&delete n.marker),u.clean(n),n.autobinx&&(delete n.autobinx,delete n.xbins),n.autobiny&&(delete n.autobiny,delete n.ybins),p(n),n.colorbar&&p(n.colorbar),n.marker&&n.marker.colorbar&&p(n.marker.colorbar),n.line&&n.line.colorbar&&p(n.line.colorbar),n.aaxis&&p(n.aaxis),n.baxis&&p(n.baxis)}},e.swapXYData=function(t){var e;if(o.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var r=t.error_y,i="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);o.swapAttrs(t,["error_?.copy_ystyle"]),i&&o.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof t.hoverinfo){var n=t.hoverinfo.split("+");for(e=0;e<n.length;e++)"x"===n[e]?n[e]="y":"y"===n[e]&&(n[e]="x");t.hoverinfo=n.join("+")}},e.coerceTraceIndices=function(t,e){if(i(e))return[e];if(!Array.isArray(e)||!e.length)return t.data.map((function(t,e){return e}));if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)o.isIndex(e[n],t.data.length)?r.push(e[n]):o.warn("trace index (",e[n],") is not a number or is out of bounds");return r}return e},e.manageArrayContainers=function(t,e,r){var n=t.obj,a=t.parts,s=a.length,l=a[s-1],u=i(l);if(u&&null===e){var h=a.slice(0,s-1).join(".");o.nestedProperty(n,h).get().splice(l,1)}else u&&void 0===t.get()?(void 0===t.get()&&(r[t.astr]=null),t.set(e)):t.set(e)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function b(t){var e=t.search(x);if(e>0)return t.substr(0,e)}e.hasParent=function(t,e){for(var r=b(e);r;){if(r in t)return!0;r=b(r)}return!1};var _=["x","y","z"];e.clearAxisTypes=function(t,e,r){for(var i=0;i<e.length;i++)for(var n=t._fullData[i],a=0;a<3;a++){var s=c(t,n,_[a]);if(s&&"log"!==s.type){var l=s._name,u=s._id.substr(1);if("scene"===u.substr(0,5)){if(void 0!==r[u])continue;l=u+"."+l}var h=l+".type";void 0===r[l]&&void 0===r[h]&&o.nestedProperty(t.layout,h).set(null)}}}},function(t,e,r){"use strict";var i=r(206);t.exports={hasLines:i.hasLines,hasMarkers:i.hasMarkers,hasText:i.hasText,isBubble:i.isBubble,attributes:r(207),supplyDefaults:r(779),crossTraceDefaults:r(735),calc:r(642).calc,crossTraceCalc:r(781),arraysToCalcdata:r(629),plot:r(695),colorbar:r(633),formatLabels:r(736),style:r(640).style,styleOnSelect:r(640).styleOnSelect,hoverPoints:r(682),selectPoints:r(697),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:r(626),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}},function(t,e,r){"use strict";var i=r(6),n=r(23),a=r(207),o=r(213),s=r(206),l=r(647),u=r(780),h=r(644),c=r(648),f=r(681),d=r(649),p=r(655);t.exports=function(t,e,r,g){function v(r,n){return i.coerce(t,e,a,r,n)}var m=l(t,e,g,v);if(m||(e.visible=!1),e.visible){var y=u(t,e,g,v),x=!y&&m<o.PTS_LINESONLY?"lines+markers":"lines";v("text"),v("hovertext"),v("mode",x),s.hasLines(e)&&(c(t,e,r,g,v),f(t,e,v),v("connectgaps"),v("line.simplify")),s.hasMarkers(e)&&h(t,e,r,g,v,{gradient:!0}),s.hasText(e)&&(v("texttemplate"),d(t,e,g,v));var b=[];(s.hasMarkers(e)||s.hasText(e))&&(v("cliponaxis"),v("marker.maxdisplayed"),b.push("points")),v("fill",y?y.fillDflt:"none"),"none"!==e.fill&&(p(t,e,r,v),s.hasLines(e)||f(t,e,v));var _=(e.line||{}).color,w=(e.marker||{}).color;"tonext"!==e.fill&&"toself"!==e.fill||b.push("fills"),v("hoveron",b.join("+")||"points"),"fills"!==e.hoveron&&v("hovertemplate");var A=n.getComponentMethod("errorbars","supplyDefaults");A(t,e,_||w||r,{axis:"y"}),A(t,e,_||w||r,{axis:"x",inherit:"y"}),i.coerceSelectionMarkerOpacity(e,v)}}},function(t,e,r){"use strict";var i=["orientation","groupnorm","stackgaps"];t.exports=function(t,e,r,n){var a=r._scatterStackOpts,o=n("stackgroup");if(o){var s=e.xaxis+e.yaxis,l=a[s];l||(l=a[s]={});var u=l[o],h=!1;u?u.traces.push(e):(u=l[o]={traceIndices:[],traces:[e]},h=!0);for(var c={orientation:e.x&&!e.y?"h":"v"},f=0;f<i.length;f++){var d=i[f],p=d+"Found";if(!u[p]){var g=void 0!==t[d],v="orientation"===d;if((g||h)&&(u[d]=n(d,c[d]),v&&(u.fillDflt="h"===u[d]?"tonextx":"tonexty"),g&&(u[p]=!0,!h&&(delete u.traces[0][d],v))))for(var m=0;m<u.traces.length-1;m++){var y=u.traces[m];y._input.fill!==y.fill&&(y.fill=u.fillDflt)}}}return u}}},function(t,e,r){"use strict";var i=r(642);function n(t,e,r,i,n,a,o){n[i]=!0;var s={i:null,gap:!0,s:0};if(s[o]=r,t.splice(e,0,s),e&&r===t[e-1][o]){var l=t[e-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else a&&(s.s=function(t,e,r,i){var n=t[e-1],a=t[e+1];return a?n?n.s+(a.s-n.s)*(r-n[i])/(a[i]-n[i]):a.s:n.s}(t,e,r,o));e||(t[0].t=t[1].t,t[0].trace=t[1].trace,delete t[1].t,delete t[1].trace)}t.exports=function(t,e){var r=e.xaxis,a=e.yaxis,o=r._id+a._id,s=t._fullLayout._scatterStackOpts[o];if(s){var l,u,h,c,f,d,p,g,v,m,y,x,b,_,w,A=t.calcdata;for(var T in s){var M=(m=s[T]).traceIndices;if(M.length){for(y="interpolate"===m.stackgaps,x=m.groupnorm,"v"===m.orientation?(b="x",_="y"):(b="y",_="x"),w=new Array(M.length),l=0;l<w.length;l++)w[l]=!1;d=A[M[0]];var k=new Array(d.length);for(l=0;l<d.length;l++)k[l]=d[l][b];for(l=1;l<M.length;l++){for(f=A[M[l]],u=h=0;u<f.length;u++){for(p=f[u][b];p>k[h]&&h<k.length;h++)n(f,u,k[h],l,w,y,b),u++;if(p!==k[h]){for(c=0;c<l;c++)n(A[M[c]],h,p,c,w,y,b);k.splice(h,0,p)}h++}for(;h<k.length;h++)n(f,u,k[h],l,w,y,b),u++}var E=k.length;for(u=0;u<d.length;u++){for(g=d[u][_]=d[u].s,l=1;l<M.length;l++)(f=A[M[l]])[0].trace._rawLength=f[0].trace._length,f[0].trace._length=E,g+=f[u].s,f[u][_]=g;if(x)for(v=("fraction"===x?g:g/100)||1,l=0;l<M.length;l++){var S=A[M[l]][u];S[_]/=v,S.sNorm=S.s/v}}for(l=0;l<M.length;l++){var C=(f=A[M[l]])[0].trace,L=i.calcMarkerSize(C,C._rawLength),I=Array.isArray(L);if(L&&w[l]||I){var j=L;for(L=new Array(E),u=0;u<E;u++)L[u]=f[u].gap?0:I?j[f[u].i]:j}var R=new Array(E),P=new Array(E);for(u=0;u<E;u++)R[u]=f[u].x,P[u]=f[u].y;i.calcAxisExpansion(t,C,r,a,R,P,L),f[0].t.orientation=m.orientation}}}}}},,function(t,e){t.exports=function(t,e){e||(e=[0,""]),t=String(t);var r=parseFloat(t,10);return e[0]=r,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},function(t,e,r){"use strict";(function(e){var i=r(785),n=r(743),a=r(732);t.exports=function(t){var r,s,l=[],u=1;if("string"==typeof t)if(i[t])l=i[t].slice(),s="rgb";else if("transparent"===t)u=0,s="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var h=(d=t.slice(1)).length;u=1,h<=4?(l=[parseInt(d[0]+d[0],16),parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16)],4===h&&(u=parseInt(d[3]+d[3],16)/255)):(l=[parseInt(d[0]+d[1],16),parseInt(d[2]+d[3],16),parseInt(d[4]+d[5],16)],8===h&&(u=parseInt(d[6]+d[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),s="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var c=r[1],f="rgb"===c,d=c.replace(/a$/,"");s=d;h="cmyk"===d?4:"gray"===d?1:3;l=r[2].trim().split(/\s*,\s*/).map((function(t,e){if(/%$/.test(t))return e===h?parseFloat(t)/100:"rgb"===d?255*parseFloat(t)/100:parseFloat(t);if("h"===d[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==o[t])return o[t]}return parseFloat(t)})),c===d&&l.push(1),u=f||void 0===l[h]?1:l[h],l=l.slice(0,h)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(l=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),s=t.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(t))if(n(t)){var p=a(t.r,t.red,t.R,null);null!==p?(s="rgb",l=[p,a(t.g,t.green,t.G),a(t.b,t.blue,t.B)]):(s="hsl",l=[a(t.h,t.hue,t.H),a(t.s,t.saturation,t.S),a(t.l,t.lightness,t.L,t.b,t.brightness)]),u=a(t.a,t.alpha,t.opacity,1),null!=t.opacity&&(u/=100)}else(Array.isArray(t)||e.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t))&&(l=[t[0],t[1],t[2]],s="rgb",u=4===t.length?t[3]:1);else s="rgb",l=[t>>>16,(65280&t)>>>8,255&t];return{space:s,values:l,alpha:u}};var o={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,r(211))},function(t,e,r){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,r){"use strict";var i=r(787);t.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,r,i,n,a,o=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[a=255*l,a,a];e=2*l-(r=l<.5?l*(1+s):l+s-l*s),n=[0,0,0];for(var u=0;u<3;u++)(i=o+1/3*-(u-1))<0?i++:i>1&&i--,a=6*i<1?e+6*(r-e)*i:2*i<1?r:3*i<2?e+(r-e)*(2/3-i)*6:e,n[u]=255*a;return n}},i.hsl=function(t){var e,r,i=t[0]/255,n=t[1]/255,a=t[2]/255,o=Math.min(i,n,a),s=Math.max(i,n,a),l=s-o;return s===o?e=0:i===s?e=(n-a)/l:n===s?e=2+(a-i)/l:a===s&&(e=4+(i-n)/l),(e=Math.min(60*e,360))<0&&(e+=360),r=(o+s)/2,[e,100*(s===o?0:r<=.5?l/(s+o):l/(2-s-o)),100*r]}},function(t,e,r){"use strict";t.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},,,,,,function(t,e,r){"use strict";t.exports=function(t,e,r){var i=t+e,n=i-t,a=e-n,o=t-(i-n);if(r)return r[0]=o+a,r[1]=i,r;return[o+a,i]}},function(t,e,r){"use strict";t.exports=function(t,e){var r=0|t.length,i=0|e.length;if(1===r&&1===i)return function(t,e){var r=t+e,i=r-t,n=t-(r-i)+(e-i);if(n)return[n,r];return[r]}(t[0],-e[0]);var n,a,o=new Array(r+i),s=0,l=0,u=0,h=Math.abs,c=t[l],f=h(c),d=-e[u],p=h(d);f<p?(a=c,(l+=1)<r&&(c=t[l],f=h(c))):(a=d,(u+=1)<i&&(d=-e[u],p=h(d)));l<r&&f<p||u>=i?(n=c,(l+=1)<r&&(c=t[l],f=h(c))):(n=d,(u+=1)<i&&(d=-e[u],p=h(d)));var g,v,m=n+a,y=m-n,x=a-y,b=x,_=m;for(;l<r&&u<i;)f<p?(n=c,(l+=1)<r&&(c=t[l],f=h(c))):(n=d,(u+=1)<i&&(d=-e[u],p=h(d))),(x=(a=b)-(y=(m=n+a)-n))&&(o[s++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g;for(;l<r;)(x=(a=b)-(y=(m=(n=c)+a)-n))&&(o[s++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(l+=1)<r&&(c=t[l]);for(;u<i;)(x=(a=b)-(y=(m=(n=d)+a)-n))&&(o[s++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(u+=1)<i&&(d=-e[u]);b&&(o[s++]=b);_&&(o[s++]=_);s||(o[s++]=0);return o.length=s,o}},function(t,e,r){"use strict";t.exports={init:function(t){var e=n.nextPow2(t);o.length<e&&(i.free(o),o=i.mallocInt32(e));s.length<e&&(i.free(s),s=i.mallocInt32(e));l.length<e&&(i.free(l),l=i.mallocInt32(e));u.length<e&&(i.free(u),u=i.mallocInt32(e));h.length<e&&(i.free(h),h=i.mallocInt32(e));c.length<e&&(i.free(c),c=i.mallocInt32(e));var r=8*e;f.length<r&&(i.free(f),f=i.mallocDouble(r))},sweepBipartite:function(t,e,r,i,n,h,c,g,v,m){for(var y=0,x=2*t,b=t-1,_=x-1,w=r;w<i;++w){var A=h[w],T=x*w;f[y++]=n[T+b],f[y++]=-(A+1),f[y++]=n[T+_],f[y++]=A}for(w=c;w<g;++w){A=m[w]+(1<<28);var M=x*w;f[y++]=v[M+b],f[y++]=-A,f[y++]=v[M+_],f[y++]=A}var k=y>>>1;a(f,k);var E=0,S=0;for(w=0;w<k;++w){var C=0|f[2*w+1];if(C>=1<<28)d(l,u,S--,C=C-(1<<28)|0);else if(C>=0)d(o,s,E--,C);else if(C<=-(1<<28)){C=-C-(1<<28)|0;for(var L=0;L<E;++L){if(void 0!==(I=e(o[L],C)))return I}p(l,u,S++,C)}else{C=-C-1|0;for(L=0;L<S;++L){var I;if(void 0!==(I=e(C,l[L])))return I}p(o,s,E++,C)}}},sweepComplete:function(t,e,r,i,n,g,v,m,y,x){for(var b=0,_=2*t,w=t-1,A=_-1,T=r;T<i;++T){var M=g[T]+1<<1,k=_*T;f[b++]=n[k+w],f[b++]=-M,f[b++]=n[k+A],f[b++]=M}for(T=v;T<m;++T){M=x[T]+1<<1;var E=_*T;f[b++]=y[E+w],f[b++]=1|-M,f[b++]=y[E+A],f[b++]=1|M}var S=b>>>1;a(f,S);var C=0,L=0,I=0;for(T=0;T<S;++T){var j=0|f[2*T+1],R=1&j;if(T<S-1&&j>>1==f[2*T+3]>>1&&(R=2,T+=1),j<0){for(var P=-(j>>1)-1,O=0;O<I;++O){if(void 0!==(z=e(h[O],P)))return z}if(0!==R)for(O=0;O<C;++O){if(void 0!==(z=e(o[O],P)))return z}if(1!==R)for(O=0;O<L;++O){var z;if(void 0!==(z=e(l[O],P)))return z}0===R?p(o,s,C++,P):1===R?p(l,u,L++,P):2===R&&p(h,c,I++,P)}else{P=(j>>1)-1;0===R?d(o,s,C--,P):1===R?d(l,u,L--,P):2===R&&d(h,c,I--,P)}}},scanBipartite:function(t,e,r,i,n,l,u,h,c,g,v,m){var y=0,x=2*t,b=e,_=e+t,w=1,A=1;i?A=1<<28:w=1<<28;for(var T=n;T<l;++T){var M=T+w,k=x*T;f[y++]=u[k+b],f[y++]=-M,f[y++]=u[k+_],f[y++]=M}for(T=c;T<g;++T){M=T+A;var E=x*T;f[y++]=v[E+b],f[y++]=-M}var S=y>>>1;a(f,S);var C=0;for(T=0;T<S;++T){var L=0|f[2*T+1];if(L<0){var I=!1;if((M=-L)>=1<<28?(I=!i,M-=1<<28):(I=!!i,M-=1),I)p(o,s,C++,M);else{var j=m[M],R=x*M,P=v[R+e+1],O=v[R+e+1+t];t:for(var z=0;z<C;++z){var N=o[z],B=x*N;if(!(O<u[B+e+1]||u[B+e+1+t]<P)){for(var F=e+2;F<t;++F)if(v[R+F+t]<u[B+F]||u[B+F+t]<v[R+F])continue t;var D,U=h[N];if(void 0!==(D=i?r(j,U):r(U,j)))return D}}}}else d(o,s,C--,L-w)}},scanComplete:function(t,e,r,i,n,s,l,u,h,c,d){for(var p=0,g=2*t,v=e,m=e+t,y=i;y<n;++y){var x=y+(1<<28),b=g*y;f[p++]=s[b+v],f[p++]=-x,f[p++]=s[b+m],f[p++]=x}for(y=u;y<h;++y){x=y+1;var _=g*y;f[p++]=c[_+v],f[p++]=-x}var w=p>>>1;a(f,w);var A=0;for(y=0;y<w;++y){var T=0|f[2*y+1];if(T<0){if((x=-T)>=1<<28)o[A++]=x-(1<<28);else{var M=d[x-=1],k=g*x,E=c[k+e+1],S=c[k+e+1+t];t:for(var C=0;C<A;++C){var L=o[C],I=l[L];if(I===M)break;var j=g*L;if(!(S<s[j+e+1]||s[j+e+1+t]<E)){for(var R=e+2;R<t;++R)if(c[k+R+t]<s[j+R]||s[j+R+t]<c[k+R])continue t;var P=r(I,M);if(void 0!==P)return P}}}}else{for(x=T-(1<<28),C=A-1;C>=0;--C)if(o[C]===x){for(R=C+1;R<A;++R)o[R-1]=o[R];break}--A}}}};var i=r(625),n=r(643),a=r(963),o=i.mallocInt32(1024),s=i.mallocInt32(1024),l=i.mallocInt32(1024),u=i.mallocInt32(1024),h=i.mallocInt32(1024),c=i.mallocInt32(1024),f=i.mallocDouble(8192);function d(t,e,r,i){var n=e[i],a=t[r-1];t[n]=a,e[a]=n}function p(t,e,r,i){t[r]=i,e[i]=r}},function(t,e,r){"use strict";t.exports=function(t,e){var r="abcdef".split("").concat(e),i=[];t.indexOf("lo")>=0&&i.push("lo=e[k+n]");t.indexOf("hi")>=0&&i.push("hi=e[k+o]");return r.push("for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m".replace("_",i.join()).replace("$",t)),Function.apply(void 0,r)}},function(t,e,r){"use strict";r(684);t.exports=function(t){return t&&"object"==typeof t&&Boolean(t.words)}},function(t,e,r){"use strict";var i=r(684),n=r(727);t.exports=function(t){var e=n.exponent(t);return e<52?new i(t):new i(t*Math.pow(2,52-e)).ushln(e-52)}},function(t,e,r){"use strict";var i=r(666);t.exports=function(t,e){return i(t[0].mul(e[1]),t[1].mul(e[0]))}},function(t,e,r){"use strict";var i=r(666);t.exports=function(t,e){return i(t[0].mul(e[0]),t[1].mul(e[1]))}},function(t,e,r){"use strict";var i=r(666);t.exports=function(t,e){return i(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))}},function(t,e,r){"use strict";t.exports=function(t,e){var r=t.length;if("number"!=typeof e){e=0;for(var n=0;n<r;++n){var a=t[n];e=Math.max(e,a[0],a[1])}e=1+(0|e)}e|=0;var o=new Array(e);for(n=0;n<e;++n)o[n]=[];for(n=0;n<r;++n){a=t[n];o[a[0]].push(a[1]),o[a[1]].push(a[0])}for(var s=0;s<e;++s)i(o[s],(function(t,e){return t-e}));return o};var i=r(699)},function(t,e,r){"use strict";t.exports=function(t,e){for(var r={},i=0;i<t.length;++i)for(var n=t[i].name.split("."),a=r,o=0;o<n.length;++o){var s=n[o].split("[");if(s.length>1){s[0]in a||(a[s[0]]=[]),a=a[s[0]];for(var l=1;l<s.length;++l){var u=parseInt(s[l]);l<s.length-1||o<n.length-1?(u in a||(l<s.length-1?a[u]=[]:a[u]={}),a=a[u]):a[u]=e?i:t[i].type}}else o<n.length-1?(s[0]in a||(a[s[0]]={}),a=a[s[0]]):a[s[0]]=e?i:t[i].type}return r}},function(t,e){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},function(t,e){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},function(t,e,r){"use strict";var i=r(57),n=r(111),a=r(150).hovertemplateAttrs,o=r(59),s=r(32).extendFlat,l=r(109).overrideAll;function u(t){return{valType:"boolean",role:"info",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",t,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}function h(t){return{show:{valType:"boolean",role:"info",dflt:!1,description:["Determines whether or not contour lines about the",t,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,role:"style",editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,role:"style",editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,role:"style",editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:u("x"),y:u("y"),z:u("z")},color:{valType:"color",role:"style",dflt:i.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",role:"info",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",role:"style",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",role:"info",dflt:!0,description:["Determines whether or not contour lines about the",t,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",role:"style",dflt:i.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",role:"style",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}var c=t.exports=l(s({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",role:"info",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:a(),connectgaps:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},n("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:h("x"),y:h("y"),z:h("z")},hidesurface:{valType:"boolean",role:"info",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",role:"style",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",role:"style",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",role:"style",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",role:"style",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",role:"style",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",role:"style",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",role:"style",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",role:"style",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",role:"style",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",role:"style",editType:"calc",description:["Sets the opacityscale."," The opacityscale must be an array containing"," arrays mapping a normalized value to an opacity value."," At minimum, a mapping for the lowest (0) and highest (1)"," values are required. For example,"," `[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have"," higher opacity values and those in the middle would be more transparent"," Alternatively, `opacityscale` may be a palette name string"," of the following list: 'min', 'max', 'extremes' and 'uniform'."," The default is 'uniform'."].join("")},_deprecated:{zauto:s({},n.zauto,{description:"Obsolete. Use `cauto` instead."}),zmin:s({},n.zmin,{description:"Obsolete. Use `cmin` instead."}),zmax:s({},n.zmax,{description:"Obsolete. Use `cmax` instead."})},hoverinfo:s({},o.hoverinfo),showlegend:s({},o.showlegend,{dflt:!1})}),"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes",c.transforms=void 0},,,,function(t,e,r){"use strict";e.version=r(708).version,r(811).polyfill(),r(812),r(813)();for(var i=r(23),n=e.register=i.register,a=r(814),o=Object.keys(a),s=0;s<o.length;s++){var l=o[s];"_"!==l.charAt(0)&&(e[l]=a[l]),n({moduleType:"apiMethod",name:l,fn:a[l]})}n(r(778)),n([r(818),r(623),r(819),r(825),r(829),r(833),r(837),r(841),r(844),r(849),r(755),r(853),r(208),r(858)]),n([r(861),r(862)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(n(window.PlotlyLocales),delete window.PlotlyLocales),e.Icons=r(1032),e.Plots=r(107),e.Fx=r(623),e.Snapshot=r(863),e.PlotSchema=r(113),e.Queue=r(694),e.d3=r(24)},function(t,e,r){(function(e,r){var i;i=function(){"use strict";function t(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,a=void 0,o=void 0,s=function(t,e){p[n]=t,p[n+1]=e,2===(n+=2)&&(o?o(g):b())},l="undefined"!=typeof window?window:void 0,u=l||{},h=u.MutationObserver||u.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(g,1)}}var p=new Array(1e3);function g(){for(var t=0;t<n;t+=2)(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0;n=0}var v,m,y,x,b=void 0;function _(t,e){var r=this,i=new this.constructor(T);void 0===i[A]&&P(i);var n=r._state;if(n){var a=arguments[n-1];s((function(){return j(n,i,a,r._result)}))}else L(r,i,t,e);return i}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(T);return k(e,t),e}c?b=function(){return e.nextTick(g)}:h?(m=0,y=new h(g),x=document.createTextNode(""),y.observe(x,{characterData:!0}),b=function(){x.data=m=++m%2}):f?((v=new MessageChannel).port1.onmessage=g,b=function(){return v.port2.postMessage(0)}):b=void 0===l?function(){try{var t=Function("return this")().require("vertx");return void 0!==(a=t.runOnLoop||t.runOnContext)?function(){a(g)}:d()}catch(t){return d()}}():d();var A=Math.random().toString(36).substring(2);function T(){}function M(e,r,i){r.constructor===e.constructor&&i===_&&r.constructor.resolve===w?function(t,e){1===e._state?S(t,e._result):2===e._state?C(t,e._result):L(e,void 0,(function(e){return k(t,e)}),(function(e){return C(t,e)}))}(e,r):void 0===i?S(e,r):t(i)?function(t,e,r){s((function(t){var i=!1,n=function(t,e,r,i){try{t.call(e,r,i)}catch(t){return t}}(r,e,(function(r){i||(i=!0,e!==r?k(t,r):S(t,r))}),(function(e){i||(i=!0,C(t,e))}),t._label);!i&&n&&(i=!0,C(t,n))}),t)}(e,r,i):S(e,r)}function k(t,e){if(t===e)C(t,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof(i=e),null===i||"object"!==n&&"function"!==n)S(t,e);else{var r=void 0;try{r=e.then}catch(e){return void C(t,e)}M(t,e,r)}var i,n}function E(t){t._onerror&&t._onerror(t._result),I(t)}function S(t,e){void 0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&s(I,t))}function C(t,e){void 0===t._state&&(t._state=2,t._result=e,s(E,t))}function L(t,e,r,i){var n=t._subscribers,a=n.length;t._onerror=null,n[a]=e,n[a+1]=r,n[a+2]=i,0===a&&t._state&&s(I,t)}function I(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var i=void 0,n=void 0,a=t._result,o=0;o<e.length;o+=3)i=e[o],n=e[o+r],i?j(r,i,n,a):n(a);t._subscribers.length=0}}function j(e,r,i,n){var a=t(i),o=void 0,s=void 0,l=!0;if(a){try{o=i(n)}catch(t){l=!1,s=t}if(r===o)return void C(r,new TypeError("A promises callback cannot return that same promise."))}else o=n;void 0!==r._state||(a&&l?k(r,o):!1===l?C(r,s):1===e?S(r,o):2===e&&C(r,o))}var R=0;function P(t){t[A]=R++,t._state=void 0,t._result=void 0,t._subscribers=[]}var O=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(T),this.promise[A]||P(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):C(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;void 0===this._state&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,i=r.resolve;if(i===w){var n=void 0,a=void 0,o=!1;try{n=t.then}catch(t){o=!0,a=t}if(n===_&&void 0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof n)this._remaining--,this._result[e]=t;else if(r===z){var s=new r(T);o?C(s,a):M(s,t,n),this._willSettleAt(s,e)}else this._willSettleAt(new r((function(e){return e(t)})),e)}else this._willSettleAt(i(t),e)},t.prototype._settledAt=function(t,e,r){var i=this.promise;void 0===i._state&&(this._remaining--,2===t?C(i,r):this._result[e]=r),0===this._remaining&&S(i,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;L(t,void 0,(function(t){return r._settledAt(1,e,t)}),(function(t){return r._settledAt(2,e,t)}))},t}(),z=function(){function e(t){this[A]=R++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){k(t,e)}),(function(e){C(t,e)}))}catch(e){C(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e}();return z.prototype.then=_,z.all=function(t){return new O(this,t).promise},z.race=function(t){var e=this;return i(t)?new e((function(r,i){for(var n=t.length,a=0;a<n;a++)e.resolve(t[a]).then(r,i)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},z.resolve=w,z.reject=function(t){var e=new this(T);return C(e,t),e},z._setScheduler=function(t){o=t},z._setAsap=function(t){s=t},z._asap=s,z.polyfill=function(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=z},z.Promise=z,z},t.exports=i()}).call(this,r(664),r(211))},function(t,e,r){"use strict";var i=r(6),n={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var a in n){var o=a.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");i.addStyleRule(o,n[a])}},function(t,e,r){"use strict";t.exports=function(){"undefined"!=typeof MathJax&&("local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()))}},function(t,e,r){"use strict";var i=r(690);e.plot=i.plot,e.newPlot=i.newPlot,e.restyle=i.restyle,e.relayout=i.relayout,e.redraw=i.redraw,e.update=i.update,e._guiRestyle=i._guiRestyle,e._guiRelayout=i._guiRelayout,e._guiUpdate=i._guiUpdate,e._storeDirectGUIEdit=i._storeDirectGUIEdit,e.react=i.react,e.extendTraces=i.extendTraces,e.prependTraces=i.prependTraces,e.addTraces=i.addTraces,e.deleteTraces=i.deleteTraces,e.moveTraces=i.moveTraces,e.purge=i.purge,e.addFrames=i.addFrames,e.deleteFrames=i.deleteFrames,e.animate=i.animate,e.setPlotConfig=i.setPlotConfig,e.toImage=r(709),e.validate=r(815),e.downloadImage=r(710);var n=r(817);e.makeTemplate=n.makeTemplate,e.validateTemplate=n.validateTemplate},function(t,e,r){"use strict";var i=r(6),n=r(107),a=r(113),o=r(153).dfltConfig,s=i.isPlainObject,l=Array.isArray,u=i.isArrayOrTypedArray;function h(t,e,r,n,a,o){o=o||[];for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];if("transforms"!==d){var m=o.slice();m.push(d);var y=t[d],x=e[d],b=v(r,d),_=(b||{}).valType,w="info_array"===_,A="colorscale"===_,T=(b||{}).items;if(g(r,d))if(s(y)&&s(x)&&"any"!==_)h(y,x,b,n,a,m);else if(w&&l(y)){y.length>x.length&&n.push(p("unused",a,m.concat(x.length)));var M,k,E,S,C,L=x.length,I=Array.isArray(T);if(I&&(L=Math.min(L,T.length)),2===b.dimensions)for(k=0;k<L;k++)if(l(y[k])){y[k].length>x[k].length&&n.push(p("unused",a,m.concat(k,x[k].length)));var j=x[k].length;for(M=0;M<(I?Math.min(j,T[k].length):j);M++)E=I?T[k][M]:T,S=y[k][M],C=x[k][M],i.validate(S,E)?C!==S&&C!==+S&&n.push(p("dynamic",a,m.concat(k,M),S,C)):n.push(p("value",a,m.concat(k,M),S))}else n.push(p("array",a,m.concat(k),y[k]));else for(k=0;k<L;k++)E=I?T[k]:T,S=y[k],C=x[k],i.validate(S,E)?C!==S&&C!==+S&&n.push(p("dynamic",a,m.concat(k),S,C)):n.push(p("value",a,m.concat(k),S))}else if(b.items&&!w&&l(y)){var R,P,O=T[Object.keys(T)[0]],z=[];for(R=0;R<x.length;R++){var N=x[R]._index||R;if((P=m.slice()).push(N),s(y[N])&&s(x[R])){z.push(N);var B=y[N],F=x[R];s(B)&&!1!==B.visible&&!1===F.visible?n.push(p("invisible",a,P)):h(B,F,O,n,a,P)}}for(R=0;R<y.length;R++)(P=m.slice()).push(R),s(y[R])?-1===z.indexOf(R)&&n.push(p("unused",a,P)):n.push(p("object",a,P,y[R]))}else!s(y)&&s(x)?n.push(p("object",a,m,y)):u(y)||!u(x)||w||A?d in e?i.validate(y,b)?"enumerated"===b.valType&&(b.coerceNumber&&y!==+x||y!==x)&&n.push(p("dynamic",a,m,y,x)):n.push(p("value",a,m,y)):n.push(p("unused",a,m,y)):n.push(p("array",a,m,y));else n.push(p("schema",a,m))}}return n}function c(t,e){for(var r=t.layout.layoutAttributes,n=0;n<e.length;n++){var a=e[n],o=t.traces[a.type],s=o.layoutAttributes;s&&(a.subplot?i.extendFlat(r[o.attributes.subplot.dflt],s):i.extendFlat(r,s))}return r}t.exports=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});var r,u,f=a.get(),d=[],g={_context:i.extendFlat({},o)};l(t)?(g.data=i.extendDeep([],t),r=t):(g.data=[],r=[],d.push(p("array","data"))),s(e)?(g.layout=i.extendDeep({},e),u=e):(g.layout={},u={},arguments.length>1&&d.push(p("object","layout"))),n.supplyDefaults(g);for(var v=g._fullData,m=r.length,y=0;y<m;y++){var x=r[y],b=["data",y];if(s(x)){var _=v[y],w=_.type,A=f.traces[w].attributes;A.type={valType:"enumerated",values:[w]},!1===_.visible&&!1!==x.visible&&d.push(p("invisible",b)),h(x,_,A,d,b);var T=x.transforms,M=_.transforms;if(T){l(T)||d.push(p("array",b,["transforms"])),b.push("transforms");for(var k=0;k<T.length;k++){var E=["transforms",k],S=T[k].type;if(s(T[k])){var C=f.transforms[S]?f.transforms[S].attributes:{};C.type={valType:"enumerated",values:Object.keys(f.transforms)},h(T[k],M[k],C,d,b,E)}else d.push(p("object",b,E))}}}else d.push(p("object",b))}var L=g._fullLayout,I=c(f,v);return h(u,L,I,d,"layout"),0===d.length?void 0:d};var f={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":d(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":d(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return d(t)+"key "+e+" is not part of the schema"},unused:function(t,e,r){var i=s(r)?"container":"key";return d(t)+i+" "+e+" did not get coerced"},dynamic:function(t,e,r,i){return[d(t)+"key",e,"(set to '"+r+"')","got reset to","'"+i+"'","during defaults."].join(" ")},invisible:function(t,e){return(e?d(t)+"item "+e:"Trace "+t[1])+" got defaulted to be not visible"},value:function(t,e,r){return[d(t)+"key "+e,"is set to an invalid value ("+r+")"].join(" ")}};function d(t){return l(t)?"In data trace "+t[1]+", ":"In "+t+", "}function p(t,e,r,n,a){var o,s;r=r||"",l(e)?(o=e[0],s=e[1]):(o=e,s=null);var u=function(t){if(!l(t))return String(t);for(var e="",r=0;r<t.length;r++){var i=t[r];"number"==typeof i?e=e.substr(0,e.length-1)+"["+i+"]":e+=i,r<t.length-1&&(e+=".")}return e}(r),h=f[t](e,u,n,a);return i.log(h),{code:t,container:o,trace:s,path:r,astr:u,msg:h}}function g(t,e){var r=y(e),i=r.keyMinusId,n=r.id;return!!(i in t&&t[i]._isSubplotObj&&n)||e in t}function v(t,e){return e in t?t[e]:t[y(e).keyMinusId]}var m=i.counterRegex("([a-z]+)");function y(t){var e=t.match(m);return{keyMinusId:e&&e[1],id:e&&e[2]}}},function(t,e,r){"use strict";var i=r(6),n=r(632);t.exports=function(t,e,r){var a=document.createElement("a"),o="download"in a;return new Promise((function(s,l){var u,h;if(i.isIE9orBelow()&&l(new Error("IE < 10 unsupported")),i.isSafari()){var c="svg"===r?",":";base64,";return n.octetStream(c+encodeURIComponent(t)),s(e)}return i.isIE()?(u=n.createBlob(t,"svg"),window.navigator.msSaveBlob(u,e),u=null,s(e)):o?(u=n.createBlob(t,r),h=n.createObjectURL(u),a.href=h,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),n.revokeObjectURL(h),u=null,s(e)):void l(new Error("download error"))}))}},function(t,e,r){"use strict";var i=r(6),n=i.isPlainObject,a=r(113),o=r(107),s=r(59),l=r(58),u=r(153).dfltConfig;function h(t,e){t=i.extendDeep({},t);var r,a,o=Object.keys(t).sort();function s(e,r,i){if(n(r)&&n(e))h(e,r);else if(Array.isArray(r)&&Array.isArray(e)){var o=l.arrayTemplater({_template:t},i);for(a=0;a<r.length;a++){var s=r[a],u=o.newItem(s)._template;u&&h(u,s)}var c=o.defaultItems();for(a=0;a<c.length;a++)r.push(c[a]._template);for(a=0;a<r.length;a++)delete r[a].templateitemname}}for(r=0;r<o.length;r++){var u=o[r],f=t[u];if(u in e?s(f,e[u],u):e[u]=f,c(u)===u)for(var d in e){var p=c(d);d===p||p!==u||d in t||s(f,e[d],u)}}}function c(t){return t.replace(/[0-9]+$/,"")}function f(t,e,r,a,o){var s=o&&r(o);for(var u in t){var h=t[u],d=g(t,u,a),p=g(t,u,o),v=r(p);if(!v){var m=c(u);m!==u&&(v=r(p=g(t,m,o)))}if((!s||s!==v)&&!(!v||v._noTemplating||"data_array"===v.valType||v.arrayOk&&Array.isArray(h)))if(!v.valType&&n(h))f(h,e,r,d,p);else if(v._isLinkedToArray&&Array.isArray(h))for(var y=!1,x=0,b={},_=0;_<h.length;_++){var w=h[_];if(n(w)){var A=w.name;if(A)b[A]||(f(w,e,r,g(h,x,d),g(h,x,p)),x++,b[A]=1);else if(!y){var T=g(t,l.arrayDefaultKey(u),a),M=g(h,x,d);f(w,e,r,M,g(h,x,p));var k=i.nestedProperty(e,M);i.nestedProperty(e,T).set(k.get()),k.set(null),y=!0}}}else{i.nestedProperty(e,d).set(h)}}}function d(t,e){return a.getLayoutValObject(t,i.nestedProperty({},e).parts)}function p(t,e){return a.getTraceValObject(t,i.nestedProperty({},e).parts)}function g(t,e,r){return r?Array.isArray(t)?r+"["+e+"]":r+"."+e:e}function v(t){for(var e=0;e<t.length;e++)if(n(t[e]))return!0}function m(t){var e;switch(t.code){case"data":e="The template has no key data.";break;case"layout":e="The template has no key layout.";break;case"missing":e=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+t.index+", of type "+t.traceType+".";break;case"unused":e=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case"reused":e="Some of the templates of type "+t.traceType+" were used more than once. The template has "+t.templateCount+" traces, the data has "+t.dataCount+" of this type."}return t.msg=e,t}e.makeTemplate=function(t){t=i.isPlainObject(t)?t:i.getGraphDiv(t),t=i.extendDeep({_context:u},{data:t.data,layout:t.layout}),o.supplyDefaults(t);var e=t.data||[],r=t.layout||{};r._basePlotModules=t._fullLayout._basePlotModules,r._modules=t._fullLayout._modules;var a={data:{},layout:{}};e.forEach((function(t){var e={};f(t,e,p.bind(null,t));var r=i.coerce(t,{},s,"type"),n=a.data[r];n||(n=a.data[r]=[]),n.push(e)})),f(r,a.layout,d.bind(null,r)),delete a.layout.template;var l=r.template;if(n(l)){var c,g,v,m,y,x,b=l.layout;n(b)&&h(b,a.layout);var _=l.data;if(n(_)){for(g in a.data)if(v=_[g],Array.isArray(v)){for(x=(y=a.data[g]).length,m=v.length,c=0;c<x;c++)h(v[c%m],y[c]);for(c=x;c<m;c++)y.push(i.extendDeep({},v[c]))}for(g in _)g in a.data||(a.data[g]=i.extendDeep([],_[g]))}}return a},e.validateTemplate=function(t,e){var r=i.extendDeep({},{_context:u,data:t.data,layout:t.layout}),a=r.layout||{};n(e)||(e=a.template||{});var s=e.layout,l=e.data,h=[];r.layout=a,r.layout.template=e,o.supplyDefaults(r);var f=r._fullLayout,d=r._fullData,p={};if(n(s)?(!function t(e,r){for(var i in e)if("_"!==i.charAt(0)&&n(e[i])){var a,o=c(i),s=[];for(a=0;a<r.length;a++)s.push(g(e,i,r[a])),o!==i&&s.push(g(e,o,r[a]));for(a=0;a<s.length;a++)p[s[a]]=1;t(e[i],s)}}(f,["layout"]),function t(e,r){for(var i in e)if(-1===i.indexOf("defaults")&&n(e[i])){var a=g(e,i,r);p[a]?t(e[i],a):h.push({code:"unused",path:a})}}(s,"layout")):h.push({code:"layout"}),n(l)){for(var y,x={},b=0;b<d.length;b++){var _=d[b];x[y=_.type]=(x[y]||0)+1,_._fullInput._template||h.push({code:"missing",index:_._fullInput.index,traceType:y})}for(y in l){var w=l[y].length,A=x[y]||0;w>A?h.push({code:"unused",traceType:y,templateCount:w,dataCount:A}):A>w&&h.push({code:"reused",traceType:y,templateCount:w,dataCount:A})}}else h.push({code:"data"});if(function t(e,r){for(var i in e)if("_"!==i.charAt(0)){var a=e[i],o=g(e,i,r);n(a)?(Array.isArray(e)&&!1===a._template&&a.templateitemname&&h.push({code:"missing",path:o,templateitemname:a.templateitemname}),t(a,o)):Array.isArray(a)&&v(a)&&t(a,o)}}({data:d,layout:f},""),h.length)return h.map(m)}},function(t,e,r){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:r(1048),supplyLayoutDefaults:r(1047),draw:r(1049),style:r(1050)}},function(t,e,r){"use strict";var i=r(671),n=r(821);t.exports={moduleType:"component",name:"annotations",layoutAttributes:r(652),supplyLayoutDefaults:r(822),includeBasePlot:r(672)("annotations"),calcAutorange:r(823),draw:i.draw,drawOne:i.drawOne,drawRaw:i.drawRaw,hasClickToShow:n.hasClickToShow,onClick:n.onClick,convertCoords:r(824)}},function(t,e,r){"use strict";var i=r(24),n=r(57),a=r(698);t.exports=function(t,e,r){var o,s,l,u,h=t.node(),c=a[r.arrowhead||0],f=a[r.startarrowhead||0],d=(r.arrowwidth||1)*(r.arrowsize||1),p=(r.arrowwidth||1)*(r.startarrowsize||1),g=e.indexOf("start")>=0,v=e.indexOf("end")>=0,m=c.backoff*d+r.standoff,y=f.backoff*p+r.startstandoff;if("line"===h.nodeName){o={x:+t.attr("x1"),y:+t.attr("y1")},s={x:+t.attr("x2"),y:+t.attr("y2")};var x=o.x-s.x,b=o.y-s.y;if(u=(l=Math.atan2(b,x))+Math.PI,m&&y&&m+y>Math.sqrt(x*x+b*b))return void I();if(m){if(m*m>x*x+b*b)return void I();var _=m*Math.cos(l),w=m*Math.sin(l);s.x+=_,s.y+=w,t.attr({x2:s.x,y2:s.y})}if(y){if(y*y>x*x+b*b)return void I();var A=y*Math.cos(l),T=y*Math.sin(l);o.x-=A,o.y-=T,t.attr({x1:o.x,y1:o.y})}}else if("path"===h.nodeName){var M=h.getTotalLength(),k="";if(M<m+y)return void I();var E=h.getPointAtLength(0),S=h.getPointAtLength(.1);l=Math.atan2(E.y-S.y,E.x-S.x),o=h.getPointAtLength(Math.min(y,M)),k="0px,"+y+"px,";var C=h.getPointAtLength(M),L=h.getPointAtLength(M-.1);u=Math.atan2(C.y-L.y,C.x-L.x),s=h.getPointAtLength(Math.max(0,M-m)),k+=M-(k?y+m:m)+"px,"+M+"px",t.style("stroke-dasharray",k)}function I(){t.style("stroke-dasharray","0px,100px")}function j(e,a,o,s){e.path&&(e.noRotate&&(o=0),i.select(h.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:"translate("+a.x+","+a.y+")"+(o?"rotate("+180*o/Math.PI+")":"")+"scale("+s+")"}).style({fill:n.rgb(r.arrowcolor),"stroke-width":0}))}g&&j(f,o,l,p),v&&j(c,s,u,d)}},function(t,e,r){"use strict";var i=r(6),n=r(23),a=r(58).arrayEditor;function o(t,e){var r,i,n,a,o,l,u,h=t._fullLayout.annotations,c=[],f=[],d=[],p=(e||[]).length;for(r=0;r<h.length;r++)if(a=(n=h[r]).clicktoshow){for(i=0;i<p;i++)if(l=(o=e[i]).xaxis,u=o.yaxis,l._id===n.xref&&u._id===n.yref&&l.d2r(o.x)===s(n._xclick,l)&&u.d2r(o.y)===s(n._yclick,u)){(n.visible?"onout"===a?f:d:c).push(r);break}i===p&&n.visible&&"onout"===a&&f.push(r)}return{on:c,off:f,explicitOff:d}}function s(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}t.exports={hasClickToShow:function(t,e){var r=o(t,e);return r.on.length>0||r.explicitOff.length>0},onClick:function(t,e){var r,s,l=o(t,e),u=l.on,h=l.off.concat(l.explicitOff),c={},f=t._fullLayout.annotations;if(!u.length&&!h.length)return;for(r=0;r<u.length;r++)(s=a(t.layout,"annotations",f[u[r]])).modifyItem("visible",!0),i.extendFlat(c,s.getUpdateObj());for(r=0;r<h.length;r++)(s=a(t.layout,"annotations",f[h[r]])).modifyItem("visible",!1),i.extendFlat(c,s.getUpdateObj());return n.call("update",t,{},c)}}},function(t,e,r){"use strict";var i=r(6),n=r(105),a=r(209),o=r(711),s=r(652);function l(t,e,r){function a(r,n){return i.coerce(t,e,s,r,n)}var l=a("visible"),u=a("clicktoshow");if(l||u){o(t,e,r,a);for(var h=e.showarrow,c=["x","y"],f=[-10,-30],d={_fullLayout:r},p=0;p<2;p++){var g=c[p],v=n.coerceRef(t,e,d,g,"","paper");if("paper"!==v)n.getFromId(d,v)._annIndices.push(e._index);if(n.coercePosition(e,d,a,v,g,.5),h){var m="a"+g,y=n.coerceRef(t,e,d,m,"pixel");"pixel"!==y&&y!==v&&(y=e[m]="pixel");var x="pixel"===y?f[p]:.4;n.coercePosition(e,d,a,y,m,x)}a(g+"anchor"),a(g+"shift")}if(i.noneOrAll(t,e,["x","y"]),h&&i.noneOrAll(t,e,["ax","ay"]),u){var b=a("xclick"),_=a("yclick");e._xclick=void 0===b?e.x:n.cleanPosition(b,d,e.xref),e._yclick=void 0===_?e.y:n.cleanPosition(_,d,e.yref)}}}t.exports=function(t,e){a(t,e,{name:"annotations",handleItemDefaults:l})}},function(t,e,r){"use strict";var i=r(6),n=r(105),a=r(671).draw;function o(t){var e=t._fullLayout;i.filterVisible(e.annotations).forEach((function(e){var r=n.getFromId(t,e.xref),i=n.getFromId(t,e.yref);e._extremes={},r&&s(e,r),i&&s(e,i)}))}function s(t,e){var r,i=e._id,a=i.charAt(0),o=t[a],s=t["a"+a],l=t[a+"ref"],u=t["a"+a+"ref"],h=t["_"+a+"padplus"],c=t["_"+a+"padminus"],f={x:1,y:-1}[a]*t[a+"shift"],d=3*t.arrowsize*t.arrowwidth||0,p=d+f,g=d-f,v=3*t.startarrowsize*t.arrowwidth||0,m=v+f,y=v-f;if(u===l){var x=n.findExtremes(e,[e.r2c(o)],{ppadplus:p,ppadminus:g}),b=n.findExtremes(e,[e.r2c(s)],{ppadplus:Math.max(h,m),ppadminus:Math.max(c,y)});r={min:[x.min[0],b.min[0]],max:[x.max[0],b.max[0]]}}else m=s?m+s:m,y=s?y-s:y,r=n.findExtremes(e,[e.r2c(o)],{ppadplus:Math.max(h,p,m),ppadminus:Math.max(c,g,y)});t._extremes[i]=r}t.exports=function(t){var e=t._fullLayout;if(i.filterVisible(e.annotations).length&&t._fullData.length)return i.syncOrAsync([a,o],t)}},function(t,e,r){"use strict";var i=r(12),n=r(222);t.exports=function(t,e,r,a){e=e||{};var o="log"===r&&"linear"===e.type,s="linear"===r&&"log"===e.type;if(o||s)for(var l,u,h=t._fullLayout.annotations,c=e._id.charAt(0),f=0;f<h.length;f++)l=h[f],u="annotations["+f+"].",l[c+"ref"]===e._id&&d(c),l["a"+c+"ref"]===e._id&&d("a"+c);function d(t){var r=l[t],s=null;s=o?n(r,e.range):Math.pow(10,r),i(s)||(s=null),a(u+t,s)}}},function(t,e,r){"use strict";var i=r(23),n=r(6);t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:r(673)}}},layoutAttributes:r(673),handleDefaults:r(826),includeBasePlot:function(t,e){var r=i.subplotsRegistry.gl3d;if(!r)return;for(var a=r.attrRegex,o=Object.keys(t),s=0;s<o.length;s++){var l=o[s];a.test(l)&&(t[l].annotations||[]).length&&(n.pushUnique(e._basePlotModules,r),n.pushUnique(e._subplots.gl3d,l))}},convert:r(827),draw:r(828)}},function(t,e,r){"use strict";var i=r(6),n=r(105),a=r(209),o=r(711),s=r(673);function l(t,e,r,a){function l(r,n){return i.coerce(t,e,s,r,n)}function u(t){var i=t+"axis",a={_fullLayout:{}};return a._fullLayout[i]=r[i],n.coercePosition(e,a,l,t,t,.5)}l("visible")&&(o(t,e,a.fullLayout,l),u("x"),u("y"),u("z"),i.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",l("xanchor"),l("yanchor"),l("xshift"),l("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",l("ax",-10),l("ay",-30),i.noneOrAll(t,e,["ax","ay"])))}t.exports=function(t,e,r){a(t,e,{name:"annotations",handleItemDefaults:l,fullLayout:r.fullLayout})}},function(t,e,r){"use strict";var i=r(6),n=r(105);function a(t,e){var r=e.fullSceneLayout.domain,a=e.fullLayout._size,o={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},i.extendFlat(t._xa,o),n.setConvert(t._xa),t._xa._offset=a.l+r.x[0]*a.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*a.w*(r.x[1]-r.x[0])},t._ya={},i.extendFlat(t._ya,o),n.setConvert(t._ya),t._ya._offset=a.t+(1-r.y[1])*a.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*a.h*(r.y[1]-r.y[0])}}t.exports=function(t){for(var e=t.fullSceneLayout.annotations,r=0;r<e.length;r++)a(e[r],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()}},function(t,e,r){"use strict";var i=r(671).drawRaw,n=r(754),a=["x","y","z"];t.exports=function(t){for(var e=t.fullSceneLayout,r=t.dataScale,o=e.annotations,s=0;s<o.length;s++){for(var l=o[s],u=!1,h=0;h<3;h++){var c=a[h],f=l[c],d=e[c+"axis"].r2fraction(f);if(d<0||d>1){u=!0;break}}u?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+s+'"]').remove():(l._pdata=n(t.glplot.cameraParams,[e.xaxis.r2l(l.x)*r[0],e.yaxis.r2l(l.y)*r[1],e.zaxis.r2l(l.z)*r[2]]),i(t.graphDiv,l,s,t.id,l._xa,l._ya))}}},function(t,e,r){"use strict";var i=r(1051);t.exports={moduleType:"component",name:"shapes",layoutAttributes:r(712),supplyLayoutDefaults:r(830),supplyDrawNewShapeDefaults:r(831),includeBasePlot:r(672)("shapes"),calcAutorange:r(832),draw:i.draw,drawOne:i.drawOne}},function(t,e,r){"use strict";var i=r(6),n=r(105),a=r(209),o=r(712),s=r(774);function l(t,e,r){function a(r,n){return i.coerce(t,e,o,r,n)}if(a("visible")){var l=a("path"),u=a("type",l?"path":"rect");"path"!==e.type&&delete e.path,a("editable"),a("layer"),a("opacity"),a("fillcolor"),a("fillrule"),a("line.width")&&(a("line.color"),a("line.dash"));for(var h=a("xsizemode"),c=a("ysizemode"),f=["x","y"],d=0;d<2;d++){var p,g,v,m=f[d],y=m+"anchor",x="x"===m?h:c,b={_fullLayout:r},_=n.coerceRef(t,e,b,m,"","paper");if("paper"!==_?((p=n.getFromId(b,_))._shapeIndices.push(e._index),v=s.rangeToShapePosition(p),g=s.shapePositionToRange(p)):g=v=i.identity,"path"!==u){var w=m+"0",A=m+"1",T=t[w],M=t[A];t[w]=g(t[w],!0),t[A]=g(t[A],!0),"pixel"===x?(a(w,0),a(A,10)):(n.coercePosition(e,b,a,_,w,.25),n.coercePosition(e,b,a,_,A,.75)),e[w]=v(e[w]),e[A]=v(e[A]),t[w]=T,t[A]=M}if("pixel"===x){var k=t[y];t[y]=g(t[y],!0),n.coercePosition(e,b,a,_,y,.25),e[y]=v(e[y]),t[y]=k}}"path"===u?a("path"):i.noneOrAll(t,e,["x0","x1","y0","y1"])}}t.exports=function(t,e){a(t,e,{name:"shapes",handleItemDefaults:l})}},function(t,e,r){"use strict";var i=r(57);t.exports=function(t,e,r){if(r("newshape.drawdirection"),r("newshape.layer"),r("newshape.fillcolor"),r("newshape.fillrule"),r("newshape.opacity"),r("newshape.line.width")){var n=(t||{}).plot_bgcolor||"#FFF";r("newshape.line.color",i.contrast(n)),r("newshape.line.dash")}r("activeshape.fillcolor"),r("activeshape.opacity")}},function(t,e,r){"use strict";var i=r(6),n=r(105),a=r(1033),o=r(774);function s(t){return u(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function l(t){return u(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function u(t,e,r,n,s,l){var u=t/2,h=l;if("pixel"===e){var c=s?o.extractPathCoords(s,l?a.paramIsY:a.paramIsX):[r,n],f=i.aggNums(Math.max,null,c),d=i.aggNums(Math.min,null,c),p=d<0?Math.abs(d)+u:u,g=f>0?f+u:u;return{ppad:u,ppadplus:h?p:g,ppadminus:h?g:p}}return{ppad:u}}function h(t,e,r,i,n){var s="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==e)return[s(e),s(r)];if(i){var l,u,h,c,f=1/0,d=-1/0,p=i.match(a.segmentRE);for("date"===t.type&&(s=o.decodeDate(s)),l=0;l<p.length;l++)void 0!==(u=n[p[l].charAt(0)].drawn)&&(!(h=p[l].substr(1).match(a.paramRE))||h.length<u||((c=s(h[u]))<f&&(f=c),c>d&&(d=c)));return d>=f?[f,d]:void 0}}t.exports=function(t){var e=t._fullLayout,r=i.filterVisible(e.shapes);if(r.length&&t._fullData.length)for(var o=0;o<r.length;o++){var u,c,f=r[o];if(f._extremes={},"paper"!==f.xref){var d="pixel"===f.xsizemode?f.xanchor:f.x0,p="pixel"===f.xsizemode?f.xanchor:f.x1;(c=h(u=n.getFromId(t,f.xref),d,p,f.path,a.paramIsX))&&(f._extremes[u._id]=n.findExtremes(u,c,s(f)))}if("paper"!==f.yref){var g="pixel"===f.ysizemode?f.yanchor:f.y0,v="pixel"===f.ysizemode?f.yanchor:f.y1;(c=h(u=n.getFromId(t,f.yref),g,v,f.path,a.paramIsY))&&(f._extremes[u._id]=n.findExtremes(u,c,l(f)))}}}},function(t,e,r){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:r(713),supplyLayoutDefaults:r(834),includeBasePlot:r(672)("images"),draw:r(835),convertCoords:r(836)}},function(t,e,r){"use strict";var i=r(6),n=r(105),a=r(209),o=r(713);function s(t,e,r){function a(r,n){return i.coerce(t,e,o,r,n)}var s=a("source");if(!a("visible",!!s))return e;a("layer"),a("xanchor"),a("yanchor"),a("sizex"),a("sizey"),a("sizing"),a("opacity");for(var l={_fullLayout:r},u=["x","y"],h=0;h<2;h++){var c=u[h],f=n.coerceRef(t,e,l,c,"paper");if("paper"!==f)n.getFromId(l,f)._imgIndices.push(e._index);n.coercePosition(e,l,a,f,c,0)}return e}t.exports=function(t,e){a(t,e,{name:"images",handleItemDefaults:s})}},function(t,e,r){"use strict";var i=r(24),n=r(106),a=r(105),o=r(152);t.exports=function(t){var e,r,s=t._fullLayout,l=[],u={},h=[];for(r=0;r<s.images.length;r++){var c=s.images[r];if(c.visible)if("below"===c.layer&&"paper"!==c.xref&&"paper"!==c.yref){e=c.xref+c.yref;var f=s._plots[e];if(!f){h.push(c);continue}f.mainplot&&(e=f.mainplot.id),u[e]||(u[e]=[]),u[e].push(c)}else"above"===c.layer?l.push(c):h.push(c)}var d={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},p={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function g(e){var r=i.select(this);if(this._imgSrc!==e.source)if(r.attr("xmlns",o.svg),e.source&&"data:"===e.source.slice(0,5))r.attr("xlink:href",e.source),this._imgSrc=e.source;else{var n=new Promise(function(t){var i=new Image;function n(){r.remove(),t()}this.img=i,i.setAttribute("crossOrigin","anonymous"),i.onerror=n,i.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);var i=e.toDataURL("image/png");r.attr("xlink:href",i),t()},r.on("error",n),i.src=e.source,this._imgSrc=e.source}.bind(this));t._promises.push(n)}}function v(e){var r=i.select(this),o=a.getFromId(t,e.xref),l=a.getFromId(t,e.yref),u=s._size,h=o?Math.abs(o.l2p(e.sizex)-o.l2p(0)):e.sizex*u.w,c=l?Math.abs(l.l2p(e.sizey)-l.l2p(0)):e.sizey*u.h,f=h*d[e.xanchor].offset,g=c*p[e.yanchor].offset,v=d[e.xanchor].sizing+p[e.yanchor].sizing,m=(o?o.r2p(e.x)+o._offset:e.x*u.w+u.l)+f,y=(l?l.r2p(e.y)+l._offset:u.h-e.y*u.h+u.t)+g;switch(e.sizing){case"fill":v+=" slice";break;case"stretch":v="none"}r.attr({x:m,y:y,width:h,height:c,preserveAspectRatio:v,opacity:e.opacity});var x=(o?o._id:"")+(l?l._id:"");n.setClipUrl(r,x?"clip"+s._uid+x:null,t)}var m=s._imageLowerLayer.selectAll("image").data(h),y=s._imageUpperLayer.selectAll("image").data(l);m.enter().append("image"),y.enter().append("image"),m.exit().remove(),y.exit().remove(),m.each((function(t){g.bind(this)(t),v.bind(this)(t)})),y.each((function(t){g.bind(this)(t),v.bind(this)(t)}));var x=Object.keys(s._plots);for(r=0;r<x.length;r++){e=x[r];var b=s._plots[e];if(b.imagelayer){var _=b.imagelayer.selectAll("image").data(u[e]||[]);_.enter().append("image"),_.exit().remove(),_.each((function(t){g.bind(this)(t),v.bind(this)(t)}))}}}},function(t,e,r){"use strict";var i=r(12),n=r(222);t.exports=function(t,e,r,a){e=e||{};var o="log"===r&&"linear"===e.type,s="linear"===r&&"log"===e.type;if(o||s)for(var l,u,h=t._fullLayout.images,c=e._id.charAt(0),f=0;f<h.length;f++)if(u="images["+f+"].",(l=h[f])[c+"ref"]===e._id){var d=l[c],p=l["size"+c],g=null,v=null;if(o){g=n(d,e.range);var m=p/Math.pow(10,g)/2;v=2*Math.log(m+Math.sqrt(1+m*m))/Math.LN10}else v=(g=Math.pow(10,d))*(Math.pow(10,p/2)-Math.pow(10,-p/2));i(g)?i(v)||(v=null):(g=null,v=null),a(u+c,g),a(u+"size"+c,v)}}},function(t,e,r){"use strict";var i=r(674);t.exports={moduleType:"component",name:i.name,layoutAttributes:r(714),supplyLayoutDefaults:r(838),draw:r(839)}},function(t,e,r){"use strict";var i=r(6),n=r(209),a=r(714),o=r(674).name,s=a.buttons;function l(t,e,r){function o(r,n){return i.coerce(t,e,a,r,n)}o("visible",n(t,e,{name:"buttons",handleItemDefaults:u}).length>0)&&(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),i.noneOrAll(t,e,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),i.coerceFont(o,"font",r.font),o("bgcolor",r.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function u(t,e){function r(r,n){return i.coerce(t,e,s,r,n)}r("visible","skip"===t.method||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}t.exports=function(t,e){n(t,e,{name:o,handleItemDefaults:l})}},function(t,e,r){"use strict";var i=r(24),n=r(107),a=r(57),o=r(106),s=r(6),l=r(108),u=r(58).arrayEditor,h=r(81).LINE_SPACING,c=r(674),f=r(840);function d(t){return t._index}function p(t,e){return+t.attr(c.menuIndexAttrName)===e._index}function g(t,e,r,i,n,a,o,s){e.active=o,u(t.layout,c.name,e).applyUpdate("active",o),"buttons"===e.type?m(t,i,null,null,e):"dropdown"===e.type&&(n.attr(c.menuIndexAttrName,"-1"),v(t,i,n,a,e),s||m(t,i,n,a,e))}function v(t,e,r,i,n){var a=s.ensureSingle(e,"g",c.headerClassName,(function(t){t.style("pointer-events","all")})),l=n._dims,u=n.active,h=n.buttons[u]||c.blankHeaderOpts,f={y:n.pad.t,yPad:0,x:n.pad.l,xPad:0,index:0},d={width:l.headerWidth,height:l.headerHeight};a.call(y,n,h,t).call(k,n,f,d),s.ensureSingle(e,"text",c.headerArrowClassName,(function(t){t.classed("user-select-none",!0).attr("text-anchor","end").call(o.font,n.font).text(c.arrowSymbol[n.direction])})).attr({x:l.headerWidth-c.arrowOffsetX+n.pad.l,y:l.headerHeight/2+c.textOffsetY+n.pad.t}),a.on("click",(function(){r.call(E,String(p(r,n)?-1:n._index)),m(t,e,r,i,n)})),a.on("mouseover",(function(){a.call(w)})),a.on("mouseout",(function(){a.call(A,n)})),o.setTranslate(e,l.lx,l.ly)}function m(t,e,r,a,o){r||(r=e).attr("pointer-events","all");var l=function(t){return-1==+t.attr(c.menuIndexAttrName)}(r)&&"buttons"!==o.type?[]:o.buttons,u="dropdown"===o.type?c.dropdownButtonClassName:c.buttonClassName,h=r.selectAll("g."+u).data(s.filterVisible(l)),f=h.enter().append("g").classed(u,!0),d=h.exit();"dropdown"===o.type?(f.attr("opacity","0").transition().attr("opacity","1"),d.transition().attr("opacity","0").remove()):d.remove();var p=0,v=0,m=o._dims,x=-1!==["up","down"].indexOf(o.direction);"dropdown"===o.type&&(x?v=m.headerHeight+c.gapButtonHeader:p=m.headerWidth+c.gapButtonHeader),"dropdown"===o.type&&"up"===o.direction&&(v=-c.gapButtonHeader+c.gapButton-m.openHeight),"dropdown"===o.type&&"left"===o.direction&&(p=-c.gapButtonHeader+c.gapButton-m.openWidth);var b={x:m.lx+p+o.pad.l,y:m.ly+v+o.pad.t,yPad:c.gapButton,xPad:c.gapButton,index:0},T={l:b.x+o.borderwidth,t:b.y+o.borderwidth};h.each((function(s,l){var u=i.select(this);u.call(y,o,s,t).call(k,o,b),u.on("click",(function(){i.event.defaultPrevented||(s.execute&&(s.args2&&o.active===l?(g(t,o,0,e,r,a,-1),n.executeAPICommand(t,s.method,s.args2)):(g(t,o,0,e,r,a,l),n.executeAPICommand(t,s.method,s.args))),t.emit("plotly_buttonclicked",{menu:o,button:s,active:o.active}))})),u.on("mouseover",(function(){u.call(w)})),u.on("mouseout",(function(){u.call(A,o),h.call(_,o)}))})),h.call(_,o),x?(T.w=Math.max(m.openWidth,m.headerWidth),T.h=b.y-T.t):(T.w=b.x-T.l,T.h=Math.max(m.openHeight,m.headerHeight)),T.direction=o.direction,a&&(h.size()?function(t,e,r,i,n,a){var o,s,l,u=n.direction,h="up"===u||"down"===u,f=n._dims,d=n.active;if(h)for(s=0,l=0;l<d;l++)s+=f.heights[l]+c.gapButton;else for(o=0,l=0;l<d;l++)o+=f.widths[l]+c.gapButton;i.enable(a,o,s),i.hbar&&i.hbar.attr("opacity","0").transition().attr("opacity","1");i.vbar&&i.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,a,o,T):function(t){var e=!!t.hbar,r=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",(function(){e=!1,r||t.disable()}));r&&t.vbar.transition().attr("opacity","0").each("end",(function(){r=!1,e||t.disable()}))}(a))}function y(t,e,r,i){t.call(x,e).call(b,e,r,i)}function x(t,e){s.ensureSingle(t,"rect",c.itemRectClassName,(function(t){t.attr({rx:c.rx,ry:c.ry,"shape-rendering":"crispEdges"})})).call(a.stroke,e.bordercolor).call(a.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function b(t,e,r,i){var n=s.ensureSingle(t,"text",c.itemTextClassName,(function(t){t.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})})),a=r.label,u=i._fullLayout._meta;u&&(a=s.templateString(a,u)),n.call(o.font,e.font).text(a).call(l.convertToTspans,i)}function _(t,e){var r=e.active;t.each((function(t,n){var o=i.select(this);n===r&&e.showactive&&o.select("rect."+c.itemRectClassName).call(a.fill,c.activeColor)}))}function w(t){t.select("rect."+c.itemRectClassName).call(a.fill,c.hoverColor)}function A(t,e){t.select("rect."+c.itemRectClassName).call(a.fill,e.bgcolor)}function T(t,e){var r=e._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},a=o.tester.selectAll("g."+c.dropdownButtonClassName).data(s.filterVisible(e.buttons));a.enter().append("g").classed(c.dropdownButtonClassName,!0);var u=-1!==["up","down"].indexOf(e.direction);a.each((function(n,a){var s=i.select(this);s.call(y,e,n,t);var f=s.select("."+c.itemTextClassName),d=f.node()&&o.bBox(f.node()).width,p=Math.max(d+c.textPadX,c.minWidth),g=e.font.size*h,v=l.lineCount(f),m=Math.max(g*v,c.minHeight)+c.textOffsetY;m=Math.ceil(m),p=Math.ceil(p),r.widths[a]=p,r.heights[a]=m,r.height1=Math.max(r.height1,m),r.width1=Math.max(r.width1,p),u?(r.totalWidth=Math.max(r.totalWidth,p),r.openWidth=r.totalWidth,r.totalHeight+=m+c.gapButton,r.openHeight+=m+c.gapButton):(r.totalWidth+=p+c.gapButton,r.openWidth+=p+c.gapButton,r.totalHeight=Math.max(r.totalHeight,m),r.openHeight=r.totalHeight)})),u?r.totalHeight-=c.gapButton:r.totalWidth-=c.gapButton,r.headerWidth=r.width1+c.arrowPadX,r.headerHeight=r.height1,"dropdown"===e.type&&(u?(r.width1+=c.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=c.arrowPadX),a.remove();var f=r.totalWidth+e.pad.l+e.pad.r,d=r.totalHeight+e.pad.t+e.pad.b,p=t._fullLayout._size;r.lx=p.l+p.w*e.x,r.ly=p.t+p.h*(1-e.y);var g="left";s.isRightAnchor(e)&&(r.lx-=f,g="right"),s.isCenterAnchor(e)&&(r.lx-=f/2,g="center");var v="top";s.isBottomAnchor(e)&&(r.ly-=d,v="bottom"),s.isMiddleAnchor(e)&&(r.ly-=d/2,v="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),n.autoMargin(t,M(e),{x:e.x,y:e.y,l:f*({right:1,center:.5}[g]||0),r:f*({left:1,center:.5}[g]||0),b:d*({top:1,middle:.5}[v]||0),t:d*({bottom:1,middle:.5}[v]||0)})}function M(t){return c.autoMarginIdRoot+t._index}function k(t,e,r,i){i=i||{};var n=t.select("."+c.itemRectClassName),a=t.select("."+c.itemTextClassName),s=e.borderwidth,u=r.index,f=e._dims;o.setTranslate(t,s+r.x,s+r.y);var d=-1!==["up","down"].indexOf(e.direction),p=i.height||(d?f.heights[u]:f.height1);n.attr({x:0,y:0,width:i.width||(d?f.width1:f.widths[u]),height:p});var g=e.font.size*h,v=(l.lineCount(a)-1)*g/2;l.positionText(a,c.textOffsetX,p/2-v+c.textOffsetY),d?r.y+=f.heights[u]+r.yPad:r.x+=f.widths[u]+r.xPad,r.index++}function E(t,e){t.attr(c.menuIndexAttrName,e||"-1").selectAll("g."+c.dropdownButtonClassName).remove()}t.exports=function(t){var e=t._fullLayout,r=s.filterVisible(e[c.name]);function a(e){n.autoMargin(t,M(e))}var o=e._menulayer.selectAll("g."+c.containerClassName).data(r.length>0?[0]:[]);if(o.enter().append("g").classed(c.containerClassName,!0).style("cursor","pointer"),o.exit().each((function(){i.select(this).selectAll("g."+c.headerGroupClassName).each(a)})).remove(),0!==r.length){var l=o.selectAll("g."+c.headerGroupClassName).data(r,d);l.enter().append("g").classed(c.headerGroupClassName,!0);for(var u=s.ensureSingle(o,"g",c.dropdownButtonGroupClassName,(function(t){t.style("pointer-events","all")})),h=0;h<r.length;h++){var y=r[h];T(t,y)}var x="updatemenus"+e._uid,b=new f(t,u,x);l.enter().size()&&(u.node().parentNode.appendChild(u.node()),u.call(E)),l.exit().each((function(t){u.call(E),a(t)})).remove(),l.each((function(e){var r=i.select(this),a="dropdown"===e.type?u:null;n.manageCommandObserver(t,e,e.buttons,(function(i){g(t,e,e.buttons[i.index],r,a,b,i.index,!0)})),"dropdown"===e.type?(v(t,r,u,b,e),p(u,e)&&m(t,r,u,b,e)):m(t,r,null,null,e)}))}}},function(t,e,r){"use strict";t.exports=s;var i=r(24),n=r(57),a=r(106),o=r(6);function s(t,e,r){this.gd=t,this.container=e,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(t,e,r){var o=this.gd._fullLayout,l=o.width,u=o.height;this.position=t;var h,c,f,d,p=this.position.l,g=this.position.w,v=this.position.t,m=this.position.h,y=this.position.direction,x="down"===y,b="left"===y,_="up"===y,w=g,A=m;x||b||"right"===y||_||(this.position.direction="down",x=!0),x||_?(c=(h=p)+w,x?(f=v,A=(d=Math.min(f+A,u))-f):A=(d=v+A)-(f=Math.max(d-A,0))):(d=(f=v)+A,b?w=(c=p+w)-(h=Math.max(c-w,0)):(h=p,w=(c=Math.min(h+w,l))-h)),this._box={l:h,t:f,w:w,h:A};var T=g>w,M=s.barLength+2*s.barPad,k=s.barWidth+2*s.barPad,E=p,S=v+m;S+k>u&&(S=u-k);var C=this.container.selectAll("rect.scrollbar-horizontal").data(T?[0]:[]);C.exit().on(".drag",null).remove(),C.enter().append("rect").classed("scrollbar-horizontal",!0).call(n.fill,s.barColor),T?(this.hbar=C.attr({rx:s.barRadius,ry:s.barRadius,x:E,y:S,width:M,height:k}),this._hbarXMin=E+M/2,this._hbarTranslateMax=w-M):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var L=m>A,I=s.barWidth+2*s.barPad,j=s.barLength+2*s.barPad,R=p+g,P=v;R+I>l&&(R=l-I);var O=this.container.selectAll("rect.scrollbar-vertical").data(L?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-vertical",!0).call(n.fill,s.barColor),L?(this.vbar=O.attr({rx:s.barRadius,ry:s.barRadius,x:R,y:P,width:I,height:j}),this._vbarYMin=P+j/2,this._vbarTranslateMax=A-j):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var z=this.id,N=h-.5,B=L?c+I+.5:c+.5,F=f-.5,D=T?d+k+.5:d+.5,U=o._topdefs.selectAll("#"+z).data(T||L?[0]:[]);if(U.exit().remove(),U.enter().append("clipPath").attr("id",z).append("rect"),T||L?(this._clipRect=U.select("rect").attr({x:Math.floor(N),y:Math.floor(F),width:Math.ceil(B)-Math.floor(N),height:Math.ceil(D)-Math.floor(F)}),this.container.call(a.setClipUrl,z,this.gd),this.bg.attr({x:p,y:v,width:g,height:m})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),T||L){var V=i.behavior.drag().on("dragstart",(function(){i.event.sourceEvent.preventDefault()})).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(V);var X=i.behavior.drag().on("dragstart",(function(){i.event.sourceEvent.preventDefault(),i.event.sourceEvent.stopPropagation()})).on("drag",this._onBarDrag.bind(this));T&&this.hbar.on(".drag",null).call(X),L&&this.vbar.on(".drag",null).call(X)}this.setTranslate(e,r)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t-=i.event.dx),this.vbar&&(e-=i.event.dy),this.setTranslate(t,e)},s.prototype._onBoxWheel=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t+=i.event.deltaY),this.vbar&&(e+=i.event.deltaY),this.setTranslate(t,e)},s.prototype._onBarDrag=function(){var t=this.translateX,e=this.translateY;if(this.hbar){var r=t+this._hbarXMin,n=r+this._hbarTranslateMax;t=(o.constrain(i.event.x,r,n)-r)/(n-r)*(this.position.w-this._box.w)}if(this.vbar){var a=e+this._vbarYMin,s=a+this._vbarTranslateMax;e=(o.constrain(i.event.y,a,s)-a)/(s-a)*(this.position.h-this._box.h)}this.setTranslate(t,e)},s.prototype.setTranslate=function(t,e){var r=this.position.w-this._box.w,i=this.position.h-this._box.h;if(t=o.constrain(t||0,0,r),e=o.constrain(e||0,0,i),this.translateX=t,this.translateY=e,this.container.call(a.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar){var n=t/r;this.hbar.call(a.setTranslate,t+n*this._hbarTranslateMax,e)}if(this.vbar){var s=e/i;this.vbar.call(a.setTranslate,t,e+s*this._vbarTranslateMax)}}},function(t,e,r){"use strict";var i=r(656);t.exports={moduleType:"component",name:i.name,layoutAttributes:r(715),supplyLayoutDefaults:r(842),draw:r(843)}},function(t,e,r){"use strict";var i=r(6),n=r(209),a=r(715),o=r(656).name,s=a.steps;function l(t,e,r){function o(r,n){return i.coerce(t,e,a,r,n)}for(var s=n(t,e,{name:"steps",handleItemDefaults:u}),l=0,h=0;h<s.length;h++)s[h].visible&&l++;if(l<2?e.visible=!1:o("visible")){e._stepCount=l;var c=e._visibleSteps=i.filterVisible(s);(s[o("active")]||{}).visible||(e.active=c[0]._index),o("x"),o("y"),i.noneOrAll(t,e,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),i.coerceFont(o,"font",r.font),o("currentvalue.visible")&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),i.coerceFont(o,"currentvalue.font",e.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function u(t,e){function r(r,n){return i.coerce(t,e,s,r,n)}if("skip"===t.method||Array.isArray(t.args)?r("visible"):e.visible=!1){r("method"),r("args");var n=r("label","step-"+e._index);r("value",n),r("execute")}}t.exports=function(t,e){n(t,e,{name:o,handleItemDefaults:l})}},function(t,e,r){"use strict";var i=r(24),n=r(107),a=r(57),o=r(106),s=r(6),l=r(108),u=r(58).arrayEditor,h=r(656),c=r(81),f=c.LINE_SPACING,d=c.FROM_TL,p=c.FROM_BR;function g(t){return h.autoMarginIdRoot+t._index}function v(t){return t._index}function m(t,e){var r=o.tester.selectAll("g."+h.labelGroupClass).data(e._visibleSteps);r.enter().append("g").classed(h.labelGroupClass,!0);var a=0,u=0;r.each((function(t){var r=b(i.select(this),{step:t},e).node();if(r){var n=o.bBox(r);u=Math.max(u,n.height),a=Math.max(a,n.width)}})),r.remove();var c=e._dims={};c.inputAreaWidth=Math.max(h.railWidth,h.gripHeight);var f=t._fullLayout._size;c.lx=f.l+f.w*e.x,c.ly=f.t+f.h*(1-e.y),"fraction"===e.lenmode?c.outerLength=Math.round(f.w*e.len):c.outerLength=e.len,c.inputAreaStart=0,c.inputAreaLength=Math.round(c.outerLength-e.pad.l-e.pad.r);var v=(c.inputAreaLength-2*h.stepInset)/(e._stepCount-1),m=a+h.labelPadding;if(c.labelStride=Math.max(1,Math.ceil(m/v)),c.labelHeight=u,c.currentValueMaxWidth=0,c.currentValueHeight=0,c.currentValueTotalHeight=0,c.currentValueMaxLines=1,e.currentvalue.visible){var x=o.tester.append("g");r.each((function(t){var r=y(x,e,t.label),i=r.node()&&o.bBox(r.node())||{width:0,height:0},n=l.lineCount(r);c.currentValueMaxWidth=Math.max(c.currentValueMaxWidth,Math.ceil(i.width)),c.currentValueHeight=Math.max(c.currentValueHeight,Math.ceil(i.height)),c.currentValueMaxLines=Math.max(c.currentValueMaxLines,n)})),c.currentValueTotalHeight=c.currentValueHeight+e.currentvalue.offset,x.remove()}c.height=c.currentValueTotalHeight+h.tickOffset+e.ticklen+h.labelOffset+c.labelHeight+e.pad.t+e.pad.b;var _="left";s.isRightAnchor(e)&&(c.lx-=c.outerLength,_="right"),s.isCenterAnchor(e)&&(c.lx-=c.outerLength/2,_="center");var w="top";s.isBottomAnchor(e)&&(c.ly-=c.height,w="bottom"),s.isMiddleAnchor(e)&&(c.ly-=c.height/2,w="middle"),c.outerLength=Math.ceil(c.outerLength),c.height=Math.ceil(c.height),c.lx=Math.round(c.lx),c.ly=Math.round(c.ly);var A={y:e.y,b:c.height*p[w],t:c.height*d[w]};"fraction"===e.lenmode?(A.l=0,A.xl=e.x-e.len*d[_],A.r=0,A.xr=e.x+e.len*p[_]):(A.x=e.x,A.l=c.outerLength*d[_],A.r=c.outerLength*p[_]),n.autoMargin(t,g(e),A)}function y(t,e,r){if(e.currentvalue.visible){var i,n,a=e._dims;switch(e.currentvalue.xanchor){case"right":i=a.inputAreaLength-h.currentValueInset-a.currentValueMaxWidth,n="left";break;case"center":i=.5*a.inputAreaLength,n="middle";break;default:i=h.currentValueInset,n="left"}var u=s.ensureSingle(t,"text",h.labelClass,(function(t){t.classed("user-select-none",!0).attr({"text-anchor":n,"data-notex":1})})),c=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"==typeof r)c+=r;else{var d=e.steps[e.active].label,p=e._gd._fullLayout._meta;p&&(d=s.templateString(d,p)),c+=d}e.currentvalue.suffix&&(c+=e.currentvalue.suffix),u.call(o.font,e.currentvalue.font).text(c).call(l.convertToTspans,e._gd);var g=l.lineCount(u),v=(a.currentValueMaxLines+1-g)*e.currentvalue.font.size*f;return l.positionText(u,i,v),u}}function x(t,e,r){s.ensureSingle(t,"rect",h.gripRectClass,(function(i){i.call(T,e,t,r).style("pointer-events","all")})).attr({width:h.gripWidth,height:h.gripHeight,rx:h.gripRadius,ry:h.gripRadius}).call(a.stroke,r.bordercolor).call(a.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function b(t,e,r){var i=s.ensureSingle(t,"text",h.labelClass,(function(t){t.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})})),n=e.step.label,a=r._gd._fullLayout._meta;return a&&(n=s.templateString(n,a)),i.call(o.font,r.font).text(n).call(l.convertToTspans,r._gd),i}function _(t,e){var r=s.ensureSingle(t,"g",h.labelsClass),n=e._dims,a=r.selectAll("g."+h.labelGroupClass).data(n.labelSteps);a.enter().append("g").classed(h.labelGroupClass,!0),a.exit().remove(),a.each((function(t){var r=i.select(this);r.call(b,t,e),o.setTranslate(r,E(e,t.fraction),h.tickOffset+e.ticklen+e.font.size*f+h.labelOffset+n.currentValueTotalHeight)}))}function w(t,e,r,i,n){var a=Math.round(i*(r._stepCount-1)),o=r._visibleSteps[a]._index;o!==r.active&&A(t,e,r,o,!0,n)}function A(t,e,r,i,a,o){var s=r.active;r.active=i,u(t.layout,h.name,r).applyUpdate("active",i);var l=r.steps[r.active];e.call(k,r,o),e.call(y,r),t.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:a,previousActive:s}),l&&l.method&&a&&(e._nextMethod?(e._nextMethod.step=l,e._nextMethod.doCallback=a,e._nextMethod.doTransition=o):(e._nextMethod={step:l,doCallback:a,doTransition:o},e._nextMethodRaf=window.requestAnimationFrame((function(){var r=e._nextMethod.step;r.method&&(r.execute&&n.executeAPICommand(t,r.method,r.args),e._nextMethod=null,e._nextMethodRaf=null)}))))}function T(t,e,r){var n=r.node(),o=i.select(e);function s(){return r.data()[0]}t.on("mousedown",(function(){var t=s();e.emit("plotly_sliderstart",{slider:t});var l=r.select("."+h.gripRectClass);i.event.stopPropagation(),i.event.preventDefault(),l.call(a.fill,t.activebgcolor);var u=S(t,i.mouse(n)[0]);w(e,r,t,u,!0),t._dragging=!0,o.on("mousemove",(function(){var t=s(),a=S(t,i.mouse(n)[0]);w(e,r,t,a,!1)})),o.on("mouseup",(function(){var t=s();t._dragging=!1,l.call(a.fill,t.bgcolor),o.on("mouseup",null),o.on("mousemove",null),e.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})}))}))}function M(t,e){var r=t.selectAll("rect."+h.tickRectClass).data(e._visibleSteps),n=e._dims;r.enter().append("rect").classed(h.tickRectClass,!0),r.exit().remove(),r.attr({width:e.tickwidth+"px","shape-rendering":"crispEdges"}),r.each((function(t,r){var s=r%n.labelStride==0,l=i.select(this);l.attr({height:s?e.ticklen:e.minorticklen}).call(a.fill,e.tickcolor),o.setTranslate(l,E(e,r/(e._stepCount-1))-.5*e.tickwidth,(s?h.tickOffset:h.minorTickOffset)+n.currentValueTotalHeight)}))}function k(t,e,r){for(var i=t.select("rect."+h.gripRectClass),n=0,a=0;a<e._stepCount;a++)if(e._visibleSteps[a]._index===e.active){n=a;break}var o=E(e,n/(e._stepCount-1));if(!e._invokingCommand){var s=i;r&&e.transition.duration>0&&(s=s.transition().duration(e.transition.duration).ease(e.transition.easing)),s.attr("transform","translate("+(o-.5*h.gripWidth)+","+e._dims.currentValueTotalHeight+")")}}function E(t,e){var r=t._dims;return r.inputAreaStart+h.stepInset+(r.inputAreaLength-2*h.stepInset)*Math.min(1,Math.max(0,e))}function S(t,e){var r=t._dims;return Math.min(1,Math.max(0,(e-h.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*h.stepInset-2*r.inputAreaStart)))}function C(t,e,r){var i=r._dims,n=s.ensureSingle(t,"rect",h.railTouchRectClass,(function(i){i.call(T,e,t,r).style("pointer-events","all")}));n.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,h.tickOffset+r.ticklen+i.labelHeight)}).call(a.fill,r.bgcolor).attr("opacity",0),o.setTranslate(n,0,i.currentValueTotalHeight)}function L(t,e){var r=e._dims,i=r.inputAreaLength-2*h.railInset,n=s.ensureSingle(t,"rect",h.railRectClass);n.attr({width:i,height:h.railWidth,rx:h.railRadius,ry:h.railRadius,"shape-rendering":"crispEdges"}).call(a.stroke,e.bordercolor).call(a.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),o.setTranslate(n,h.railInset,.5*(r.inputAreaWidth-h.railWidth)+r.currentValueTotalHeight)}t.exports=function(t){var e=t._fullLayout,r=function(t,e){for(var r=t[h.name],i=[],n=0;n<r.length;n++){var a=r[n];a.visible&&(a._gd=e,i.push(a))}return i}(e,t),a=e._infolayer.selectAll("g."+h.containerClassName).data(r.length>0?[0]:[]);function s(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),n.autoMargin(t,g(e))}if(a.enter().append("g").classed(h.containerClassName,!0).style("cursor","ew-resize"),a.exit().each((function(){i.select(this).selectAll("g."+h.groupClassName).each(s)})).remove(),0!==r.length){var l=a.selectAll("g."+h.groupClassName).data(r,v);l.enter().append("g").classed(h.groupClassName,!0),l.exit().each(s).remove();for(var u=0;u<r.length;u++){var c=r[u];m(t,c)}l.each((function(e){var r=i.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var r=t._stepCount,i=0;i<r;i+=e.labelStride)e.labelSteps.push({fraction:i/(r-1),step:t._visibleSteps[i]})}(e),n.manageCommandObserver(t,e,e._visibleSteps,(function(e){var i=r.data()[0];i.active!==e.index&&(i._dragging||A(t,r,i,e.index,!1,!0))})),function(t,e,r){(r.steps[r.active]||{}).visible||(r.active=r._visibleSteps[0]._index);e.call(y,r).call(L,r).call(_,r).call(M,r).call(C,t,r).call(x,t,r);var i=r._dims;o.setTranslate(e,i.lx+r.pad.l,i.ly+r.pad.t),e.call(k,r,!1),e.call(y,r)}(t,i.select(this),e)}))}}},function(t,e,r){"use strict";var i=r(6),n=r(675),a=r(716),o=r(845);t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:i.extendFlat({},n,{yaxis:a})}}},layoutAttributes:r(675),handleDefaults:r(846),calcAutorange:r(847),draw:r(848),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},function(t,e,r){"use strict";var i=r(110),n=r(108),a=r(676),o=r(81).LINE_SPACING,s=a.name;function l(t){var e=t&&t[s];return e&&e.visible}e.isVisible=l,e.makeData=function(t){var e=i.list({_fullLayout:t},"x",!0),r=t.margin,n=[];if(!t._has("gl2d"))for(var a=0;a<e.length;a++){var o=e[a];if(l(o)){n.push(o);var u=o[s];u._id=s+o._id,u._height=(t.height-r.b-r.t)*u.thickness,u._offsetShift=Math.floor(u.borderwidth/2)}}t._rangeSliderData=n},e.autoMarginOpts=function(t,e){var r=t._fullLayout,i=e[s],l=e._id.charAt(0),u=0,h=0;"bottom"===e.side&&(u=e._depth,e.title.text!==r._dfltTitle[l]&&(h=1.5*e.title.font.size+10+i._offsetShift,h+=(e.title.text.match(n.BR_TAG_ALL)||[]).length*e.title.font.size*o));return{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:i._height+u+Math.max(r.margin.b,h),pad:a.extraPad+2*i._offsetShift}}},function(t,e,r){"use strict";var i=r(6),n=r(58),a=r(110),o=r(675),s=r(716);t.exports=function(t,e,r){var l=t[r],u=e[r];if(l.rangeslider||e._requestRangeslider[u._id]){i.isPlainObject(l.rangeslider)||(l.rangeslider={});var h,c,f=l.rangeslider,d=n.newContainer(u,"rangeslider");if(_("visible")){_("bgcolor",e.plot_bgcolor),_("bordercolor"),_("borderwidth"),_("thickness"),_("autorange",!u.isValidRange(f.range)),_("range");var p=e._subplots;if(p)for(var g=p.cartesian.filter((function(t){return t.substr(0,t.indexOf("y"))===a.name2id(r)})).map((function(t){return t.substr(t.indexOf("y"),t.length)})),v=i.simpleMap(g,a.id2name),m=0;m<v.length;m++){var y=v[m];h=f[y]||{},c=n.newContainer(d,y,"yaxis");var x,b=e[y];h.range&&b.isValidRange(h.range)&&(x="fixed"),"match"!==w("rangemode",x)&&w("range",b.range.slice())}d._input=f}}function _(t,e){return i.coerce(f,d,o,t,e)}function w(t,e){return i.coerce(h,c,s,t,e)}}},function(t,e,r){"use strict";var i=r(110).list,n=r(214).getAutoRange,a=r(676);t.exports=function(t){for(var e=i(t,"x",!0),r=0;r<e.length;r++){var o=e[r],s=o[a.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=n(t,o))}}},function(t,e,r){"use strict";var i=r(24),n=r(23),a=r(107),o=r(6),s=r(106),l=r(57),u=r(216),h=r(626),c=r(110),f=r(650),d=r(665),p=r(676);function g(t,e,r,i){var n=o.ensureSingle(t,"rect",p.bgClassName,(function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})})),a=i.borderwidth%2==0?i.borderwidth:i.borderwidth-1,l=-i._offsetShift,u=s.crispRound(e,i.borderwidth);n.attr({width:i._width+a,height:i._height+a,transform:"translate("+l+","+l+")",fill:i.bgcolor,stroke:i.bordercolor,"stroke-width":u})}function v(t,e,r,i){var n=e._fullLayout;o.ensureSingleById(n._topdefs,"clipPath",i._clipId,(function(t){t.append("rect").attr({x:0,y:0})})).select("rect").attr({width:i._width,height:i._height})}function m(t,e,r,n){var l,u=e.calcdata,f=t.selectAll("g."+p.rangePlotClassName).data(r._subplotsWith,o.identity);f.enter().append("g").attr("class",(function(t){return p.rangePlotClassName+" "+t})).call(s.setClipUrl,n._clipId,e),f.order(),f.exit().remove(),f.each((function(t,o){var s=i.select(this),f=0===o,d=c.getFromId(e,t,"y"),p=d._name,g=n[p],v={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:n.range.slice(),calendar:r.calendar},width:n._width,height:n._height,margin:{t:0,b:0,l:0,r:0}},_context:e._context};r.rangebreaks&&(v.layout.xaxis.rangebreaks=r.rangebreaks),v.layout[p]={type:d.type,domain:[0,1],range:"match"!==g.rangemode?g.range.slice():d.range.slice(),calendar:d.calendar},d.rangebreaks&&(v.layout[p].rangebreaks=d.rangebreaks),a.supplyDefaults(v);var m=v._fullLayout.xaxis,y=v._fullLayout[p];m.clearCalc(),m.setScale(),y.clearCalc(),y.setScale();var x={id:t,plotgroup:s,xaxis:m,yaxis:y,isRangePlot:!0};f?l=x:(x.mainplot="xy",x.mainplotinfo=l),h.rangePlot(e,x,function(t,e){for(var r=[],i=0;i<t.length;i++){var n=t[i],a=n[0].trace;a.xaxis+a.yaxis===e&&r.push(n)}return r}(u,t))}))}function y(t,e,r,i,n){(o.ensureSingle(t,"rect",p.maskMinClassName,(function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})})).attr("height",i._height).call(l.fill,p.maskColor),o.ensureSingle(t,"rect",p.maskMaxClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})})).attr("height",i._height).call(l.fill,p.maskColor),"match"!==n.rangemode)&&(o.ensureSingle(t,"rect",p.maskMinOppAxisClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})})).attr("width",i._width).call(l.fill,p.maskOppAxisColor),o.ensureSingle(t,"rect",p.maskMaxOppAxisClassName,(function(t){t.attr({y:0,"shape-rendering":"crispEdges"})})).attr("width",i._width).style("border-top",p.maskOppBorder).call(l.fill,p.maskOppAxisColor))}function x(t,e,r,i){e._context.staticPlot||o.ensureSingle(t,"rect",p.slideBoxClassName,(function(t){t.attr({y:0,cursor:p.slideBoxCursor,"shape-rendering":"crispEdges"})})).attr({height:i._height,fill:p.slideBoxFill})}function b(t,e,r,i){var n=o.ensureSingle(t,"g",p.grabberMinClassName),a=o.ensureSingle(t,"g",p.grabberMaxClassName),s={x:0,width:p.handleWidth,rx:p.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":p.handleStrokeWidth,"shape-rendering":"crispEdges"},u={y:Math.round(i._height/4),height:Math.round(i._height/2)};if(o.ensureSingle(n,"rect",p.handleMinClassName,(function(t){t.attr(s)})).attr(u),o.ensureSingle(a,"rect",p.handleMaxClassName,(function(t){t.attr(s)})).attr(u),!e._context.staticPlot){var h={width:p.grabAreaWidth,x:0,y:0,fill:p.grabAreaFill,cursor:p.grabAreaCursor};o.ensureSingle(n,"rect",p.grabAreaMinClassName,(function(t){t.attr(h)})).attr("height",i._height),o.ensureSingle(a,"rect",p.grabAreaMaxClassName,(function(t){t.attr(h)})).attr("height",i._height)}}t.exports=function(t){for(var e=t._fullLayout,r=e._rangeSliderData,a=0;a<r.length;a++){var s=r[a][p.name];s._clipId=s._id+"-"+e._uid}var l=e._infolayer.selectAll("g."+p.containerClassName).data(r,(function(t){return t._name}));l.exit().each((function(t){var r=t[p.name];e._topdefs.select("#"+r._clipId).remove()})).remove(),0!==r.length&&(l.enter().append("g").classed(p.containerClassName,!0).attr("pointer-events","all"),l.each((function(r){var a=i.select(this),s=r[p.name],l=e[c.id2name(r.anchor)],h=s[c.id2name(r.anchor)];if(s.range){var _,w=o.simpleMap(s.range,r.r2l),A=o.simpleMap(r.range,r.r2l);_=A[0]<A[1]?[Math.min(w[0],A[0]),Math.max(w[1],A[1])]:[Math.max(w[0],A[0]),Math.min(w[1],A[1])],s.range=s._input.range=o.simpleMap(_,r.l2r)}r.cleanRange("rangeslider.range");var T=e._size,M=r.domain;s._width=T.w*(M[1]-M[0]);var k=Math.round(T.l+T.w*M[0]),E=Math.round(T.t+T.h*(1-r._counterDomainMin)+("bottom"===r.side?r._depth:0)+s._offsetShift+p.extraPad);a.attr("transform","translate("+k+","+E+")"),s._rl=o.simpleMap(s.range,r.r2l);var S=s._rl[0],C=s._rl[1],L=C-S;if(s.p2d=function(t){return t/s._width*L+S},s.d2p=function(t){return(t-S)/L*s._width},r.rangebreaks){var I=r.locateBreaks(S,C);if(I.length){var j,R,P=0;for(j=0;j<I.length;j++)P+=(R=I[j]).max-R.min;var O=s._width/(C-S-P),z=[-O*S];for(j=0;j<I.length;j++)R=I[j],z.push(z[z.length-1]-O*(R.max-R.min));for(s.d2p=function(t){for(var e=z[0],r=0;r<I.length;r++){var i=I[r];if(t>=i.max)e=z[r+1];else if(t<i.min)break}return e+O*t},j=0;j<I.length;j++)(R=I[j]).pmin=s.d2p(R.min),R.pmax=s.d2p(R.max);s.p2d=function(t){for(var e=z[0],r=0;r<I.length;r++){var i=I[r];if(t>=i.pmax)e=z[r+1];else if(t<i.pmin)break}return(t-e)/O}}}if("match"!==h.rangemode){var N=l.r2l(h.range[0]),B=l.r2l(h.range[1])-N;s.d2pOppAxis=function(t){return(t-N)/B*s._height}}a.call(g,t,r,s).call(v,t,r,s).call(m,t,r,s).call(y,t,r,s,h).call(x,t,r,s).call(b,t,r,s),function(t,e,r,a){var s=t.select("rect."+p.slideBoxClassName).node(),l=t.select("rect."+p.grabAreaMinClassName).node(),u=t.select("rect."+p.grabAreaMaxClassName).node();t.on("mousedown",(function(){var h=i.event,c=h.target,p=h.clientX,g=p-t.node().getBoundingClientRect().left,v=a.d2p(r._rl[0]),m=a.d2p(r._rl[1]),y=f.coverSlip();function x(t){var h,f,x,b=+t.clientX-p;switch(c){case s:x="ew-resize",h=v+b,f=m+b;break;case l:x="col-resize",h=v+b,f=m;break;case u:x="col-resize",h=v,f=m+b;break;default:x="ew-resize",h=g,f=g+b}if(f<h){var _=f;f=h,h=_}a._pixelMin=h,a._pixelMax=f,d(i.select(y),x),function(t,e,r,i){function a(t){return r.l2r(o.constrain(t,i._rl[0],i._rl[1]))}var s=a(i.p2d(i._pixelMin)),l=a(i.p2d(i._pixelMax));window.requestAnimationFrame((function(){n.call("_guiRelayout",e,r._name+".range",[s,l])}))}(0,e,r,a)}y.addEventListener("mousemove",x),y.addEventListener("mouseup",(function t(){y.removeEventListener("mousemove",x),y.removeEventListener("mouseup",t),o.removeElement(y)}))}))}(a,t,r,s),function(t,e,r,i,n,a){var s=p.handleWidth/2;function l(t){return o.constrain(t,0,i._width)}function u(t){return o.constrain(t,0,i._height)}function h(t){return o.constrain(t,-s,i._width+s)}var c=l(i.d2p(r._rl[0])),f=l(i.d2p(r._rl[1]));if(t.select("rect."+p.slideBoxClassName).attr("x",c).attr("width",f-c),t.select("rect."+p.maskMinClassName).attr("width",c),t.select("rect."+p.maskMaxClassName).attr("x",f).attr("width",i._width-f),"match"!==a.rangemode){var d=i._height-u(i.d2pOppAxis(n._rl[1])),g=i._height-u(i.d2pOppAxis(n._rl[0]));t.select("rect."+p.maskMinOppAxisClassName).attr("x",c).attr("height",d).attr("width",f-c),t.select("rect."+p.maskMaxOppAxisClassName).attr("x",c).attr("y",g).attr("height",i._height-g).attr("width",f-c),t.select("rect."+p.slideBoxClassName).attr("y",d).attr("height",g-d)}var v=Math.round(h(c-s))-.5,m=Math.round(h(f-s))+.5;t.select("g."+p.grabberMinClassName).attr("transform","translate("+v+",0.5)"),t.select("g."+p.grabberMaxClassName).attr("transform","translate("+m+",0.5)")}(a,0,r,s,l,h),"bottom"===r.side&&u.draw(t,r._id+"title",{propContainer:r,propName:r._name+".title",placeholder:e._dfltTitle.x,attributes:{x:r._offset+r._length/2,y:E+s._height+s._offsetShift+10+1.5*r.title.font.size,"text-anchor":"middle"}})})))}},function(t,e,r){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:r(677)}}},layoutAttributes:r(677),handleDefaults:r(850),draw:r(851)}},function(t,e,r){"use strict";var i=r(6),n=r(57),a=r(58),o=r(209),s=r(677),l=r(717);function u(t,e,r,n){var a=n.calendar;function o(r,n){return i.coerce(t,e,s.buttons,r,n)}if(o("visible")){var l=o("step");"all"!==l&&(!a||"gregorian"===a||"month"!==l&&"year"!==l?o("stepmode"):e.stepmode="backward",o("count")),o("label")}}t.exports=function(t,e,r,h,c){var f=t.rangeselector||{},d=a.newContainer(e,"rangeselector");function p(t,e){return i.coerce(f,d,s,t,e)}if(p("visible",o(f,d,{name:"buttons",handleItemDefaults:u,calendar:c}).length>0)){var g=function(t,e,r){for(var i=r.filter((function(r){return e[r].anchor===t._id})),n=0,a=0;a<i.length;a++){var o=e[i[a]].domain;o&&(n=Math.max(o[1],n))}return[t.domain[0],n+l.yPad]}(e,r,h);p("x",g[0]),p("y",g[1]),i.noneOrAll(t,e,["x","y"]),p("xanchor"),p("yanchor"),i.coerceFont(p,"font",r.font);var v=p("bgcolor");p("activecolor",n.contrast(v,l.lightAmount,l.darkAmount)),p("bordercolor"),p("borderwidth")}}},function(t,e,r){"use strict";var i=r(24),n=r(23),a=r(107),o=r(57),s=r(106),l=r(6),u=r(108),h=r(110),c=r(81),f=c.LINE_SPACING,d=c.FROM_TL,p=c.FROM_BR,g=r(717),v=r(852);function m(t){return t._id}function y(t,e,r){var i=l.ensureSingle(t,"rect","selector-rect",(function(t){t.attr("shape-rendering","crispEdges")}));i.attr({rx:g.rx,ry:g.ry}),i.call(o.stroke,e.bordercolor).call(o.fill,function(t,e){return e._isActive||e._isHovered?t.activecolor:t.bgcolor}(e,r)).style("stroke-width",e.borderwidth+"px")}function x(t,e,r,i){l.ensureSingle(t,"text","selector-text",(function(t){t.classed("user-select-none",!0).attr("text-anchor","middle")})).call(s.font,e.font).text(function(t,e){if(t.label)return e?l.templateString(t.label,e):t.label;return"all"===t.step?"all":t.count+t.step.charAt(0)}(r,i._fullLayout._meta)).call((function(t){u.convertToTspans(t,i)}))}t.exports=function(t){var e=t._fullLayout._infolayer.selectAll(".rangeselector").data(function(t){for(var e=h.list(t,"x",!0),r=[],i=0;i<e.length;i++){var n=e[i];n.rangeselector&&n.rangeselector.visible&&r.push(n)}return r}(t),m);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each((function(e){var r=i.select(this),o=e,h=o.rangeselector,c=r.selectAll("g.button").data(l.filterVisible(h.buttons));c.enter().append("g").classed("button",!0),c.exit().remove(),c.each((function(e){var r=i.select(this),a=v(o,e);e._isActive=function(t,e,r){if("all"===e.step)return!0===t.autorange;var i=Object.keys(r);return t.range[0]===r[i[0]]&&t.range[1]===r[i[1]]}(o,e,a),r.call(y,h,e),r.call(x,h,e,t),r.on("click",(function(){t._dragged||n.call("_guiRelayout",t,a)})),r.on("mouseover",(function(){e._isHovered=!0,r.call(y,h,e)})),r.on("mouseout",(function(){e._isHovered=!1,r.call(y,h,e)}))})),function(t,e,r,n,o){var h=0,c=0,v=r.borderwidth;e.each((function(){var t=i.select(this).select(".selector-text"),e=r.font.size*f,n=Math.max(e*u.lineCount(t),16)+3;c=Math.max(c,n)})),e.each((function(){var t=i.select(this),e=t.select(".selector-rect"),n=t.select(".selector-text"),a=n.node()&&s.bBox(n.node()).width,o=r.font.size*f,l=u.lineCount(n),d=Math.max(a+10,g.minButtonWidth);t.attr("transform","translate("+(v+h)+","+v+")"),e.attr({x:0,y:0,width:d,height:c}),u.positionText(n,d/2,c/2-(l-1)*o/2+3),h+=d+5}));var m=t._fullLayout._size,y=m.l+m.w*r.x,x=m.t+m.h*(1-r.y),b="left";l.isRightAnchor(r)&&(y-=h,b="right");l.isCenterAnchor(r)&&(y-=h/2,b="center");var _="top";l.isBottomAnchor(r)&&(x-=c,_="bottom");l.isMiddleAnchor(r)&&(x-=c/2,_="middle");h=Math.ceil(h),c=Math.ceil(c),y=Math.round(y),x=Math.round(x),a.autoMargin(t,n+"-range-selector",{x:r.x,y:r.y,l:h*d[b],r:h*p[b],b:c*p[_],t:c*d[_]}),o.attr("transform","translate("+y+","+x+")")}(t,c,h,o._name,r)}))}},function(t,e,r){"use strict";var i=r(24);t.exports=function(t,e){var r=t._name,n={};if("all"===e.step)n[r+".autorange"]=!0;else{var a=function(t,e){var r,n=t.range,a=new Date(t.r2l(n[1])),o=e.step,s=e.count;switch(e.stepmode){case"backward":r=t.l2r(+i.time[o].utc.offset(a,-s));break;case"todate":var l=i.time[o].utc.offset(a,-s);r=t.l2r(+i.time[o].utc.ceil(l))}var u=n[1];return[r,u]}(t,e);n[r+".range[0]"]=a[0],n[r+".range[1]"]=a[1]}return n}},function(t,e,r){"use strict";var i=r(6),n=r(109).overrideAll,a=r(718),o={error_x:i.extendFlat({},a),error_y:i.extendFlat({},a)};delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle;var s={error_x:i.extendFlat({},a),error_y:i.extendFlat({},a),error_z:i.extendFlat({},a)};delete s.error_x.copy_ystyle,delete s.error_y.copy_ystyle,delete s.error_z.copy_ystyle,delete s.error_z.copy_zstyle,t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:n(s,"calc","nested"),scattergl:n(o,"calc","nested")}},supplyDefaults:r(854),calc:r(855),makeComputeError:r(719),plot:r(856),style:r(857),hoverInfo:function(t,e,r){(e.error_y||{}).visible&&(r.yerr=t.yh-t.y,e.error_y.symmetric||(r.yerrneg=t.y-t.ys));(e.error_x||{}).visible&&(r.xerr=t.xh-t.x,e.error_x.symmetric||(r.xerrneg=t.x-t.xs))}}},function(t,e,r){"use strict";var i=r(12),n=r(23),a=r(6),o=r(58),s=r(718);t.exports=function(t,e,r,l){var u="error_"+l.axis,h=o.newContainer(e,u),c=t[u]||{};function f(t,e){return a.coerce(c,h,s,t,e)}if(!1!==f("visible",void 0!==c.array||void 0!==c.value||"sqrt"===c.type)){var d=f("type","array"in c?"data":"percent"),p=!0;"sqrt"!==d&&(p=f("symmetric",!(("data"===d?"arrayminus":"valueminus")in c))),"data"===d?(f("array"),f("traceref"),p||(f("arrayminus"),f("tracerefminus"))):"percent"!==d&&"constant"!==d||(f("value"),p||f("valueminus"));var g="copy_"+l.inherit+"style";if(l.inherit)(e["error_"+l.inherit]||{}).visible&&f(g,!(c.color||i(c.thickness)||i(c.width)));l.inherit&&h[g]||(f("color",r),f("thickness"),f("width",n.traceIs(e,"gl3d")?0:4))}}},function(t,e,r){"use strict";var i=r(12),n=r(23),a=r(105),o=r(6),s=r(719);function l(t,e,r,n){var l=e["error_"+n]||{},u=[];if(l.visible&&-1!==["linear","log"].indexOf(r.type)){for(var h=s(l),c=0;c<t.length;c++){var f=t[c],d=f.i;if(void 0===d)d=c;else if(null===d)continue;var p=f[n];if(i(r.c2l(p))){var g=h(p,d);if(i(g[0])&&i(g[1])){var v=f[n+"s"]=p-g[0],m=f[n+"h"]=p+g[1];u.push(v,m)}}}var y=r._id,x=e._extremes[y],b=a.findExtremes(r,u,o.extendFlat({tozero:x.opts.tozero},{padded:!0}));x.min=x.min.concat(b.min),x.max=x.max.concat(b.max)}}t.exports=function(t){for(var e=t.calcdata,r=0;r<e.length;r++){var i=e[r],o=i[0].trace;if(!0===o.visible&&n.traceIs(o,"errorBarsOK")){var s=a.getFromId(t,o.xaxis),u=a.getFromId(t,o.yaxis);l(i,o,s,"x"),l(i,o,u,"y")}}}},function(t,e,r){"use strict";var i=r(24),n=r(12),a=r(106),o=r(206);t.exports=function(t,e,r,s){var l=r.xaxis,u=r.yaxis,h=s&&s.duration>0;e.each((function(e){var c,f=e[0].trace,d=f.error_x||{},p=f.error_y||{};f.ids&&(c=function(t){return t.id});var g=o.hasMarkers(f)&&f.marker.maxdisplayed>0;p.visible||d.visible||(e=[]);var v=i.select(this).selectAll("g.errorbar").data(e,c);if(v.exit().remove(),e.length){d.visible||v.selectAll("path.xerror").remove(),p.visible||v.selectAll("path.yerror").remove(),v.style("opacity",1);var m=v.enter().append("g").classed("errorbar",!0);h&&m.style("opacity",0).transition().duration(s.duration).style("opacity",1),a.setClipUrl(v,r.layerClipId,t),v.each((function(t){var e=i.select(this),r=function(t,e,r){var i={x:e.c2p(t.x),y:r.c2p(t.y)};void 0!==t.yh&&(i.yh=r.c2p(t.yh),i.ys=r.c2p(t.ys),n(i.ys)||(i.noYS=!0,i.ys=r.c2p(t.ys,!0)));void 0!==t.xh&&(i.xh=e.c2p(t.xh),i.xs=e.c2p(t.xs),n(i.xs)||(i.noXS=!0,i.xs=e.c2p(t.xs,!0)));return i}(t,l,u);if(!g||t.vis){var a,o=e.select("path.yerror");if(p.visible&&n(r.x)&&n(r.yh)&&n(r.ys)){var c=p.width;a="M"+(r.x-c)+","+r.yh+"h"+2*c+"m-"+c+",0V"+r.ys,r.noYS||(a+="m-"+c+",0h"+2*c),!o.size()?o=e.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):h&&(o=o.transition().duration(s.duration).ease(s.easing)),o.attr("d",a)}else o.remove();var f=e.select("path.xerror");if(d.visible&&n(r.y)&&n(r.xh)&&n(r.xs)){var v=(d.copy_ystyle?p:d).width;a="M"+r.xh+","+(r.y-v)+"v"+2*v+"m0,-"+v+"H"+r.xs,r.noXS||(a+="m0,-"+v+"v"+2*v),!f.size()?f=e.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):h&&(f=f.transition().duration(s.duration).ease(s.easing)),f.attr("d",a)}else f.remove()}}))}}))}},function(t,e,r){"use strict";var i=r(24),n=r(57);t.exports=function(t){t.each((function(t){var e=t[0].trace,r=e.error_y||{},a=e.error_x||{},o=i.select(this);o.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(n.stroke,r.color),a.copy_ystyle&&(a=r),o.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(n.stroke,a.color)}))}},function(t,e,r){"use strict";t.exports={moduleType:"component",name:"colorbar",attributes:r(156),supplyDefaults:r(230),draw:r(859).draw,hasColorbar:r(229)}},function(t,e,r){"use strict";var i=r(24),n=r(60),a=r(107),o=r(23),s=r(105),l=r(650),u=r(6),h=r(32).extendFlat,c=r(665),f=r(106),d=r(57),p=r(216),g=r(108),v=r(79).flipScale,m=r(737),y=r(902),x=r(61),b=r(81),_=b.LINE_SPACING,w=b.FROM_TL,A=b.FROM_BR,T=r(860).cn;t.exports={draw:function(t){var e=t._fullLayout._infolayer.selectAll("g."+T.colorbar).data(function(t){var e,r,i,n,a=t._fullLayout,o=t.calcdata,s=[];function l(t){return h(t,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function u(){"function"==typeof n.calc?n.calc(t,i,e):(e._fillgradient=r.reversescale?v(r.colorscale):r.colorscale,e._zrange=[r[n.min],r[n.max]])}for(var c=0;c<o.length;c++){var f=o[c],d=(i=f[0].trace)._module.colorbar;if(!0===i.visible&&d)for(var p=Array.isArray(d),g=p?d:[d],m=0;m<g.length;m++){var y=(n=g[m]).container;(r=y?i[y]:i)&&r.showscale&&((e=l(r.colorbar))._id="cb"+i.uid+(p&&y?"-"+y:""),e._traceIndex=i.index,e._propPrefix=(y?y+".":"")+"colorbar.",e._meta=i._meta,u(),s.push(e))}}for(var x in a._colorAxes)if((r=a[x]).showscale){var b=a._colorAxes[x];(e=l(r.colorbar))._id="cb"+x,e._propPrefix=x+".colorbar.",e._meta=a._meta,n={min:"cmin",max:"cmax"},"heatmap"!==b[0]&&(i=b[1],n.calc=i._module.colorbar.calc),u(),s.push(e)}return s}(t),(function(t){return t._id}));e.enter().append("g").attr("class",(function(t){return t._id})).classed(T.colorbar,!0),e.each((function(e){var r=i.select(this);u.ensureSingle(r,"rect",T.cbbg),u.ensureSingle(r,"g",T.cbfills),u.ensureSingle(r,"g",T.cblines),u.ensureSingle(r,"g",T.cbaxis,(function(t){t.classed(T.crisp,!0)})),u.ensureSingle(r,"g",T.cbtitleunshift,(function(t){t.append("g").classed(T.cbtitle,!0)})),u.ensureSingle(r,"rect",T.cboutline);var v=function(t,e,r){var o=r._fullLayout,l=o._size,c=e._fillcolor,v=e._line,b=e.title,M=b.side,k=e._zrange||i.extent(("function"==typeof c?c:v.color).domain()),E="function"==typeof v.color?v.color:function(){return v.color},S="function"==typeof c?c:function(){return c},C=e._levels,L=function(t,e,r){var i,n,a=e._levels,o=[],s=[],l=a.end+a.size/100,u=a.size,h=1.001*r[0]-.001*r[1],c=1.001*r[1]-.001*r[0];for(n=0;n<1e5&&(i=a.start+n*u,!(u>0?i>=l:i<=l));n++)i>h&&i<c&&o.push(i);if(e._fillgradient)s=[0];else if("function"==typeof e._fillcolor){var f=e._filllevels;if(f)for(l=f.end+f.size/100,u=f.size,n=0;n<1e5&&(i=f.start+n*u,!(u>0?i>=l:i<=l));n++)i>r[0]&&i<r[1]&&s.push(i);else(s=o.map((function(t){return t-a.size/2}))).push(s[s.length-1]+a.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(s=[0]);a.size<0&&(o.reverse(),s.reverse());return{line:o,fill:s}}(0,e,k),I=L.fill,j=L.line,R=Math.round(e.thickness*("fraction"===e.thicknessmode?l.w:1)),P=R/l.w,O=Math.round(e.len*("fraction"===e.lenmode?l.h:1)),z=O/l.h,N=e.xpad/l.w,B=(e.borderwidth+e.outlinewidth)/2,F=e.ypad/l.h,D=Math.round(e.x*l.w+e.xpad),U=e.x-P*({middle:.5,right:1}[e.xanchor]||0),V=e.y+z*(({top:-.5,bottom:.5}[e.yanchor]||0)-.5),X=Math.round(l.h*(1-V)),G=X-O;e._lenFrac=z,e._thickFrac=P,e._xLeftFrac=U,e._yBottomFrac=V;var W=e._axis=function(t,e,r){var i=t._fullLayout,n={type:"linear",range:r,tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,tickfont:e.tickfont,tickangle:e.tickangle,tickformat:e.tickformat,exponentformat:e.exponentformat,separatethousands:e.separatethousands,showexponent:e.showexponent,showtickprefix:e.showtickprefix,tickprefix:e.tickprefix,showticksuffix:e.showticksuffix,ticksuffix:e.ticksuffix,title:e.title,showline:!0,anchor:"free",side:"right",position:1},a={type:"linear",_id:"y"+e._id},o={letter:"y",font:i.font,noHover:!0,noTickson:!0,calendar:i.calendar};function s(t,e){return u.coerce(n,a,x,t,e)}return m(n,a,s,o,i),y(n,a,s,o),a}(r,e,k);W.position=e.x+N+P,-1!==["top","bottom"].indexOf(M)&&(W.title.side=M,W.titlex=e.x+N,W.titley=V+("top"===b.side?z-F:F));if(v.color&&"auto"===e.tickmode){W.tickmode="linear",W.tick0=C.start;var H=C.size,q=u.constrain((X-G)/50,4,15)+1,Y=(k[1]-k[0])/((e.nticks||q)*H);if(Y>1){var Z=Math.pow(10,Math.floor(Math.log(Y)/Math.LN10));H*=Z*u.roundUp(Y/Z,[2,5,10]),(Math.abs(C.start)/C.size+1e-6)%1<2e-6&&(W.tick0=0)}W.dtick=H}W.domain=[V+F,V+z-F],W.setScale(),t.attr("transform","translate("+Math.round(l.l)+","+Math.round(l.t)+")");var Q,K=t.select("."+T.cbtitleunshift).attr("transform","translate(-"+Math.round(l.l)+",-"+Math.round(l.t)+")"),J=t.select("."+T.cbaxis),$=0;function tt(i,n){var a={propContainer:W,propName:e._propPrefix+"title",traceIndex:e._traceIndex,_meta:e._meta,placeholder:o._dfltTitle.colorbar,containerGroup:t.select("."+T.cbtitle)},s="h"===i.charAt(0)?i.substr(1):"h"+i;t.selectAll("."+s+",."+s+"-math-group").remove(),p.draw(r,i,h(a,n||{}))}return u.syncOrAsync([a.previousPromises,function(){if(-1!==["top","bottom"].indexOf(M)){var t,r=l.l+(e.x+N)*l.w,i=W.title.font.size;t="top"===M?(1-(V+z-F))*l.h+l.t+3+.75*i:(1-(V+F))*l.h+l.t-3-.25*i,tt(W._id+"title",{attributes:{x:r,y:t,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(M)){var a=t.select("."+T.cbtitle),o=a.select("text"),h=[-e.outlinewidth/2,e.outlinewidth/2],c=a.select(".h"+W._id+"title-math-group").node(),d=15.6;if(o.node()&&(d=parseInt(o.node().style.fontSize,10)*_),c?($=f.bBox(c).height)>d&&(h[1]-=($-d)/2):o.node()&&!o.classed(T.jsPlaceholder)&&($=f.bBox(o.node()).height),$){if($+=5,"top"===M)W.domain[1]-=$/l.h,h[1]*=-1;else{W.domain[0]+=$/l.h;var p=g.lineCount(o);h[1]+=(1-p)*d}a.attr("transform","translate("+h+")"),W.setScale()}}t.selectAll("."+T.cbfills+",."+T.cblines).attr("transform","translate(0,"+Math.round(l.h*(1-W.domain[1]))+")"),J.attr("transform","translate(0,"+Math.round(-l.t)+")");var m=t.select("."+T.cbfills).selectAll("rect."+T.cbfill).data(I);m.enter().append("rect").classed(T.cbfill,!0).style("stroke","none"),m.exit().remove();var y=k.map(W.c2p).map(Math.round).sort((function(t,e){return t-e}));m.each((function(t,a){var o=[0===a?k[0]:(I[a]+I[a-1])/2,a===I.length-1?k[1]:(I[a]+I[a+1])/2].map(W.c2p).map(Math.round);o[1]=u.constrain(o[1]+(o[1]>o[0])?1:-1,y[0],y[1]);var s=i.select(this).attr({x:D,width:Math.max(R,2),y:i.min(o),height:Math.max(i.max(o)-i.min(o),2)});if(e._fillgradient)f.gradient(s,r,e._id,"vertical",e._fillgradient,"fill");else{var l=S(t).replace("e-","");s.attr("fill",n(l).toHexString())}}));var x=t.select("."+T.cblines).selectAll("path."+T.cbline).data(v.color&&v.width?j:[]);x.enter().append("path").classed(T.cbline,!0),x.exit().remove(),x.each((function(t){i.select(this).attr("d","M"+D+","+(Math.round(W.c2p(t))+v.width/2%1)+"h"+R).call(f.lineGroupStyle,v.width,E(t),v.dash)})),J.selectAll("g."+W._id+"tick,path").remove();var b=D+R+(e.outlinewidth||0)/2-("outside"===e.ticks?1:0),w=s.calcTicks(W),A=s.makeTransFn(W),C=s.getTickSigns(W)[2];return s.drawTicks(r,W,{vals:"inside"===W.ticks?s.clipEnds(W,w):w,layer:J,path:s.makeTickPath(W,b,C),transFn:A}),s.drawLabels(r,W,{vals:w,layer:J,transFn:A,labelFns:s.makeLabelFns(W,b)})},function(){if(-1===["top","bottom"].indexOf(M)){var t=W.title.font.size,e=W._offset+W._length/2,n=l.l+(W.position||0)*l.w+("right"===W.side?10+t*(W.showticklabels?1:.5):-10-t*(W.showticklabels?.5:0));tt("h"+W._id+"title",{avoid:{selection:i.select(r).selectAll("g."+W._id+"tick"),side:M,offsetLeft:l.l,offsetTop:0,maxShift:o.width},attributes:{x:n,y:e,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},a.previousPromises,function(){var i=R+e.outlinewidth/2+f.bBox(J.node()).width;if((Q=K.select("text")).node()&&!Q.classed(T.jsPlaceholder)){var n,o=K.select(".h"+W._id+"title-math-group").node();n=o&&-1!==["top","bottom"].indexOf(M)?f.bBox(o).width:f.bBox(K.node()).right-D-l.l,i=Math.max(i,n)}var s=2*e.xpad+i+e.borderwidth+e.outlinewidth/2,u=X-G;t.select("."+T.cbbg).attr({x:D-e.xpad-(e.borderwidth+e.outlinewidth)/2,y:G-B,width:Math.max(s,2),height:Math.max(u+2*B,2)}).call(d.fill,e.bgcolor).call(d.stroke,e.bordercolor).style("stroke-width",e.borderwidth),t.selectAll("."+T.cboutline).attr({x:D,y:G+e.ypad+("top"===M?$:0),width:Math.max(R,2),height:Math.max(u-2*e.ypad-$,2)}).call(d.stroke,e.outlinecolor).style({fill:"none","stroke-width":e.outlinewidth});var h=({center:.5,right:1}[e.xanchor]||0)*s;t.attr("transform","translate("+(l.l-h)+","+l.t+")");var c={},p=w[e.yanchor],g=A[e.yanchor];"pixels"===e.lenmode?(c.y=e.y,c.t=u*p,c.b=u*g):(c.t=c.b=0,c.yt=e.y+e.len*p,c.yb=e.y-e.len*g);var v=w[e.xanchor],m=A[e.xanchor];if("pixels"===e.thicknessmode)c.x=e.x,c.l=s*v,c.r=s*m;else{var y=s-R;c.l=y*v,c.r=y*m,c.xl=e.x-e.thickness*v,c.xr=e.x+e.thickness*m}a.autoMargin(r,e._id,c)}],r)}(r,e,t);v&&v.then&&(t._promises||[]).push(v),t._context.edits.colorbarPosition&&function(t,e,r){var i,n,a,s=r._fullLayout._size;l.init({element:t.node(),gd:r,prepFn:function(){i=t.attr("transform"),c(t)},moveFn:function(r,o){t.attr("transform",i+" translate("+r+","+o+")"),n=l.align(e._xLeftFrac+r/s.w,e._thickFrac,0,1,e.xanchor),a=l.align(e._yBottomFrac-o/s.h,e._lenFrac,0,1,e.yanchor);var u=l.getCursor(n,a,e.xanchor,e.yanchor);c(t,u)},doneFn:function(){if(c(t),void 0!==n&&void 0!==a){var i={};i[e._propPrefix+"x"]=n,i[e._propPrefix+"y"]=a,void 0!==e._traceIndex?o.call("_guiRestyle",r,i,e._traceIndex):o.call("_guiRelayout",r,i)}}})}(r,e,t)})),e.exit().each((function(e){a.autoMargin(t,e._id)})).remove(),e.order()}}},function(t,e,r){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},function(t,e,r){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},function(t,e,r){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},function(t,e,r){"use strict";var i=r(632),n={getDelay:i.getDelay,getRedrawFunc:i.getRedrawFunc,clone:r(720),toSVG:r(669),svgToImg:r(670),toImage:r(864),downloadImage:r(710)};t.exports=n},function(t,e,r){"use strict";var i=r(770).EventEmitter,n=r(23),a=r(6),o=r(632),s=r(720),l=r(669),u=r(670);t.exports=function(t,e){var r=new i,h=s(t,{format:"png"}),c=h.gd;c.style.position="absolute",c.style.left="-5000px",document.body.appendChild(c);var f=o.getRedrawFunc(c);return n.call("plot",c,h.data,h.layout,h.config).then(f).then((function(){var t=o.getDelay(c._fullLayout);setTimeout((function(){var t=l(c),i=document.createElement("canvas");i.id=a.randstr(),(r=u({format:e.format,width:c._fullLayout.width,height:c._fullLayout.height,canvas:i,emitter:r,svg:t})).clean=function(){c&&document.body.removeChild(c)}}),t)})).catch((function(t){r.emit("error",t)})),r}},function(t,e,r){"use strict";var i=r(783);t.exports=a;function n(t,e){var r=i(getComputedStyle(t).getPropertyValue(e));return r[0]*a(r[1],t)}function a(t,e){switch(e=e||document.body,t=(t||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return function(t,e){var r=document.createElement("div");r.style["font-size"]="128"+t,e.appendChild(r);var i=n(r,"font-size")/128;return e.removeChild(r),i}(t,e);case"em":return n(e,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}},function(t,e,r){"use strict";t.exports=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}},function(t,e){},function(t,e,r){"use strict";var i=r(111),n=r(150).hovertemplateAttrs,a=r(806),o=r(59),s=r(32).extendFlat;t.exports=s({x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the X coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Y coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Z coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},i:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *first* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `i[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `i` represents a","point in space, which is the first vertex of a triangle."].join(" ")},j:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *second* vertex of a triangle. For example, `{i[m], j[m], k[m]}` ","together represent face m (triangle m) in the mesh, where `j[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `j` represents a","point in space, which is the second vertex of a triangle."].join(" ")},k:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *third* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `k[m] = n` points to the triplet ","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `k` represents a","point in space, which is the third vertex of a triangle."].join(" ")},text:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:n({editType:"calc"}),delaunayaxis:{valType:"enumerated",role:"info",values:["x","y","z"],dflt:"z",editType:"calc",description:["Sets the Delaunay axis, which is the axis that is perpendicular to the surface of the","Delaunay triangulation.","It has an effect if `i`, `j`, `k` are not provided and `alphahull` is set to indicate","Delaunay triangulation."].join(" ")},alphahull:{valType:"number",role:"style",dflt:-1,editType:"calc",description:["Determines how the mesh surface triangles are derived from the set of","vertices (points) represented by the `x`, `y` and `z` arrays, if","the `i`, `j`, `k` arrays are not supplied.","For general use of `mesh3d` it is preferred that `i`, `j`, `k` are","supplied.","If *-1*, Delaunay triangulation is used, which is mainly suitable if the","mesh is a single, more or less layer surface that is perpendicular to `delaunayaxis`.","In case the `delaunayaxis` intersects the mesh surface at more than one point","it will result triangles that are very long in the dimension of `delaunayaxis`.","If *>0*, the alpha-shape algorithm is used. In this case, the positive `alphahull` value","signals the use of the alpha-shape algorithm, _and_ its value","acts as the parameter for the mesh fitting.","If *0*,  the convex-hull algorithm is used. It is suitable for convex bodies","or if the intention is to enclose the `x`, `y` and `z` point set into a convex","hull."].join(" ")},intensity:{valType:"data_array",editType:"calc",description:["Sets the intensity values for vertices or cells","as defined by `intensitymode`.","It can be used for plotting fields on meshes."].join(" ")},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc",role:"info",description:["Determines the source of `intensity` values."].join(" ")},color:{valType:"color",role:"style",editType:"calc",description:"Sets the color of the whole mesh"},vertexcolor:{valType:"data_array",role:"style",editType:"calc",description:["Sets the color of each vertex","Overrides *color*. While Red, green and blue colors","are in the range of 0 and 255; in the case of having","vertex color data in RGBA format, the alpha color","should be normalized to be between 0 and 1."].join(" ")},facecolor:{valType:"data_array",role:"style",editType:"calc",description:["Sets the color of each face","Overrides *color* and *vertexcolor*."].join(" ")},transforms:void 0},i("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:a.opacity,flatshading:{valType:"boolean",role:"style",dflt:!1,editType:"calc",description:["Determines whether or not normal smoothing is applied to the meshes,","creating meshes with an angular, low-poly look via flat reflections."].join(" ")},contour:{show:s({},a.contours.x.show,{description:["Sets whether or not dynamic contours are shown on hover"].join(" ")}),color:a.contours.x.color,width:a.contours.x.width,editType:"calc"},lightposition:{x:s({},a.lightposition.x,{dflt:1e5}),y:s({},a.lightposition.y,{dflt:1e5}),z:s({},a.lightposition.z,{dflt:0}),editType:"calc"},lighting:s({vertexnormalsepsilon:{valType:"number",role:"style",min:0,max:1,dflt:1e-12,editType:"calc",description:"Epsilon for vertex normals calculation avoids math issues arising from degenerate geometry."},facenormalsepsilon:{valType:"number",role:"style",min:0,max:1,dflt:1e-6,editType:"calc",description:"Epsilon for face normals calculation avoids math issues arising from degenerate geometry."},editType:"calc"},a.lighting),hoverinfo:s({},o.hoverinfo,{editType:"calc"}),showlegend:s({},o.showlegend,{dflt:!1})})},function(t,e,r){"use strict";t.exports=function(t,e,r,i){i=i||t.length;for(var n=new Array(i),a=0;a<i;a++)n[a]=[t[a],e[a],r[a]];return n}},,,,,,,,,function(t,e,r){"use strict";t.exports=function(t,e){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(t,e){for(var r=a(t,e),i=r.length,n=new Array(i),o=new Array(i),s=0;s<i;++s)n[s]=[r[s]],o[s]=[s];return{positions:n,cells:o}}(t,e);var r=t.order.join()+"-"+t.dtype,s=o[r];e=+e||0;s||(s=o[r]=function(t,e){var r=t.length,a=["'use strict';"],o="surfaceNets"+t.join("_")+"d"+e;a.push("var contour=genContour({","order:[",t.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===e&&a.push("getters:[0],");for(var s=[],l=[],u=0;u<r;++u)s.push("d"+u),l.push("d"+u);for(u=0;u<1<<r;++u)s.push("v"+u),l.push("v"+u);for(u=0;u<1<<r;++u)s.push("p"+u),l.push("p"+u);s.push("a","b","c"),l.push("a","c"),a.push("vertex:function vertexFunc(",s.join(),"){");var h=[];for(u=0;u<1<<r;++u)h.push("(p"+u+"<<"+u+")");a.push("var m=(",h.join("+"),")|0;if(m===0||m===",(1<<(1<<r))-1,"){return}");var c=[],f=[];1<<(1<<r)<=128?(a.push("switch(m){"),f=a):a.push("switch(m>>>7){");for(u=0;u<1<<(1<<r);++u){if(1<<(1<<r)>128&&u%128==0){c.length>0&&f.push("}}");var d="vExtra"+c.length;a.push("case ",u>>>7,":",d,"(m&0x7f,",l.join(),");break;"),f=["function ",d,"(m,",l.join(),"){switch(m){"],c.push(f)}f.push("case ",127&u,":");for(var p=new Array(r),g=new Array(r),v=new Array(r),m=new Array(r),y=0,x=0;x<r;++x)p[x]=[],g[x]=[],v[x]=0,m[x]=0;for(x=0;x<1<<r;++x)for(var b=0;b<r;++b){var _=x^1<<b;if(!(_>x)&&!(u&1<<_)!=!(u&1<<x)){var w=1;u&1<<_?g[b].push("v"+_+"-v"+x):(g[b].push("v"+x+"-v"+_),w=-w),w<0?(p[b].push("-v"+x+"-v"+_),v[b]+=2):(p[b].push("v"+x+"+v"+_),v[b]-=2),y+=1;for(var A=0;A<r;++A)A!==b&&(_&1<<A?m[A]+=1:m[A]-=1)}}var T=[];for(b=0;b<r;++b)if(0===p[b].length)T.push("d"+b+"-0.5");else{var M="";v[b]<0?M=v[b]+"*c":v[b]>0&&(M="+"+v[b]+"*c");var k=p[b].length/y*.5,E=.5+m[b]/y*.5;T.push("d"+b+"-"+E+"-"+k+"*("+p[b].join("+")+M+")/("+g[b].join("+")+")")}f.push("a.push([",T.join(),"]);","break;")}a.push("}},"),c.length>0&&f.push("}}");var S=[];for(u=0;u<1<<r-1;++u)S.push("v"+u);S.push("c0","c1","p0","p1","a","b","c"),a.push("cell:function cellFunc(",S.join(),"){");var C=n(r-1);a.push("if(p0){b.push(",C.map((function(t){return"["+t.map((function(t){return"v"+t}))+"]"})).join(),")}else{b.push(",C.map((function(t){var e=t.slice();return e.reverse(),"["+e.map((function(t){return"v"+t}))+"]"})).join(),")}}});function ",o,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",o,";");for(u=0;u<c.length;++u)a.push(c[u].join(""));return new Function("genContour",a.join(""))(i)}(t.order,t.dtype));return s(t,e)};var i=r(950),n=r(951),a=r(956);var o={}},,,,,,function(t,e){t.exports=function(t,e){var r=e[0],i=e[1],n=e[2],a=r*r+i*i+n*n;a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a);return t}},function(t,e,r){"use strict";t.exports=function(t,e){e||(e=t,t=window);var r=0,n=0,a=0,o={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function l(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==o.alt,o.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==o.shift,o.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==o.control,o.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==o.meta,o.meta=!!t.metaKey),e}function u(t,s){var u=i.x(s),h=i.y(s);"buttons"in s&&(t=0|s.buttons),(t!==r||u!==n||h!==a||l(s))&&(r=0|t,n=u||0,a=h||0,e&&e(r,n,a,o))}function h(t){u(0,t)}function c(){(r||n||a||o.shift||o.alt||o.meta||o.control)&&(n=a=0,r=0,o.shift=o.alt=o.control=o.meta=!1,e&&e(0,0,0,o))}function f(t){l(t)&&e&&e(r,n,a,o)}function d(t){0===i.buttons(t)?u(0,t):u(r,t)}function p(t){u(r|i.buttons(t),t)}function g(t){u(r&~i.buttons(t),t)}function v(){s||(s=!0,t.addEventListener("mousemove",d),t.addEventListener("mousedown",p),t.addEventListener("mouseup",g),t.addEventListener("mouseleave",h),t.addEventListener("mouseenter",h),t.addEventListener("mouseout",h),t.addEventListener("mouseover",h),t.addEventListener("blur",c),t.addEventListener("keyup",f),t.addEventListener("keydown",f),t.addEventListener("keypress",f),t!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",f),window.addEventListener("keydown",f),window.addEventListener("keypress",f)))}v();var m={element:t};return Object.defineProperties(m,{enabled:{get:function(){return s},set:function(e){e?v():function(){if(!s)return;s=!1,t.removeEventListener("mousemove",d),t.removeEventListener("mousedown",p),t.removeEventListener("mouseup",g),t.removeEventListener("mouseleave",h),t.removeEventListener("mouseenter",h),t.removeEventListener("mouseout",h),t.removeEventListener("mouseover",h),t.removeEventListener("blur",c),t.removeEventListener("keyup",f),t.removeEventListener("keydown",f),t.removeEventListener("keypress",f),t!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",f),window.removeEventListener("keydown",f),window.removeEventListener("keypress",f))}()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),m};var i=r(945)},function(t,e,r){"use strict";e.byteLength=function(t){var e=u(t),r=e[0],i=e[1];return 3*(r+i)/4-i},e.toByteArray=function(t){var e,r,i=u(t),o=i[0],s=i[1],l=new a(function(t,e,r){return 3*(e+r)/4-r}(0,o,s)),h=0,c=s>0?o-4:o;for(r=0;r<c;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=255&e;2===s&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,l[h++]=255&e);1===s&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,l[h++]=e>>8&255,l[h++]=255&e);return l},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,a=[],o=0,s=r-n;o<s;o+=16383)a.push(h(t,o,o+16383>s?s:o+16383));1===n?(e=t[r-1],a.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],a.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return a.join("")};for(var i=[],n=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)i[s]=o[s],n[o.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function h(t,e,r){for(var n,a,o=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(i[(a=n)>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,i,n){var a,o,s=8*n-i-1,l=(1<<s)-1,u=l>>1,h=-7,c=r?n-1:0,f=r?-1:1,d=t[e+c];for(c+=f,a=d&(1<<-h)-1,d>>=-h,h+=s;h>0;a=256*a+t[e+c],c+=f,h-=8);for(o=a&(1<<-h)-1,a>>=-h,h+=i;h>0;o=256*o+t[e+c],c+=f,h-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),a-=u}return(d?-1:1)*o*Math.pow(2,a-i)},e.write=function(t,e,r,i,n,a){var o,s,l,u=8*a-n-1,h=(1<<u)-1,c=h>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+c>=1?f/l:f*Math.pow(2,1-c))*l>=2&&(o++,l/=2),o+c>=h?(s=0,o=h):o+c>=1?(s=(e*l-1)*Math.pow(2,n),o+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;t[r+d]=255&s,d+=p,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;t[r+d]=255&o,d+=p,o/=256,u-=8);t[r+d-p]|=128*g}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";t.exports=function(t,e){"object"==typeof e&&null!==e||(e={});return i(t,e.canvas||n,e.context||a,e)};var i=r(949),n=null,a=null;"undefined"!=typeof document&&((n=document.createElement("canvas")).width=8192,n.height=1024,a=n.getContext("2d"))},,,,,,,,function(t,e,r){"use strict";function i(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=i;var n=i.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.find=function(t){for(var e=t,r=this.roots;r[t]!==t;)t=r[t];for(;r[e]!==t;){var i=r[e];r[e]=t,e=i}return t},n.link=function(t,e){var r=this.find(t),i=this.find(e);if(r!==i){var n=this.ranks,a=this.roots,o=n[r],s=n[i];o<s?a[r]=i:s<o?a[i]=r:(a[i]=r,++n[r])}}},function(t,e,r){"use strict";var i=r(742);t.exports=function(t,e,r,i){n||(n=t.FRAMEBUFFER_UNSUPPORTED,a=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,s=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var u=t.getExtension("WEBGL_draw_buffers");!l&&u&&function(t,e){var r=t.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(r+1);for(var i=0;i<=r;++i){for(var n=new Array(r),a=0;a<i;++a)n[a]=t.COLOR_ATTACHMENT0+a;for(a=i;a<r;++a)n[a]=t.NONE;l[i]=n}}(t,u);Array.isArray(e)&&(i=r,r=0|e[1],e=0|e[0]);if("number"!=typeof e)throw new Error("gl-fbo: Missing shape parameter");var h=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(e<0||e>h||r<0||r>h)throw new Error("gl-fbo: Parameters are too large for FBO");var c=1;if("color"in(i=i||{})){if((c=Math.max(0|i.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(c>1){if(!u)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(c>t.getParameter(u.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+c+" draw buffers")}}var f=t.UNSIGNED_BYTE,d=t.getExtension("OES_texture_float");if(i.float&&c>0){if(!d)throw new Error("gl-fbo: Context does not support floating point textures");f=t.FLOAT}else i.preferFloat&&c>0&&d&&(f=t.FLOAT);var g=!0;"depth"in i&&(g=!!i.depth);var v=!1;"stencil"in i&&(v=!!i.stencil);return new p(t,e,r,f,c,g,v,u)};var n,a,o,s,l=null;function u(t){return[t.getParameter(t.FRAMEBUFFER_BINDING),t.getParameter(t.RENDERBUFFER_BINDING),t.getParameter(t.TEXTURE_BINDING_2D)]}function h(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e[0]),t.bindRenderbuffer(t.RENDERBUFFER,e[1]),t.bindTexture(t.TEXTURE_2D,e[2])}function c(t){switch(t){case n:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case s:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function f(t,e,r,n,a,o){if(!n)return null;var s=i(t,e,r,a,n);return s.magFilter=t.NEAREST,s.minFilter=t.NEAREST,s.mipSamples=1,s.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,o,t.TEXTURE_2D,s.handle,0),s}function d(t,e,r,i,n){var a=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,a),t.renderbufferStorage(t.RENDERBUFFER,i,e,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,n,t.RENDERBUFFER,a),a}function p(t,e,r,i,n,a,o,s){this.gl=t,this._shape=[0|e,0|r],this._destroyed=!1,this._ext=s,this.color=new Array(n);for(var p=0;p<n;++p)this.color[p]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=i,this._useDepth=a,this._useStencil=o;var g=this,v=[0|e,0|r];Object.defineProperties(v,{0:{get:function(){return g._shape[0]},set:function(t){return g.width=t}},1:{get:function(){return g._shape[1]},set:function(t){return g.height=t}}}),this._shapeVector=v,function(t){var e=u(t.gl),r=t.gl,i=t.handle=r.createFramebuffer(),n=t._shape[0],a=t._shape[1],o=t.color.length,s=t._ext,p=t._useStencil,g=t._useDepth,v=t._colorType;r.bindFramebuffer(r.FRAMEBUFFER,i);for(var m=0;m<o;++m)t.color[m]=f(r,n,a,v,r.RGBA,r.COLOR_ATTACHMENT0+m);0===o?(t._color_rb=d(r,n,a,r.RGBA4,r.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(l[0])):o>1&&s.drawBuffersWEBGL(l[o]);var y=r.getExtension("WEBGL_depth_texture");y?p?t.depth=f(r,n,a,y.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):g&&(t.depth=f(r,n,a,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):g&&p?t._depth_rb=d(r,n,a,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):g?t._depth_rb=d(r,n,a,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):p&&(t._depth_rb=d(r,n,a,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var x=r.checkFramebufferStatus(r.FRAMEBUFFER);if(x!==r.FRAMEBUFFER_COMPLETE){t._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(t.handle),t.handle=null,t.depth&&(t.depth.dispose(),t.depth=null),t._depth_rb&&(r.deleteRenderbuffer(t._depth_rb),t._depth_rb=null);for(m=0;m<t.color.length;++m)t.color[m].dispose(),t.color[m]=null;t._color_rb&&(r.deleteRenderbuffer(t._color_rb),t._color_rb=null),h(r,e),c(x)}h(r,e)}(this)}var g=p.prototype;function v(t,e,r){if(t._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==e||t._shape[1]!==r){var i=t.gl,n=i.getParameter(i.MAX_RENDERBUFFER_SIZE);if(e<0||e>n||r<0||r>n)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=e,t._shape[1]=r;for(var a=u(i),o=0;o<t.color.length;++o)t.color[o].shape=t._shape;t._color_rb&&(i.bindRenderbuffer(i.RENDERBUFFER,t._color_rb),i.renderbufferStorage(i.RENDERBUFFER,i.RGBA4,t._shape[0],t._shape[1])),t.depth&&(t.depth.shape=t._shape),t._depth_rb&&(i.bindRenderbuffer(i.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t._shape[0],t._shape[1]):t._useDepth?i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&i.renderbufferStorage(i.RENDERBUFFER,i.STENCIL_INDEX,t._shape[0],t._shape[1])),i.bindFramebuffer(i.FRAMEBUFFER,t.handle);var s=i.checkFramebufferStatus(i.FRAMEBUFFER);s!==i.FRAMEBUFFER_COMPLETE&&(t.dispose(),h(i,a),c(s)),h(i,a)}}Object.defineProperties(g,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){if(Array.isArray(t)||(t=[0|t,0|t]),2!==t.length)throw new Error("gl-fbo: Shape vector must be length 2");var e=0|t[0],r=0|t[1];return v(this,e,r),[e,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){return v(this,t|=0,this._shape[1]),t},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){return t|=0,v(this,this._shape[0],t),t},enumerable:!1}}),g.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle),t.viewport(0,0,this._shape[0],this._shape[1])}},g.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},,,,,,,,function(t,e,r){"use strict";t.exports=function(t,e,r){var i;if(r){i=e;for(var n=new Array(e.length),a=0;a<e.length;++a){var o=e[a];n[a]=[o[0],o[1],r[a]]}e=n}var s=function(t,e,r){var i=p(t,[],d(t));return m(e,i,r),!!i}(t,e,!!r);for(;y(t,e,!!r);)s=!0;if(r&&s){i.length=0,r.length=0;for(a=0;a<e.length;++a){o=e[a];i.push([o[0],o[1]]),r.push(o[2])}}return s};var i=r(897),n=r(962),a=r(967),o=r(726),s=r(971),l=r(972),u=r(975),h=r(976),c=r(977);function f(t){var e=l(t);return[h(e,-1/0),h(e,1/0)]}function d(t){for(var e=new Array(t.length),r=0;r<t.length;++r){var i=t[r];e[r]=[h(i[0],-1/0),h(i[1],-1/0),h(i[0],1/0),h(i[1],1/0)]}return e}function p(t,e,r){for(var a=e.length,o=new i(a),s=[],l=0;l<e.length;++l){var u=e[l],c=f(u[0]),d=f(u[1]);s.push([h(c[0],-1/0),h(d[0],-1/0),h(c[1],1/0),h(d[1],1/0)])}n(s,(function(t,e){o.link(t,e)}));var p=!0,g=new Array(a);for(l=0;l<a;++l){(m=o.find(l))!==l&&(p=!1,t[m]=[Math.min(t[l][0],t[m][0]),Math.min(t[l][1],t[m][1])])}if(p)return null;var v=0;for(l=0;l<a;++l){var m;(m=o.find(l))===l?(g[l]=v,t[v++]=t[l]):g[l]=-1}t.length=v;for(l=0;l<a;++l)g[l]<0&&(g[l]=g[o.find(l)]);return g}function g(t,e){return t[0]-e[0]||t[1]-e[1]}function v(t,e){var r=t[0]-e[0]||t[1]-e[1];return r||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function m(t,e,r){if(0!==t.length){if(e)for(var i=0;i<t.length;++i){var n=e[(o=t[i])[0]],a=e[o[1]];o[0]=Math.min(n,a),o[1]=Math.max(n,a)}else for(i=0;i<t.length;++i){var o;n=(o=t[i])[0],a=o[1];o[0]=Math.min(n,a),o[1]=Math.max(n,a)}r?t.sort(v):t.sort(g);var s=1;for(i=1;i<t.length;++i){var l=t[i-1],u=t[i];(u[0]!==l[0]||u[1]!==l[1]||r&&u[2]!==l[2])&&(t[s++]=u)}t.length=s}}function y(t,e,r){var i=function(t,e){for(var r=new Array(e.length),i=0;i<e.length;++i){var n=e[i],a=t[n[0]],o=t[n[1]];r[i]=[h(Math.min(a[0],o[0]),-1/0),h(Math.min(a[1],o[1]),-1/0),h(Math.max(a[0],o[0]),1/0),h(Math.max(a[1],o[1]),1/0)]}return r}(t,e),f=function(t,e,r){var i=[];return n(r,(function(r,n){var o=e[r],s=e[n];if(o[0]!==s[0]&&o[0]!==s[1]&&o[1]!==s[0]&&o[1]!==s[1]){var l=t[o[0]],u=t[o[1]],h=t[s[0]],c=t[s[1]];a(l,u,h,c)&&i.push([r,n])}})),i}(t,e,i),g=d(t),v=function(t,e,r,i){var o=[];return n(r,i,(function(r,i){var n=e[r];if(n[0]!==i&&n[1]!==i){var s=t[i],l=t[n[0]],u=t[n[1]];a(l,u,s,s)&&o.push([r,i])}})),o}(t,e,i,g),y=p(t,function(t,e,r,i,n){var a,h,f=t.map((function(t){return[o(t[0]),o(t[1])]}));for(a=0;a<r.length;++a){var d=r[a];h=d[0];var p=d[1],g=e[h],v=e[p],m=c(u(t[g[0]]),u(t[g[1]]),u(t[v[0]]),u(t[v[1]]));if(m){var y=t.length;t.push([l(m[0]),l(m[1])]),f.push(m),i.push([h,y],[p,y])}}for(i.sort((function(t,e){if(t[0]!==e[0])return t[0]-e[0];var r=f[t[1]],i=f[e[1]];return s(r[0],i[0])||s(r[1],i[1])})),a=i.length-1;a>=0;--a){var x=e[h=(E=i[a])[0]],b=x[0],_=x[1],w=t[b],A=t[_];if((w[0]-A[0]||w[1]-A[1])<0){var T=b;b=_,_=T}x[0]=b;var M,k=x[1]=E[1];for(n&&(M=x[2]);a>0&&i[a-1][0]===h;){var E,S=(E=i[--a])[1];n?e.push([k,S,M]):e.push([k,S]),k=S}n?e.push([k,_,M]):e.push([k,_])}return f}(t,e,f,v,r));return m(e,y,r),!!y||(f.length>0||v.length>0)}},function(t,e,r){"use strict";var i=r(983),n=r(984),a=r(985),o=r(987);function s(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function l(t,e){return t[0]-e[0]||t[1]-e[1]}function u(t,e,r){return e in t?t[e]:r}t.exports=function(t,e,r){Array.isArray(e)?(r=r||{},e=e||[]):(r=e||{},e=[]);var h=!!u(r,"delaunay",!0),c=!!u(r,"interior",!0),f=!!u(r,"exterior",!0),d=!!u(r,"infinity",!1);if(!c&&!f||0===t.length)return[];var p=i(t,e);if(h||c!==f||d){for(var g=n(t.length,function(t){return t.map(s).sort(l)}(e)),v=0;v<p.length;++v){var m=p[v];g.addTriangle(m[0],m[1],m[2])}return h&&a(t,g),f?c?d?o(g,0,d):g.cells():o(g,1,d):o(g,-1)}return p}},,,,,,,,,,,,,,function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},function(t,e,r){"use strict";var i=r(865);t.exports=function(t,e,r){"function"==typeof t&&(r=!!e,e=t,t=window);var n=i("ex",t),a=function(t){r&&t.preventDefault();var i=t.deltaX||0,a=t.deltaY||0,o=t.deltaZ||0,s=1;switch(t.deltaMode){case 1:s=n;break;case 2:s=window.innerHeight}if(a*=s,o*=s,(i*=s)||a||o)return e(i,a,o,t)};return t.addEventListener("wheel",a),a}},function(t,e,r){"use strict";t.exports=function(t,e){var r=e[0],a=e[1],o=i(t,r,a,{}),s=n.mallocUint8(r*a*4);return new l(t,o,s)};var i=r(898),n=r(625),a=r(646),o=r(643).nextPow2;function s(t,e,r,i,n){this.coord=[t,e],this.id=r,this.value=i,this.distance=n}function l(t,e,r){this.gl=t,this.fbo=e,this.buffer=r,this._readTimeout=null;var i=this;this._readCallback=function(){i.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,i.buffer),i._readTimeout=null)}}var u=l.prototype;Object.defineProperty(u,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],r=this.fbo.shape[1];if(r*e*4>this.buffer.length){n.free(this.buffer);for(var i=this.buffer=n.mallocUint8(o(r*e*4)),a=0;a<r*e*4;++a)i[a]=255}return t}}}),u.begin=function(){var t=this.gl;this.shape;t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},u.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},u.query=function(t,e,r){if(!this.gl)return null;var i=this.fbo.shape.slice();t|=0,e|=0,"number"!=typeof r&&(r=1);var n=0|Math.min(Math.max(t-r,0),i[0]),o=0|Math.min(Math.max(t+r,0),i[0]),l=0|Math.min(Math.max(e-r,0),i[1]),u=0|Math.min(Math.max(e+r,0),i[1]);if(o<=n||u<=l)return null;var h=[o-n,u-l],c=a(this.buffer,[h[0],h[1],4],[4,4*i[0],1],4*(n+i[0]*l)),f=function(t,e,r){for(var i=1e8,n=-1,a=-1,o=t.shape[0],s=t.shape[1],l=0;l<o;l++)for(var u=0;u<s;u++){var h=t.get(l,u,0),c=t.get(l,u,1),f=t.get(l,u,2),d=t.get(l,u,3);if(h<255||c<255||f<255||d<255){var p=e-l,g=r-u,v=p*p+g*g;v<i&&(i=v,n=l,a=u)}}return[n,a,i]}(c.hi(h[0],h[1],1),r,r),d=f[0],p=f[1];return d<0||Math.pow(this.radius,2)<f[2]?null:new s(d+n|0,p+l|0,c.get(d,p,0),[c.get(d,p,1),c.get(d,p,2),c.get(d,p,3)],Math.sqrt(f[2]))},u.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},function(t,e,r){var i=r(1023);t.exports=function(t){return i("webgl",t)}},,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var i=r(635),n=r(628),a=r(683),o=r(742),s=r(1547),l=r(761),u=r(760),h=r(646),c=r(1065),f=r(1548),d=r(625),p=r(1559),g=r(1560),v=p.meshShader,m=p.wireShader,y=p.pointShader,x=p.pickShader,b=p.pointPickShader,_=p.contourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function A(t,e,r,i,n,a,o,s,l,u,h,c,f,d,p,g,v,m,y,x,b,_,A,T,M,k,E){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.lineShader=i,this.pointShader=n,this.pickShader=a,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleColors=h,this.triangleNormals=f,this.triangleUVs=c,this.triangleIds=u,this.triangleVAO=d,this.triangleCount=0,this.lineWidth=1,this.edgePositions=p,this.edgeColors=v,this.edgeUVs=m,this.edgeIds=g,this.edgeVAO=y,this.edgeCount=0,this.pointPositions=x,this.pointColors=_,this.pointUVs=A,this.pointSizes=T,this.pointIds=b,this.pointVAO=M,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=k,this.contourVAO=E,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var T=A.prototype;function M(t,e){if(!e)return 1;if(!e.length)return 1;for(var r=0;r<e.length;++r){if(e.length<2)return 1;if(e[r][0]===t)return e[r][1];if(e[r][0]>t&&r>0){var i=(e[r][0]-t)/(e[r][0]-e[r-1][0]);return e[r][1]*(1-i)+i*e[r-1][1]}}return 1}function k(t){var e=i(t,v.vertex,v.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.normal.location=4,e}function E(t){var e=i(t,m.vertex,m.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e}function S(t){var e=i(t,y.vertex,y.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.pointSize.location=4,e}function C(t){var e=i(t,x.vertex,x.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e}function L(t){var e=i(t,b.vertex,b.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e.attributes.pointSize.location=4,e}function I(t){var e=i(t,_.vertex,_.fragment);return e.attributes.position.location=0,e}T.isOpaque=function(){return!this.hasAlpha},T.isTransparent=function(){return this.hasAlpha},T.pickSlots=1,T.setPickBase=function(t){this.pickId=t},T.highlight=function(t){if(t&&this.contourEnable){for(var e=f(this.cells,this.intensity,t.intensity),r=e.cells,i=e.vertexIds,n=e.vertexWeights,a=r.length,o=d.mallocFloat32(6*a),s=0,l=0;l<a;++l)for(var u=r[l],h=0;h<2;++h){var c=u[0];2===u.length&&(c=u[h]);for(var p=i[c][0],g=i[c][1],v=n[c],m=1-v,y=this.positions[p],x=this.positions[g],b=0;b<3;++b)o[s++]=v*y[b]+m*x[b]}this.contourCount=s/3|0,this.contourPositions.update(o.subarray(0,s)),d.free(o)}else this.contourCount=0},T.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"contourEnable"in t&&(this.contourEnable=t.contourEnable),"contourColor"in t&&(this.contourColor=t.contourColor),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"lightPosition"in t&&(this.lightPosition=t.lightPosition),this.hasAlpha=!1,"opacity"in t&&(this.opacity=t.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in t&&(this.opacityscale=t.opacityscale,this.hasAlpha=!0),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),t.texture?(this.texture.dispose(),this.texture=o(e,t.texture)):t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t,e){for(var r=c({colormap:t,nshades:256,format:"rgba"}),i=new Uint8Array(1024),n=0;n<256;++n){for(var a=r[n],o=0;o<3;++o)i[4*n+o]=a[o];i[4*n+3]=e?255*M(n/255,e):255*a[3]}return h(i,[256,256,4],[4,0,1])}(t.colormap,this.opacityscale)),this.texture.generateMipmap());var r=t.cells,i=t.positions;if(i&&r){var n=[],a=[],l=[],u=[],f=[],d=[],p=[],g=[],v=[],m=[],y=[],x=[],b=[],_=[];this.cells=r,this.positions=i;var w=t.vertexNormals,A=t.cellNormals,T=void 0===t.vertexNormalsEpsilon?1e-6:t.vertexNormalsEpsilon,k=void 0===t.faceNormalsEpsilon?1e-6:t.faceNormalsEpsilon;t.useFacetNormals&&!A&&(A=s.faceNormals(r,i,k)),A||w||(w=s.vertexNormals(r,i,T));var E=t.vertexColors,S=t.cellColors,C=t.meshColor||[1,1,1,1],L=t.vertexUVs,I=t.vertexIntensity,j=t.cellUVs,R=t.cellIntensity,P=1/0,O=-1/0;if(!L&&!j)if(I)if(t.vertexIntensityBounds)P=+t.vertexIntensityBounds[0],O=+t.vertexIntensityBounds[1];else for(var z=0;z<I.length;++z){var N=I[z];P=Math.min(P,N),O=Math.max(O,N)}else if(R)if(t.cellIntensityBounds)P=+t.cellIntensityBounds[0],O=+t.cellIntensityBounds[1];else for(z=0;z<R.length;++z){N=R[z];P=Math.min(P,N),O=Math.max(O,N)}else for(z=0;z<i.length;++z){N=i[z][2];P=Math.min(P,N),O=Math.max(O,N)}this.intensity=I||(R||function(t){for(var e=t.length,r=new Array(e),i=0;i<e;++i)r[i]=t[i][2];return r}(i)),this.pickVertex=!(R||S);var B=t.pointSizes,F=t.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(z=0;z<i.length;++z)for(var D=i[z],U=0;U<3;++U)!isNaN(D[U])&&isFinite(D[U])&&(this.bounds[0][U]=Math.min(this.bounds[0][U],D[U]),this.bounds[1][U]=Math.max(this.bounds[1][U],D[U]));var V=0,X=0,G=0;t:for(z=0;z<r.length;++z){var W=r[z];switch(W.length){case 1:for(D=i[q=W[0]],U=0;U<3;++U)if(isNaN(D[U])||!isFinite(D[U]))continue t;m.push(D[0],D[1],D[2]),Y=E?E[q]:S?S[z]:C,this.opacityscale&&I?a.push(Y[0],Y[1],Y[2],this.opacity*M((I[q]-P)/(O-P),this.opacityscale)):3===Y.length?y.push(Y[0],Y[1],Y[2],this.opacity):(y.push(Y[0],Y[1],Y[2],Y[3]*this.opacity),Y[3]<1&&(this.hasAlpha=!0)),Z=L?L[q]:I?[(I[q]-P)/(O-P),0]:j?j[z]:R?[(R[z]-P)/(O-P),0]:[(D[2]-P)/(O-P),0],x.push(Z[0],Z[1]),B?b.push(B[q]):b.push(F),_.push(z),G+=1;break;case 2:for(U=0;U<2;++U){D=i[q=W[U]];for(var H=0;H<3;++H)if(isNaN(D[H])||!isFinite(D[H]))continue t}for(U=0;U<2;++U){D=i[q=W[U]];d.push(D[0],D[1],D[2]),Y=E?E[q]:S?S[z]:C,this.opacityscale&&I?a.push(Y[0],Y[1],Y[2],this.opacity*M((I[q]-P)/(O-P),this.opacityscale)):3===Y.length?p.push(Y[0],Y[1],Y[2],this.opacity):(p.push(Y[0],Y[1],Y[2],Y[3]*this.opacity),Y[3]<1&&(this.hasAlpha=!0)),Z=L?L[q]:I?[(I[q]-P)/(O-P),0]:j?j[z]:R?[(R[z]-P)/(O-P),0]:[(D[2]-P)/(O-P),0],g.push(Z[0],Z[1]),v.push(z)}X+=1;break;case 3:for(U=0;U<3;++U)for(D=i[q=W[U]],H=0;H<3;++H)if(isNaN(D[H])||!isFinite(D[H]))continue t;for(U=0;U<3;++U){var q,Y,Z,Q;D=i[q=W[2-U]];n.push(D[0],D[1],D[2]),(Y=E?E[q]:S?S[z]:C)?this.opacityscale&&I?a.push(Y[0],Y[1],Y[2],this.opacity*M((I[q]-P)/(O-P),this.opacityscale)):3===Y.length?a.push(Y[0],Y[1],Y[2],this.opacity):(a.push(Y[0],Y[1],Y[2],Y[3]*this.opacity),Y[3]<1&&(this.hasAlpha=!0)):a.push(.5,.5,.5,1),Z=L?L[q]:I?[(I[q]-P)/(O-P),0]:j?j[z]:R?[(R[z]-P)/(O-P),0]:[(D[2]-P)/(O-P),0],u.push(Z[0],Z[1]),Q=w?w[q]:A[z],l.push(Q[0],Q[1],Q[2]),f.push(z)}V+=1}}this.pointCount=G,this.edgeCount=X,this.triangleCount=V,this.pointPositions.update(m),this.pointColors.update(y),this.pointUVs.update(x),this.pointSizes.update(b),this.pointIds.update(new Uint32Array(_)),this.edgePositions.update(d),this.edgeColors.update(p),this.edgeUVs.update(g),this.edgeIds.update(new Uint32Array(v)),this.trianglePositions.update(n),this.triangleColors.update(a),this.triangleUVs.update(u),this.triangleNormals.update(l),this.triangleIds.update(new Uint32Array(f))}},T.drawTransparent=T.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||w,i=t.view||w,n=t.projection||w,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var s={model:r,view:i,projection:n,inverseModel:w.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};s.inverseModel=u(s.inverseModel,s.model),e.disable(e.CULL_FACE),this.texture.bind(0);var h=new Array(16);l(h,s.view,s.model),l(h,s.projection,h),u(h,h);for(o=0;o<3;++o)s.eyePosition[o]=h[12+o]/h[15];var c,f=h[15];for(o=0;o<3;++o)f+=this.lightPosition[o]*h[4*o+3];for(o=0;o<3;++o){for(var d=h[12+o],p=0;p<3;++p)d+=h[4*p+o]*this.lightPosition[p];s.lightPosition[o]=d/f}this.triangleCount>0&&((c=this.triShader).bind(),c.uniforms=s,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());this.edgeCount>0&&this.lineWidth>0&&((c=this.lineShader).bind(),c.uniforms=s,this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());this.pointCount>0&&((c=this.pointShader).bind(),c.uniforms=s,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((c=this.contourShader).bind(),c.uniforms=s,this.contourVAO.bind(),e.drawArrays(e.LINES,0,this.contourCount),this.contourVAO.unbind())},T.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||w,i=t.view||w,n=t.projection||w,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(r),this._view=[].slice.call(i),this._projection=[].slice.call(n),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s,l={model:r,view:i,projection:n,clipBounds:a,pickId:this.pickId/255};((s=this.pickShader).bind(),s.uniforms=l,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0)&&((s=this.pointPickShader).bind(),s.uniforms=l,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind())},T.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;for(var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],i=this.positions,n=new Array(r.length),a=0;a<r.length;++a)n[a]=i[r[a]];var o=t.coord[0],s=t.coord[1];if(!this.pickVertex){var l=this.positions[r[0]],u=this.positions[r[1]],h=this.positions[r[2]],c=[(l[0]+u[0]+h[0])/3,(l[1]+u[1]+h[1])/3,(l[2]+u[2]+h[2])/3];return{_cellCenter:!0,position:[o,s],index:e,cell:r,cellId:e,intensity:this.intensity[e],dataCoordinate:c}}var f=g(n,[o*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!f)return null;var d=f[2],p=0;for(a=0;a<r.length;++a)p+=d[a]*this.intensity[r[a]];return{position:f[1],index:r[f[0]],cell:r,cellId:e,intensity:p,dataCoordinate:this.positions[r[f[0]]]}},T.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=function(t,e){1===arguments.length&&(t=(e=t).gl);var r=t.getExtension("OES_standard_derivatives")||t.getExtension("MOZ_OES_standard_derivatives")||t.getExtension("WEBKIT_OES_standard_derivatives");if(!r)throw new Error("derivatives not supported");var i=k(t),s=E(t),l=S(t),u=C(t),c=L(t),f=I(t),d=o(t,h(new Uint8Array([255,255,255,255]),[1,1,4]));d.generateMipmap(),d.minFilter=t.LINEAR_MIPMAP_LINEAR,d.magFilter=t.LINEAR;var p=n(t),g=n(t),v=n(t),m=n(t),y=n(t),x=a(t,[{buffer:p,type:t.FLOAT,size:3},{buffer:y,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:g,type:t.FLOAT,size:4},{buffer:v,type:t.FLOAT,size:2},{buffer:m,type:t.FLOAT,size:3}]),b=n(t),_=n(t),w=n(t),T=n(t),M=a(t,[{buffer:b,type:t.FLOAT,size:3},{buffer:T,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_,type:t.FLOAT,size:4},{buffer:w,type:t.FLOAT,size:2}]),j=n(t),R=n(t),P=n(t),O=n(t),z=n(t),N=a(t,[{buffer:j,type:t.FLOAT,size:3},{buffer:z,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:R,type:t.FLOAT,size:4},{buffer:P,type:t.FLOAT,size:2},{buffer:O,type:t.FLOAT,size:1}]),B=n(t),F=a(t,[{buffer:B,type:t.FLOAT,size:3}]),D=new A(t,d,i,s,l,u,c,f,p,y,g,v,m,x,b,T,_,w,M,j,z,R,P,O,N,B,F);return D.update(e),D}},,,,function(t,e,r){"use strict";function i(t){return t.target||t.srcElement||window}e.buttons=function(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e;if(1===(e=t.button))return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0},e.element=i,e.x=function(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=i(t).getBoundingClientRect();return t.clientX-e.left}return 0},e.y=function(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=i(t).getBoundingClientRect();return t.clientY-e.top}return 0}},function(t,e,r){"use strict";var i=r(947);t.exports=function(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var a=[],o=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],l=[],u=[],h=0;h<t.arrayArgs.length;++h){var c=t.arrayArgs[h];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),a.push("t"+c),a.push("r"+c),o.push("t"+c),o.push("r"+c+".join()"),s.push("array"+c+".data"),s.push("array"+c+".stride"),s.push("array"+c+".offset|0"),h>0&&(l.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[h]))),u.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[h])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),h=0;h<t.scalarArgs.length;++h)s.push("scalar"+t.scalarArgs[h]);return r.push(["type=[",o.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(i.bind(void 0,t))}},function(t,e,r){"use strict";var i=r(699);function n(t,e,r){var i,n,a=t.length,o=e.arrayArgs.length,s=e.indexArgs.length>0,l=[],u=[],h=0,c=0;for(i=0;i<a;++i)u.push(["i",i,"=0"].join(""));for(n=0;n<o;++n)for(i=0;i<a;++i)c=h,h=t[i],0===i?u.push(["d",n,"s",i,"=t",n,"p",h].join("")):u.push(["d",n,"s",i,"=(t",n,"p",h,"-s",c,"*t",n,"p",c,")"].join(""));for(u.length>0&&l.push("var "+u.join(",")),i=a-1;i>=0;--i)h=t[i],l.push(["for(i",i,"=0;i",i,"<s",h,";++i",i,"){"].join(""));for(l.push(r),i=0;i<a;++i){for(c=h,h=t[i],n=0;n<o;++n)l.push(["p",n,"+=d",n,"s",i].join(""));s&&(i>0&&l.push(["index[",c,"]-=s",c].join("")),l.push(["++index[",h,"]"].join(""))),l.push("}")}return l.join("\n")}function a(t,e,r){for(var i=t.body,n=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",h=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var c=e.offsetArgIndex.indexOf(o);h=e.offsetArgs[c].array,u="+q"+c;case"array":u="p"+h+u;var f="l"+o,d="a"+h;if(0===e.arrayBlockIndices[h])1===s.count?"generic"===r[h]?s.lvalue?(n.push(["var ",f,"=",d,".get(",u,")"].join("")),i=i.replace(l,f),a.push([d,".set(",u,",",f,")"].join(""))):i=i.replace(l,[d,".get(",u,")"].join("")):i=i.replace(l,[d,"[",u,"]"].join("")):"generic"===r[h]?(n.push(["var ",f,"=",d,".get(",u,")"].join("")),i=i.replace(l,f),s.lvalue&&a.push([d,".set(",u,",",f,")"].join(""))):(n.push(["var ",f,"=",d,"[",u,"]"].join("")),i=i.replace(l,f),s.lvalue&&a.push([d,"[",u,"]=",f].join("")));else{for(var p=[s.name],g=[u],v=0;v<Math.abs(e.arrayBlockIndices[h]);v++)p.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(v+1)+"*t"+h+"b"+v);if(l=new RegExp(p.join(""),"g"),u=g.join("+"),"generic"===r[h])throw new Error("cwise: Generic arrays not supported in combination with blocks!");i=i.replace(l,[d,"[",u,"]"].join(""))}break;case"scalar":i=i.replace(l,"Y"+e.scalarArgs.indexOf(o));break;case"index":i=i.replace(l,"index");break;case"shape":i=i.replace(l,"shape")}}}return[n.join("\n"),i,a.join("\n")].join("\n").trim()}function o(t){for(var e=new Array(t.length),r=!0,i=0;i<t.length;++i){var n=t[i],a=n.match(/\d+/);a=a?a[0]:"",0===n.charAt(0)?e[i]="u"+n.charAt(1)+a:e[i]=n.charAt(0)+a,i>0&&(r=r&&e[i]===e[i-1])}return r?e[0]:e.join("")}t.exports=function(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,s=new Array(t.arrayArgs.length),l=new Array(t.arrayArgs.length),u=0;u<t.arrayArgs.length;++u)l[u]=e[2*u],s[u]=e[2*u+1];var h=[],c=[],f=[],d=[],p=[];for(u=0;u<t.arrayArgs.length;++u){t.arrayBlockIndices[u]<0?(f.push(0),d.push(r),h.push(r),c.push(r+t.arrayBlockIndices[u])):(f.push(t.arrayBlockIndices[u]),d.push(t.arrayBlockIndices[u]+r),h.push(0),c.push(t.arrayBlockIndices[u]));for(var g=[],v=0;v<s[u].length;v++)f[u]<=s[u][v]&&s[u][v]<d[u]&&g.push(s[u][v]-f[u]);p.push(g)}var m=["SS"],y=["'use strict'"],x=[];for(v=0;v<r;++v)x.push(["s",v,"=SS[",v,"]"].join(""));for(u=0;u<t.arrayArgs.length;++u){m.push("a"+u),m.push("t"+u),m.push("p"+u);for(v=0;v<r;++v)x.push(["t",u,"p",v,"=t",u,"[",f[u]+v,"]"].join(""));for(v=0;v<Math.abs(t.arrayBlockIndices[u]);++v)x.push(["t",u,"b",v,"=t",u,"[",h[u]+v,"]"].join(""))}for(u=0;u<t.scalarArgs.length;++u)m.push("Y"+u);if(t.shapeArgs.length>0&&x.push("shape=SS.slice(0)"),t.indexArgs.length>0){var b=new Array(r);for(u=0;u<r;++u)b[u]="0";x.push(["index=[",b.join(","),"]"].join(""))}for(u=0;u<t.offsetArgs.length;++u){var _=t.offsetArgs[u],w=[];for(v=0;v<_.offset.length;++v)0!==_.offset[v]&&(1===_.offset[v]?w.push(["t",_.array,"p",v].join("")):w.push([_.offset[v],"*t",_.array,"p",v].join("")));0===w.length?x.push("q"+u+"=0"):x.push(["q",u,"=",w.join("+")].join(""))}var A=i([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((x=x.concat(A)).length>0&&y.push("var "+x.join(",")),u=0;u<t.arrayArgs.length;++u)y.push("p"+u+"|=0");t.pre.body.length>3&&y.push(a(t.pre,t,l));var T=a(t.body,t,l),M=function(t){for(var e=0,r=t[0].length;e<r;){for(var i=1;i<t.length;++i)if(t[i][e]!==t[0][e])return e;++e}return e}(p);M<r?y.push(function(t,e,r,i){for(var a=e.length,o=r.arrayArgs.length,s=r.blockSize,l=r.indexArgs.length>0,u=[],h=0;h<o;++h)u.push(["var offset",h,"=p",h].join(""));for(h=t;h<a;++h)u.push(["for(var j"+h+"=SS[",e[h],"]|0;j",h,">0;){"].join("")),u.push(["if(j",h,"<",s,"){"].join("")),u.push(["s",e[h],"=j",h].join("")),u.push(["j",h,"=0"].join("")),u.push(["}else{s",e[h],"=",s].join("")),u.push(["j",h,"-=",s,"}"].join("")),l&&u.push(["index[",e[h],"]=j",h].join(""));for(h=0;h<o;++h){for(var c=["offset"+h],f=t;f<a;++f)c.push(["j",f,"*t",h,"p",e[f]].join(""));u.push(["p",h,"=(",c.join("+"),")"].join(""))}for(u.push(n(e,r,i)),h=t;h<a;++h)u.push("}");return u.join("\n")}(M,p[0],t,T)):y.push(n(p[0],t,T)),t.post.body.length>3&&y.push(a(t.post,t,l)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+y.join("\n")+"\n----------");var k=[t.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",M,o(l)].join("");return new Function(["function ",k,"(",m.join(","),"){",y.join("\n"),"} return ",k].join(""))()}},function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,r){t.exports=function(t,e,r,i){var a=64,o=1.25,s={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};i&&(i.size&&i.size>0&&(a=i.size),i.lineSpacing&&i.lineSpacing>0&&(o=i.lineSpacing),i.styletags&&i.styletags.breaklines&&(s.breaklines=!!i.styletags.breaklines),i.styletags&&i.styletags.bolds&&(s.bolds=!!i.styletags.bolds),i.styletags&&i.styletags.italics&&(s.italics=!!i.styletags.italics),i.styletags&&i.styletags.subscripts&&(s.subscripts=!!i.styletags.subscripts),i.styletags&&i.styletags.superscripts&&(s.superscripts=!!i.styletags.superscripts));return r.font=[i.fontStyle,i.fontVariant,i.fontWeight,a+"px",i.font].filter((function(t){return t})).join(" "),r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",f(function(t,e,r,i,a,o){r=r.replace(/\n/g,""),r=!0===o.breaklines?r.replace(/\<br\>/g,"\n"):r.replace(/\<br\>/g," ");var s="",l=[];for(d=0;d<r.length;++d)l[d]=s;!0===o.bolds&&(l=u("b","b|",r,l));!0===o.italics&&(l=u("i","i|",r,l));!0===o.superscripts&&(l=u("sup","+1",r,l));!0===o.subscripts&&(l=u("sub","-1",r,l));var h=[],c="";for(d=0;d<r.length;++d)null!==l[d]&&(c+=r[d],h.push(l[d]));var f,d,p,g,v,m=c.split("\n"),y=m.length,x=Math.round(a*i),b=i,_=2*i,w=0,A=y*x+_;t.height<A&&(t.height=A);e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.fillStyle="#fff";var T=0,M="";function k(){if(""!==M){var t=e.measureText(M).width;e.fillText(M,b+p,_+g),p+=t}}function E(){return Math.round(v)+"px "}function S(t,r){var i=""+e.font;if(!0===o.subscripts){var n=t.indexOf("-"),a=r.indexOf("-"),s=n>-1?parseInt(t[1+n]):0,l=a>-1?parseInt(r[1+a]):0;s!==l&&(i=i.replace(E(),"?px "),v*=Math.pow(.75,l-s),i=i.replace("?px ",E())),g+=.25*x*(l-s)}if(!0===o.superscripts){var u=t.indexOf("+"),h=r.indexOf("+"),c=u>-1?parseInt(t[1+u]):0,f=h>-1?parseInt(r[1+h]):0;c!==f&&(i=i.replace(E(),"?px "),v*=Math.pow(.75,f-c),i=i.replace("?px ",E())),g-=.25*x*(f-c)}if(!0===o.bolds){var d=t.indexOf("b|")>-1,p=r.indexOf("b|")>-1;!d&&p&&(i=m?i.replace("italic ","italic bold "):"bold "+i),d&&!p&&(i=i.replace("bold ",""))}if(!0===o.italics){var m=t.indexOf("i|")>-1,y=r.indexOf("i|")>-1;!m&&y&&(i="italic "+i),m&&!y&&(i=i.replace("italic ",""))}e.font=i}for(f=0;f<y;++f){var C=m[f]+"\n";for(p=0,g=f*x,v=i,M="",d=0;d<C.length;++d){var L=d+T<h.length?h[d+T]:h[h.length-1];s===L?M+=C[d]:(k(),M=C[d],void 0!==L&&(S(s,L),s=L))}k(),T+=C.length;var I=0|Math.round(p+2*b);w<I&&(w=I)}var j=w,R=_+x*y;return n(e.getImageData(0,0,j,R).data,[R,j,4]).pick(-1,-1,0).transpose(1,0)}(e,r,t,a,o,s),i,a)},t.exports.processPixels=f;var i=r(878),n=r(646),a=r(958),o=r(906),s=r(907),l=r(988);function u(t,e,r,i){for(var n="<"+t+">",a="</"+t+">",o=n.length,s=a.length,l="+"===e[0]||"-"===e[0],u=0,h=-s;u>-1&&-1!==(u=r.indexOf(n,u))&&-1!==(h=r.indexOf(a,u+o))&&!(h<=u);){for(var c=u;c<h+s;++c)if(c<u+o||c>=h)i[c]=null,r=r.substr(0,c)+" "+r.substr(c+1);else if(null!==i[c]){var f=i[c].indexOf(e[0]);-1===f?i[c]+=e:l&&(i[c]=i[c].substr(0,f+1)+(1+parseInt(i[c][f+1]))+i[c].substr(f+2))}var d=u+o,p=r.substr(d,h-d).indexOf(n);u=-1!==p?p:h+s}return i}function h(t,e){var r=i(t,128);return e?a(r.cells,r.positions,.25):{edges:r.cells,positions:r.positions}}function c(t,e,r,i){var n=h(t,i),a=function(t,e,r){for(var i=e.textAlign||"start",n=e.textBaseline||"alphabetic",a=[1<<30,1<<30],o=[0,0],s=t.length,l=0;l<s;++l)for(var u=t[l],h=0;h<2;++h)a[h]=0|Math.min(a[h],u[h]),o[h]=0|Math.max(o[h],u[h]);var c=0;switch(i){case"center":c=-.5*(a[0]+o[0]);break;case"right":case"end":c=-o[0];break;case"left":case"start":c=-a[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+i+"'")}var f=0;switch(n){case"hanging":case"top":f=-a[1];break;case"middle":f=-.5*(a[1]+o[1]);break;case"alphabetic":case"ideographic":f=-3*r;break;case"bottom":f=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+n+"'")}var d=1/r;return"lineHeight"in e?d*=+e.lineHeight:"width"in e?d=e.width/(o[0]-a[0]):"height"in e&&(d=e.height/(o[1]-a[1])),t.map((function(t){return[d*(t[0]+c),d*(t[1]+f)]}))}(n.positions,e,r),u=n.edges,c="ccw"===e.orientation;if(o(a,u),e.polygons||e.polygon||e.polyline){for(var f=l(u,a),d=new Array(f.length),p=0;p<f.length;++p){for(var g=f[p],v=new Array(g.length),m=0;m<g.length;++m){for(var y=g[m],x=new Array(y.length),b=0;b<y.length;++b)x[b]=a[y[b]].slice();c&&x.reverse(),v[m]=x}d[p]=v}return d}return e.triangles||e.triangulate||e.triangle?{cells:s(a,u,{delaunay:!1,exterior:!1,interior:!0}),positions:a}:{edges:u,positions:a}}function f(t,e,r){try{return c(t,e,r,!0)}catch(t){}try{return c(t,e,r,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},function(t,e,r){"use strict";var i=r(625);function n(t){return"a"+t}function a(t){return"d"+t}function o(t,e){return"c"+t+"_"+e}function s(t){return"s"+t}function l(t,e){return"t"+t+"_"+e}function u(t){return"o"+t}function h(t){return"x"+t}function c(t){return"p"+t}function f(t,e){return"d"+t+"_"+e}function d(t){return"i"+t}function p(t,e){return"u"+t+"_"+e}function g(t){return"b"+t}function v(t){return"y"+t}function m(t){return"e"+t}function y(t){return"v"+t}t.exports=function(t){function e(t){throw new Error("ndarray-extract-contour: "+t)}"object"!=typeof t&&e("Must specify arguments");var r=t.order;Array.isArray(r)||e("Must specify order");var b=t.arrayArguments||1;b<1&&e("Must have at least one array argument");var _=t.scalarArguments||0;_<0&&e("Scalar arg count must be > 0");"function"!=typeof t.vertex&&e("Must specify vertex creation function");"function"!=typeof t.cell&&e("Must specify cell creation function");"function"!=typeof t.phase&&e("Must specify phase function");for(var w=t.getters||[],A=new Array(b),T=0;T<b;++T)w.indexOf(T)>=0?A[T]=!0:A[T]=!1;return function(t,e,r,b,_,w){var A=w.length,T=_.length;if(T<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var M="extractContour"+_.join("_"),k=[],E=[],S=[],C=0;C<A;++C)S.push(n(C));for(C=0;C<b;++C)S.push(h(C));for(C=0;C<T;++C)E.push(s(C)+"="+n(0)+".shape["+C+"]|0");for(C=0;C<A;++C){E.push(a(C)+"="+n(C)+".data",u(C)+"="+n(C)+".offset|0");for(var L=0;L<T;++L)E.push(l(C,L)+"="+n(C)+".stride["+L+"]|0")}for(C=0;C<A;++C){E.push(c(C)+"="+u(C)),E.push(o(C,0));for(L=1;L<1<<T;++L){for(var I=[],j=0;j<T;++j)L&1<<j&&I.push("-"+l(C,j));E.push(f(C,L)+"=("+I.join("")+")|0"),E.push(o(C,L)+"=0")}}for(C=0;C<A;++C)for(L=0;L<T;++L){var R=[l(C,_[L])];L>0&&R.push(l(C,_[L-1])+"*"+s(_[L-1])),E.push(p(C,_[L])+"=("+R.join("-")+")|0")}for(C=0;C<T;++C)E.push(d(C)+"=0");E.push("N=0");var P=["2"];for(C=T-2;C>=0;--C)P.push(s(_[C]));E.push("Q=("+P.join("*")+")|0","P=mallocUint32(Q)","V=mallocUint32(Q)","X=0"),E.push(g(0)+"=0");for(L=1;L<1<<T;++L){var O=[],z=[];for(j=0;j<T;++j)L&1<<j&&(0===z.length?O.push("1"):O.unshift(z.join("*"))),z.push(s(_[j]));var N="";O[0].indexOf(s(_[T-2]))<0&&(N="-");var B=x(T,L,_);E.push(m(B)+"=(-"+O.join("-")+")|0",v(B)+"=("+N+O.join("-")+")|0",g(B)+"=0")}function F(t,e){k.push("for(",d(_[t]),"=",e,";",d(_[t]),"<",s(_[t]),";","++",d(_[t]),"){")}function D(t){for(var e=0;e<A;++e)k.push(c(e),"+=",p(e,_[t]),";");k.push("}")}function U(){for(var t=1;t<1<<T;++t)k.push("T","=",m(t),";",m(t),"=",v(t),";",v(t),"=","T",";")}E.push(y(0)+"=0","T=0"),function t(e,r){if(e<0)!function(t){for(var e=0;e<A;++e)w[e]?k.push(o(e,0),"=",a(e),".get(",c(e),");"):k.push(o(e,0),"=",a(e),"[",c(e),"];");var r=[];for(e=0;e<A;++e)r.push(o(e,0));for(e=0;e<b;++e)r.push(h(e));k.push(g(0),"=","P","[","X","]=phase(",r.join(),");");for(var i=1;i<1<<T;++i)k.push(g(i),"=","P","[","X","+",m(i),"];");var n=[];for(i=1;i<1<<T;++i)n.push("("+g(0)+"!=="+g(i)+")");k.push("if(",n.join("||"),"){");var s=[];for(e=0;e<T;++e)s.push(d(e));for(e=0;e<A;++e){s.push(o(e,0));for(i=1;i<1<<T;++i)w[e]?k.push(o(e,i),"=",a(e),".get(",c(e),"+",f(e,i),");"):k.push(o(e,i),"=",a(e),"[",c(e),"+",f(e,i),"];"),s.push(o(e,i))}for(e=0;e<1<<T;++e)s.push(g(e));for(e=0;e<b;++e)s.push(h(e));k.push("vertex(",s.join(),");",y(0),"=","V","[","X","]=","N","++;");var l=(1<<T)-1,u=g(l);for(i=0;i<T;++i)if(0==(t&~(1<<i))){for(var p=l^1<<i,v=g(p),x=[],_=p;_>0;_=_-1&p)x.push("V[X+"+m(_)+"]");x.push(y(0));for(_=0;_<A;++_)1&i?x.push(o(_,l),o(_,p)):x.push(o(_,p),o(_,l));1&i?x.push(u,v):x.push(v,u);for(_=0;_<b;++_)x.push(h(_));k.push("if(",u,"!==",v,"){","face(",x.join(),")}")}k.push("}","X","+=1;")}(r);else{!function(t){for(var e=t-1;e>=0;--e)F(e,0);var r=[];for(e=0;e<A;++e)w[e]?r.push(a(e)+".get("+c(e)+")"):r.push(a(e)+"["+c(e)+"]");for(e=0;e<b;++e)r.push(h(e));for(k.push("P","[","X","++]=phase(",r.join(),");"),e=0;e<t;++e)D(e);for(var i=0;i<A;++i)k.push(c(i),"+=",p(i,_[t]),";")}(e),k.push("if(",s(_[e]),">0){",d(_[e]),"=1;"),t(e-1,r|1<<_[e]);for(var i=0;i<A;++i)k.push(c(i),"+=",p(i,_[e]),";");e===T-1&&(k.push("X","=0;"),U()),F(e,2),t(e-1,r),e===T-1&&(k.push("if(",d(_[T-1]),"&1){","X","=0;}"),U()),D(e),k.push("}")}}(T-1,0),k.push("freeUint32(","V",");freeUint32(","P",");");var V=["'use strict';","function ",M,"(",S.join(),"){","var ",E.join(),";",k.join(""),"}","return ",M].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",V)(t,e,r,i.mallocUint32,i.freeUint32)}(t.vertex,t.cell,t.phase,_,r,A)};function x(t,e,r){for(var i=0,n=0;n<t;++n)e&1<<n&&(i|=1<<r[n]);return i}},function(t,e,r){"use strict";t.exports=function(t){if(t<0)return[];if(0===t)return[[0]];for(var e=0|Math.round(a(t+1)),r=[],o=0;o<e;++o){for(var s=i.unrank(t,o),l=[0],u=0,h=0;h<s.length;++h)u+=1<<s[h],l.push(u);n(s)<1&&(l[0]=u,l[t]=0),r.push(l)}return r};var i=r(952),n=r(954),a=r(955)},function(t,e,r){"use strict";var i=r(625),n=r(953);e.rank=function(t){var e=t.length;switch(e){case 0:case 1:return 0;case 2:return t[1]}var r,a,o,s=i.mallocUint32(e),l=i.mallocUint32(e),u=0;for(n(t,l),o=0;o<e;++o)s[o]=t[o];for(o=e-1;o>0;--o)a=l[o],r=s[o],s[o]=s[a],s[a]=r,l[o]=l[r],l[r]=a,u=(u+r)*o;return i.freeUint32(l),i.freeUint32(s),u},e.unrank=function(t,e,r){switch(t){case 0:return r||[];case 1:return r?(r[0]=0,r):[0];case 2:return r?(e?(r[0]=0,r[1]=1):(r[0]=1,r[1]=0),r):e?[0,1]:[1,0]}var i,n,a,o=1;for((r=r||new Array(t))[0]=0,a=1;a<t;++a)r[a]=a,o=o*a|0;for(a=t-1;a>0;--a)e=e-(i=e/o|0)*o|0,o=o/a|0,n=0|r[a],r[a]=0|r[i],r[i]=0|n;return r}},function(t,e,r){"use strict";t.exports=function(t,e){e=e||new Array(t.length);for(var r=0;r<t.length;++r)e[t[r]]=r;return e}},function(t,e,r){"use strict";t.exports=function(t){var e=t.length;if(e<32){for(var r=1,n=0;n<e;++n)for(var a=0;a<n;++a)if(t[n]<t[a])r=-r;else if(t[n]===t[a])return 0;return r}var o=i.mallocUint8(e);for(n=0;n<e;++n)o[n]=0;for(r=1,n=0;n<e;++n)if(!o[n]){var s=1;o[n]=1;for(a=t[n];a!==n;a=t[a]){if(o[a])return i.freeUint8(o),0;s+=1,o[a]=1}1&s||(r=-r)}return i.freeUint8(o),r};var i=r(625)},function(t,e){var r=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],i=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function n(t){if(t<0)return Number("0/0");for(var e=i[0],r=i.length-1;r>0;--r)e+=i[r]/(t+r);var n=t+607/128+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(n)-n+Math.log(e)-Math.log(t)}t.exports=function t(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));if(e>100)return Math.exp(n(e));e-=1;for(var i=r[0],a=1;a<9;a++)i+=r[a]/(e+a);var o=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,e+.5)*Math.exp(-o)*i},t.exports.log=n},function(t,e,r){"use strict";t.exports=function(t,e){var r=[];return e=+e||0,i(t.hi(t.shape[0]-1),r,e),r};var i=r(957)},function(t,e,r){t.exports=r(731)({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},function(t,e,r){"use strict";t.exports=function(t,e,r){for(var a=e.length,o=t.length,s=new Array(a),l=new Array(a),u=new Array(a),h=new Array(a),c=0;c<a;++c)s[c]=l[c]=-1,u[c]=1/0,h[c]=!1;for(c=0;c<o;++c){var f=t[c];if(2!==f.length)throw new Error("Input must be a graph");var d=f[1],p=f[0];-1!==l[p]?l[p]=-2:l[p]=d,-1!==s[d]?s[d]=-2:s[d]=p}function g(t){if(h[t])return 1/0;var r,n,a,o,u,c=s[t],f=l[t];return c<0||f<0?1/0:(r=e[t],n=e[c],a=e[f],o=Math.abs(i(r,n,a)),u=Math.sqrt(Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2)),o/u)}function v(t,e){var r=T[t],i=T[e];T[t]=i,T[e]=r,M[r]=e,M[i]=t}function m(t){return u[T[t]]}function y(t){return 1&t?t-1>>1:(t>>1)-1}function x(t){for(var e=m(t);;){var r=e,i=2*t+1,n=2*(t+1),a=t;if(i<k){var o=m(i);o<r&&(a=i,r=o)}if(n<k)m(n)<r&&(a=n);if(a===t)return t;v(t,a),t=a}}function b(t){for(var e=m(t);t>0;){var r=y(t);if(r>=0)if(e<m(r)){v(t,r),t=r;continue}return t}}function _(){if(k>0){var t=T[0];return v(0,k-1),k-=1,x(0),t}return-1}function w(t,e){var r=T[t];return u[r]===e?t:(u[r]=-1/0,b(t),_(),u[r]=e,b((k+=1)-1))}function A(t){if(!h[t]){h[t]=!0;var e=s[t],r=l[t];s[r]>=0&&(s[r]=e),l[e]>=0&&(l[e]=r),M[e]>=0&&w(M[e],g(e)),M[r]>=0&&w(M[r],g(r))}}var T=[],M=new Array(a);for(c=0;c<a;++c){(u[c]=g(c))<1/0?(M[c]=T.length,T.push(c)):M[c]=-1}var k=T.length;for(c=k>>1;c>=0;--c)x(c);for(;;){var E=_();if(E<0||u[E]>r)break;A(E)}var S=[];for(c=0;c<a;++c)h[c]||(M[c]=S.length,S.push(e[c].slice()));S.length;function C(t,e){if(t[e]<0)return e;var r=e,i=e;do{var n=t[i];if(!h[i]||n<0||n===i)break;if(n=t[i=n],!h[i]||n<0||n===i)break;i=n,r=t[r]}while(r!==i);for(var a=e;a!==i;a=t[a])t[a]=i;return i}var L=[];return t.forEach((function(t){var e=C(s,t[0]),r=C(l,t[1]);if(e>=0&&r>=0&&e!==r){var i=M[e],n=M[r];i!==n&&L.push([i,n])}})),n.unique(n.normalize(L)),{positions:S,edges:L}};var i=r(634),n=r(959)},function(t,e,r){"use strict";var i=r(960),n=r(961);function a(t,e){var r=t.length,i=t.length-e.length,n=Math.min;if(i)return i;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return(s=t[0]+t[1]-e[0]-e[1])||n(t[0],t[1])-n(e[0],e[1]);case 3:var a=t[0]+t[1],o=e[0]+e[1];if(s=a+t[2]-(o+e[2]))return s;var s,l=n(t[0],t[1]),u=n(e[0],e[1]);return(s=n(l,t[2])-n(u,e[2]))||n(l+t[2],a)-n(u+e[2],o);default:var h=t.slice(0);h.sort();var c=e.slice(0);c.sort();for(var f=0;f<r;++f)if(i=h[f]-c[f])return i;return 0}}function o(t,e){return a(t[0],e[0])}function s(t,e){if(e){for(var r=t.length,i=new Array(r),n=0;n<r;++n)i[n]=[t[n],e[n]];i.sort(o);for(n=0;n<r;++n)t[n]=i[n][0],e[n]=i[n][1];return t}return t.sort(a),t}function l(t){if(0===t.length)return[];for(var e=1,r=t.length,i=1;i<r;++i){var n=t[i];if(a(n,t[i-1])){if(i===e){e++;continue}t[e++]=n}}return t.length=e,t}function u(t,e){for(var r=0,i=t.length-1,n=-1;r<=i;){var o=r+i>>1,s=a(t[o],e);s<=0?(0===s&&(n=o),r=o+1):s>0&&(i=o-1)}return n}function h(t,e){for(var r=new Array(t.length),n=0,o=r.length;n<o;++n)r[n]=[];for(var s=[],l=(n=0,e.length);n<l;++n)for(var h=e[n],c=h.length,f=1,d=1<<c;f<d;++f){s.length=i.popCount(f);for(var p=0,g=0;g<c;++g)f&1<<g&&(s[p++]=h[g]);var v=u(t,s);if(!(v<0))for(;r[v++].push(n),!(v>=t.length||0!==a(t[v],s)););}return r}function c(t,e){if(e<0)return[];for(var r=[],n=(1<<e+1)-1,a=0;a<t.length;++a)for(var o=t[a],l=n;l<1<<o.length;l=i.nextCombination(l)){for(var u=new Array(e+1),h=0,c=0;c<o.length;++c)l&1<<c&&(u[h++]=o[c]);r.push(u)}return s(r)}e.dimension=function(t){for(var e=0,r=Math.max,i=0,n=t.length;i<n;++i)e=r(e,t[i].length);return e-1},e.countVertices=function(t){for(var e=-1,r=Math.max,i=0,n=t.length;i<n;++i)for(var a=t[i],o=0,s=a.length;o<s;++o)e=r(e,a[o]);return e+1},e.cloneCells=function(t){for(var e=new Array(t.length),r=0,i=t.length;r<i;++r)e[r]=t[r].slice(0);return e},e.compareCells=a,e.normalize=s,e.unique=l,e.findCell=u,e.incidence=h,e.dual=function(t,e){if(!e)return h(l(c(t,0)),t);for(var r=new Array(e),i=0;i<e;++i)r[i]=[];i=0;for(var n=t.length;i<n;++i)for(var a=t[i],o=0,s=a.length;o<s;++o)r[a[o]].push(i);return r},e.explode=function(t){for(var e=[],r=0,i=t.length;r<i;++r)for(var n=t[r],a=0|n.length,o=1,l=1<<a;o<l;++o){for(var u=[],h=0;h<a;++h)o>>>h&1&&u.push(n[h]);e.push(u)}return s(e)},e.skeleton=c,e.boundary=function(t){for(var e=[],r=0,i=t.length;r<i;++r)for(var n=t[r],a=0,o=n.length;a<o;++a){for(var l=new Array(n.length-1),u=0,h=0;u<o;++u)u!==a&&(l[h++]=n[u]);e.push(l)}return s(e)},e.connectedComponents=function(t,e){return e?function(t,e){for(var r=new n(e),i=0;i<t.length;++i)for(var a=t[i],o=0;o<a.length;++o)for(var s=o+1;s<a.length;++s)r.link(a[o],a[s]);var l=[],u=r.ranks;for(i=0;i<u.length;++i)u[i]=-1;for(i=0;i<t.length;++i){var h=r.find(t[i][0]);u[h]<0?(u[h]=l.length,l.push([t[i].slice(0)])):l[u[h]].push(t[i].slice(0))}return l}(t,e):function(t){for(var e=l(s(c(t,0))),r=new n(e.length),i=0;i<t.length;++i)for(var a=t[i],o=0;o<a.length;++o)for(var h=u(e,[a[o]]),f=o+1;f<a.length;++f)r.link(h,u(e,[a[f]]));var d=[],p=r.ranks;for(i=0;i<p.length;++i)p[i]=-1;for(i=0;i<t.length;++i){var g=r.find(u(e,[t[i][0]]));p[g]<0?(p[g]=d.length,d.push([t[i].slice(0)])):d[p[g]].push(t[i].slice(0))}return d}(t)}},function(t,e,r){"use strict";function i(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=i,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,i=e,n=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=1&r,--n;t[e]=i<<n&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},function(t,e,r){"use strict";function i(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=i,i.prototype.length=function(){return this.roots.length},i.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},i.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var r=e[t];e[t]=e[r],t=r}return t},i.prototype.link=function(t,e){var r=this.find(t),i=this.find(e);if(r!==i){var n=this.ranks,a=this.roots,o=n[r],s=n[i];o<s?a[r]=i:s<o?a[i]=r:(a[i]=r,++n[r])}}},function(t,e,r){"use strict";t.exports=function(t,e,r){switch(arguments.length){case 1:return c(t);case 2:return"function"==typeof e?u(t,t,e,!0):f(t,e);case 3:return u(t,e,r,!1);default:throw new Error("box-intersect: Invalid arguments")}};var i,n=r(625),a=r(795),o=r(964);function s(t,e){for(var r=0;r<t;++r)if(!(e[r]<=e[r+t]))return!0;return!1}function l(t,e,r,i){for(var n=0,a=0,o=0,l=t.length;o<l;++o){var u=t[o];if(!s(e,u)){for(var h=0;h<2*e;++h)r[n++]=u[h];i[a++]=o}}return a}function u(t,e,r,i){var s=t.length,u=e.length;if(!(s<=0||u<=0)){var h=t[0].length>>>1;if(!(h<=0)){var c,f=n.mallocDouble(2*h*s),d=n.mallocInt32(s);if((s=l(t,h,f,d))>0){if(1===h&&i)a.init(s),c=a.sweepComplete(h,r,0,s,f,d,0,s,f,d);else{var p=n.mallocDouble(2*h*u),g=n.mallocInt32(u);(u=l(e,h,p,g))>0&&(a.init(s+u),c=1===h?a.sweepBipartite(h,r,0,s,f,d,0,u,p,g):o(h,r,i,s,f,d,u,p,g),n.free(p),n.free(g))}n.free(f),n.free(d)}return c}}}function h(t,e){i.push([t,e])}function c(t){return i=[],u(t,t,h,!0),i}function f(t,e){return i=[],u(t,e,h,!1),i}},function(t,e,r){"use strict";t.exports=function(t,e){e<=128?i(0,e-1,t):function t(e,r,h){var c=(r-e+1)/6|0,f=e+c,d=r-c,p=e+r>>1,g=p-c,v=p+c,m=f,y=g,x=p,b=v,_=d,w=e+1,A=r-1,T=0;l(m,y,h)&&(T=m,m=y,y=T);l(b,_,h)&&(T=b,b=_,_=T);l(m,x,h)&&(T=m,m=x,x=T);l(y,x,h)&&(T=y,y=x,x=T);l(m,b,h)&&(T=m,m=b,b=T);l(x,b,h)&&(T=x,x=b,b=T);l(y,_,h)&&(T=y,y=_,_=T);l(y,x,h)&&(T=y,y=x,x=T);l(b,_,h)&&(T=b,b=_,_=T);for(var M=h[2*y],k=h[2*y+1],E=h[2*b],S=h[2*b+1],C=2*m,L=2*x,I=2*_,j=2*f,R=2*p,P=2*d,O=0;O<2;++O){var z=h[C+O],N=h[L+O],B=h[I+O];h[j+O]=z,h[R+O]=N,h[P+O]=B}a(g,e,h),a(v,r,h);for(var F=w;F<=A;++F)if(u(F,M,k,h))F!==w&&n(F,w,h),++w;else if(!u(F,E,S,h))for(;;){if(u(A,E,S,h)){u(A,M,k,h)?(o(F,w,A,h),++w,--A):(n(F,A,h),--A);break}if(--A<F)break}s(e,w-1,M,k,h),s(r,A+1,E,S,h),w-2-e<=32?i(e,w-2,h):t(e,w-2,h);r-(A+2)<=32?i(A+2,r,h):t(A+2,r,h);A-w<=32?i(w,A,h):t(w,A,h)}(0,e-1,t)};function i(t,e,r){for(var i=2*(t+1),n=t+1;n<=e;++n){for(var a=r[i++],o=r[i++],s=n,l=i-2;s-- >t;){var u=r[l-2],h=r[l-1];if(u<a)break;if(u===a&&h<o)break;r[l]=u,r[l+1]=h,l-=2}r[l]=a,r[l+1]=o}}function n(t,e,r){e*=2;var i=r[t*=2],n=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=i,r[e+1]=n}function a(t,e,r){e*=2,r[t*=2]=r[e],r[t+1]=r[e+1]}function o(t,e,r,i){e*=2,r*=2;var n=i[t*=2],a=i[t+1];i[t]=i[e],i[t+1]=i[e+1],i[e]=i[r],i[e+1]=i[r+1],i[r]=n,i[r+1]=a}function s(t,e,r,i,n){e*=2,n[t*=2]=n[e],n[e]=r,n[t+1]=n[e+1],n[e+1]=i}function l(t,e,r){e*=2;var i=r[t*=2],n=r[e];return!(i<n)&&(i!==n||r[t+1]>r[e+1])}function u(t,e,r,i){var n=i[t*=2];return n<e||n===e&&i[t+1]<r}},function(t,e,r){"use strict";t.exports=function(t,e,r,a,h,w,A,T,M){!function(t,e){var r=8*n.log2(e+1)*(t+1)|0,a=n.nextPow2(6*r);m.length<a&&(i.free(m),m=i.mallocInt32(a));var o=n.nextPow2(2*r);y.length<o&&(i.free(y),y=i.mallocDouble(o))}(t,a+A);var k,E=0,S=2*t;x(E++,0,0,a,0,A,r?16:0,-1/0,1/0),r||x(E++,0,0,A,0,a,1,-1/0,1/0);for(;E>0;){var C=6*(E-=1),L=m[C],I=m[C+1],j=m[C+2],R=m[C+3],P=m[C+4],O=m[C+5],z=2*E,N=y[z],B=y[z+1],F=1&O,D=!!(16&O),U=h,V=w,X=T,G=M;if(F&&(U=T,V=M,X=h,G=w),!(2&O&&(j=d(t,L,I,j,U,V,B),I>=j)||4&O&&(I=p(t,L,I,j,U,V,N))>=j)){var W=j-I,H=P-R;if(D){if(t*W*(W+H)<1<<22){if(void 0!==(k=l.scanComplete(t,L,e,I,j,U,V,R,P,X,G)))return k;continue}}else{if(t*Math.min(W,H)<128){if(void 0!==(k=o(t,L,e,F,I,j,U,V,R,P,X,G)))return k;continue}if(t*W*H<1<<22){if(void 0!==(k=l.scanBipartite(t,L,e,F,I,j,U,V,R,P,X,G)))return k;continue}}var q=c(t,L,I,j,U,V,N,B);if(I<q)if(t*(q-I)<128){if(void 0!==(k=s(t,L+1,e,I,q,U,V,R,P,X,G)))return k}else if(L===t-2){if(void 0!==(k=F?l.sweepBipartite(t,e,R,P,X,G,I,q,U,V):l.sweepBipartite(t,e,I,q,U,V,R,P,X,G)))return k}else x(E++,L+1,I,q,R,P,F,-1/0,1/0),x(E++,L+1,R,P,I,q,1^F,-1/0,1/0);if(q<j){var Y=u(t,L,R,P,X,G),Z=X[S*Y+L],Q=f(t,L,Y,P,X,G,Z);if(Q<P&&x(E++,L,q,j,Q,P,(4|F)+(D?16:0),Z,B),R<Y&&x(E++,L,q,j,R,Y,(2|F)+(D?16:0),N,Z),Y+1===Q){if(void 0!==(k=D?_(t,L,e,q,j,U,V,Y,X,G[Y]):b(t,L,e,F,q,j,U,V,Y,X,G[Y])))return k}else if(Y<Q){var K;if(D){if(K=g(t,L,q,j,U,V,Z),q<K){var J=f(t,L,q,K,U,V,Z);if(L===t-2){if(q<J&&void 0!==(k=l.sweepComplete(t,e,q,J,U,V,Y,Q,X,G)))return k;if(J<K&&void 0!==(k=l.sweepBipartite(t,e,J,K,U,V,Y,Q,X,G)))return k}else q<J&&x(E++,L+1,q,J,Y,Q,16,-1/0,1/0),J<K&&(x(E++,L+1,J,K,Y,Q,0,-1/0,1/0),x(E++,L+1,Y,Q,J,K,1,-1/0,1/0))}}else K=F?v(t,L,q,j,U,V,Z):g(t,L,q,j,U,V,Z),q<K&&(L===t-2?k=F?l.sweepBipartite(t,e,Y,Q,X,G,q,K,U,V):l.sweepBipartite(t,e,q,K,U,V,Y,Q,X,G):(x(E++,L+1,q,K,Y,Q,F,-1/0,1/0),x(E++,L+1,Y,Q,q,K,1^F,-1/0,1/0)))}}}}};var i=r(625),n=r(643),a=r(965),o=a.partial,s=a.full,l=r(795),u=r(966),h=r(796),c=h("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),f=h("lo===p0",["p0"]),d=h("lo<p0",["p0"]),p=h("hi<=p0",["p0"]),g=h("lo<=p0&&p0<=hi",["p0"]),v=h("lo<p0&&p0<=hi",["p0"]),m=i.mallocInt32(1024),y=i.mallocDouble(1024);function x(t,e,r,i,n,a,o,s,l){var u=6*t;m[u]=e,m[u+1]=r,m[u+2]=i,m[u+3]=n,m[u+4]=a,m[u+5]=o;var h=2*t;y[h]=s,y[h+1]=l}function b(t,e,r,i,n,a,o,s,l,u,h){var c=2*t,f=l*c,d=u[f+e];t:for(var p=n,g=n*c;p<a;++p,g+=c){var v=o[g+e],m=o[g+e+t];if(!(d<v||m<d)&&(!i||d!==v)){for(var y,x=s[p],b=e+1;b<t;++b){v=o[g+b],m=o[g+b+t];var _=u[f+b],w=u[f+b+t];if(m<_||w<v)continue t}if(void 0!==(y=i?r(h,x):r(x,h)))return y}}}function _(t,e,r,i,n,a,o,s,l,u){var h=2*t,c=s*h,f=l[c+e];t:for(var d=i,p=i*h;d<n;++d,p+=h){var g=o[d];if(g!==u){var v=a[p+e],m=a[p+e+t];if(!(f<v||m<f)){for(var y=e+1;y<t;++y){v=a[p+y],m=a[p+y+t];var x=l[c+y],b=l[c+y+t];if(m<x||b<v)continue t}var _=r(g,u);if(void 0!==_)return _}}}}},function(t,e,r){"use strict";var i=["d","ax","vv","rs","re","rb","ri","bs","be","bb","bi"];function n(t){var e="bruteForce"+(t?"Full":"Partial"),r=[],n=i.slice();t||n.splice(3,0,"fp");var a=["function "+e+"("+n.join()+"){"];function o(e,n){var o=function(t,e,r){var n="bruteForce"+(t?"Red":"Blue")+(e?"Flip":"")+(r?"Full":""),a=["function ",n,"(",i.join(),"){","var ","es","=2*","d",";"],o="for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];",s="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(r?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";return t?a.push(o,"Q",":",s):a.push(s,"Q",":",o),r?a.push("if(y1<x0||x1<y0)continue;"):e?a.push("if(y0<=x0||x1<y0)continue;"):a.push("if(y0<x0||x1<y0)continue;"),a.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv("),e?a.push("yi,xi"):a.push("xi,yi"),a.push(");if(rv!==void 0)return rv;}}}"),{name:n,code:a.join("")}}(e,n,t);r.push(o.code),a.push("return "+o.name+"("+i.join()+");")}a.push("if(re-rs>be-bs){"),t?(o(!0,!1),a.push("}else{"),o(!1,!1)):(a.push("if(fp){"),o(!0,!0),a.push("}else{"),o(!0,!1),a.push("}}else{if(fp){"),o(!1,!0),a.push("}else{"),o(!1,!1),a.push("}")),a.push("}}return "+e);var s=r.join("")+a.join("");return new Function(s)()}e.partial=n(!1),e.full=n(!0)},function(t,e,r){"use strict";t.exports=function(t,e,r,a,o,s){if(a<=r+1)return r;var l=r,u=a,h=a+r>>>1,c=2*t,f=h,d=o[c*h+e];for(;l<u;){if(u-l<8){n(t,e,l,u,o,s),d=o[c*h+e];break}var p=u-l,g=Math.random()*p+l|0,v=o[c*g+e],m=Math.random()*p+l|0,y=o[c*m+e],x=Math.random()*p+l|0,b=o[c*x+e];v<=y?b>=y?(f=m,d=y):v>=b?(f=g,d=v):(f=x,d=b):y>=b?(f=m,d=y):b>=v?(f=g,d=v):(f=x,d=b);for(var _=c*(u-1),w=c*f,A=0;A<c;++A,++_,++w){var T=o[_];o[_]=o[w],o[w]=T}var M=s[u-1];s[u-1]=s[f],s[f]=M,f=i(t,e,l,u-1,o,s,d);for(_=c*(u-1),w=c*f,A=0;A<c;++A,++_,++w){T=o[_];o[_]=o[w],o[w]=T}M=s[u-1];if(s[u-1]=s[f],s[f]=M,h<f){for(u=f-1;l<u&&o[c*(u-1)+e]===d;)u-=1;u+=1}else{if(!(f<h))break;for(l=f+1;l<u&&o[c*l+e]===d;)l+=1}}return i(t,e,r,h,o,s,o[c*h+e])};var i=r(796)("lo<p0",["p0"]);function n(t,e,r,i,n,a){for(var o=2*t,s=o*(r+1)+e,l=r+1;l<i;++l,s+=o)for(var u=n[s],h=l,c=o*(l-1);h>r&&n[c+e]>u;--h,c-=o){for(var f=c,d=c+o,p=0;p<o;++p,++f,++d){var g=n[f];n[f]=n[d],n[d]=g}var v=a[h];a[h]=a[h-1],a[h-1]=v}}},function(t,e,r){"use strict";t.exports=function(t,e,r,n){var a=i(t,r,n),o=i(e,r,n);if(a>0&&o>0||a<0&&o<0)return!1;var s=i(r,t,e),l=i(n,t,e);if(s>0&&l>0||s<0&&l<0)return!1;if(0===a&&0===o&&0===s&&0===l)return function(t,e,r,i){for(var n=0;n<2;++n){var a=t[n],o=e[n],s=Math.min(a,o),l=Math.max(a,o),u=r[n],h=i[n],c=Math.min(u,h);if(Math.max(u,h)<s||l<c)return!1}return!0}(t,e,r,n);return!0};var i=r(634)[3]},function(t,e,r){"use strict";var i=r(797);t.exports=function(t){return Array.isArray(t)&&2===t.length&&i(t[0])&&i(t[1])}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";var i=r(684);t.exports=function(t){return new i(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))}},function(t,e,r){"use strict";var i=r(973),n=r(974);t.exports=function(t){var e=t[0],r=t[1];if(0===e.cmpn(0))return 0;var a=e.abs().divmod(r.abs()),o=a.div,s=i(o),l=a.mod,u=e.negative!==r.negative?-1:1;if(0===l.cmpn(0))return u*s;if(s){var h=n(s)+4,c=i(l.ushln(h).divRound(r));return u*(s+c*Math.pow(2,-h))}var f=r.bitLength()-l.bitLength()+53;c=i(l.ushln(f).divRound(r));return f<1023?u*c*Math.pow(2,-f):(c*=Math.pow(2,-1023),u*c*Math.pow(2,1023-f))}},function(t,e,r){"use strict";var i=r(728);t.exports=function(t){var e=t.length,r=t.words,n=0;if(1===e)n=r[0];else if(2===e)n=r[0]+67108864*r[1];else for(var a=0;a<e;a++){var o=r[a];n+=o*Math.pow(67108864,a)}return i(t)*n}},function(t,e,r){"use strict";var i=r(727),n=r(643).countTrailingZeros;t.exports=function(t){var e=n(i.lo(t));if(e<32)return e;var r=n(i.hi(t));if(r>20)return 52;return r+32}},function(t,e,r){"use strict";t.exports=function(t){for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=i(t[r]);return e};var i=r(726)},function(t,e,r){"use strict";var i=r(727),n=Math.pow(2,-1074);t.exports=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-n:n;var r=i.hi(t),a=i.lo(t);e>t==t>0?a===-1>>>0?(r+=1,a=0):a+=1:0===a?(a=-1>>>0,r-=1):a-=1;return i.pack(a,r)}},function(t,e,r){"use strict";t.exports=function(t,e,r,i){var a=s(e,t),c=s(i,r),f=h(a,c);if(0===o(f))return null;var d=s(t,r),p=h(c,d),g=n(p,f),v=u(a,g);return l(t,v)};var i=r(800),n=r(799),a=r(801),o=r(978),s=r(979),l=r(980),u=r(982);function h(t,e){return a(i(t[0],e[1]),i(t[1],e[0]))}},function(t,e,r){"use strict";var i=r(728);t.exports=function(t){return i(t[0])*i(t[1])}},function(t,e,r){"use strict";var i=r(801);t.exports=function(t,e){for(var r=t.length,n=new Array(r),a=0;a<r;++a)n[a]=i(t[a],e[a]);return n}},function(t,e,r){"use strict";var i=r(981);t.exports=function(t,e){for(var r=t.length,n=new Array(r),a=0;a<r;++a)n[a]=i(t[a],e[a]);return n}},function(t,e,r){"use strict";var i=r(666);t.exports=function(t,e){return i(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))}},function(t,e,r){"use strict";var i=r(726),n=r(800);t.exports=function(t,e){for(var r=i(e),a=t.length,o=new Array(a),s=0;s<a;++s)o[s]=n(t[s],r);return o}},function(t,e,r){"use strict";var i=r(639),n=r(634)[3];function a(t,e,r,i,n){this.a=t,this.b=e,this.idx=r,this.lowerIds=i,this.upperIds=n}function o(t,e,r,i){this.a=t,this.b=e,this.type=r,this.idx=i}function s(t,e){var r=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return r||(0!==t.type&&(r=n(t.a,t.b,e.b))?r:t.idx-e.idx)}function l(t,e){return n(t.a,t.b,e)}function u(t,e,r,a,o){for(var s=i.lt(e,a,l),u=i.gt(e,a,l),h=s;h<u;++h){for(var c=e[h],f=c.lowerIds,d=f.length;d>1&&n(r[f[d-2]],r[f[d-1]],a)>0;)t.push([f[d-1],f[d-2],o]),d-=1;f.length=d,f.push(o);var p=c.upperIds;for(d=p.length;d>1&&n(r[p[d-2]],r[p[d-1]],a)<0;)t.push([p[d-2],p[d-1],o]),d-=1;p.length=d,p.push(o)}}function h(t,e){var r;return(r=t.a[0]<e.a[0]?n(t.a,t.b,e.a):n(e.b,e.a,t.a))?r:(r=e.b[0]<t.b[0]?n(t.a,t.b,e.b):n(e.b,e.a,t.b))||t.idx-e.idx}function c(t,e,r){var n=i.le(t,r,h),o=t[n],s=o.upperIds,l=s[s.length-1];o.upperIds=[l],t.splice(n+1,0,new a(r.a,r.b,r.idx,[l],s))}function f(t,e,r){var n=r.a;r.a=r.b,r.b=n;var a=i.eq(t,r,h),o=t[a];t[a-1].upperIds=o.upperIds,t.splice(a,1)}t.exports=function(t,e){for(var r=t.length,i=e.length,n=[],l=0;l<r;++l)n.push(new o(t[l],null,0,l));for(l=0;l<i;++l){var h=e[l],d=t[h[0]],p=t[h[1]];d[0]<p[0]?n.push(new o(d,p,2,l),new o(p,d,1,l)):d[0]>p[0]&&n.push(new o(p,d,2,l),new o(d,p,1,l))}n.sort(s);for(var g=n[0].a[0]-(1+Math.abs(n[0].a[0]))*Math.pow(2,-52),v=[new a([g,1],[g,0],-1,[],[],[],[])],m=[],y=(l=0,n.length);l<y;++l){var x=n[l],b=x.type;0===b?u(m,v,t,x.a,x.idx):2===b?c(v,t,x):f(v,t,x)}return m}},function(t,e,r){"use strict";var i=r(639);function n(t,e){this.stars=t,this.edges=e}t.exports=function(t,e){for(var r=new Array(t),i=0;i<t;++i)r[i]=[];return new n(r,e)};var a=n.prototype;function o(t,e,r){for(var i=1,n=t.length;i<n;i+=2)if(t[i-1]===e&&t[i]===r)return t[i-1]=t[n-2],t[i]=t[n-1],void(t.length=n-2)}a.isConstraint=function(){var t=[0,0];function e(t,e){return t[0]-e[0]||t[1]-e[1]}return function(r,n){return t[0]=Math.min(r,n),t[1]=Math.max(r,n),i.eq(this.edges,t,e)>=0}}(),a.removeTriangle=function(t,e,r){var i=this.stars;o(i[t],e,r),o(i[e],r,t),o(i[r],t,e)},a.addTriangle=function(t,e,r){var i=this.stars;i[t].push(e,r),i[e].push(r,t),i[r].push(t,e)},a.opposite=function(t,e){for(var r=this.stars[e],i=1,n=r.length;i<n;i+=2)if(r[i]===t)return r[i-1];return-1},a.flip=function(t,e){var r=this.opposite(t,e),i=this.opposite(e,t);this.removeTriangle(t,e,r),this.removeTriangle(e,t,i),this.addTriangle(t,i,r),this.addTriangle(e,r,i)},a.edges=function(){for(var t=this.stars,e=[],r=0,i=t.length;r<i;++r)for(var n=t[r],a=0,o=n.length;a<o;a+=2)e.push([n[a],n[a+1]]);return e},a.cells=function(){for(var t=this.stars,e=[],r=0,i=t.length;r<i;++r)for(var n=t[r],a=0,o=n.length;a<o;a+=2){var s=n[a],l=n[a+1];r<Math.min(s,l)&&e.push([r,s,l])}return e}},function(t,e,r){"use strict";var i=r(986)[4];r(639);function n(t,e,r,n,a,o){var s=e.opposite(n,a);if(!(s<0)){if(a<n){var l=n;n=a,a=l,l=o,o=s,s=l}e.isConstraint(n,a)||i(t[n],t[a],t[o],t[s])<0&&r.push(n,a)}}t.exports=function(t,e){for(var r=[],a=t.length,o=e.stars,s=0;s<a;++s)for(var l=o[s],u=1;u<l.length;u+=2){if(!((d=l[u])<s)&&!e.isConstraint(s,d)){for(var h=l[u-1],c=-1,f=1;f<l.length;f+=2)if(l[f-1]===d){c=l[f];break}c<0||i(t[s],t[d],t[h],t[c])<0&&r.push(s,d)}}for(;r.length>0;){for(var d=r.pop(),p=(s=r.pop(),h=-1,c=-1,l=o[s],1);p<l.length;p+=2){var g=l[p-1],v=l[p];g===d?c=v:v===d&&(h=g)}h<0||c<0||(i(t[s],t[d],t[h],t[c])>=0||(e.flip(s,d),n(t,e,r,h,s,c),n(t,e,r,s,c,h),n(t,e,r,c,d,h),n(t,e,r,d,h,c)))}}},function(t,e,r){"use strict";var i=r(668),n=r(654),a=r(794),o=r(702);function s(t,e){for(var r=new Array(t.length-1),i=1;i<t.length;++i)for(var n=r[i-1]=new Array(t.length-1),a=0,o=0;a<t.length;++a)a!==e&&(n[o++]=t[i][a]);return r}function l(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",l(t.slice(0,e)),",",l(t.slice(e)),")"].join("")}function u(t,e){if("m"===t.charAt(0)){if("w"===e.charAt(0)){var r=t.split("[");return["w",e.substr(1),"m",r[0].substr(1)].join("")}return["prod(",t,",",e,")"].join("")}return u(e,t)}function h(t){if(2===t.length)return[["diff(",u(t[0][0],t[1][1]),",",u(t[1][0],t[0][1]),")"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",l(h(s(t,r))),",",(i=r,!0&i?"-":""),t[0][r],")"].join(""));return e;var i}function c(t,e){for(var r=[],i=0;i<e-2;++i)r.push(["prod(m",t,"[",i,"],m",t,"[",i,"])"].join(""));return l(r)}function f(t){for(var e=[],r=[],u=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var i=0;i<t;++i)e[r][i]=["m",i,"[",t-r-2,"]"].join("")}return e}(t),f=0;f<t;++f)u[0][f]="1",u[t-1][f]="w"+f;for(f=0;f<t;++f)0==(1&f)?e.push.apply(e,h(s(u,f))):r.push.apply(r,h(s(u,f)));var d=l(e),p=l(r),g="exactInSphere"+t,v=[];for(f=0;f<t;++f)v.push("m"+f);var m=["function ",g,"(",v.join(),"){"];for(f=0;f<t;++f){m.push("var w",f,"=",c(f,t),";");for(var y=0;y<t;++y)y!==f&&m.push("var w",f,"m",y,"=scale(w",f,",m",y,"[0]);")}return m.push("var p=",d,",n=",p,",d=diff(p,n);return d[d.length-1];}return ",g),new Function("sum","diff","prod","scale",m.join(""))(n,a,i,o)}var d=[function(){return 0},function(){return 0},function(){return 0}];function p(t){var e=d[t.length];return e||(e=d[t.length]=f(t.length)),e.apply(void 0,t)}!function(){for(;d.length<=6;)d.push(f(d.length));for(var e=[],r=["slow"],i=0;i<=6;++i)e.push("a"+i),r.push("o"+i);var n=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=6;++i)n.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),r.push(n.join(""));var a=Function.apply(void 0,r);for(t.exports=a.apply(void 0,[p].concat(d)),i=0;i<=6;++i)t.exports[i]=d[i]}()},function(t,e,r){"use strict";var i,n=r(639);function a(t,e,r,i,n,a,o){this.cells=t,this.neighbor=e,this.flags=i,this.constraint=r,this.active=n,this.next=a,this.boundary=o}function o(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}t.exports=function(t,e,r){var i=function(t,e){for(var r=t.cells(),i=r.length,n=0;n<i;++n){var s=(m=r[n])[0],l=m[1],u=m[2];l<u?l<s&&(m[0]=l,m[1]=u,m[2]=s):u<s&&(m[0]=u,m[1]=s,m[2]=l)}r.sort(o);var h=new Array(i);for(n=0;n<h.length;++n)h[n]=0;var c=[],f=[],d=new Array(3*i),p=new Array(3*i),g=null;e&&(g=[]);var v=new a(r,d,p,h,c,f,g);for(n=0;n<i;++n)for(var m=r[n],y=0;y<3;++y){s=m[y],l=m[(y+1)%3];var x=d[3*n+y]=v.locate(l,s,t.opposite(l,s)),b=p[3*n+y]=t.isConstraint(s,l);x<0&&(b?f.push(n):(c.push(n),h[n]=1),e&&g.push([l,s,-1]))}return v}(t,r);if(0===e)return r?i.cells.concat(i.boundary):i.cells;var n=1,s=i.active,l=i.next,u=i.flags,h=i.cells,c=i.constraint,f=i.neighbor;for(;s.length>0||l.length>0;){for(;s.length>0;){var d=s.pop();if(u[d]!==-n){u[d]=n;h[d];for(var p=0;p<3;++p){var g=f[3*d+p];g>=0&&0===u[g]&&(c[3*d+p]?l.push(g):(s.push(g),u[g]=n))}}}var v=l;l=s,s=v,l.length=0,n=-n}var m=function(t,e,r){for(var i=0,n=0;n<t.length;++n)e[n]===r&&(t[i++]=t[n]);return t.length=i,t}(h,u,e);if(r)return m.concat(i.boundary);return m},a.prototype.locate=(i=[0,0,0],function(t,e,r){var a=t,s=e,l=r;return e<r?e<t&&(a=e,s=r,l=t):r<t&&(a=r,s=t,l=e),a<0?-1:(i[0]=a,i[1]=s,i[2]=l,n.eq(this.cells,i,o))})},function(t,e,r){"use strict";t.exports=function(t,e){var r=u(t,e);t=r[0];for(var c=(e=r[1]).length,f=(t.length,i(t,e.length)),d=0;d<c;++d)if(f[d].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var p=n(t,e);var g=(p=p.filter((function(t){for(var r=t.length,i=[0],n=0;n<r;++n){var a=e[t[n]],l=e[t[(n+1)%r]],u=o(-a[0],a[1]),h=o(-a[0],l[1]),c=o(l[0],a[1]),f=o(l[0],l[1]);i=s(i,s(s(u,h),s(c,f)))}return i[i.length-1]>0}))).length,v=new Array(g),m=new Array(g);for(d=0;d<g;++d){v[d]=d;var y=new Array(g),x=p[d].map((function(t){return e[t]})),b=a([x]),_=0;t:for(var w=0;w<g;++w)if(y[w]=0,d!==w){for(var A=(X=p[w]).length,T=0;T<A;++T){var M=b(e[X[T]]);if(0!==M){M<0&&(y[w]=1,_+=1);continue t}}y[w]=1,_+=1}m[d]=[_,d,y]}m.sort((function(t,e){return e[0]-t[0]}));for(d=0;d<g;++d){var k=(y=m[d])[1],E=y[2];for(w=0;w<g;++w)E[w]&&(v[w]=k)}var S=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=[];return e}(g);for(d=0;d<g;++d)S[d].push(v[d]),S[v[d]].push(d);var C={},L=h(c,!1);for(d=0;d<g;++d)for(A=(X=p[d]).length,w=0;w<A;++w){var I=X[w],j=X[(w+1)%A],R=Math.min(I,j)+":"+Math.max(I,j);if(R in C){var P=C[R];S[P].push(d),S[d].push(P),L[I]=L[j]=!0}else C[R]=d}function O(t){for(var e=t.length,r=0;r<e;++r)if(!L[t[r]])return!1;return!0}var z=[],N=h(g,-1);for(d=0;d<g;++d)v[d]!==d||O(p[d])?N[d]=-1:(z.push(d),N[d]=0);r=[];for(;z.length>0;){var B=z.pop(),F=S[B];l(F,(function(t,e){return t-e}));var D,U=F.length,V=N[B];if(0===V){var X=p[B];D=[X]}for(d=0;d<U;++d){var G=F[d];if(!(N[G]>=0))if(N[G]=1^V,z.push(G),0===V)O(X=p[G])||(X.reverse(),D.push(X))}0===V&&r.push(D)}return r};var i=r(802),n=r(989),a=r(993),o=r(668),s=r(654),l=r(699),u=r(1001);function h(t,e){for(var r=new Array(t),i=0;i<t;++i)r[i]=e;return r}},function(t,e,r){"use strict";t.exports=function(t,e){for(var r=0|e.length,n=t.length,a=[new Array(r),new Array(r)],o=0;o<r;++o)a[0][o]=[],a[1][o]=[];for(o=0;o<n;++o){var s=t[o];a[0][s[0]].push(s),a[1][s[1]].push(s)}var l=[];for(o=0;o<r;++o)a[0][o].length+a[1][o].length===0&&l.push([o]);function u(t,e){var r=a[e][t[e]];r.splice(r.indexOf(t),1)}function h(t,r,n){for(var o,s,l,h=0;h<2;++h)if(a[h][r].length>0){o=a[h][r][0],l=h;break}s=o[1^l];for(var c=0;c<2;++c)for(var f=a[c][r],d=0;d<f.length;++d){var p=f[d],g=p[1^c];i(e[t],e[r],e[s],e[g])>0&&(o=p,s=g,l=c)}return n||o&&u(o,l),s}function c(t,r){var n=a[r][t][0],o=[t];u(n,r);for(var s=n[1^r];;){for(;s!==t;)o.push(s),s=h(o[o.length-2],s,!1);if(a[0][t].length+a[1][t].length===0)break;var l=o[o.length-1],c=t,f=o[1],d=h(l,c,!0);if(i(e[l],e[c],e[f],e[d])<0)break;o.push(t),s=h(l,c)}return o}function f(t,e){return e[1]===e[e.length-1]}for(o=0;o<r;++o)for(var d=0;d<2;++d){for(var p=[];a[d][o].length>0;){a[0][o].length;var g=c(o,d);f(0,g)?p.push.apply(p,g):(p.length>0&&l.push(p),p=g)}p.length>0&&l.push(p)}return l};var i=r(990)},function(t,e,r){"use strict";t.exports=function(t,e,r,a){var o=i(e,r,a);if(0===o){var s=n(i(t,e,r)),u=n(i(t,e,a));if(s===u){if(0===s){var h=l(t,e,r),c=l(t,e,a);return h===c?0:h?1:-1}return 0}return 0===u?s>0||l(t,e,a)?-1:1:0===s?u>0||l(t,e,r)?1:-1:n(u-s)}var f=i(t,e,r);return f>0?o>0&&i(t,e,a)>0?1:-1:f<0?o>0||i(t,e,a)>0?1:-1:i(t,e,a)>0||l(t,e,r)?1:-1};var i=r(634),n=r(991),a=r(793),o=r(992),s=r(654);function l(t,e,r){var i=a(t[0],-e[0]),n=a(t[1],-e[1]),l=a(r[0],-e[0]),u=a(r[1],-e[1]),h=s(o(i,l),o(n,u));return h[h.length-1]>=0}},function(t,e,r){"use strict";t.exports=function(t){return t<0?-1:t>0?1:0}},function(t,e,r){"use strict";var i=r(654),n=r(702);t.exports=function(t,e){if(1===t.length)return n(e,t[0]);if(1===e.length)return n(t,e[0]);if(0===t.length||0===e.length)return[0];var r=[0];if(t.length<e.length)for(var a=0;a<t.length;++a)r=i(r,n(e,t[a]));else for(a=0;a<e.length;++a)r=i(r,n(t,e[a]));return r}},function(t,e,r){t.exports=function(t){for(var e=t.length,r=[],a=[],s=0;s<e;++s)for(var h=t[s],c=h.length,f=c-1,d=0;d<c;f=d++){var p=h[f],g=h[d];p[0]===g[0]?a.push([p,g]):r.push([p,g])}if(0===r.length)return 0===a.length?u:(v=l(a),function(t){return v(t[0],t[1])?0:1});var v;var m=n(r),y=function(t,e){return function(r){var n=o.le(e,r[0]);if(n<0)return 1;var a=t[n];if(!a){if(!(n>0&&e[n]===r[0]))return 1;a=t[n-1]}for(var s=1;a;){var l=a.key,u=i(r,l[0],l[1]);if(l[0][0]<l[1][0])if(u<0)a=a.left;else{if(!(u>0))return 0;s=-1,a=a.right}else if(u>0)a=a.left;else{if(!(u<0))return 0;s=1,a=a.right}}return s}}(m.slabs,m.coordinates);return 0===a.length?y:function(t,e){return function(r){return t(r[0],r[1])?0:e(r)}}(l(a),y)};var i=r(634)[3],n=r(994),a=r(998),o=r(1e3);function s(){return!0}function l(t){for(var e={},r=0;r<t.length;++r){var i=t[r],n=i[0][0],o=i[0][1],l=i[1][1],u=[Math.min(o,l),Math.max(o,l)];n in e?e[n].push(u):e[n]=[u]}var h={},c=Object.keys(e);for(r=0;r<c.length;++r){var f=e[c[r]];h[c[r]]=a(f)}return function(t){return function(e,r){var i=t[e];return!!i&&!!i.queryPoint(r,s)}}(h)}function u(t){return 1}},function(t,e,r){"use strict";t.exports=function(t){for(var e=t.length,r=2*e,i=new Array(r),a=0;a<e;++a){var l=t[a],u=l[0][0]<l[1][0];i[2*a]=new c(l[0][0],l,u,a),i[2*a+1]=new c(l[1][0],l,!u,a)}i.sort((function(t,e){var r=t.x-e.x;return r||((r=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1]))}));var f=n(o),d=[],p=[],g=[];for(a=0;a<r;){for(var v=i[a].x,m=[];a<r;){var y=i[a];if(y.x!==v)break;a+=1,y.segment[0][0]===y.x&&y.segment[1][0]===y.x?y.create&&(y.segment[0][1]<y.segment[1][1]?(m.push(new h(y.segment[0][1],y.index,!0,!0)),m.push(new h(y.segment[1][1],y.index,!1,!1))):(m.push(new h(y.segment[1][1],y.index,!0,!1)),m.push(new h(y.segment[0][1],y.index,!1,!0)))):f=y.create?f.insert(y.segment,y.index):f.remove(y.segment)}d.push(f.root),p.push(v),g.push(m)}return new s(d,p,g)};var i=r(995),n=r(996),a=r(634),o=r(997);function s(t,e,r){this.slabs=t,this.coordinates=e,this.horizontal=r}function l(t,e){return t.y-e}function u(t,e){for(var r=null;t;){var i,n,o=t.key;o[0][0]<o[1][0]?(i=o[0],n=o[1]):(i=o[1],n=o[0]);var s=a(i,n,e);if(s<0)t=t.left;else if(s>0)if(e[0]!==o[1][0])r=t,t=t.right;else{if(l=u(t.right,e))return l;t=t.left}else{if(e[0]!==o[1][0])return t;var l;if(l=u(t.right,e))return l;t=t.left}}return r}function h(t,e,r,i){this.y=t,this.index=e,this.start=r,this.closed=i}function c(t,e,r,i){this.x=t,this.segment=e,this.create=r,this.index=i}s.prototype.castUp=function(t){var e=i.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var r=u(this.slabs[e],t),n=-1;if(r&&(n=r.value),this.coordinates[e]===t[0]){var s=null;if(r&&(s=r.key),e>0){var h=u(this.slabs[e-1],t);h&&(s?o(h.key,s)>0&&(s=h.key,n=h.value):(n=h.value,s=h.key))}var c=this.horizontal[e];if(c.length>0){var f=i.ge(c,t[1],l);if(f<c.length){var d=c[f];if(t[1]===d.y){if(d.closed)return d.index;for(;f<c.length-1&&c[f+1].y===t[1];)if((d=c[f+=1]).closed)return d.index;if(d.y===t[1]&&!d.start){if((f+=1)>=c.length)return n;d=c[f]}}if(d.start)if(s){var p=a(s[0],s[1],[t[0],d.y]);s[0][0]>s[1][0]&&(p=-p),p>0&&(n=d.index)}else n=d.index;else d.y!==t[1]&&(n=d.index)}}}return n}},function(t,e,r){"use strict";function i(t,e,r,i,n,a){var o=["function ",t,"(a,l,h,",i.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];return a?e.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",e,"){i=m;"),r?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),a?o.push("return -1};"):o.push("return i};"),o.join("")}function n(t,e,r,n){return new Function([i("A","x"+t+"y",e,["y"],!1,n),i("B","x"+t+"y",e,["y"],!0,n),i("P","c(x,y)"+t+"0",e,["y","c"],!1,n),i("Q","c(x,y)"+t+"0",e,["y","c"],!0,n),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}t.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},function(t,e,r){"use strict";t.exports=function(t){return new s(t||g,null)};function i(t,e,r,i,n,a){this._color=t,this.key=e,this.value=r,this.left=i,this.right=n,this._count=a}function n(t){return new i(t._color,t.key,t.value,t.left,t.right,t._count)}function a(t,e){return new i(t,e.key,e.value,e.left,e.right,e._count)}function o(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function s(t,e){this._compare=t,this.root=e}var l=s.prototype;function u(t,e){var r;if(e.left&&(r=u(t,e.left)))return r;return(r=t(e.key,e.value))||(e.right?u(t,e.right):void 0)}function h(t,e,r,i){if(e(t,i.key)<=0){var n;if(i.left)if(n=h(t,e,r,i.left))return n;if(n=r(i.key,i.value))return n}if(i.right)return h(t,e,r,i.right)}function c(t,e,r,i,n){var a,o=r(t,n.key),s=r(e,n.key);if(o<=0){if(n.left&&(a=c(t,e,r,i,n.left)))return a;if(s>0&&(a=i(n.key,n.value)))return a}if(s>0&&n.right)return c(t,e,r,i,n.right)}function f(t,e){this.tree=t,this._stack=e}Object.defineProperty(l,"keys",{get:function(){var t=[];return this.forEach((function(e,r){t.push(e)})),t}}),Object.defineProperty(l,"values",{get:function(){var t=[];return this.forEach((function(e,r){t.push(r)})),t}}),Object.defineProperty(l,"length",{get:function(){return this.root?this.root._count:0}}),l.insert=function(t,e){for(var r=this._compare,n=this.root,l=[],u=[];n;){var h=r(t,n.key);l.push(n),u.push(h),n=h<=0?n.left:n.right}l.push(new i(0,t,e,null,null,1));for(var c=l.length-2;c>=0;--c){n=l[c];u[c]<=0?l[c]=new i(n._color,n.key,n.value,l[c+1],n.right,n._count+1):l[c]=new i(n._color,n.key,n.value,n.left,l[c+1],n._count+1)}for(c=l.length-1;c>1;--c){var f=l[c-1];n=l[c];if(1===f._color||1===n._color)break;var d=l[c-2];if(d.left===f)if(f.left===n){if(!(p=d.right)||0!==p._color){if(d._color=0,d.left=f.right,f._color=1,f.right=d,l[c-2]=f,l[c-1]=n,o(d),o(f),c>=3)(g=l[c-3]).left===d?g.left=f:g.right=f;break}f._color=1,d.right=a(1,p),d._color=0,c-=1}else{if(!(p=d.right)||0!==p._color){if(f.right=n.left,d._color=0,d.left=n.right,n._color=1,n.left=f,n.right=d,l[c-2]=n,l[c-1]=f,o(d),o(f),o(n),c>=3)(g=l[c-3]).left===d?g.left=n:g.right=n;break}f._color=1,d.right=a(1,p),d._color=0,c-=1}else if(f.right===n){if(!(p=d.left)||0!==p._color){if(d._color=0,d.right=f.left,f._color=1,f.left=d,l[c-2]=f,l[c-1]=n,o(d),o(f),c>=3)(g=l[c-3]).right===d?g.right=f:g.left=f;break}f._color=1,d.left=a(1,p),d._color=0,c-=1}else{var p;if(!(p=d.left)||0!==p._color){var g;if(f.left=n.right,d._color=0,d.right=n.left,n._color=1,n.right=f,n.left=d,l[c-2]=n,l[c-1]=f,o(d),o(f),o(n),c>=3)(g=l[c-3]).right===d?g.right=n:g.left=n;break}f._color=1,d.left=a(1,p),d._color=0,c-=1}}return l[0]._color=1,new s(r,l[0])},l.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return u(t,this.root);case 2:return h(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return c(e,r,this._compare,t,this.root)}},Object.defineProperty(l,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new f(this,t)}}),Object.defineProperty(l,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new f(this,t)}}),l.at=function(t){if(t<0)return new f(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new f(this,r);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new f(this,[])},l.ge=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var a=e(t,r.key);i.push(r),a<=0&&(n=i.length),r=a<=0?r.left:r.right}return i.length=n,new f(this,i)},l.gt=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var a=e(t,r.key);i.push(r),a<0&&(n=i.length),r=a<0?r.left:r.right}return i.length=n,new f(this,i)},l.lt=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var a=e(t,r.key);i.push(r),a>0&&(n=i.length),r=a<=0?r.left:r.right}return i.length=n,new f(this,i)},l.le=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var a=e(t,r.key);i.push(r),a>=0&&(n=i.length),r=a<0?r.left:r.right}return i.length=n,new f(this,i)},l.find=function(t){for(var e=this._compare,r=this.root,i=[];r;){var n=e(t,r.key);if(i.push(r),0===n)return new f(this,i);r=n<=0?r.left:r.right}return new f(this,[])},l.remove=function(t){var e=this.find(t);return e?e.remove():this},l.get=function(t){for(var e=this._compare,r=this.root;r;){var i=e(t,r.key);if(0===i)return r.value;r=i<=0?r.left:r.right}};var d=f.prototype;function p(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function g(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(d,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(d,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),d.clone=function(){return new f(this.tree,this._stack.slice())},d.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),r=t[t.length-1];e[e.length-1]=new i(r._color,r.key,r.value,r.left,r.right,r._count);for(var l=t.length-2;l>=0;--l){(r=t[l]).left===t[l+1]?e[l]=new i(r._color,r.key,r.value,e[l+1],r.right,r._count):e[l]=new i(r._color,r.key,r.value,r.left,e[l+1],r._count)}if((r=e[e.length-1]).left&&r.right){var u=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var h=e[u-1];e.push(new i(r._color,h.key,h.value,r.left,r.right,r._count)),e[u-1].key=r.key,e[u-1].value=r.value;for(l=e.length-2;l>=u;--l)r=e[l],e[l]=new i(r._color,r.key,r.value,r.left,e[l+1],r._count);e[u-1].left=e[u]}if(0===(r=e[e.length-1])._color){var c=e[e.length-2];c.left===r?c.left=null:c.right===r&&(c.right=null),e.pop();for(l=0;l<e.length;++l)e[l]._count--;return new s(this.tree._compare,e[0])}if(r.left||r.right){r.left?p(r,r.left):r.right&&p(r,r.right),r._color=1;for(l=0;l<e.length-1;++l)e[l]._count--;return new s(this.tree._compare,e[0])}if(1===e.length)return new s(this.tree._compare,null);for(l=0;l<e.length;++l)e[l]._count--;var f=e[e.length-2];return function(t){for(var e,r,i,s,l=t.length-1;l>=0;--l){if(e=t[l],0===l)return void(e._color=1);if((r=t[l-1]).left===e){if((i=r.right).right&&0===i.right._color){if(s=(i=r.right=n(i)).right=n(i.right),r.right=i.left,i.left=r,i.right=s,i._color=r._color,e._color=1,r._color=1,s._color=1,o(r),o(i),l>1)(u=t[l-2]).left===r?u.left=i:u.right=i;return void(t[l-1]=i)}if(i.left&&0===i.left._color){if(s=(i=r.right=n(i)).left=n(i.left),r.right=s.left,i.left=s.right,s.left=r,s.right=i,s._color=r._color,r._color=1,i._color=1,e._color=1,o(r),o(i),o(s),l>1)(u=t[l-2]).left===r?u.left=s:u.right=s;return void(t[l-1]=s)}if(1===i._color){if(0===r._color)return r._color=1,void(r.right=a(0,i));r.right=a(0,i);continue}i=n(i),r.right=i.left,i.left=r,i._color=r._color,r._color=0,o(r),o(i),l>1&&((u=t[l-2]).left===r?u.left=i:u.right=i),t[l-1]=i,t[l]=r,l+1<t.length?t[l+1]=e:t.push(e),l+=2}else{if((i=r.left).left&&0===i.left._color){if(s=(i=r.left=n(i)).left=n(i.left),r.left=i.right,i.right=r,i.left=s,i._color=r._color,e._color=1,r._color=1,s._color=1,o(r),o(i),l>1)(u=t[l-2]).right===r?u.right=i:u.left=i;return void(t[l-1]=i)}if(i.right&&0===i.right._color){if(s=(i=r.left=n(i)).right=n(i.right),r.left=s.right,i.right=s.left,s.right=r,s.left=i,s._color=r._color,r._color=1,i._color=1,e._color=1,o(r),o(i),o(s),l>1)(u=t[l-2]).right===r?u.right=s:u.left=s;return void(t[l-1]=s)}if(1===i._color){if(0===r._color)return r._color=1,void(r.left=a(0,i));r.left=a(0,i);continue}var u;i=n(i),r.left=i.right,i.right=r,i._color=r._color,r._color=0,o(r),o(i),l>1&&((u=t[l-2]).right===r?u.right=i:u.left=i),t[l-1]=i,t[l]=r,l+1<t.length?t[l+1]=e:t.push(e),l+=2}}}(e),f.left===r?f.left=null:f.right=null,new s(this.tree._compare,e[0])},Object.defineProperty(d,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(d,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(d,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var i=e.length-2;i>=0;--i)e[i+1]===e[i].right&&(++t,e[i].left&&(t+=e[i].left._count));return t},enumerable:!0}),d.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(d,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),d.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var r=new Array(e.length),n=e[e.length-1];r[r.length-1]=new i(n._color,n.key,t,n.left,n.right,n._count);for(var a=e.length-2;a>=0;--a)(n=e[a]).left===e[a+1]?r[a]=new i(n._color,n.key,n.value,r[a+1],n.right,n._count):r[a]=new i(n._color,n.key,n.value,n.left,r[a+1],n._count);return new s(this.tree._compare,r[0])},d.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(d,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},function(t,e,r){"use strict";t.exports=function(t,e){var r,a,o,s;if(e[0][0]<e[1][0])r=e[0],a=e[1];else{if(!(e[0][0]>e[1][0]))return n(e,t);r=e[1],a=e[0]}if(t[0][0]<t[1][0])o=t[0],s=t[1];else{if(!(t[0][0]>t[1][0]))return-n(t,e);o=t[1],s=t[0]}var l=i(r,a,s),u=i(r,a,o);if(l<0){if(u<=0)return l}else if(l>0){if(u>=0)return l}else if(u)return u;if(l=i(s,o,a),u=i(s,o,r),l<0){if(u<=0)return l}else if(l>0){if(u>=0)return l}else if(u)return u;return a[0]-s[0]};var i=r(634);function n(t,e){var r,n,a,o;if(e[0][0]<e[1][0])r=e[0],n=e[1];else{if(!(e[0][0]>e[1][0])){var s=Math.min(t[0][1],t[1][1]),l=Math.max(t[0][1],t[1][1]),u=Math.min(e[0][1],e[1][1]),h=Math.max(e[0][1],e[1][1]);return l<u?l-u:s>h?s-h:l-h}r=e[1],n=e[0]}t[0][1]<t[1][1]?(a=t[0],o=t[1]):(a=t[1],o=t[0]);var c=i(n,r,a);return c||((c=i(n,r,o))||o-n)}},function(t,e,r){"use strict";var i=r(999);function n(t,e,r,i,n){this.mid=t,this.left=e,this.right=r,this.leftPoints=i,this.rightPoints=n,this.count=(e?e.count:0)+(r?r.count:0)+i.length}t.exports=function(t){if(!t||0===t.length)return new m(null);return new m(v(t))};var a=n.prototype;function o(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function s(t,e){var r=v(e);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function l(t,e){var r=t.intervals([]);r.push(e),s(t,r)}function u(t,e){var r=t.intervals([]),i=r.indexOf(e);return i<0?0:(r.splice(i,1),s(t,r),1)}function h(t,e,r){for(var i=0;i<t.length&&t[i][0]<=e;++i){var n=r(t[i]);if(n)return n}}function c(t,e,r){for(var i=t.length-1;i>=0&&t[i][1]>=e;--i){var n=r(t[i]);if(n)return n}}function f(t,e){for(var r=0;r<t.length;++r){var i=e(t[r]);if(i)return i}}function d(t,e){return t-e}function p(t,e){var r=t[0]-e[0];return r||t[1]-e[1]}function g(t,e){var r=t[1]-e[1];return r||t[0]-e[0]}function v(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(d);var i=e[e.length>>1],a=[],o=[],s=[];for(r=0;r<t.length;++r){var l=t[r];l[1]<i?a.push(l):i<l[0]?o.push(l):s.push(l)}var u=s,h=s.slice();return u.sort(p),h.sort(g),new n(i,v(a),v(o),u,h)}function m(t){this.root=t}a.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},a.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?l(this,t):this.left.insert(t):this.left=v([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?l(this,t):this.right.insert(t):this.right=v([t]);else{var r=i.ge(this.leftPoints,t,p),n=i.ge(this.rightPoints,t,g);this.leftPoints.splice(r,0,t),this.rightPoints.splice(n,0,t)}},a.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(e-1)?u(this,t):2===(s=this.left.remove(t))?(this.left=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(t[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(e-1)?u(this,t):2===(s=this.right.remove(t))?(this.right=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var r=this,n=this.left;n.right;)r=n,n=n.right;if(r===this)n.right=this.right;else{var a=this.left,s=this.right;r.count-=n.count,r.right=n.left,n.left=a,n.right=s}o(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?o(this,this.left):o(this,this.right);return 1}for(a=i.ge(this.leftPoints,t,p);a<this.leftPoints.length&&this.leftPoints[a][0]===t[0];++a)if(this.leftPoints[a]===t){this.count-=1,this.leftPoints.splice(a,1);for(s=i.ge(this.rightPoints,t,g);s<this.rightPoints.length&&this.rightPoints[s][1]===t[1];++s)if(this.rightPoints[s]===t)return this.rightPoints.splice(s,1),1}return 0},a.queryPoint=function(t,e){if(t<this.mid){if(this.left)if(r=this.left.queryPoint(t,e))return r;return h(this.leftPoints,t,e)}if(t>this.mid){var r;if(this.right)if(r=this.right.queryPoint(t,e))return r;return c(this.rightPoints,t,e)}return f(this.leftPoints,e)},a.queryInterval=function(t,e,r){var i;if(t<this.mid&&this.left&&(i=this.left.queryInterval(t,e,r)))return i;if(e>this.mid&&this.right&&(i=this.right.queryInterval(t,e,r)))return i;return e<this.mid?h(this.leftPoints,e,r):t>this.mid?c(this.rightPoints,t,r):f(this.leftPoints,r)};var y=m.prototype;y.insert=function(t){this.root?this.root.insert(t):this.root=new n(t[0],null,null,[t],[t])},y.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),0!==e}return!1},y.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},y.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(y,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(y,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},function(t,e,r){"use strict";function i(t,e,r,i,n,a){var o=["function ",t,"(a,l,h,",i.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];return a?e.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",e,"){i=m;"),r?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),a?o.push("return -1};"):o.push("return i};"),o.join("")}function n(t,e,r,n){return new Function([i("A","x"+t+"y",e,["y"],!1,n),i("B","x"+t+"y",e,["y"],!0,n),i("P","c(x,y)"+t+"0",e,["y","c"],!1,n),i("Q","c(x,y)"+t+"0",e,["y","c"],!0,n),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}t.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},function(t,e,r){"use strict";function i(t,e,r,i,n,a){var o=["function ",t,"(a,l,h,",i.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];return a?e.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",e,"){i=m;"),r?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),a?o.push("return -1};"):o.push("return i};"),o.join("")}function n(t,e,r,n){return new Function([i("A","x"+t+"y",e,["y"],!1,n),i("B","x"+t+"y",e,["y"],!0,n),i("P","c(x,y)"+t+"0",e,["y","c"],!1,n),i("Q","c(x,y)"+t+"0",e,["y","c"],!0,n),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}t.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},function(t,e,r){"use strict";t.exports=function(t,e){for(var r=i(t,e.length),n=new Array(e.length),a=new Array(e.length),o=[],s=0;s<e.length;++s){var l=r[s].length;a[s]=l,n[s]=!0,l<=1&&o.push(s)}for(;o.length>0;){var u=o.pop();n[u]=!1;var h=r[u];for(s=0;s<h.length;++s){var c=h[s];0==--a[c]&&o.push(c)}}var f=new Array(e.length),d=[];for(s=0;s<e.length;++s)if(n[s]){u=d.length;f[s]=u,d.push(e[s])}else f[s]=-1;var p=[];for(s=0;s<t.length;++s){var g=t[s];n[g[0]]&&n[g[1]]&&p.push([f[g[0]],f[g[1]]])}return[p,d]};var i=r(802)},function(t,e,r){"use strict";var i=r(803),n=r(685);function a(t){return new Function("y","return function(){return y}")(t)}function o(t,e){for(var r=new Array(t),i=0;i<t;++i)r[i]=e;return r}t.exports=function(t,e,r,s){function l(t,e,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+e+"],obj"+t+")";case"float":return"gl.uniform1f(locations["+e+"],obj"+t+")";default:var i=r.indexOf("vec");if(!(0<=i&&i<=1&&r.length===4+i)){if(0===r.indexOf("mat")&&4===r.length){var a;if((a=r.charCodeAt(r.length-1)-48)<2||a>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+a+"fv(locations["+e+"],false,obj"+t+")"}throw new n("","Unknown uniform data type for "+name+": "+r)}if((a=r.charCodeAt(r.length-1)-48)<2||a>4)throw new n("","Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+a+"iv(locations["+e+"],obj"+t+")";case"v":return"gl.uniform"+a+"fv(locations["+e+"],obj"+t+")";default:throw new n("","Unrecognized data type for vector "+name+": "+r)}}}function u(e){for(var i=["return function updateProperty(obj){"],n=function t(e,r){if("object"!=typeof r)return[[e,r]];var i=[];for(var n in r){var a=r[n],o=e;parseInt(n)+""===n?o+="["+n+"]":o+="."+n,"object"==typeof a?i.push.apply(i,t(o,a)):i.push([o,a])}return i}("",e),a=0;a<n.length;++a){var o=n[a],u=o[0],h=o[1];s[h]&&i.push(l(u,h,r[h].type))}return i.push("return obj}"),new Function("gl","locations",i.join("\n"))(t,s)}function h(i,l,h){if("object"==typeof h){var f=c(h);Object.defineProperty(i,l,{get:a(f),set:u(h),enumerable:!0,configurable:!1})}else s[h]?Object.defineProperty(i,l,{get:(d=h,new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+d+"])}")(t,e,s)),set:u(h),enumerable:!0,configurable:!1}):i[l]=function(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e=t.indexOf("vec");if(0<=e&&e<=1&&t.length===4+e){if((r=t.charCodeAt(t.length-1)-48)<2||r>4)throw new n("","Invalid data type");return"b"===t.charAt(0)?o(r,!1):o(r,0)}if(0===t.indexOf("mat")&&4===t.length){var r;if((r=t.charCodeAt(t.length-1)-48)<2||r>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+t);return o(r*r,0)}throw new n("","Unknown uniform data type for "+name+": "+t)}}(r[h].type);var d}function c(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var r=0;r<t.length;++r)h(e,r,t[r])}else for(var i in e={},t)h(e,i,t[i]);return e}var f=i(r,!0);return{get:a(c(f)),set:u(f),enumerable:!0,configurable:!0}}},function(t,e,r){"use strict";t.exports=function(t,e,r,n){for(var a={},l=0,u=r.length;l<u;++l){var h=r[l],c=h.name,f=h.type,d=h.locations;switch(f){case"bool":case"int":case"float":o(t,e,d[0],n,1,a,c);break;default:if(f.indexOf("vec")>=0){if((p=f.charCodeAt(f.length-1)-48)<2||p>4)throw new i("","Invalid data type for attribute "+c+": "+f);o(t,e,d[0],n,p,a,c)}else{if(!(f.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+c+": "+f);var p;if((p=f.charCodeAt(f.length-1)-48)<2||p>4)throw new i("","Invalid data type for attribute "+c+": "+f);s(t,e,d,n,p,a,c)}}}return a};var i=r(685);function n(t,e,r,i,n,a){this._gl=t,this._wrapper=e,this._index=r,this._locations=i,this._dimension=n,this._constFunc=a}var a=n.prototype;function o(t,e,r,i,a,o,s){for(var l=["gl","v"],u=[],h=0;h<a;++h)l.push("x"+h),u.push("x"+h);l.push("if(x0.length===void 0){return gl.vertexAttrib"+a+"f(v,"+u.join()+")}else{return gl.vertexAttrib"+a+"fv(v,x0)}");var c=Function.apply(null,l),f=new n(t,e,r,i,a,c);Object.defineProperty(o,s,{set:function(e){return t.disableVertexAttribArray(i[r]),c(t,i[r],e),e},get:function(){return f},enumerable:!0})}function s(t,e,r,i,n,a,s){for(var l=new Array(n),u=new Array(n),h=0;h<n;++h)o(t,e,r[h],i,n,l,h),u[h]=l[h];Object.defineProperty(l,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<n;++e)u[e].location=t[e];else for(e=0;e<n;++e)u[e].location=t+e;return t},get:function(){for(var t=new Array(n),e=0;e<n;++e)t[e]=i[r[e]];return t},enumerable:!0}),l.pointer=function(e,a,o,s){e=e||t.FLOAT,a=!!a,o=o||n*n,s=s||0;for(var l=0;l<n;++l){var u=i[r[l]];t.vertexAttribPointer(u,n,e,a,o,s+l*n),t.enableVertexAttribArray(u)}};var c=new Array(n),f=t["vertexAttrib"+n+"fv"];Object.defineProperty(a,s,{set:function(e){for(var a=0;a<n;++a){var o=i[r[a]];if(t.disableVertexAttribArray(o),Array.isArray(e[0]))f.call(t,o,e[a]);else{for(var s=0;s<n;++s)c[s]=e[n*a+s];f.call(t,o,c)}}return e},get:function(){return l},enumerable:!0})}a.pointer=function(t,e,r,i){var n=this._gl,a=this._locations[this._index];n.vertexAttribPointer(a,this._dimension,t||n.FLOAT,!!e,r||0,i||0),n.enableVertexAttribArray(a)},a.set=function(t,e,r,i){return this._constFunc(this._locations[this._index],t,e,r,i)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}})},function(t,e,r){"use strict";e.shader=function(t,e,r){return h(t).getShaderReference(e,r)},e.program=function(t,e,r,i,n){return h(t).getProgram(e,r,i,n)};var i=r(685),n=r(1005),a=new("undefined"==typeof WeakMap?r(1019):WeakMap),o=0;function s(t,e,r,i,n,a,o){this.id=t,this.src=e,this.type=r,this.shader=i,this.count=a,this.programs=[],this.cache=o}function l(t){this.gl=t,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var t=this.cache,e=t.gl,r=this.programs,i=0,n=r.length;i<n;++i){var a=t.programs[r[i]];a&&(delete t.programs[i],e.deleteProgram(a))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var u=l.prototype;function h(t){var e=a.get(t);return e||(e=new l(t),a.set(t,e)),e}u.getShaderReference=function(t,e){var r=this.gl,a=this.shaders[t===r.FRAGMENT_SHADER|0],l=a[e];if(l&&r.isShader(l.shader))l.count+=1;else{var u=function(t,e,r){var a=t.createShader(e);if(t.shaderSource(a,r),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(a);try{var s=n(o,r,e)}catch(t){throw console.warn("Failed to format compiler error: "+t),new i(o,"Error compiling shader:\n"+o)}throw new i(o,s.short,s.long)}return a}(r,t,e);l=a[e]=new s(o++,e,t,u,[],1,this)}return l},u.getProgram=function(t,e,r,n){var a=[t.id,e.id,r.join(":"),n.join(":")].join("@"),o=this.programs[a];return o&&this.gl.isProgram(o)||(this.programs[a]=o=function(t,e,r,n,a){var o=t.createProgram();t.attachShader(o,e),t.attachShader(o,r);for(var s=0;s<n.length;++s)t.bindAttribLocation(o,a[s],n[s]);if(t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS)){var l=t.getProgramInfoLog(o);throw new i(l,"Error linking program: "+l)}return o}(this.gl,t.shader,e.shader,r,n),t.programs.push(a),e.programs.push(a)),o}},function(t,e,r){var i=r(1006).sprintf,n=r(1007),a=r(1009),o=r(1016);t.exports=function(t,e,r){"use strict";var s=a(e)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==r&&(l=r===n.FRAGMENT_SHADER?"fragment":"vertex");for(var u=i("Error compiling %s shader %s:\n",l,s),h=i("%s%s",u,t),c=t.split("\n"),f={},d=0;d<c.length;d++){var p=c[d];if(""!==p&&"\0"!==p){var g=parseInt(p.split(":")[2]);if(isNaN(g))throw new Error(i("Could not parse error: %s",p));f[g]=p}}var v=o(e).split("\n");for(d=0;d<v.length;d++)if(f[d+3]||f[d+2]||f[d+1]){var m=v[d];if(u+=m+"\n",f[d+1]){var y=f[d+1];y=y.substr(y.split(":",3).join(":").length+1).trim(),u+=i("^^^ %s\n\n",y)}}return{long:u.trim(),short:h.trim()}}},function(t,e,r){var i;!function(){"use strict";var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(t){return s(u(t),arguments)}function o(t,e){return a.apply(null,[t].concat(e||[]))}function s(t,e){var r,i,o,s,l,u,h,c,f,d=1,p=t.length,g="";for(i=0;i<p;i++)if("string"==typeof t[i])g+=t[i];else if("object"==typeof t[i]){if((s=t[i]).keys)for(r=e[d],o=0;o<s.keys.length;o++){if(null==r)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[o],s.keys[o-1]));r=r[s.keys[o]]}else r=s.param_no?e[s.param_no]:e[d++];if(n.not_type.test(s.type)&&n.not_primitive.test(s.type)&&r instanceof Function&&(r=r()),n.numeric_arg.test(s.type)&&"number"!=typeof r&&isNaN(r))throw new TypeError(a("[sprintf] expecting number but found %T",r));switch(n.number.test(s.type)&&(c=r>=0),s.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,s.width?parseInt(s.width):0);break;case"e":r=s.precision?parseFloat(r).toExponential(s.precision):parseFloat(r).toExponential();break;case"f":r=s.precision?parseFloat(r).toFixed(s.precision):parseFloat(r);break;case"g":r=s.precision?String(Number(r.toPrecision(s.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=s.precision?r.substring(0,s.precision):r;break;case"t":r=String(!!r),r=s.precision?r.substring(0,s.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=s.precision?r.substring(0,s.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=s.precision?r.substring(0,s.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}n.json.test(s.type)?g+=r:(!n.number.test(s.type)||c&&!s.sign?f="":(f=c?"+":"-",r=r.toString().replace(n.sign,"")),u=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",h=s.width-(f+r).length,l=s.width&&h>0?u.repeat(h):"",g+=s.align?f+r+l:"0"===u?f+l+r:l+f+r)}return g}var l=Object.create(null);function u(t){if(l[t])return l[t];for(var e,r=t,i=[],a=0;r;){if(null!==(e=n.text.exec(r)))i.push(e[0]);else if(null!==(e=n.modulo.exec(r)))i.push("%");else{if(null===(e=n.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){a|=1;var o=[],s=e[2],u=[];if(null===(u=n.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(u[1]);""!==(s=s.substring(u[0].length));)if(null!==(u=n.key_access.exec(s)))o.push(u[1]);else{if(null===(u=n.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(u[1])}e[2]=o}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}r=r.substring(e[0].length)}return l[t]=i}e.sprintf=a,e.vsprintf=o,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=o,void 0===(i=function(){return{sprintf:a,vsprintf:o}}.call(e,r,e,t))||(t.exports=i))}()},function(t,e,r){var i=r(1008);t.exports=function(t){return i[t]}},function(t,e){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},function(t,e,r){var i=r(1010),n=r(1015);t.exports=function(t){for(var e=Array.isArray(t)?t:i(t),r=0;r<e.length;r++){var a=e[r];if("preprocessor"===a.type){var o=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(o&&o[2]){var s=o[1],l=o[2];return(s?n(l):l).trim()}}}}},function(t,e,r){var i=r(1011);t.exports=function(t,e){var r=i(e),n=[];return n=(n=n.concat(r(t))).concat(r(null))}},function(t,e,r){t.exports=function(t){var e,r,u,h=0,c=0,f=999,d=[],p=[],g=1,v=0,m=0,y=!1,x=!1,b="",_=a,w=i;"300 es"===(t=t||{}).version&&(_=s,w=o);var A={},T={};for(h=0;h<_.length;h++)A[_[h]]=!0;for(h=0;h<w.length;h++)T[w[h]]=!0;return function(t){return p=[],null!==t?function(t){h=0,t.toString&&(t=t.toString());var r;b+=t.replace(/\r\n/g,"\n"),u=b.length;for(;e=b[h],h<u;){switch(r=h,f){case 0:h=C();break;case 1:case 2:h=S();break;case 3:h=L();break;case 4:h=R();break;case 11:h=j();break;case 5:h=P();break;case 9999:h=O();break;case 9:h=E();break;case 999:h=k()}if(r!==h)switch(b[r]){case"\n":v=0,++g;break;default:++v}}return c+=h,b=b.slice(h),p}(t):function(t){d.length&&M(d.join(""));return f=10,M("(eof)"),p}()};function M(t){t.length&&p.push({type:l[f],data:t,position:m,line:g,column:v})}function k(){return d=d.length?[]:d,"/"===r&&"*"===e?(m=c+h-1,f=0,r=e,h+1):"/"===r&&"/"===e?(m=c+h-1,f=1,r=e,h+1):"#"===e?(f=2,m=c+h,h):/\s/.test(e)?(f=9,m=c+h,h):(y=/\d/.test(e),x=/[^\w_]/.test(e),m=c+h,f=y?4:x?3:9999,h)}function E(){return/[^\s]/g.test(e)?(M(d.join("")),f=999,h):(d.push(e),r=e,h+1)}function S(){return"\r"!==e&&"\n"!==e||"\\"===r?(d.push(e),r=e,h+1):(M(d.join("")),f=999,h)}function C(){return"/"===e&&"*"===r?(d.push(e),M(d.join("")),f=999,h+1):(d.push(e),r=e,h+1)}function L(){if("."===r&&/\d/.test(e))return f=5,h;if("/"===r&&"*"===e)return f=0,h;if("/"===r&&"/"===e)return f=1,h;if("."===e&&d.length){for(;I(d););return f=5,h}if(";"===e||")"===e||"("===e){if(d.length)for(;I(d););return M(e),f=999,h+1}var t=2===d.length&&"="!==e;if(/[\w_\d\s]/.test(e)||t){for(;I(d););return f=999,h}return d.push(e),r=e,h+1}function I(t){for(var e,r,i=0;;){if(e=n.indexOf(t.slice(0,t.length+i).join("")),r=n[e],-1===e){if(i--+t.length>0)continue;r=t.slice(0,1).join("")}return M(r),m+=r.length,(d=d.slice(r.length)).length}}function j(){return/[^a-fA-F0-9]/.test(e)?(M(d.join("")),f=999,h):(d.push(e),r=e,h+1)}function R(){return"."===e||/[eE]/.test(e)?(d.push(e),f=5,r=e,h+1):"x"===e&&1===d.length&&"0"===d[0]?(f=11,d.push(e),r=e,h+1):/[^\d]/.test(e)?(M(d.join("")),f=999,h):(d.push(e),r=e,h+1)}function P(){return"f"===e&&(d.push(e),r=e,h+=1),/[eE]/.test(e)?(d.push(e),r=e,h+1):("-"!==e&&"+"!==e||!/[eE]/.test(r))&&/[^\d]/.test(e)?(M(d.join("")),f=999,h):(d.push(e),r=e,h+1)}function O(){if(/[^\d\w_]/.test(e)){var t=d.join("");return f=T[t]?8:A[t]?7:6,M(d.join("")),f=999,h}return d.push(e),r=e,h+1}};var i=r(804),n=r(1012),a=r(805),o=r(1013),s=r(1014),l=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},function(t,e){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},function(t,e,r){var i=r(804);t.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},function(t,e,r){var i=r(805);i=i.slice().filter((function(t){return!/^(gl\_|texture)/.test(t)})),t.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},function(t,e){t.exports=function(t){return atob(t)}},function(t,e,r){var i=r(1017);t.exports=function(t,e,r){e="number"==typeof e?e:1,r=r||": ";var n=t.split(/\r?\n/),a=String(n.length+e-1).length;return n.map((function(t,n){var o=n+e,s=String(o).length;return i(o,a-s)+r+t})).join("\n")}},function(t,e,r){"use strict";var i=r(1018);t.exports=function(t,e,r){return i(r=void 0!==r?r+"":" ",e)+t}},function(t,e,r){"use strict";var i,n="";t.exports=function(t,e){if("string"!=typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var r=t.length*e;if(i!==t||void 0===i)i=t,n="";else if(n.length>=r)return n.substr(0,r);for(;r>n.length&&e>1;)1&e&&(n+=t),e>>=1,t+=t;return n=(n+=t).substr(0,r)}},function(t,e,r){var i=r(1020);t.exports=function(){var t=i();return{get:function(e,r){var i=t(e);return i.hasOwnProperty("value")?i.value:r},set:function(e,r){return t(e).value=r,this},has:function(e){return"value"in t(e)},delete:function(e){return delete t(e).value}}}},function(t,e,r){var i=r(1021);t.exports=function(){var t={};return function(e){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw new Error("Weakmap-shim: Key must be object");var r=e.valueOf(t);return r&&r.identity===t?r:i(e,t)}}},function(t,e){t.exports=function(t,e){var r={identity:e},i=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?i.apply(this,arguments):r},writable:!0}),r}},function(t,e,r){"use strict";e.uniforms=function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=[],n=0;n<r;++n){var o=t.getActiveUniform(e,n);if(o){var s=a(t,o.type);if(o.size>1)for(var l=0;l<o.size;++l)i.push({name:o.name.replace("[0]","["+l+"]"),type:s});else i.push({name:o.name,type:s})}}return i},e.attributes=function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=[],n=0;n<r;++n){var o=t.getActiveAttrib(e,n);o&&i.push({name:o.name,type:a(t,o.type)})}return i};var i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function a(t,e){if(!n){var r=Object.keys(i);n={};for(var a=0;a<r.length;++a){var o=r[a];n[t[o]]=i[o]}}return n[e]}},function(t,e){t.exports=function(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var r=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(r.width=e.width);"number"==typeof e.height&&(r.height=e.height);var i,n=e;try{var a=[t];0===t.indexOf("webgl")&&a.push("experimental-"+t);for(var o=0;o<a.length;o++)if(i=r.getContext(a[o],n))return i}catch(t){i=null}return i||null}},,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var i=r(1199),n=r(699);function a(t,e){this.point=t,this.index=e}function o(t,e){for(var r=t.point,i=e.point,n=r.length,a=0;a<n;++a){var o=i[a]-r[a];if(o)return o}return 0}t.exports=function(t,e){var r=t.length;if(0===r)return[];var s=t[0].length;if(s<1)return[];if(1===s)return function(t,e,r){if(1===t)return r?[[-1,0]]:[];var i=e.map((function(t,e){return[t[0],e]}));i.sort((function(t,e){return t[0]-e[0]}));for(var n=new Array(t-1),a=1;a<t;++a){var o=i[a-1],s=i[a];n[a-1]=[o[1],s[1]]}r&&n.push([-1,n[0][1]],[n[t-1][1],-1]);return n}(r,t,e);for(var l=new Array(r),u=1,h=0;h<r;++h){for(var c=t[h],f=new Array(s+1),d=0,p=0;p<s;++p){var g=c[p];f[p]=g,d+=g*g}f[s]=d,l[h]=new a(f,h),u=Math.max(d,u)}n(l,o),r=l.length;var v=new Array(r+s+1),m=new Array(r+s+1),y=(s+1)*(s+1)*u,x=new Array(s+1);for(h=0;h<=s;++h)x[h]=0;x[s]=y,v[0]=x.slice(),m[0]=-1;for(h=0;h<=s;++h){(f=x.slice())[h]=1,v[h+1]=f,m[h+1]=-1}for(h=0;h<r;++h){var b=l[h];v[h+s+1]=b.point,m[h+s+1]=b.index}var _=i(v,!1);_=e?_.filter((function(t){for(var e=0,r=0;r<=s;++r){var i=m[t[r]];if(i<0&&++e>=2)return!1;t[r]=i}return!0})):_.filter((function(t){for(var e=0;e<=s;++e){var r=m[t[e]];if(r<0)return!1;t[e]=r}return!0}));if(1&s)for(h=0;h<_.length;++h){f=(b=_[h])[0];b[0]=b[1],b[1]=f}return _}},function(t,e,r){"use strict";var i=r(6),n=r(210);function a(t){var e,r,n,a,s,l,u,h,c,f,d,p,g=t._x,v=t._y,m=t._z,y=t._len,x=-1/0,b=1/0,_=-1/0,w=1/0,A=-1/0,T=1/0,M="";for(y&&(u=g[0],c=v[0],d=m[0]),y>1&&(h=g[y-1],f=v[y-1],p=m[y-1]),e=0;e<y;e++)x=Math.max(x,g[e]),b=Math.min(b,g[e]),_=Math.max(_,v[e]),w=Math.min(w,v[e]),A=Math.max(A,m[e]),T=Math.min(T,m[e]),a||g[e]===u||(a=!0,M+="x"),s||v[e]===c||(s=!0,M+="y"),l||m[e]===d||(l=!0,M+="z");a||(M+="x"),s||(M+="y"),l||(M+="z");var k=o(t._x),E=o(t._y),S=o(t._z);M=(M=(M=M.replace("x",(u>h?"-":"+")+"x")).replace("y",(c>f?"-":"+")+"y")).replace("z",(d>p?"-":"+")+"z");var C=function(){y=0,k=[],E=[],S=[]};(!y||y<k.length*E.length*S.length)&&C();var L=function(t){return"x"===t?g:"y"===t?v:m},I=function(t){return"x"===t?k:"y"===t?E:S},j=function(t){return t[y-1]<t[0]?-1:1},R=L(M[1]),P=L(M[3]),O=L(M[5]),z=I(M[1]).length,N=I(M[3]).length,B=I(M[5]).length,F=!1,D=function(t,e,r){return z*(N*t+e)+r},U=j(L(M[1])),V=j(L(M[3])),X=j(L(M[5]));for(e=0;e<B-1;e++){for(r=0;r<N-1;r++){for(n=0;n<z-1;n++){var G=D(e,r,n),W=D(e,r,n+1),H=D(e,r+1,n),q=D(e+1,r,n);if(R[G]*U<R[W]*U&&P[G]*V<P[H]*V&&O[G]*X<O[q]*X||(F=!0),F)break}if(F)break}if(F)break}return F&&(i.warn("Encountered arbitrary coordinates! Unable to input data grid."),C()),{xMin:b,yMin:w,zMin:T,xMax:x,yMax:_,zMax:A,Xs:k,Ys:E,Zs:S,len:y,fill:M}}function o(t){return i.distinctVals(t).vals}function s(t,e){if(void 0===e&&(e=t.length),i.isTypedArray(t))return t.subarray(0,e);for(var r=[],n=0;n<e;n++)r[n]=+t[n];return r}t.exports={calc:function(t,e){e._len=Math.min(e.u.length,e.v.length,e.w.length,e.x.length,e.y.length,e.z.length),e._u=s(e.u,e._len),e._v=s(e.v,e._len),e._w=s(e.w,e._len),e._x=s(e.x,e._len),e._y=s(e.y,e._len),e._z=s(e.z,e._len);var r=a(e);e._gridFill=r.fill,e._Xs=r.Xs,e._Ys=r.Ys,e._Zs=r.Zs,e._len=r.len;var i,o,l,u=0;e.starts&&(i=s(e.starts.x||[]),o=s(e.starts.y||[]),l=s(e.starts.z||[]),u=Math.min(i.length,o.length,l.length)),e._startsX=i||[],e._startsY=o||[],e._startsZ=l||[];var h,c=0,f=1/0;for(h=0;h<e._len;h++){var d=e._u[h],p=e._v[h],g=e._w[h],v=Math.sqrt(d*d+p*p+g*g);c=Math.max(c,v),f=Math.min(f,v)}for(n(t,e,{vals:[f,c],containerStr:"",cLetter:"c"}),h=0;h<u;h++){var m=i[h];r.xMax=Math.max(r.xMax,m),r.xMin=Math.min(r.xMin,m);var y=o[h];r.yMax=Math.max(r.yMax,y),r.yMin=Math.min(r.yMin,y);var x=l[h];r.zMax=Math.max(r.zMax,x),r.zMin=Math.min(r.zMin,x)}e._slen=u,e._normMax=c,e._xbnds=[r.xMin,r.xMax],e._ybnds=[r.yMin,r.yMax],e._zbnds=[r.zMin,r.zMax]},filter:s,processGrid:a}},,,,,,,,,,,,,,,,function(t,e){t.exports=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=r[0],s=r[1],l=r[2];return t[0]=n*l-a*s,t[1]=a*o-i*l,t[2]=i*s-n*o,t}},function(t,e){t.exports=function(t){var e=t[0],r=t[1],i=t[2];return Math.sqrt(e*e+r*r+i*i)}},function(t,e,r){"use strict";var i=r(630),n=r(635),a=i("./lineVert.glsl"),o=i("./lineFrag.glsl");e.line=function(t){return n(t,a,o,null,[{name:"position",type:"vec3"}])};var s=i("./textVert.glsl"),l=i("./textFrag.glsl");e.text=function(t){return n(t,s,l,null,[{name:"position",type:"vec3"}])};var u=i("./backgroundVert.glsl"),h=i("./backgroundFrag.glsl");e.bg=function(t){return n(t,u,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},function(t,e,r){"use strict";var i=r(1228);t.exports=function(t,e){var r=t.positions,n=t.vectors,a={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(0===t.positions.length)return e&&(e[0]=[0,0,0],e[1]=[0,0,0]),a;for(var o=0,s=1/0,l=-1/0,u=1/0,h=-1/0,c=1/0,f=-1/0,d=null,p=null,g=[],v=1/0,m=!1,y=0;y<r.length;y++){var x=r[y];s=Math.min(x[0],s),l=Math.max(x[0],l),u=Math.min(x[1],u),h=Math.max(x[1],h),c=Math.min(x[2],c),f=Math.max(x[2],f);var b=n[y];if(i.length(b)>o&&(o=i.length(b)),y){var _=2*i.distance(d,x)/(i.length(p)+i.length(b));_?(v=Math.min(v,_),m=!1):m=!0}m||(d=x,p=b),g.push(b)}var w=[s,u,c],A=[l,h,f];e&&(e[0]=w,e[1]=A),0===o&&(o=1);var T=1/o;isFinite(v)||(v=1),a.vectorScale=v;var M=t.coneSize||.5;t.absoluteConeSize&&(M=t.absoluteConeSize*T),a.coneScale=M;y=0;for(var k=0;y<r.length;y++)for(var E=(x=r[y])[0],S=x[1],C=x[2],L=g[y],I=i.length(L)*T,j=0;j<8;j++){a.positions.push([E,S,C,k++]),a.positions.push([E,S,C,k++]),a.positions.push([E,S,C,k++]),a.positions.push([E,S,C,k++]),a.positions.push([E,S,C,k++]),a.positions.push([E,S,C,k++]),a.vectors.push(L),a.vectors.push(L),a.vectors.push(L),a.vectors.push(L),a.vectors.push(L),a.vectors.push(L),a.vertexIntensity.push(I,I,I),a.vertexIntensity.push(I,I,I);var R=a.positions.length;a.cells.push([R-6,R-5,R-4],[R-3,R-2,R-1])}return a};var n=r(1421);t.exports.createMesh=r(1422),t.exports.createConeMesh=function(e,r){return t.exports.createMesh(e,r,{shaders:n,traceType:"cone"})}},function(t,e,r){"use strict";var i=r(1423),n=r(1424);function a(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function o(t){for(var e,r="#",i=0;i<3;++i)r+=("00"+(e=(e=t[i]).toString(16))).substr(e.length);return r}function s(t){return"rgba("+t.join(",")+")"}t.exports=function(t){var e,r,l,u,h,c,f,d,p,g;t||(t={});d=(t.nshades||72)-1,f=t.format||"hex",(c=t.colormap)||(c="jet");if("string"==typeof c){if(c=c.toLowerCase(),!i[c])throw Error(c+" not a supported colorscale");h=i[c]}else{if(!Array.isArray(c))throw Error("unsupported colormap option",c);h=c.slice()}if(h.length>d+1)throw new Error(c+" map requires nshades to be at least size "+h.length);p=Array.isArray(t.alpha)?2!==t.alpha.length?[1,1]:t.alpha.slice():"number"==typeof t.alpha?[t.alpha,t.alpha]:[1,1];e=h.map((function(t){return Math.round(t.index*d)})),p[0]=Math.min(Math.max(p[0],0),1),p[1]=Math.min(Math.max(p[1],0),1);var v=h.map((function(t,e){var r=h[e].index,i=h[e].rgb.slice();return 4===i.length&&i[3]>=0&&i[3]<=1||(i[3]=p[0]+(p[1]-p[0])*r),i})),m=[];for(g=0;g<e.length-1;++g){u=e[g+1]-e[g],r=v[g],l=v[g+1];for(var y=0;y<u;y++){var x=y/u;m.push([Math.round(n(r[0],l[0],x)),Math.round(n(r[1],l[1],x)),Math.round(n(r[2],l[2],x)),n(r[3],l[3],x)])}}m.push(h[h.length-1].rgb.concat(p[1])),"hex"===f?m=m.map(o):"rgbaString"===f?m=m.map(s):"float"===f&&(m=m.map(a));return m}},,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";t.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},function(t,e,r){"use strict";var i=r(111),n=r(150).hovertemplateAttrs,a=r(868),o=r(59),s=r(32).extendFlat,l=r(109).overrideAll;function u(t){return{show:{valType:"boolean",role:"info",dflt:!1,description:["Determines whether or not slice planes about the",t,"dimension are drawn."].join(" ")},locations:{valType:"data_array",dflt:[],role:"info",description:["Specifies the location(s) of slices on the axis.","When not specified slices would be created for","all points of the axis",t,"except start and end."].join(" ")},fill:{valType:"number",role:"style",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `slices`. The default fill value of the","`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}function h(t){return{show:{valType:"boolean",role:"info",dflt:!0,description:["Sets the fill ratio of the `slices`. The default fill value of the",t,"`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},fill:{valType:"number",role:"style",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `caps`. The default fill value of the","`caps` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}var c=t.exports=l(s({x:{valType:"data_array",role:"info",description:["Sets the X coordinates of the vertices on X axis."].join(" ")},y:{valType:"data_array",role:"info",description:["Sets the Y coordinates of the vertices on Y axis."].join(" ")},z:{valType:"data_array",role:"info",description:["Sets the Z coordinates of the vertices on Z axis."].join(" ")},value:{valType:"data_array",role:"info",description:["Sets the 4th dimension (value) of the vertices."].join(" ")},isomin:{valType:"number",role:"info",description:["Sets the minimum boundary for iso-surface plot."].join(" ")},isomax:{valType:"number",role:"info",description:["Sets the maximum boundary for iso-surface plot."].join(" ")},surface:{show:{valType:"boolean",role:"info",dflt:!0,description:["Hides/displays surfaces between minimum and maximum iso-values."].join(" ")},count:{valType:"integer",role:"info",dflt:2,min:1,description:["Sets the number of iso-surfaces between minimum and maximum iso-values.","By default this value is 2 meaning that only minimum and maximum surfaces","would be drawn."].join(" ")},fill:{valType:"number",role:"style",min:0,max:1,dflt:1,description:["Sets the fill ratio of the iso-surface. The default fill value of the","surface is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all",role:"style",description:["Sets the surface pattern of the iso-surface 3-D sections. The default pattern of","the surface is `all` meaning that the rest of surface elements would be shaded.","The check options (either 1 or 2) could be used to draw half of the squares","on the surface. Using various combinations of capital `A`, `B`, `C`, `D` and `E`","may also be used to reduce the number of triangles on the iso-surfaces and","creating other patterns of interest."].join(" ")}},spaceframe:{show:{valType:"boolean",role:"info",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",role:"style",min:0,max:1,dflt:.15,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 0.15 meaning that only 15% of the area of every faces of tetras would be","shaded. Applying a greater `fill` ratio would allow the creation of stronger","elements or could be sued to have entirely closed areas (in case of using 1)."].join(" ")}},slices:{x:u("x"),y:u("y"),z:u("z")},caps:{x:h("x"),y:h("y"),z:h("z")},text:{valType:"string",role:"info",dflt:"",arrayOk:!0,description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:n(),showlegend:s({},o.showlegend,{dflt:!1})},i("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:a.opacity,lightposition:a.lightposition,lighting:a.lighting,flatshading:a.flatshading,contour:a.contour,hoverinfo:s({},o.hoverinfo)}),"calc","nested");c.flatshading.dflt=!0,c.lighting.facenormalsepsilon.dflt=0,c.x.editType=c.y.editType=c.z.editType=c.value.editType="calc+clearAxisTypes",c.transforms=void 0},function(t,e,r){"use strict";var i=r(941),n=r(693).parseColorScale,a=r(662),o=r(208).extractOpts,s=r(869),l=function(t,e){for(var r=e.length-1;r>0;r--){var i=Math.min(e[r],e[r-1]),n=Math.max(e[r],e[r-1]);if(n>i&&i<t&&t<=n)return{id:r,distRatio:(n-t)/(n-i)}}return{id:0,distRatio:0}};function u(t,e,r){this.scene=t,this.uid=r,this.mesh=e,this.name="",this.data=null,this.showContour=!1}var h=u.prototype;h.handlePick=function(t){if(t.object===this.mesh){var e=t.data.index,r=this.data._meshX[e],i=this.data._meshY[e],n=this.data._meshZ[e],a=this.data._Ys.length,o=this.data._Zs.length,s=l(r,this.data._Xs).id,u=l(i,this.data._Ys).id,h=l(n,this.data._Zs).id,c=t.index=h+o*u+o*a*s;t.traceCoordinate=[this.data._meshX[c],this.data._meshY[c],this.data._meshZ[c],this.data._value[c]];var f=this.data.hovertext||this.data.text;return Array.isArray(f)&&void 0!==f[c]?t.textLabel=f[c]:f&&(t.textLabel=f),!0}},h.update=function(t){var e=this.scene,r=e.fullSceneLayout;function i(t,e,r,i){return e.map((function(e){return t.d2l(e,0,i)*r}))}this.data=f(t);var l={positions:s(i(r.xaxis,t._meshX,e.dataScale[0],t.xcalendar),i(r.yaxis,t._meshY,e.dataScale[1],t.ycalendar),i(r.zaxis,t._meshZ,e.dataScale[2],t.zcalendar)),cells:s(t._meshI,t._meshJ,t._meshK),lightPosition:[t.lightposition.x,t.lightposition.y,t.lightposition.z],ambient:t.lighting.ambient,diffuse:t.lighting.diffuse,specular:t.lighting.specular,roughness:t.lighting.roughness,fresnel:t.lighting.fresnel,vertexNormalsEpsilon:t.lighting.vertexnormalsepsilon,faceNormalsEpsilon:t.lighting.facenormalsepsilon,opacity:t.opacity,contourEnable:t.contour.show,contourColor:a(t.contour.color).slice(0,3),contourWidth:t.contour.width,useFacetNormals:t.flatshading},u=o(t);l.vertexIntensity=t._meshIntensity,l.vertexIntensityBounds=[u.min,u.max],l.colormap=n(t),this.mesh.update(l)},h.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var c=["xyz","xzy","yxz","yzx","zxy","zyx"];function f(t){t._meshI=[],t._meshJ=[],t._meshK=[];var e,r,i,n,a,o,s,u=t.surface.show,h=t.spaceframe.show,f=t.surface.fill,d=t.spaceframe.fill,p=!1,g=!1,v=0,m=t._Xs,y=t._Ys,x=t._Zs,b=m.length,_=y.length,w=x.length,A=c.indexOf(t._gridFill.replace(/-/g,"").replace(/\+/g,"")),T=function(t,e,r){switch(A){case 5:return r+w*e+w*_*t;case 4:return r+w*t+w*b*e;case 3:return e+_*r+_*w*t;case 2:return e+_*t+_*b*r;case 1:return t+b*r+b*w*e;default:return t+b*e+b*_*r}},M=t._minValues,k=t._maxValues,E=t._vMin,S=t._vMax;function C(t,e,s){for(var l=o.length,u=r;u<l;u++)if(t===i[u]&&e===n[u]&&s===a[u])return u;return-1}function L(){r=e}function I(){i=[],n=[],a=[],o=[],e=0,L()}function j(t,r,s,l){return i.push(t),n.push(r),a.push(s),o.push(l),++e-1}function R(t,e,r){for(var i=[],n=0;n<t.length;n++)i[n]=t[n]*(1-r)+r*e[n];return i}function P(t){s=t}function O(t,e){return"all"===t||null===t||t.indexOf(e)>-1}function z(t,e){return null===t?e:t}function N(e,r,i){L();var n,a,o,l=[r],u=[i];if(s>=1)l=[r],u=[i];else if(s>0){var h=function(t,e){var r=t[0],i=t[1],n=t[2],a=function(t,e,r){for(var i=[],n=0;n<t.length;n++)i[n]=(t[n]+e[n]+r[n])/3;return i}(r,i,n),o=Math.sqrt(1-s),l=R(a,r,o),u=R(a,i,o),h=R(a,n,o),c=e[0],f=e[1],d=e[2];return{xyzv:[[r,i,u],[u,l,r],[i,n,h],[h,u,i],[n,r,l],[l,h,n]],abc:[[c,f,-1],[-1,-1,c],[f,d,-1],[-1,-1,f],[d,c,-1],[-1,-1,d]]}}(r,i);l=h.xyzv,u=h.abc}for(var c=0;c<l.length;c++){r=l[c],i=u[c];for(var f=[],d=0;d<3;d++){var p=r[d][0],g=r[d][1],m=r[d][2],y=r[d][3],x=i[d]>-1?i[d]:C(p,g,m);f[d]=x>-1?x:j(p,g,m,z(e,y))}n=f[0],a=f[1],o=f[2],t._meshI.push(n),t._meshJ.push(a),t._meshK.push(o),++v}}function B(t,e,r,i){var n=t[3];n<r&&(n=r),n>i&&(n=i);for(var a=(t[3]-n)/(t[3]-e[3]+1e-9),o=[],s=0;s<4;s++)o[s]=(1-a)*t[s]+a*e[s];return o}function F(t,e,r){return t>=e&&t<=r}function D(t){var e=.001*(S-E);return t>=E-e&&t<=S+e}function U(e){for(var r=[],i=0;i<4;i++){var n=e[i];r.push([t._x[n],t._y[n],t._z[n],t._value[n]])}return r}function V(t,e,r,i,n,a){a||(a=1),r=[-1,-1,-1];var o=!1,s=[F(e[0][3],i,n),F(e[1][3],i,n),F(e[2][3],i,n)];if(!s[0]&&!s[1]&&!s[2])return!1;var l=function(t,e,r){return D(e[0][3])&&D(e[1][3])&&D(e[2][3])?(N(t,e,r),!0):a<3&&V(t,e,r,E,S,++a)};if(s[0]&&s[1]&&s[2])return l(t,e,r)||o;var u=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach((function(a){if(s[a[0]]&&s[a[1]]&&!s[a[2]]){var h=e[a[0]],c=e[a[1]],f=e[a[2]],d=B(f,h,i,n),p=B(f,c,i,n);o=l(t,[p,d,h],[-1,-1,r[a[0]]])||o,o=l(t,[h,c,p],[r[a[0]],r[a[1]],-1])||o,u=!0}})),u||[[0,1,2],[1,2,0],[2,0,1]].forEach((function(a){if(s[a[0]]&&!s[a[1]]&&!s[a[2]]){var h=e[a[0]],c=e[a[1]],f=e[a[2]],d=B(c,h,i,n),p=B(f,h,i,n);o=l(t,[p,d,h],[-1,-1,r[a[0]]])||o,u=!0}})),o}function X(t,e,r,i){var n=!1,a=U(e),o=[F(a[0][3],r,i),F(a[1][3],r,i),F(a[2][3],r,i),F(a[3][3],r,i)];if(!(o[0]||o[1]||o[2]||o[3]))return n;if(o[0]&&o[1]&&o[2]&&o[3])return g&&(n=function(t,e,r){var i=function(i,n,a){N(t,[e[i],e[n],e[a]],[r[i],r[n],r[a]])};i(0,1,2),i(3,0,1),i(2,3,0),i(1,2,3)}(t,a,e)||n),n;var s=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&o[l[2]]&&!o[l[3]]){var u=a[l[0]],h=a[l[1]],c=a[l[2]],f=a[l[3]];if(g)n=N(t,[u,h,c],[e[l[0]],e[l[1]],e[l[2]]])||n;else{var d=B(f,u,r,i),p=B(f,h,r,i),v=B(f,c,r,i);n=N(null,[d,p,v],[-1,-1,-1])||n}s=!0}})),s?n:([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&!o[l[2]]&&!o[l[3]]){var u=a[l[0]],h=a[l[1]],c=a[l[2]],f=a[l[3]],d=B(c,u,r,i),p=B(c,h,r,i),v=B(f,h,r,i),m=B(f,u,r,i);g?(n=N(t,[u,m,d],[e[l[0]],-1,-1])||n,n=N(t,[h,p,v],[e[l[1]],-1,-1])||n):n=function(t,e,r){var i=function(i,n,a){N(t,[e[i],e[n],e[a]],[r[i],r[n],r[a]])};i(0,1,2),i(2,3,0)}(null,[d,p,v,m],[-1,-1,-1,-1])||n,s=!0}})),s||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach((function(l){if(o[l[0]]&&!o[l[1]]&&!o[l[2]]&&!o[l[3]]){var u=a[l[0]],h=a[l[1]],c=a[l[2]],f=a[l[3]],d=B(h,u,r,i),p=B(c,u,r,i),v=B(f,u,r,i);g?(n=N(t,[u,d,p],[e[l[0]],-1,-1])||n,n=N(t,[u,p,v],[e[l[0]],-1,-1])||n,n=N(t,[u,v,d],[e[l[0]],-1,-1])||n):n=N(null,[d,p,v],[-1,-1,-1])||n,s=!0}})),n)}function G(t,e,r,i,n,a,o,s,l,u,h){var c=!1;return p&&(O(t,"A")&&(c=X(null,[e,r,i,a],u,h)||c),O(t,"B")&&(c=X(null,[r,i,n,l],u,h)||c),O(t,"C")&&(c=X(null,[r,a,o,l],u,h)||c),O(t,"D")&&(c=X(null,[i,a,s,l],u,h)||c),O(t,"E")&&(c=X(null,[r,i,a,l],u,h)||c)),g&&(c=X(t,[r,i,a,l],u,h)||c),c}function W(t,e,r,i,n,a,o,s){return[!0===s[0]||V(t,U([e,r,i]),[e,r,i],a,o),!0===s[1]||V(t,U([i,n,e]),[i,n,e],a,o)]}function H(t,e,r,i,n,a,o,s,l){return s?W(t,e,r,n,i,a,o,l):W(t,r,n,i,e,a,o,l)}function q(t,e,r,i,n,a,o){var s,l,u,h,c=!1,f=function(){c=V(t,[s,l,u],[-1,-1,-1],n,a)||c,c=V(t,[u,h,s],[-1,-1,-1],n,a)||c},d=o[0],p=o[1],g=o[2];return d&&(s=R(U([T(e,r-0,i-0)])[0],U([T(e-1,r-0,i-0)])[0],d),l=R(U([T(e,r-0,i-1)])[0],U([T(e-1,r-0,i-1)])[0],d),u=R(U([T(e,r-1,i-1)])[0],U([T(e-1,r-1,i-1)])[0],d),h=R(U([T(e,r-1,i-0)])[0],U([T(e-1,r-1,i-0)])[0],d),f()),p&&(s=R(U([T(e-0,r,i-0)])[0],U([T(e-0,r-1,i-0)])[0],p),l=R(U([T(e-0,r,i-1)])[0],U([T(e-0,r-1,i-1)])[0],p),u=R(U([T(e-1,r,i-1)])[0],U([T(e-1,r-1,i-1)])[0],p),h=R(U([T(e-1,r,i-0)])[0],U([T(e-1,r-1,i-0)])[0],p),f()),g&&(s=R(U([T(e-0,r-0,i)])[0],U([T(e-0,r-0,i-1)])[0],g),l=R(U([T(e-0,r-1,i)])[0],U([T(e-0,r-1,i-1)])[0],g),u=R(U([T(e-1,r-1,i)])[0],U([T(e-1,r-1,i-1)])[0],g),h=R(U([T(e-1,r-0,i)])[0],U([T(e-1,r-0,i-1)])[0],g),f()),c}function Y(t,e,r,i,n,a,o,s,l,u,h,c){var f=t;return c?(p&&"even"===t&&(f=null),G(f,e,r,i,n,a,o,s,l,u,h)):(p&&"odd"===t&&(f=null),G(f,l,s,o,a,n,i,r,e,u,h))}function Z(t,e,r,i,n){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],u=1;u<w;u++)for(var h=1;h<_;h++)a.push(H(t,T(l,h-1,u-1),T(l,h-1,u),T(l,h,u-1),T(l,h,u),r,i,(l+h+u)%2,n&&n[o]?n[o]:[])),o++;return a}function Q(t,e,r,i,n){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],u=1;u<b;u++)for(var h=1;h<w;h++)a.push(H(t,T(u-1,l,h-1),T(u,l,h-1),T(u-1,l,h),T(u,l,h),r,i,(u+l+h)%2,n&&n[o]?n[o]:[])),o++;return a}function K(t,e,r,i,n){for(var a=[],o=0,s=0;s<e.length;s++)for(var l=e[s],u=1;u<_;u++)for(var h=1;h<b;h++)a.push(H(t,T(h-1,u-1,l),T(h-1,u,l),T(h,u-1,l),T(h,u,l),r,i,(h+u+l)%2,n&&n[o]?n[o]:[])),o++;return a}function J(t,e,r){for(var i=1;i<w;i++)for(var n=1;n<_;n++)for(var a=1;a<b;a++)Y(t,T(a-1,n-1,i-1),T(a-1,n-1,i),T(a-1,n,i-1),T(a-1,n,i),T(a,n-1,i-1),T(a,n-1,i),T(a,n,i-1),T(a,n,i),e,r,(a+n+i)%2)}function $(t,e,r){p=!0,J(t,e,r),p=!1}function tt(t,e,r,i,n,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var u=e[l],h=1;h<w;h++)for(var c=1;c<_;c++)o.push(q(t,u,c,h,r,i,n[l],a&&a[s]&&a[s])),s++;return o}function et(t,e,r,i,n,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var u=e[l],h=1;h<b;h++)for(var c=1;c<w;c++)o.push(q(t,h,u,c,r,i,n[l],a&&a[s]&&a[s])),s++;return o}function rt(t,e,r,i,n,a){for(var o=[],s=0,l=0;l<e.length;l++)for(var u=e[l],h=1;h<_;h++)for(var c=1;c<b;c++)o.push(q(t,c,h,u,r,i,n[l],a&&a[s]&&a[s])),s++;return o}function it(t,e){for(var r=[],i=t;i<e;i++)r.push(i);return r}return function(){if(I(),function(){for(var e=0;e<b;e++)for(var r=0;r<_;r++)for(var i=0;i<w;i++){var n=T(e,r,i);j(t._x[n],t._y[n],t._z[n],t._value[n])}}(),h&&d&&(P(d),g=!0,J(null,E,S),g=!1),u&&f){P(f);for(var e=t.surface.pattern,r=t.surface.count,s=0;s<r;s++){var c=1===r?.5:s/(r-1),p=(1-c)*E+c*S,A=Math.abs(p-M)>Math.abs(p-k)?[M,p]:[p,k];$(e,A[0],A[1])}}var C=[[Math.min(E,k),Math.max(E,k)],[Math.min(M,S),Math.max(M,S)]];["x","y","z"].forEach((function(e){for(var r=[],i=0;i<C.length;i++){var n=0,a=C[i][0],o=C[i][1],s=t.slices[e];if(s.show&&s.fill){P(s.fill);var u=[],h=[],c=[];if(s.locations.length)for(var f=0;f<s.locations.length;f++){var d=l(s.locations[f],"x"===e?m:"y"===e?y:x);0===d.distRatio?u.push(d.id):d.id>0&&(h.push(d.id),"x"===e?c.push([d.distRatio,0,0]):"y"===e?c.push([0,d.distRatio,0]):c.push([0,0,d.distRatio]))}else u=it(1,"x"===e?b-1:"y"===e?_-1:w-1);h.length>0&&(r[n]="x"===e?tt(null,h,a,o,c,r[n]):"y"===e?et(null,h,a,o,c,r[n]):rt(null,h,a,o,c,r[n]),n++),u.length>0&&(r[n]="x"===e?Z(null,u,a,o,r[n]):"y"===e?Q(null,u,a,o,r[n]):K(null,u,a,o,r[n]),n++)}var p=t.caps[e];p.show&&p.fill&&(P(p.fill),r[n]="x"===e?Z(null,[0,b-1],a,o,r[n]):"y"===e?Q(null,[0,_-1],a,o,r[n]):K(null,[0,w-1],a,o,r[n]),n++)}})),0===v&&I(),t._meshX=i,t._meshY=n,t._meshZ=a,t._meshIntensity=o,t._Xs=m,t._Ys=y,t._Zs=x}(),t}t.exports={findNearestOnAxis:l,generateIsoMeshes:f,createIsosurfaceTrace:function(t,e){var r=t.glplot.gl,n=i({gl:r}),a=new u(t,n,e.uid);return n._trace=a,a.update(e),t.glplot.add(n),a}}},,,,,,,function(t,e,r){"use strict";var i=r(629),n=r(636);t.exports=function(t,e){var r=[{x:!1,y:!1,trace:e,t:{}}];return i(r,e),n(t,e),r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";t.exports=function(t,e){var r=t.length;if(0===r)throw new Error("Must have at least d+1 points");var n=t[0].length;if(r<=n)throw new Error("Must input at least d+1 points");var o=t.slice(0,n+1),s=i.apply(void 0,o);if(0===s)throw new Error("Input not in general position");for(var l=new Array(n+1),h=0;h<=n;++h)l[h]=h;s<0&&(l[0]=1,l[1]=0);var c=new a(l,new Array(n+1),!1),f=c.adjacent,d=new Array(n+2);for(h=0;h<=n;++h){for(var p=l.slice(),g=0;g<=n;++g)g===h&&(p[g]=-1);var v=p[0];p[0]=p[1],p[1]=v;var m=new a(p,new Array(n+1),!0);f[h]=m,d[h]=m}d[n+1]=c;for(h=0;h<=n;++h){p=f[h].vertices;var y=f[h].adjacent;for(g=0;g<=n;++g){var x=p[g];if(x<0)y[g]=c;else for(var b=0;b<=n;++b)f[b].vertices.indexOf(x)<0&&(y[g]=f[b])}}var _=new u(n,o,d),w=!!e;for(h=n+1;h<r;++h)_.insert(t[h],w);return _.boundary()};var i=r(634),n=r(1557).compareCells;function a(t,e,r){this.vertices=t,this.adjacent=e,this.boundary=r,this.lastVisited=-1}function o(t,e,r){this.vertices=t,this.cell=e,this.index=r}function s(t,e){return n(t.vertices,e.vertices)}a.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var l=[];function u(t,e,r){this.dimension=t,this.vertices=e,this.simplices=r,this.interior=r.filter((function(t){return!t.boundary})),this.tuple=new Array(t+1);for(var n=0;n<=t;++n)this.tuple[n]=this.vertices[n];var a=l[t];a||(a=l[t]=function(t){for(var e=["function orient(){var tuple=this.tuple;return test("],r=0;r<=t;++r)r>0&&e.push(","),e.push("tuple[",r,"]");e.push(")}return orient");var n=new Function("test",e.join("")),a=i[t+1];return a||(a=i),n(a)}(t)),this.orient=a}var h=u.prototype;h.handleBoundaryDegeneracy=function(t,e){var r=this.dimension,i=this.vertices.length-1,n=this.tuple,a=this.vertices,o=[t];for(t.lastVisited=-i;o.length>0;){(t=o.pop()).vertices;for(var s=t.adjacent,l=0;l<=r;++l){var u=s[l];if(u.boundary&&!(u.lastVisited<=-i)){for(var h=u.vertices,c=0;c<=r;++c){var f=h[c];n[c]=f<0?e:a[f]}var d=this.orient();if(d>0)return u;u.lastVisited=-i,0===d&&o.push(u)}}}return null},h.walk=function(t,e){var r=this.vertices.length-1,i=this.dimension,n=this.vertices,a=this.tuple,o=e?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[o];t:for(;!s.boundary;){for(var l=s.vertices,u=s.adjacent,h=0;h<=i;++h)a[h]=n[l[h]];s.lastVisited=r;for(h=0;h<=i;++h){var c=u[h];if(!(c.lastVisited>=r)){var f=a[h];a[h]=t;var d=this.orient();if(a[h]=f,d<0){s=c;continue t}c.boundary?c.lastVisited=-r:c.lastVisited=r}}return}return s},h.addPeaks=function(t,e){var r=this.vertices.length-1,i=this.dimension,n=this.vertices,l=this.tuple,u=this.interior,h=this.simplices,c=[e];e.lastVisited=r,e.vertices[e.vertices.indexOf(-1)]=r,e.boundary=!1,u.push(e);for(var f=[];c.length>0;){var d=(e=c.pop()).vertices,p=e.adjacent,g=d.indexOf(r);if(!(g<0))for(var v=0;v<=i;++v)if(v!==g){var m=p[v];if(m.boundary&&!(m.lastVisited>=r)){var y=m.vertices;if(m.lastVisited!==-r){for(var x=0,b=0;b<=i;++b)y[b]<0?(x=b,l[b]=t):l[b]=n[y[b]];if(this.orient()>0){y[x]=r,m.boundary=!1,u.push(m),c.push(m),m.lastVisited=r;continue}m.lastVisited=-r}var _=m.adjacent,w=d.slice(),A=p.slice(),T=new a(w,A,!0);h.push(T);var M=_.indexOf(e);if(!(M<0)){_[M]=T,A[g]=m,w[v]=-1,A[v]=e,p[v]=T,T.flip();for(b=0;b<=i;++b){var k=w[b];if(!(k<0||k===r)){for(var E=new Array(i-1),S=0,C=0;C<=i;++C){var L=w[C];L<0||C===b||(E[S++]=L)}f.push(new o(E,T,b))}}}}}}f.sort(s);for(v=0;v+1<f.length;v+=2){var I=f[v],j=f[v+1],R=I.index,P=j.index;R<0||P<0||(I.cell.adjacent[I.index]=j.cell,j.cell.adjacent[j.index]=I.cell)}},h.insert=function(t,e){var r=this.vertices;r.push(t);var i=this.walk(t,e);if(i){for(var n=this.dimension,a=this.tuple,o=0;o<=n;++o){var s=i.vertices[o];a[o]=s<0?t:r[s]}var l=this.orient(a);l<0||(0!==l||(i=this.handleBoundaryDegeneracy(i,t)))&&this.addPeaks(t,i)}},h.boundary=function(){for(var t=this.dimension,e=[],r=this.simplices,i=r.length,n=0;n<i;++n){var a=r[n];if(a.boundary){for(var o=new Array(t),s=a.vertices,l=0,u=0,h=0;h<=t;++h)s[h]>=0?o[l++]=s[h]:u=1&h;if(u===(1&t)){var c=o[0];o[0]=o[1],o[1]=c}e.push(o)}}return e}},function(t,e,r){"use strict";var i=r(23),n=r(6),a=r(151),o=r(806);function s(t,e,r,i){var n=i("opacityscale");"max"===n?e.opacityscale=[[0,.1],[1,1]]:"min"===n?e.opacityscale=[[0,1],[1,.1]]:"extremes"===n?e.opacityscale=function(t,e){for(var r=[],i=0;i<32;i++){var n=i/31,a=e+(1-e)*(1-Math.pow(Math.sin(t*n*Math.PI),2));r.push([n,Math.max(0,Math.min(1,a))])}return r}(1,.1):function(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var r=0;r<t.length;r++){var i=t[r];if(2!==i.length||+i[0]<e)return!1;e=+i[0]}return!0}(n)||(e.opacityscale=void 0)}function l(t,e,r){e in t&&!(r in t)&&(t[r]=t[e])}t.exports={supplyDefaults:function(t,e,r,u){var h,c;function f(r,i){return n.coerce(t,e,o,r,i)}var d=f("x"),p=f("y"),g=f("z");if(!g||!g.length||d&&d.length<1||p&&p.length<1)e.visible=!1;else{e._xlength=Array.isArray(d)&&n.isArrayOrTypedArray(d[0])?g.length:g[0].length,e._ylength=g.length,i.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],u),f("text"),f("hovertext"),f("hovertemplate"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach((function(t){f(t)}));var v=f("surfacecolor"),m=["x","y","z"];for(h=0;h<3;++h){var y="contours."+m[h],x=f(y+".show"),b=f(y+".highlight");if(x||b)for(c=0;c<3;++c)f(y+".project."+m[c]);x&&(f(y+".color"),f(y+".width"),f(y+".usecolormap")),b&&(f(y+".highlightcolor"),f(y+".highlightwidth")),f(y+".start"),f(y+".end"),f(y+".size")}v||(l(t,"zmin","cmin"),l(t,"zmax","cmax"),l(t,"zauto","cauto")),a(t,e,u,f,{prefix:"",cLetter:"c"}),s(t,e,u,f),e._length=null}},opacityscaleDefaults:s}},,,,,,,,,,,function(t,e,r){"use strict";t.exports=function(t,e,r){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return"number"==typeof t?new o(i=l(t),i,0):new o(t,l(t.length),0);case 2:if("number"==typeof e){var i=l(t.length);return new o(t,i,+e)}r=0;case 3:if(t.length!==e.length)throw new Error("state and velocity lengths must match");return new o(t,e,r)}};var i=r(1346),n=r(1347);function a(t,e,r){return Math.min(e,Math.max(t,r))}function o(t,e,r){this.dimension=t.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var i=0;i<this.dimension;++i)this.bounds[0][i]=-1/0,this.bounds[1][i]=1/0;this._state=t.slice().reverse(),this._velocity=e.slice().reverse(),this._time=[r],this._scratch=[t.slice(),t.slice(),t.slice(),t.slice(),t.slice()]}var s=o.prototype;function l(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=0;return e}s.flush=function(t){var e=n.gt(this._time,t)-1;e<=0||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))},s.curve=function(t){var e=this._time,r=e.length,o=n.le(e,t),s=this._scratch[0],l=this._state,u=this._velocity,h=this.dimension,c=this.bounds;if(o<0)for(var f=h-1,d=0;d<h;++d,--f)s[d]=l[f];else if(o>=r-1){f=l.length-1;var p=t-e[r-1];for(d=0;d<h;++d,--f)s[d]=l[f]+p*u[f]}else{f=h*(o+1)-1;var g=e[o],v=e[o+1]-g||1,m=this._scratch[1],y=this._scratch[2],x=this._scratch[3],b=this._scratch[4],_=!0;for(d=0;d<h;++d,--f)m[d]=l[f],x[d]=u[f]*v,y[d]=l[f+h],b[d]=u[f+h]*v,_=_&&m[d]===y[d]&&x[d]===b[d]&&0===x[d];if(_)for(d=0;d<h;++d)s[d]=m[d];else i(m,x,y,b,(t-g)/v,s)}var w=c[0],A=c[1];for(d=0;d<h;++d)s[d]=a(w[d],A[d],s[d]);return s},s.dcurve=function(t){var e=this._time,r=e.length,a=n.le(e,t),o=this._scratch[0],s=this._state,l=this._velocity,u=this.dimension;if(a>=r-1)for(var h=s.length-1,c=(e[r-1],0);c<u;++c,--h)o[c]=l[h];else{h=u*(a+1)-1;var f=e[a],d=e[a+1]-f||1,p=this._scratch[1],g=this._scratch[2],v=this._scratch[3],m=this._scratch[4],y=!0;for(c=0;c<u;++c,--h)p[c]=s[h],v[c]=l[h]*d,g[c]=s[h+u],m[c]=l[h+u]*d,y=y&&p[c]===g[c]&&v[c]===m[c]&&0===v[c];if(y)for(c=0;c<u;++c)o[c]=0;else{i.derivative(p,v,g,m,(t-f)/d,o);for(c=0;c<u;++c)o[c]/=d}}return o},s.lastT=function(){var t=this._time;return t[t.length-1]},s.stable=function(){for(var t=this._velocity,e=t.length,r=this.dimension-1;r>=0;--r)if(t[--e])return!1;return!0},s.jump=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e||arguments.length!==r+1)){var i=this._state,n=this._velocity,o=i.length-this.dimension,s=this.bounds,l=s[0],u=s[1];this._time.push(e,t);for(var h=0;h<2;++h)for(var c=0;c<r;++c)i.push(i[o++]),n.push(0);this._time.push(t);for(c=r;c>0;--c)i.push(a(l[c-1],u[c-1],arguments[c])),n.push(0)}},s.push=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e||arguments.length!==r+1)){var i=this._state,n=this._velocity,o=i.length-this.dimension,s=t-e,l=this.bounds,u=l[0],h=l[1],c=s>1e-6?1/s:0;this._time.push(t);for(var f=r;f>0;--f){var d=a(u[f-1],h[f-1],arguments[f]);i.push(d),n.push((d-i[o++])*c)}}},s.set=function(t){var e=this.dimension;if(!(t<this.lastT()||arguments.length!==e+1)){var r=this._state,i=this._velocity,n=this.bounds,o=n[0],s=n[1];this._time.push(t);for(var l=e;l>0;--l)r.push(a(o[l-1],s[l-1],arguments[l])),i.push(0)}},s.move=function(t){var e=this.lastT(),r=this.dimension;if(!(t<=e||arguments.length!==r+1)){var i=this._state,n=this._velocity,o=i.length-this.dimension,s=this.bounds,l=s[0],u=s[1],h=t-e,c=h>1e-6?1/h:0;this._time.push(t);for(var f=r;f>0;--f){var d=arguments[f];i.push(a(l[f-1],u[f-1],i[o++]+d)),n.push(d*c)}}},s.idle=function(t){var e=this.lastT();if(!(t<e)){var r=this.dimension,i=this._state,n=this._velocity,o=i.length-r,s=this.bounds,l=s[0],u=s[1],h=t-e;this._time.push(t);for(var c=r-1;c>=0;--c)i.push(a(l[c],u[c],i[o]+h*n[o])),n.push(0),o+=1}}},function(t,e,r){var i=r(1213);t.exports=function(t,e,r,n){var a,o,s,l,u,h,c,f,d,p,g=e[0],v=e[1],m=e[2],y=n[0],x=n[1],b=n[2],_=r[0],w=r[1],A=r[2];if(Math.abs(g-_)<1e-6&&Math.abs(v-w)<1e-6&&Math.abs(m-A)<1e-6)return i(t);c=g-_,f=v-w,d=m-A,p=1/Math.sqrt(c*c+f*f+d*d),a=x*(d*=p)-b*(f*=p),o=b*(c*=p)-y*d,s=y*f-x*c,(p=Math.sqrt(a*a+o*o+s*s))?(a*=p=1/p,o*=p,s*=p):(a=0,o=0,s=0);l=f*s-d*o,u=d*a-c*s,h=c*o-f*a,(p=Math.sqrt(l*l+u*u+h*h))?(l*=p=1/p,u*=p,h*=p):(l=0,u=0,h=0);return t[0]=a,t[1]=l,t[2]=c,t[3]=0,t[4]=o,t[5]=u,t[6]=f,t[7]=0,t[8]=s,t[9]=h,t[10]=d,t[11]=0,t[12]=-(a*g+o*v+s*m),t[13]=-(l*g+u*v+h*m),t[14]=-(c*g+f*v+d*m),t[15]=1,t}},function(t,e){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e,r,i){var n=e[0],a=e[1],o=e[2];return t[0]=n+i*(r[0]-n),t[1]=a+i*(r[1]-a),t[2]=o+i*(r[2]-o),t}},function(t,e){t.exports=function(t,e,r){var i,n,a,o,s,l,u,h,c,f,d,p,g=r[0],v=r[1],m=r[2];e===t?(t[12]=e[0]*g+e[4]*v+e[8]*m+e[12],t[13]=e[1]*g+e[5]*v+e[9]*m+e[13],t[14]=e[2]*g+e[6]*v+e[10]*m+e[14],t[15]=e[3]*g+e[7]*v+e[11]*m+e[15]):(i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],h=e[7],c=e[8],f=e[9],d=e[10],p=e[11],t[0]=i,t[1]=n,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=u,t[7]=h,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=i*g+s*v+c*m+e[12],t[13]=n*g+l*v+f*m+e[13],t[14]=a*g+u*v+d*m+e[14],t[15]=o*g+h*v+p*m+e[15]);return t}},function(t,e){t.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e,r){var i=r[0],n=r[1],a=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},function(t,e){t.exports=function(t){var e=t[0],r=t[1],i=t[2],n=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],h=t[9],c=t[10],f=t[11],d=t[12],p=t[13],g=t[14],v=t[15];return(e*o-r*a)*(c*v-f*g)-(e*s-i*a)*(h*v-f*p)+(e*l-n*a)*(h*g-c*p)+(r*s-i*o)*(u*v-f*d)-(r*l-n*o)*(u*g-c*d)+(i*l-n*s)*(u*p-h*d)}},function(t,e){t.exports=function(t,e){if(t===e){var r=e[1],i=e[2],n=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=a,t[11]=e[14],t[12]=n,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},function(t,e,r){"use strict";t.exports=function(t,e,r){e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var i=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(r){if(r.length>i)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<r.length;++n){var a=r[n];if(a.buffer){var o=a.buffer,s=a.size||4,l=a.type||t.FLOAT,u=!!a.normalized,h=a.stride||0,c=a.offset||0;o.bind(),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,s,l,u,h,c)}else{if("number"==typeof a)t.vertexAttrib1f(n,a);else if(1===a.length)t.vertexAttrib1f(n,a[0]);else if(2===a.length)t.vertexAttrib2f(n,a[0],a[1]);else if(3===a.length)t.vertexAttrib3f(n,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");t.vertexAttrib4f(n,a[0],a[1],a[2],a[3])}t.disableVertexAttribArray(n)}}for(;n<i;++n)t.disableVertexAttribArray(n)}else{t.bindBuffer(t.ARRAY_BUFFER,null);for(n=0;n<i;++n)t.disableVertexAttribArray(n)}}},function(t,e,r){"use strict";t.exports=function(t,e,r,a,d){n(s,e,t),n(s,r,s);for(var y=0,x=0;x<2;++x){h[2]=a[x][2];for(var b=0;b<2;++b){h[1]=a[b][1];for(var _=0;_<2;++_)h[0]=a[_][0],f(l[y],h,s),y+=1}}var w=-1;for(x=0;x<8;++x){for(var A=l[x][3],T=0;T<3;++T)u[x][T]=l[x][T]/A;d&&(u[x][2]*=-1),A<0&&(w<0||u[x][2]<u[w][2])&&(w=x)}if(w<0){w=0;for(var M=0;M<3;++M){for(var k=(M+2)%3,E=(M+1)%3,S=-1,C=-1,L=0;L<2;++L){var I=(R=L<<M)+(L<<k)+(1-L<<E),j=R+(1-L<<k)+(L<<E);o(u[R],u[I],u[j],c)<0||(L?S=1:C=1)}if(S<0||C<0)C>S&&(w|=1<<M);else{for(L=0;L<2;++L){I=(R=L<<M)+(L<<k)+(1-L<<E),j=R+(1-L<<k)+(L<<E);var R,P=p([l[R],l[I],l[j],l[R+(1<<k)+(1<<E)]]);L?S=P:C=P}C>S&&(w|=1<<M)}}}var O=7^w,z=-1;for(x=0;x<8;++x)x!==w&&x!==O&&(z<0||u[z][1]>u[x][1])&&(z=x);var N=-1;for(x=0;x<3;++x){if((F=z^1<<x)!==w&&F!==O)N<0&&(N=F),(E=u[F])[0]<u[N][0]&&(N=F)}var B=-1;for(x=0;x<3;++x){var F;if((F=z^1<<x)!==w&&F!==O&&F!==N)B<0&&(B=F),(E=u[F])[0]>u[B][0]&&(B=F)}var D=g;D[0]=D[1]=D[2]=0,D[i.log2(N^z)]=z&N,D[i.log2(z^B)]=z&B;var U=7^B;U===w||U===O?(U=7^N,D[i.log2(B^U)]=U&B):D[i.log2(N^U)]=U&N;var V=v,X=w;for(M=0;M<3;++M)V[M]=X&1<<M?-1:1;return m};var i=r(643),n=r(761),a=r(1222),o=r(634),s=new Array(16),l=new Array(8),u=new Array(8),h=new Array(3),c=[0,0,0];function f(t,e,r){for(var i=0;i<4;++i){t[i]=r[12+i];for(var n=0;n<3;++n)t[i]+=e[n]*r[4*n+i]}}!function(){for(var t=0;t<8;++t)l[t]=[1,1,1,1],u[t]=[1,1,1]}();var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function p(t){for(var e=0;e<d.length;++e)if((t=a.positive(t,d[e])).length<3)return 0;var r=t[0],i=r[0]/r[3],n=r[1]/r[3],o=0;for(e=1;e+1<t.length;++e){var s=t[e],l=t[e+1],u=s[0]/s[3]-i,h=s[1]/s[3]-n,c=l[0]/l[3]-i,f=l[1]/l[3]-n;o+=Math.abs(u*f-h*c)}return o}var g=[1,1,1],v=[0,0,0],m={cubeEdges:g,axis:v}},function(t,e,r){"use strict";var i=r(1370),n=r(654);function a(t,e){var r=n(i(t,e),[e[e.length-1]]);return r[r.length-1]}function o(t,e,r,i){var n=-e/(i-e);n<0?n=0:n>1&&(n=1);for(var a=1-n,o=t.length,s=new Array(o),l=0;l<o;++l)s[l]=n*t[l]+a*r[l];return s}t.exports=function(t,e){for(var r=[],i=[],n=a(t[t.length-1],e),s=t[t.length-1],l=t[0],u=0;u<t.length;++u,s=l){var h=a(l=t[u],e);if(n<0&&h>0||n>0&&h<0){var c=o(s,h,l,n);r.push(c),i.push(c.slice())}h<0?i.push(l.slice()):h>0?r.push(l.slice()):(r.push(l.slice()),i.push(l.slice())),n=h}return{positive:r,negative:i}},t.exports.positive=function(t,e){for(var r=[],i=a(t[t.length-1],e),n=t[t.length-1],s=t[0],l=0;l<t.length;++l,n=s){var u=a(s=t[l],e);(i<0&&u>0||i>0&&u<0)&&r.push(o(n,u,s,i)),u>=0&&r.push(s.slice()),i=u}return r},t.exports.negative=function(t,e){for(var r=[],i=a(t[t.length-1],e),n=t[t.length-1],s=t[0],l=0;l<t.length;++l,n=s){var u=a(s=t[l],e);(i<0&&u>0||i>0&&u<0)&&r.push(o(n,u,s,i)),u<=0&&r.push(s.slice()),i=u}return r}},function(t,e){t.exports=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3];return t[0]=r[0]*i+r[4]*n+r[8]*a+r[12]*o,t[1]=r[1]*i+r[5]*n+r[9]*a+r[13]*o,t[2]=r[2]*i+r[6]*n+r[10]*a+r[14]*o,t[3]=r[3]*i+r[7]*n+r[11]*a+r[15]*o,t}},function(t,e,r){"use strict";t.exports=a,t.exports.isMobile=a,t.exports.default=a;var i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(t){t||(t={});var e=t.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var r=t.tablet?n.test(e):i.test(e);return!r&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(r=!0),r}},function(t,e,r){"use strict";var i=r(1226),n=r(624).attributes,a=r(32).extendFlat,o=r(6).counterRegex;function s(t,e,r){return{x:{valType:"number",role:"info",dflt:t,editType:"camera"},y:{valType:"number",role:"info",dflt:e,editType:"camera"},z:{valType:"number",role:"info",dflt:r,editType:"camera"},editType:"camera"}}t.exports={_arrayAttrRegexps:[o("scene",".annotations",!0)],bgcolor:{valType:"color",role:"style",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:a(s(0,0,1),{description:["Sets the (x,y,z) components of the 'up' camera vector.","This vector determines the up direction of this scene","with respect to the page.","The default is *{x: 0, y: 0, z: 1}* which means that","the z axis points up."].join(" ")}),center:a(s(0,0,0),{description:["Sets the (x,y,z) components of the 'center' camera vector","This vector determines the translation (x,y,z) space","about the center of this scene.","By default, there is no such translation."].join(" ")}),eye:a(s(1.25,1.25,1.25),{description:["Sets the (x,y,z) components of the 'eye' camera vector.","This vector determines the view point about the origin","of this scene."].join(" ")}),projection:{type:{valType:"enumerated",role:"info",values:["perspective","orthographic"],dflt:"perspective",editType:"calc",description:["Sets the projection type. The projection type could be","either *perspective* or *orthographic*. The default is","*perspective*."].join(" ")},editType:"calc"},editType:"camera"},domain:n({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",role:"info",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0},description:["If *cube*, this scene's axes are drawn as a cube,","regardless of the axes' ranges.","If *data*, this scene's axes are drawn","in proportion with the axes' ranges.","If *manual*, this scene's axes are drawn","in proportion with the input of *aspectratio*","(the default behavior if *aspectratio* is provided).","If *auto*, this scene's axes are drawn","using the results of *data* except when one axis","is more than four times the size of the two others,","where in that case the results of *cube* are used."].join(" ")},aspectratio:{x:{valType:"number",role:"info",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",role:"info",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",role:"info",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"},description:["Sets this scene's axis aspectratio."].join(" ")},xaxis:i,yaxis:i,zaxis:i,dragmode:{valType:"enumerated",role:"info",values:["orbit","turntable","zoom","pan",!1],editType:"plot",description:["Determines the mode of drag interactions for this scene."].join(" ")},hovermode:{valType:"enumerated",role:"info",values:["closest",!1],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions for this scene."].join(" ")},uirevision:{valType:"any",role:"info",editType:"none",description:["Controls persistence of user-driven changes in camera attributes.","Defaults to `layout.uirevision`."].join(" ")},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",role:"info",editType:"camera",description:"Obsolete. Use `camera` instead."}}}},function(t,e,r){"use strict";var i=r(57),n=r(61),a=r(32).extendFlat,o=r(109).overrideAll;t.exports=o({visible:n.visible,showspikes:{valType:"boolean",role:"info",dflt:!0,description:["Sets whether or not spikes starting from","data points to this axis' wall are shown on hover."].join(" ")},spikesides:{valType:"boolean",role:"info",dflt:!0,description:["Sets whether or not spikes extending from the","projection data points to this axis' wall boundaries","are shown on hover."].join(" ")},spikethickness:{valType:"number",role:"style",min:0,dflt:2,description:"Sets the thickness (in px) of the spikes."},spikecolor:{valType:"color",role:"style",dflt:i.defaultLine,description:"Sets the color of the spikes."},showbackground:{valType:"boolean",role:"info",dflt:!1,description:["Sets whether or not this axis' wall","has a background color."].join(" ")},backgroundcolor:{valType:"color",role:"style",dflt:"rgba(204, 204, 204, 0.5)",description:"Sets the background color of this axis' wall."},showaxeslabels:{valType:"boolean",role:"info",dflt:!0,description:"Sets whether or not this axis is labeled"},color:n.color,categoryorder:n.categoryorder,categoryarray:n.categoryarray,title:{text:n.title.text,font:n.title.font},type:a({},n.type,{values:["-","linear","log","date","category"]}),autorange:n.autorange,rangemode:n.rangemode,range:a({},n.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,mirror:n.mirror,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:n.tickfont,tickangle:n.tickangle,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,showexponent:n.showexponent,exponentformat:n.exponentformat,separatethousands:n.separatethousands,tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:n.showline,linecolor:n.linecolor,linewidth:n.linewidth,showgrid:n.showgrid,gridcolor:a({},n.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:n.gridwidth,zeroline:n.zeroline,zerolinecolor:n.zerolinecolor,zerolinewidth:n.zerolinewidth,_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}},"plot","from-root")},function(t,e,r){"use strict";var i=r(111),n=r(150).hovertemplateAttrs,a=r(868),o=r(59),s=r(32).extendFlat,l={x:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:["Sets the x coordinates of the vector field","and of the displayed cones."].join(" ")},y:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:["Sets the y coordinates of the vector field","and of the displayed cones."].join(" ")},z:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:["Sets the z coordinates of the vector field","and of the displayed cones."].join(" ")},u:{valType:"data_array",editType:"calc",description:"Sets the x components of the vector field."},v:{valType:"data_array",editType:"calc",description:"Sets the y components of the vector field."},w:{valType:"data_array",editType:"calc",description:"Sets the z components of the vector field."},sizemode:{valType:"enumerated",values:["scaled","absolute"],role:"info",editType:"calc",dflt:"scaled",description:["Determines whether `sizeref` is set as a *scaled* (i.e unitless) scalar","(normalized by the max u/v/w norm in the vector field) or as","*absolute* value (in the same units as the vector field)."].join(" ")},sizeref:{valType:"number",role:"info",editType:"calc",min:0,description:["Adjusts the cone size scaling.","The size of the cones is determined by their u/v/w norm multiplied a factor and `sizeref`.",'This factor (computed internally) corresponds to the minimum "time" to travel across',"two successive x/y/z positions at the average velocity of those two successive positions.","All cones in a given trace use the same factor.","With `sizemode` set to *scaled*, `sizeref` is unitless, its default value is *0.5*","With `sizemode` set to *absolute*, `sizeref` has the same units as the u/v/w vector field,","its the default value is half the sample's maximum vector norm."].join(" ")},anchor:{valType:"enumerated",role:"info",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm",description:["Sets the cones' anchor with respect to their x/y/z positions.","Note that *cm* denote the cone's center of mass which corresponds to","1/4 from the tail to tip."].join(" ")},text:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the cones.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:n({editType:"calc"},{keys:["norm"]}),showlegend:s({},o.showlegend,{dflt:!1})};s(l,i("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach((function(t){l[t]=a[t]})),l.hoverinfo=s({},o.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),l.transforms=void 0,t.exports=l},function(t,e,r){t.exports={EPSILON:r(1229),create:r(1230),clone:r(1390),angle:r(1391),fromValues:r(1231),copy:r(1392),set:r(1393),equals:r(1394),exactEquals:r(1395),add:r(1396),subtract:r(1232),sub:r(1397),multiply:r(1233),mul:r(1398),divide:r(1234),div:r(1399),min:r(1400),max:r(1401),floor:r(1402),ceil:r(1403),round:r(1404),scale:r(1405),scaleAndAdd:r(1406),distance:r(1235),dist:r(1407),squaredDistance:r(1236),sqrDist:r(1408),length:r(1062),len:r(1409),squaredLength:r(1237),sqrLen:r(1410),negate:r(1411),inverse:r(1412),normalize:r(884),dot:r(921),cross:r(1061),lerp:r(1214),random:r(1413),transformMat4:r(1414),transformMat3:r(1415),transformQuat:r(1416),rotateX:r(1417),rotateY:r(1418),rotateZ:r(1419),forEach:r(1420)}},function(t,e){t.exports=1e-6},function(t,e){t.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},function(t,e){t.exports=function(t,e,r){var i=new Float32Array(3);return i[0]=t,i[1]=e,i[2]=r,i}},function(t,e){t.exports=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}},function(t,e){t.exports=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}},function(t,e){t.exports=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}},function(t,e){t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}},function(t,e){t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return r*r+i*i+n*n}},function(t,e){t.exports=function(t){var e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var i=r(1553),n=r(1554),a=r(1556);t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var r=t[0].length;if(0===r)return[];if(1===r)return i(t);if(2===r)return n(t);return a(t,r)}},function(t,e,r){"use strict";var i=r(1562);function n(t){for(var e="robustLinearSolve"+t+"d",r=["function ",e,"(A,b){return ["],n=0;n<t;++n){r.push("det([");for(var a=0;a<t;++a){a>0&&r.push(","),r.push("[");for(var o=0;o<t;++o)o>0&&r.push(","),o===n?r.push("+b[",a,"]"):r.push("+A[",a,"][",o,"]");r.push("]")}r.push("]),")}r.push("det(A)]}return ",e);var s=new Function("det",r.join(""));return s(t<6?i[t]:i)}var a=[function(){return[0]},function(t,e){return[[e[0]],[t[0][0]]]}];!function(){for(;a.length<6;)a.push(n(a.length));for(var e=[],r=["function dispatchLinearSolve(A,b){switch(A.length){"],i=0;i<6;++i)e.push("s"+i),r.push("case ",i,":return s",i,"(A,b);");r.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),e.push("CACHE","g",r.join(""));var o=Function.apply(void 0,e);for(t.exports=o.apply(void 0,a.concat([a,n])),i=0;i<6;++i)t.exports[i]=a[i]}()},function(t,e,r){"use strict";t.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},function(t,e,r){"use strict";var i=r(207),n=r(111),a=r(150).hovertemplateAttrs,o=r(150).texttemplateAttrs,s=r(59),l=r(1272),u=r(1084),h=r(32).extendFlat,c=r(109).overrideAll,f=i.line,d=i.marker,p=d.line,g=h({width:f.width,dash:{valType:"enumerated",values:Object.keys(l),dflt:"solid",role:"style",description:"Sets the dash style of the lines."}},n("line"));function v(t){return{show:{valType:"boolean",role:"info",dflt:!1,description:["Sets whether or not projections are shown along the",t,"axis."].join(" ")},opacity:{valType:"number",role:"style",min:0,max:1,dflt:1,description:"Sets the projection color."},scale:{valType:"number",role:"style",min:0,max:10,dflt:2/3,description:["Sets the scale factor determining the size of the","projection marker points."].join(" ")}}}var m=t.exports=c({x:i.x,y:i.y,z:{valType:"data_array",description:"Sets the z coordinates."},text:h({},i.text,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:o({},{}),hovertext:h({},i.hovertext,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertemplate:a(),mode:h({},i.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",role:"info",values:[-1,0,1,2],dflt:-1,description:["If *-1*, the scatter points are not fill with a surface","If *0*, *1*, *2*, the scatter points are filled with","a Delaunay surface about the x, y, z respectively."].join(" ")},surfacecolor:{valType:"color",role:"style",description:"Sets the surface fill color."},projection:{x:v("x"),y:v("y"),z:v("z")},connectgaps:i.connectgaps,line:g,marker:h({symbol:{valType:"enumerated",values:Object.keys(u),role:"style",dflt:"circle",arrayOk:!0,description:"Sets the marker symbol type."},size:h({},d.size,{dflt:8}),sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:h({},d.opacity,{arrayOk:!1,description:["Sets the marker opacity.","Note that the marker opacity for scatter3d traces","must be a scalar value for performance reasons.","To set a blending opacity value","(i.e. which is not transparent), set *marker.color*","to an rgba color and use its alpha channel."].join(" ")}),colorbar:d.colorbar,line:h({width:h({},p.width,{arrayOk:!1})},n("marker.line"))},n("marker")),textposition:h({},i.textposition,{dflt:"top center"}),textfont:{color:i.textfont.color,size:i.textfont.size,family:h({},i.textfont.family,{arrayOk:!1})},hoverinfo:h({},s.hoverinfo)},"calc","nested");m.x.editType=m.y.editType=m.z.editType="calc+clearAxisTypes"},function(t,e){t.exports=function(t,e){var n=t.length,a=t.length-e.length;if(a)return a;switch(n){case 0:return 0;case 1:return t[0]-e[0];case 2:return t[0]+t[1]-e[0]-e[1]||r(t[0],t[1])-r(e[0],e[1]);case 3:var o=t[0]+t[1],s=e[0]+e[1];if(a=o+t[2]-(s+e[2]))return a;var l=r(t[0],t[1]),u=r(e[0],e[1]);return r(l,t[2])-r(u,e[2])||r(l+t[2],o)-r(u+e[2],s);case 4:var h=t[0],c=t[1],f=t[2],d=t[3],p=e[0],g=e[1],v=e[2],m=e[3];return h+c+f+d-(p+g+v+m)||r(h,c,f,d)-r(p,g,v,m,p)||r(h+c,h+f,h+d,c+f,c+d,f+d)-r(p+g,p+v,p+m,g+v,g+m,v+m)||r(h+c+f,h+c+d,h+f+d,c+f+d)-r(p+g+v,p+g+m,p+v+m,g+v+m);default:for(var y=t.slice().sort(i),x=e.slice().sort(i),b=0;b<n;++b)if(a=y[b]-x[b])return a;return 0}};var r=Math.min;function i(t,e){return t-e}},function(t,e,r){"use strict";t.exports=function(t){for(var e=1,r=1;r<t.length;++r)for(var i=0;i<r;++i)if(t[r]<t[i])e=-e;else if(t[i]===t[r])return 0;return e}},function(t,e,r){"use strict";var i=r(6),n=r(23),a=r(1085),o=r(151);function s(t,e,r,i,a){var s=a("isomin"),l=a("isomax");null!=l&&null!=s&&s>l&&(e.isomin=null,e.isomax=null);var u=a("x"),h=a("y"),c=a("z"),f=a("value");u&&u.length&&h&&h.length&&c&&c.length&&f&&f.length?(n.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],i),["x","y","z"].forEach((function(t){var e="caps."+t;a(e+".show")&&a(e+".fill");var r="slices."+t;a(r+".show")&&(a(r+".fill"),a(r+".locations"))})),a("spaceframe.show")&&a("spaceframe.fill"),a("surface.show")&&(a("surface.count"),a("surface.fill"),a("surface.pattern")),a("contour.show")&&(a("contour.color"),a("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach((function(t){a(t)})),o(t,e,i,a,{prefix:"",cLetter:"c"}),e._length=null):e.visible=!1}t.exports={supplyDefaults:function(t,e,r,n){s(t,e,r,n,(function(r,n){return i.coerce(t,e,a,r,n)}))},supplyIsoDefaults:s}},function(t,e,r){"use strict";var i=r(210),n=r(1045).processGrid,a=r(1045).filter;t.exports=function(t,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=a(e.x,e._len),e._y=a(e.y,e._len),e._z=a(e.z,e._len),e._value=a(e.value,e._len);var r=n(e);e._gridFill=r.fill,e._Xs=r.Xs,e._Ys=r.Ys,e._Zs=r.Zs,e._len=r.len;for(var o=1/0,s=-1/0,l=0;l<e._len;l++){var u=e._value[l];o=Math.min(o,u),s=Math.max(s,u)}e._minValues=o,e._maxValues=s,e._vMin=void 0===e.isomin||null===e.isomin?o:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?s:e.isomax,i(t,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},function(t,e,r){"use strict";var i=r(111),n=r(1085),a=r(806),o=r(59),s=r(32).extendFlat,l=r(109).overrideAll,u=t.exports=l(s({x:n.x,y:n.y,z:n.z,value:n.value,isomin:n.isomin,isomax:n.isomax,surface:n.surface,spaceframe:{show:{valType:"boolean",role:"info",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",role:"style",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 1 meaning that they are entirely shaded. Applying a `fill` ratio less","than one would allow the creation of openings parallel to the edges."].join(" ")}},slices:n.slices,caps:n.caps,text:n.text,hovertext:n.hovertext,hovertemplate:n.hovertemplate},i("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:n.colorbar,opacity:n.opacity,opacityscale:a.opacityscale,lightposition:n.lightposition,lighting:n.lighting,flatshading:n.flatshading,contour:n.contour,hoverinfo:s({},o.hoverinfo),showlegend:s({},o.showlegend,{dflt:!1})}),"calc","nested");u.x.editType=u.y.editType=u.z.editType=u.value.editType="calc+clearAxisTypes",u.transforms=void 0},function(t,e,r){"use strict";var i=r(111),n=r(150).hovertemplateAttrs,a=r(868),o=r(59),s=r(32).extendFlat,l={x:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:"Sets the x coordinates of the vector field."},y:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:"Sets the y coordinates of the vector field."},z:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:"Sets the z coordinates of the vector field."},u:{valType:"data_array",editType:"calc",description:"Sets the x components of the vector field."},v:{valType:"data_array",editType:"calc",description:"Sets the y components of the vector field."},w:{valType:"data_array",editType:"calc",description:"Sets the z components of the vector field."},starts:{x:{valType:"data_array",editType:"calc",description:["Sets the x components of the starting position of the streamtubes"].join(" ")},y:{valType:"data_array",editType:"calc",description:["Sets the y components of the starting position of the streamtubes"].join(" ")},z:{valType:"data_array",editType:"calc",description:["Sets the z components of the starting position of the streamtubes"].join(" ")},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,role:"info",editType:"calc",description:["The maximum number of displayed segments in a streamtube."].join(" ")},sizeref:{valType:"number",role:"info",editType:"calc",min:0,dflt:1,description:["The scaling factor for the streamtubes.","The default is 1, which avoids two max divergence tubes from touching","at adjacent starting positions."].join(" ")},text:{valType:"string",role:"info",dflt:"",editType:"calc",description:["Sets a text element associated with this trace.","If trace `hoverinfo` contains a *text* flag,","this text element will be seen in all hover labels.","Note that streamtube traces do not support array `text` values."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",editType:"calc",description:"Same as `text`."},hovertemplate:n({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),showlegend:s({},o.showlegend,{dflt:!1})};s(l,i("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach((function(t){l[t]=a[t]})),l.hoverinfo=s({},o.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),l.transforms=void 0,t.exports=l},function(t,e){t.exports=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}},function(t,e){t.exports=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=r*r+i*i+n*n+a*a;o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=i*o,t[2]=n*o,t[3]=a*o);return t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";t.exports={moduleType:"trace",name:"cone",basePlotModule:r(759),categories:["gl3d","showLegend"],attributes:r(1227),supplyDefaults:r(1387),colorbar:{min:"cmin",max:"cmax"},calc:r(1388),plot:r(1389),eventData:function(t,e){return t.norm=e.traceCoordinate[6],t},meta:{description:["Use cone traces to visualize vector fields.","","Specify a vector field using 6 1D arrays,","3 position arrays `x`, `y` and `z`","and 3 vector component arrays `u`, `v`, `w`.","The cones are drawn exactly at the positions given","by `x`, `y` and `z`."].join(" ")}}},function(t,e,r){"use strict";var i,n,a=r(1341),o=a.createCamera,s=a.createScene,l=r(924),u=r(942),h=r(23),c=r(6),f=r(105),d=r(623),p=r(662),g=r(747),v=r(754),m=r(1381),y=r(1382),x=r(1383),b=r(1224)({tablet:!0,featureDetect:!0});function _(t,e){var r=document.createElement("div"),i=t.container;this.graphDiv=t.graphDiv;var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",n.style["z-index"]=20,n.style["pointer-events"]="none",r.appendChild(n),this.svgContainer=n,r.id=t.id,r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",i.appendChild(r),this.fullLayout=e,this.id=t.id||"scene",this.fullSceneLayout=e[this.id],this.plotArgs=[[],{},{}],this.axesOptions=m(e,e[this.id]),this.spikeOptions=y(e[this.id]),this.container=r,this.staticMode=!!t.staticPlot,this.pixelRatio=this.pixelRatio||t.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=h.getComponentMethod("annotations3d","convert"),this.drawAnnotations=h.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var w=_.prototype;w.prepareOptions=function(){var t={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:b,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(n||(i=document.createElement("canvas"),n=l({canvas:i,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");t.gl=n,t.canvas=i}return t},w.tryCreatePlot=function(){var t=this.prepareOptions(),e=!0;try{this.glplot=s(t)}catch(r){if(this.staticMode)e=!1;else try{c.warn(["webgl setup failed possibly due to",b?"disabling":"enabling","preserveDrawingBuffer config.","The device may not be supported by is-mobile module!","Inverting preserveDrawingBuffer option in second attempt to create webgl scene."].join(" ")),b=t.glOptions.preserveDrawingBuffer=!t.glOptions.preserveDrawingBuffer,this.glplot=s(t)}catch(t){e=!1}}return e},w.initializeGLCamera=function(){var t=this.fullSceneLayout.camera,e="orthographic"===t.projection.type;this.camera=o(this.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:e,zoomMin:.01,zoomMax:100,mode:"orbit"})},w.initializeGLPlot=function(){var t=this;if(t.initializeGLCamera(),!t.tryCreatePlot())return g(t);t.traces={},t.make4thDimension();var e=t.graphDiv,r=e.layout,i=function(){var e={};return t.isCameraChanged(r)&&(e[t.id+".camera"]=t.getCamera()),t.isAspectChanged(r)&&(e[t.id+".aspectratio"]=t.glplot.getAspectratio(),"manual"!==r[t.id].aspectmode&&(t.fullSceneLayout.aspectmode=r[t.id].aspectmode=e[t.id+".aspectmode"]="manual")),e},n=function(t){if(!1!==t.fullSceneLayout.dragmode){var e=i();t.saveLayout(r),t.graphDiv.emit("plotly_relayout",e)}};return t.glplot.canvas.addEventListener("mouseup",(function(){n(t)})),t.glplot.canvas.addEventListener("wheel",(function(r){if(e._context._scrollZoom.gl3d){if(t.camera._ortho){var i=r.deltaX>r.deltaY?1.1:1/1.1,a=t.glplot.getAspectratio();t.glplot.setAspectratio({x:i*a.x,y:i*a.y,z:i*a.z})}n(t)}}),!!u&&{passive:!1}),t.glplot.canvas.addEventListener("mousemove",(function(){if(!1!==t.fullSceneLayout.dragmode&&0!==t.camera.mouseListener.buttons){var e=i();t.graphDiv.emit("plotly_relayouting",e)}})),t.staticMode||t.glplot.canvas.addEventListener("webglcontextlost",(function(r){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:r,layer:t.id})}),!1),t.glplot.oncontextloss=function(){t.recoverContext()},t.glplot.onrender=function(){t.render()},!0},w.render=function(){var t,e=this,r=e.graphDiv,i=e.svgContainer,n=e.container.getBoundingClientRect(),a=n.width,o=n.height;i.setAttributeNS(null,"viewBox","0 0 "+a+" "+o),i.setAttributeNS(null,"width",a),i.setAttributeNS(null,"height",o),x(e),e.glplot.axes.update(e.axesOptions);for(var s,l=Object.keys(e.traces),u=null,h=e.glplot.selection,p=0;p<l.length;++p)"skip"!==(t=e.traces[l[p]]).data.hoverinfo&&t.handlePick(h)&&(u=t),t.setContourLevels&&t.setContourLevels();function g(t,r){var i=e.fullSceneLayout[t];return f.tickText(i,i.d2l(r),"hover").text}if(null!==u){var m=v(e.glplot.cameraParams,h.dataCoordinate);t=u.data;var y,b=r._fullData[t.index],_=h.index,w={xLabel:g("xaxis",h.traceCoordinate[0]),yLabel:g("yaxis",h.traceCoordinate[1]),zLabel:g("zaxis",h.traceCoordinate[2])},A=d.castHoverinfo(b,e.fullLayout,_),T=(A||"").split("+"),M=A&&"all"===A;b.hovertemplate||M||(-1===T.indexOf("x")&&(w.xLabel=void 0),-1===T.indexOf("y")&&(w.yLabel=void 0),-1===T.indexOf("z")&&(w.zLabel=void 0),-1===T.indexOf("text")&&(h.textLabel=void 0),-1===T.indexOf("name")&&(u.name=void 0));var k=[];"cone"===t.type||"streamtube"===t.type?(w.uLabel=g("xaxis",h.traceCoordinate[3]),(M||-1!==T.indexOf("u"))&&k.push("u: "+w.uLabel),w.vLabel=g("yaxis",h.traceCoordinate[4]),(M||-1!==T.indexOf("v"))&&k.push("v: "+w.vLabel),w.wLabel=g("zaxis",h.traceCoordinate[5]),(M||-1!==T.indexOf("w"))&&k.push("w: "+w.wLabel),w.normLabel=h.traceCoordinate[6].toPrecision(3),(M||-1!==T.indexOf("norm"))&&k.push("norm: "+w.normLabel),"streamtube"===t.type&&(w.divergenceLabel=h.traceCoordinate[7].toPrecision(3),(M||-1!==T.indexOf("divergence"))&&k.push("divergence: "+w.divergenceLabel)),h.textLabel&&k.push(h.textLabel),y=k.join("<br>")):"isosurface"===t.type||"volume"===t.type?(w.valueLabel=f.tickText(e._mockAxis,e._mockAxis.d2l(h.traceCoordinate[3]),"hover").text,k.push("value: "+w.valueLabel),h.textLabel&&k.push(h.textLabel),y=k.join("<br>")):y=h.textLabel;var E={x:h.traceCoordinate[0],y:h.traceCoordinate[1],z:h.traceCoordinate[2],data:b._input,fullData:b,curveNumber:b.index,pointNumber:_};d.appendArrayPointValue(E,b,_),t._module.eventData&&(E=b._module.eventData(E,h,b,{},_));var S={points:[E]};e.fullSceneLayout.hovermode&&d.loneHover({trace:b,x:(.5+.5*m[0]/m[3])*a,y:(.5-.5*m[1]/m[3])*o,xLabel:w.xLabel,yLabel:w.yLabel,zLabel:w.zLabel,text:y,name:u.name,color:d.castHoverOption(b,_,"bgcolor")||u.color,borderColor:d.castHoverOption(b,_,"bordercolor"),fontFamily:d.castHoverOption(b,_,"font.family"),fontSize:d.castHoverOption(b,_,"font.size"),fontColor:d.castHoverOption(b,_,"font.color"),nameLength:d.castHoverOption(b,_,"namelength"),textAlign:d.castHoverOption(b,_,"align"),hovertemplate:c.castOption(b,_,"hovertemplate"),hovertemplateLabels:c.extendFlat({},E,w),eventData:[E]},{container:i,gd:r}),h.buttons&&h.distance<5?r.emit("plotly_click",S):r.emit("plotly_hover",S),s=S}else d.loneUnhover(i),r.emit("plotly_unhover",s);e.drawAnnotations(e)},w.recoverContext=function(){var t=this;t.glplot.dispose();var e=function(){t.glplot.gl.isContextLost()?requestAnimationFrame(e):t.initializeGLPlot()?t.plot.apply(t,t.plotArgs):c.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(e)};var A=["xaxis","yaxis","zaxis"];function T(t,e,r){for(var i=t.fullSceneLayout,n=0;n<3;n++){var a=A[n],o=a.charAt(0),s=i[a],l=e[o],u=e[o+"calendar"],h=e["_"+o+"length"];if(c.isArrayOrTypedArray(l))for(var f,d=0;d<(h||l.length);d++)if(c.isArrayOrTypedArray(l[d]))for(var p=0;p<l[d].length;++p)f=s.d2l(l[d][p],0,u),!isNaN(f)&&isFinite(f)&&(r[0][n]=Math.min(r[0][n],f),r[1][n]=Math.max(r[1][n],f));else f=s.d2l(l[d],0,u),!isNaN(f)&&isFinite(f)&&(r[0][n]=Math.min(r[0][n],f),r[1][n]=Math.max(r[1][n],f));else r[0][n]=Math.min(r[0][n],0),r[1][n]=Math.max(r[1][n],h-1)}}w.plot=function(t,e,r){if(this.plotArgs=[t,e,r],!this.glplot.contextLost){var i,n,a,o,s,l,u=e[this.id],h=r[this.id];this.fullLayout=e,this.fullSceneLayout=u,this.axesOptions.merge(e,u),this.spikeOptions.merge(u),this.setViewport(u),this.updateFx(u.dragmode,u.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(p(u.bgcolor)),this.setConvert(s),t?Array.isArray(t)||(t=[t]):t=[];var c=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(a=0;a<t.length;++a)!0===(i=t[a]).visible&&0!==i._length&&T(this,i,c);!function(t,e){for(var r=t.fullSceneLayout,i=r.annotations||[],n=0;n<3;n++)for(var a=A[n],o=a.charAt(0),s=r[a],l=0;l<i.length;l++){var u=i[l];if(u.visible){var h=s.r2l(u[o]);!isNaN(h)&&isFinite(h)&&(e[0][n]=Math.min(e[0][n],h),e[1][n]=Math.max(e[1][n],h))}}}(this,c);var f=[1,1,1];for(o=0;o<3;++o)c[1][o]===c[0][o]?f[o]=1:f[o]=1/(c[1][o]-c[0][o]);for(this.dataScale=f,this.convertAnnotations(this),a=0;a<t.length;++a)!0===(i=t[a]).visible&&0!==i._length&&((n=this.traces[i.uid])?n.data.type===i.type?n.update(i):(n.dispose(),n=i._module.plot(this,i),this.traces[i.uid]=n):(n=i._module.plot(this,i),this.traces[i.uid]=n),n.name=i.name);var d=Object.keys(this.traces);t:for(a=0;a<d.length;++a){for(o=0;o<t.length;++o)if(t[o].uid===d[a]&&!0===t[o].visible&&0!==t[o]._length)continue t;(n=this.traces[d[a]]).dispose(),delete this.traces[d[a]]}this.glplot.objects.sort((function(t,e){return t._trace.data.index-e._trace.data.index}));var g,v=[[0,0,0],[0,0,0]],m=[],y={};for(a=0;a<3;++a){if((l=(s=u[A[a]]).type)in y?(y[l].acc*=f[a],y[l].count+=1):y[l]={acc:f[a],count:1},s.autorange){v[0][a]=1/0,v[1][a]=-1/0;var x=this.glplot.objects,b=this.fullSceneLayout.annotations||[],_=s._name.charAt(0);for(o=0;o<x.length;o++){var w=x[o],M=w.bounds,k=w._trace.data._pad||0;"ErrorBars"===w.constructor.name&&s._lowerLogErrorBound?v[0][a]=Math.min(v[0][a],s._lowerLogErrorBound):v[0][a]=Math.min(v[0][a],M[0][a]/f[a]-k),v[1][a]=Math.max(v[1][a],M[1][a]/f[a]+k)}for(o=0;o<b.length;o++){var E=b[o];if(E.visible){var S=s.r2l(E[_]);v[0][a]=Math.min(v[0][a],S),v[1][a]=Math.max(v[1][a],S)}}if("rangemode"in s&&"tozero"===s.rangemode&&(v[0][a]=Math.min(v[0][a],0),v[1][a]=Math.max(v[1][a],0)),v[0][a]>v[1][a])v[0][a]=-1,v[1][a]=1;else{var C=v[1][a]-v[0][a];v[0][a]-=C/32,v[1][a]+=C/32}if("reversed"===s.autorange){var L=v[0][a];v[0][a]=v[1][a],v[1][a]=L}}else{var I=s.range;v[0][a]=s.r2l(I[0]),v[1][a]=s.r2l(I[1])}v[0][a]===v[1][a]&&(v[0][a]-=1,v[1][a]+=1),m[a]=v[1][a]-v[0][a],this.glplot.setBounds(a,{min:v[0][a]*f[a],max:v[1][a]*f[a]})}var j=u.aspectmode;if("cube"===j)g=[1,1,1];else if("manual"===j){var R=u.aspectratio;g=[R.x,R.y,R.z]}else{if("auto"!==j&&"data"!==j)throw new Error("scene.js aspectRatio was not one of the enumerated types");var P=[1,1,1];for(a=0;a<3;++a){var O=y[l=(s=u[A[a]]).type];P[a]=Math.pow(O.acc,1/O.count)/f[a]}g="data"===j||Math.max.apply(null,P)/Math.min.apply(null,P)<=4?P:[1,1,1]}u.aspectratio.x=h.aspectratio.x=g[0],u.aspectratio.y=h.aspectratio.y=g[1],u.aspectratio.z=h.aspectratio.z=g[2],this.glplot.setAspectratio(u.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:u.aspectratio.x,y:u.aspectratio.y,z:u.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=u.aspectmode);var z=u.domain||null,N=e._size||null;if(z&&N){var B=this.container.style;B.position="absolute",B.left=N.l+z.x[0]*N.w+"px",B.top=N.t+(1-z.y[1])*N.h+"px",B.width=N.w*(z.x[1]-z.x[0])+"px",B.height=N.h*(z.y[1]-z.y[0])+"px"}this.glplot.redraw()}},w.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},w.getCamera=function(){var t;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(t=this.camera).up[0],y:t.up[1],z:t.up[2]},center:{x:t.center[0],y:t.center[1],z:t.center[2]},eye:{x:t.eye[0],y:t.eye[1],z:t.eye[2]},projection:{type:!0===t._ortho?"orthographic":"perspective"}}},w.setViewport=function(t){var e,r=t.camera;this.camera.lookAt.apply(this,[[(e=r).eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]),this.glplot.setAspectratio(t.aspectratio),"orthographic"===r.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},w.isCameraChanged=function(t){var e=this.getCamera(),r=c.nestedProperty(t,this.id+".camera").get();function i(t,e,r,i){var n=["up","center","eye"],a=["x","y","z"];return e[n[r]]&&t[n[r]][a[i]]===e[n[r]][a[i]]}var n=!1;if(void 0===r)n=!0;else{for(var a=0;a<3;a++)for(var o=0;o<3;o++)if(!i(e,r,a,o)){n=!0;break}(!r.projection||e.projection&&e.projection.type!==r.projection.type)&&(n=!0)}return n},w.isAspectChanged=function(t){var e=this.glplot.getAspectratio(),r=c.nestedProperty(t,this.id+".aspectratio").get();return void 0===r||r.x!==e.x||r.y!==e.y||r.z!==e.z},w.saveLayout=function(t){var e,r,i,n,a,o,s=this.fullLayout,l=this.isCameraChanged(t),u=this.isAspectChanged(t),f=l||u;if(f){var d={};if(l&&(e=this.getCamera(),i=(r=c.nestedProperty(t,this.id+".camera")).get(),d[this.id+".camera"]=i),u&&(n=this.glplot.getAspectratio(),o=(a=c.nestedProperty(t,this.id+".aspectratio")).get(),d[this.id+".aspectratio"]=o),h.call("_storeDirectGUIEdit",t,s._preGUI,d),l)r.set(e),c.nestedProperty(s,this.id+".camera").set(e);if(u)a.set(n),c.nestedProperty(s,this.id+".aspectratio").set(n),this.glplot.redraw()}return f},w.updateFx=function(t,e){var r=this.camera;if(r)if("orbit"===t)r.mode="orbit",r.keyBindingMode="rotate";else if("turntable"===t){r.up=[0,0,1],r.mode="turntable",r.keyBindingMode="rotate";var i=this.graphDiv,n=i._fullLayout,a=this.fullSceneLayout.camera,o=a.up.x,s=a.up.y,l=a.up.z;if(l/Math.sqrt(o*o+s*s+l*l)<.999){var u=this.id+".camera.up",f={x:0,y:0,z:1},d={};d[u]=f;var p=i.layout;h.call("_storeDirectGUIEdit",p,n._preGUI,d),a.up=f,c.nestedProperty(p,u).set(f)}}else r.keyBindingMode=t;this.fullSceneLayout.hovermode=e},w.toImage=function(t){t||(t="png"),this.staticMode&&this.container.appendChild(i),this.glplot.redraw();var e=this.glplot.gl,r=e.drawingBufferWidth,n=e.drawingBufferHeight;e.bindFramebuffer(e.FRAMEBUFFER,null);var a=new Uint8Array(r*n*4);e.readPixels(0,0,r,n,e.RGBA,e.UNSIGNED_BYTE,a),function(t,e,r){for(var i=0,n=r-1;i<n;++i,--n)for(var a=0;a<e;++a)for(var o=0;o<4;++o){var s=4*(e*i+a)+o,l=4*(e*n+a)+o,u=t[s];t[s]=t[l],t[l]=u}}(a,r,n),function(t,e,r){for(var i=0;i<r;++i)for(var n=0;n<e;++n){var a=4*(e*i+n),o=t[a+3];if(o>0)for(var s=255/o,l=0;l<3;++l)t[a+l]=Math.min(s*t[a+l],255)}}(a,r,n);var o=document.createElement("canvas");o.width=r,o.height=n;var s,l=o.getContext("2d"),u=l.createImageData(r,n);switch(u.data.set(a),l.putImageData(u,0,0),t){case"jpeg":s=o.toDataURL("image/jpeg");break;case"webp":s=o.toDataURL("image/webp");break;default:s=o.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(i),s},w.setConvert=function(){for(var t=0;t<3;t++){var e=this.fullSceneLayout[A[t]];f.setConvert(e,this.fullLayout),e.setScale=c.noop}},w.make4thDimension=function(){var t=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},f.setConvert(this._mockAxis,t)},t.exports=_},function(t,e,r){"use strict";var i=r(1342),n=r(1364),a=r(1372),o=r(1374),s=r(923),l=r(898),u=r(1376),h=r(885),c=r(1378),f=r(1379),d=r(1380),p=r(1224)({tablet:!0,featureDetect:!0});function g(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function v(t){var e=Math.round(Math.log(Math.abs(t))/Math.log(10));if(e<0){var r=Math.round(Math.pow(10,-e));return Math.ceil(t*r)/r}if(e>0){r=Math.round(Math.pow(10,e));return Math.ceil(t/r)*r}return Math.ceil(t)}function m(t){return"boolean"!=typeof t||t}t.exports={createScene:function(t){(t=t||{}).camera=t.camera||{};var e=t.canvas;if(!e){if(e=document.createElement("canvas"),t.container)t.container.appendChild(e);else document.body.appendChild(e)}var r=t.gl;r||(t.glOptions&&(p=!!t.glOptions.preserveDrawingBuffer),r=function(t,e){var r=null;try{(r=t.getContext("webgl",e))||(r=t.getContext("experimental-webgl",e))}catch(t){return null}return r}(e,t.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:p}));if(!r)throw new Error("webgl not supported");var y=t.bounds||[[-10,-10,-10],[10,10,10]],x=new g,b=l(r,r.drawingBufferWidth,r.drawingBufferHeight,{preferFloat:!p}),_=d(r),w=t.cameraObject&&!0===t.cameraObject._ortho||t.camera.projection&&"orthographic"===t.camera.projection.type||!1,A={eye:t.camera.eye||[2,0,0],center:t.camera.center||[0,0,0],up:t.camera.up||[0,1,0],zoomMin:t.camera.zoomMax||.1,zoomMax:t.camera.zoomMin||100,mode:t.camera.mode||"turntable",_ortho:w},T=t.axes||{},M=n(r,T);M.enable=!T.disable;var k=t.spikes||{},E=o(r,k),S=[],C=[],L=[],I=[],j=!0,R=!0,P=new Array(16),O=new Array(16),z={view:null,projection:P,model:O,_ortho:!1},N=(R=!0,[r.drawingBufferWidth,r.drawingBufferHeight]),B=t.cameraObject||i(e,A),F={gl:r,contextLost:!1,pixelRatio:t.pixelRatio||1,canvas:e,selection:x,camera:B,axes:M,axesPixels:null,spikes:E,bounds:y,objects:S,shape:N,aspect:t.aspectRatio||[1,1,1],pickRadius:t.pickRadius||10,zNear:t.zNear||.01,zFar:t.zFar||1e3,fovy:t.fovy||Math.PI/4,clearColor:t.clearColor||[0,0,0,0],autoResize:m(t.autoResize),autoBounds:m(t.autoBounds),autoScale:!!t.autoScale,autoCenter:m(t.autoCenter),clipToBounds:m(t.clipToBounds),snapToData:!!t.snapToData,onselect:t.onselect||null,onrender:t.onrender||null,onclick:t.onclick||null,cameraParams:z,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(t){this.aspect[0]=t.x,this.aspect[1]=t.y,this.aspect[2]=t.z,R=!0},setBounds:function(t,e){this.bounds[0][t]=e.min,this.bounds[1][t]=e.max},setClearColor:function(t){this.clearColor=t},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},D=[r.drawingBufferWidth/F.pixelRatio|0,r.drawingBufferHeight/F.pixelRatio|0];function U(){if(!F._stopped&&F.autoResize){var t=e.parentNode,r=1,i=1;t&&t!==document.body?(r=t.clientWidth,i=t.clientHeight):(r=window.innerWidth,i=window.innerHeight);var n=0|Math.ceil(r*F.pixelRatio),a=0|Math.ceil(i*F.pixelRatio);if(n!==e.width||a!==e.height){e.width=n,e.height=a;var o=e.style;o.position=o.position||"absolute",o.left="0px",o.top="0px",o.width=r+"px",o.height=i+"px",j=!0}}}F.autoResize&&U();function V(){for(var t=S.length,e=I.length,i=0;i<e;++i)L[i]=0;t:for(i=0;i<t;++i){var n=S[i],a=n.pickSlots;if(a){for(var o=0;o<e;++o)if(L[o]+a<255){C[i]=o,n.setPickBase(L[o]+1),L[o]+=a;continue t}var l=s(r,N);C[i]=e,I.push(l),L.push(a),n.setPickBase(1),e+=1}else C[i]=-1}for(;e>0&&0===L[e-1];)L.pop(),I.pop().dispose()}function X(){if(F.contextLost)return!0;r.isContextLost()&&(F.contextLost=!0,F.mouseListener.enabled=!1,F.selection.object=null,F.oncontextloss&&F.oncontextloss())}window.addEventListener("resize",U),F.update=function(t){F._stopped||(t=t||{},j=!0,R=!0)},F.add=function(t){F._stopped||(t.axes=M,S.push(t),C.push(-1),j=!0,R=!0,V())},F.remove=function(t){if(!F._stopped){var e=S.indexOf(t);e<0||(S.splice(e,1),C.pop(),j=!0,R=!0,V())}},F.dispose=function(){if(!F._stopped&&(F._stopped=!0,window.removeEventListener("resize",U),e.removeEventListener("webglcontextlost",X),F.mouseListener.enabled=!1,!F.contextLost)){M.dispose(),E.dispose();for(var t=0;t<S.length;++t)S[t].dispose();b.dispose();for(t=0;t<I.length;++t)I[t].dispose();_.dispose(),r=null,M=null,E=null,S=[]}},F._mouseRotating=!1,F._prevButtons=0,F.enableMouseListeners=function(){F.mouseListener=h(e,(function(t,e,r){if(!F._stopped){var i=I.length,n=S.length,a=x.object;x.distance=1/0,x.mouse[0]=e,x.mouse[1]=r,x.object=null,x.screen=null,x.dataCoordinate=x.dataPosition=null;var o=!1;if(t&&F._prevButtons)F._mouseRotating=!0;else{F._mouseRotating&&(R=!0),F._mouseRotating=!1;for(var s=0;s<i;++s){var l=I[s].query(e,D[1]-r-1,F.pickRadius);if(l){if(l.distance>x.distance)continue;for(var u=0;u<n;++u){var h=S[u];if(C[u]===s){var c=h.pick(l);c&&(x.buttons=t,x.screen=l.coord,x.distance=l.distance,x.object=h,x.index=c.distance,x.dataPosition=c.position,x.dataCoordinate=c.dataCoordinate,x.data=c,o=!0)}}}}}a&&a!==x.object&&(a.highlight&&a.highlight(null),j=!0),x.object&&(x.object.highlight&&x.object.highlight(x.data),j=!0),(o=o||x.object!==a)&&F.onselect&&F.onselect(x),1&t&&!(1&F._prevButtons)&&F.onclick&&F.onclick(x),F._prevButtons=t}}))},e.addEventListener("webglcontextlost",X);var G=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],W=[G[0].slice(),G[1].slice()];function H(){if(!X()){U();var t=F.camera.tick();z.view=F.camera.matrix,j=j||t,R=R||t,M.pixelRatio=F.pixelRatio,E.pixelRatio=F.pixelRatio;var e=S.length,i=G[0],n=G[1];i[0]=i[1]=i[2]=1/0,n[0]=n[1]=n[2]=-1/0;for(var o=0;o<e;++o){(L=S[o]).pixelRatio=F.pixelRatio,L.axes=F.axes,j=j||!!L.dirty,R=R||!!L.dirty;var s=L.bounds;if(s)for(var l=s[0],h=s[1],d=0;d<3;++d)i[d]=Math.min(i[d],l[d]),n[d]=Math.max(n[d],h[d])}var p=F.bounds;if(F.autoBounds)for(d=0;d<3;++d){if(n[d]<i[d])i[d]=-1,n[d]=1;else{i[d]===n[d]&&(i[d]-=1,n[d]+=1);var g=.05*(n[d]-i[d]);i[d]=i[d]-g,n[d]=n[d]+g}p[0][d]=i[d],p[1][d]=n[d]}var m=!1;for(d=0;d<3;++d)m=m||W[0][d]!==p[0][d]||W[1][d]!==p[1][d],W[0][d]=p[0][d],W[1][d]=p[1][d];if(R=R||m,j=j||m){if(m){var y=[0,0,0];for(o=0;o<3;++o)y[o]=v((p[1][o]-p[0][o])/10);M.autoTicks?M.update({bounds:p,tickSpacing:y}):M.update({bounds:p})}var A=r.drawingBufferWidth,T=r.drawingBufferHeight;N[0]=A,N[1]=T,D[0]=0|Math.max(A/F.pixelRatio,1),D[1]=0|Math.max(T/F.pixelRatio,1),function(t,e){var r=t.bounds,i=t.cameraParams,n=i.projection,a=i.model,o=t.gl.drawingBufferWidth,s=t.gl.drawingBufferHeight,l=t.zNear,u=t.zFar,h=t.fovy,d=o/s;e?(f(n,-d,d,-1,1,l,u),i._ortho=!0):(c(n,h,d,l,u),i._ortho=!1);for(var p=0;p<16;++p)a[p]=0;a[15]=1;var g=0;for(p=0;p<3;++p)g=Math.max(g,r[1][p]-r[0][p]);for(p=0;p<3;++p)t.autoScale?a[5*p]=t.aspect[p]/(r[1][p]-r[0][p]):a[5*p]=1/g,t.autoCenter&&(a[12+p]=.5*-a[5*p]*(r[0][p]+r[1][p]))}(F,w);for(o=0;o<e;++o){(L=S[o]).axesBounds=p,F.clipToBounds&&(L.clipBounds=p)}x.object&&(F.snapToData?E.position=x.dataCoordinate:E.position=x.dataPosition,E.bounds=p),R&&(R=!1,function(){if(!X()){r.colorMask(!0,!0,!0,!0),r.depthMask(!0),r.disable(r.BLEND),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL);for(var t=S.length,e=I.length,i=0;i<e;++i){var n=I[i];n.shape=D,n.begin();for(var a=0;a<t;++a)if(C[a]===i){var o=S[a];o.drawPick&&(o.pixelRatio=1,o.drawPick(z))}n.end()}}}()),F.axesPixels=a(F.axes,z,A,T),F.onrender&&F.onrender(),r.bindFramebuffer(r.FRAMEBUFFER,null),r.viewport(0,0,A,T),F.clearRGBA(),r.depthMask(!0),r.colorMask(!0,!0,!0,!0),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),r.disable(r.BLEND),r.disable(r.CULL_FACE);var k=!1;M.enable&&(k=k||M.isTransparent(),M.draw(z)),E.axes=M,x.object&&E.draw(z),r.disable(r.CULL_FACE);for(o=0;o<e;++o){(L=S[o]).axes=M,L.pixelRatio=F.pixelRatio,L.isOpaque&&L.isOpaque()&&L.draw(z),L.isTransparent&&L.isTransparent()&&(k=!0)}if(k){b.shape=N,b.bind(),r.clear(r.DEPTH_BUFFER_BIT),r.colorMask(!1,!1,!1,!1),r.depthMask(!0),r.depthFunc(r.LESS),M.enable&&M.isTransparent()&&M.drawTransparent(z);for(o=0;o<e;++o){(L=S[o]).isOpaque&&L.isOpaque()&&L.draw(z)}r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.colorMask(!0,!0,!0,!0),r.depthMask(!1),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),M.isTransparent()&&M.drawTransparent(z);for(o=0;o<e;++o){var L;(L=S[o]).isTransparent&&L.isTransparent()&&L.drawTransparent(z)}r.bindFramebuffer(r.FRAMEBUFFER,null),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.disable(r.DEPTH_TEST),_.bind(),b.color[0].bind(0),_.uniforms.accumBuffer=0,u(r),r.disable(r.BLEND)}j=!1;for(o=0;o<e;++o)S[o].dirty=!1}}}return F.enableMouseListeners(),function t(){if(F._stopped||F.contextLost)return;H(),requestAnimationFrame(t)}(),F.redraw=function(){F._stopped||(j=!0,H())},F},createCamera:i}},function(t,e,r){"use strict";t.exports=function(t,e){t=t||document.body,e=e||{};var r=[.01,1/0];"distanceLimits"in e&&(r[0]=e.distanceLimits[0],r[1]=e.distanceLimits[1]);"zoomMin"in e&&(r[0]=e.zoomMin);"zoomMax"in e&&(r[1]=e.zoomMax);var u=n({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:r}),h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0,f=t.clientWidth,d=t.clientHeight,p={keyBindingMode:"rotate",enableWheel:!0,view:u,element:t,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:u.modes,_ortho:e._ortho||e.projection&&"orthographic"===e.projection.type||!1,tick:function(){var e=i(),r=this.delay,n=e-2*r;u.idle(e-r),u.recalcMatrix(n),u.flush(e-(100+2*r));for(var a=!0,o=u.computedMatrix,s=0;s<16;++s)a=a&&h[s]===o[s],h[s]=o[s];var l=t.clientWidth===f&&t.clientHeight===d;return f=t.clientWidth,d=t.clientHeight,a?!l:(c=Math.exp(u.computedRadius[0]),!0)},lookAt:function(t,e,r){u.lookAt(u.lastT(),t,e,r)},rotate:function(t,e,r){u.rotate(u.lastT(),t,e,r)},pan:function(t,e,r){u.pan(u.lastT(),t,e,r)},translate:function(t,e,r){u.translate(u.lastT(),t,e,r)}};return Object.defineProperties(p,{matrix:{get:function(){return u.computedMatrix},set:function(t){return u.setMatrix(u.lastT(),t),u.computedMatrix},enumerable:!0},mode:{get:function(){return u.getMode()},set:function(t){var e=u.computedUp.slice(),r=u.computedEye.slice(),n=u.computedCenter.slice();if(u.setMode(t),"turntable"===t){var a=i();u._active.lookAt(a,r,n,e),u._active.lookAt(a+500,r,n,[0,0,1]),u._active.flush(a)}return u.getMode()},enumerable:!0},center:{get:function(){return u.computedCenter},set:function(t){return u.lookAt(u.lastT(),null,t),u.computedCenter},enumerable:!0},eye:{get:function(){return u.computedEye},set:function(t){return u.lookAt(u.lastT(),t),u.computedEye},enumerable:!0},up:{get:function(){return u.computedUp},set:function(t){return u.lookAt(u.lastT(),null,null,t),u.computedUp},enumerable:!0},distance:{get:function(){return c},set:function(t){return u.setDistance(u.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return u.getDistanceLimits(r)},set:function(t){return u.setDistanceLimits(t),t},enumerable:!0}}),t.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),p._lastX=-1,p._lastY=-1,p._lastMods={shift:!1,control:!1,alt:!1,meta:!1},p.enableMouseListeners=function(){function e(e,r,n,a){var o=p.keyBindingMode;if(!1!==o){var s="rotate"===o,l="pan"===o,h="zoom"===o,f=!!a.control,d=!!a.alt,g=!!a.shift,v=!!(1&e),m=!!(2&e),y=!!(4&e),x=1/t.clientHeight,b=x*(r-p._lastX),_=x*(n-p._lastY),w=p.flipX?1:-1,A=p.flipY?1:-1,T=Math.PI*p.rotateSpeed,M=i();if(-1!==p._lastX&&-1!==p._lastY&&((s&&v&&!f&&!d&&!g||v&&!f&&!d&&g)&&u.rotate(M,w*T*b,-A*T*_,0),(l&&v&&!f&&!d&&!g||m||v&&f&&!d&&!g)&&u.pan(M,-p.translateSpeed*b*c,p.translateSpeed*_*c,0),h&&v&&!f&&!d&&!g||y||v&&!f&&d&&!g)){var k=-p.zoomSpeed*_/window.innerHeight*(M-u.lastT())*100;u.pan(M,0,0,c*(Math.exp(k)-1))}return p._lastX=r,p._lastY=n,p._lastMods=a,!0}}p.mouseListener=a(t,e),t.addEventListener("touchstart",(function(r){var i=s(r.changedTouches[0],t);e(0,i[0],i[1],p._lastMods),e(1,i[0],i[1],p._lastMods),r.preventDefault()}),!!l&&{passive:!1}),t.addEventListener("touchmove",(function(r){var i=s(r.changedTouches[0],t);e(1,i[0],i[1],p._lastMods),r.preventDefault()}),!!l&&{passive:!1}),t.addEventListener("touchend",(function(t){e(0,p._lastX,p._lastY,p._lastMods),t.preventDefault()}),!!l&&{passive:!1}),p.wheelListener=o(t,(function(t,e){if(!1!==p.keyBindingMode&&p.enableWheel){var r=p.flipX?1:-1,n=p.flipY?1:-1,a=i();if(Math.abs(t)>Math.abs(e))u.rotate(a,0,0,-t*r*Math.PI*p.rotateSpeed/window.innerWidth);else if(!p._ortho){var o=-p.zoomSpeed*n*e/window.innerHeight*(a-u.lastT())/20;u.pan(a,0,0,c*(Math.exp(o)-1))}}}),!0)},p.enableMouseListeners(),p};var i=r(1343),n=r(1344),a=r(885),o=r(922),s=r(1094),l=r(942)},function(t,e,r){(function(e){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,r(211))},function(t,e,r){"use strict";t.exports=function(t){var e=(t=t||{}).eye||[0,0,1],r=t.center||[0,0,0],s=t.up||[0,1,0],l=t.distanceLimits||[0,1/0],u=t.mode||"turntable",h=i(),c=n(),f=a();return h.setDistanceLimits(l[0],l[1]),h.lookAt(0,e,r,s),c.setDistanceLimits(l[0],l[1]),c.lookAt(0,e,r,s),f.setDistanceLimits(l[0],l[1]),f.lookAt(0,e,r,s),new o({turntable:h,orbit:c,matrix:f},u)};var i=r(1345),n=r(1349),a=r(1351);function o(t,e){this._controllerNames=Object.keys(t),this._controllerList=this._controllerNames.map((function(e){return t[e]})),this._mode=e,this._active=t[e],this._active||(this._mode="turntable",this._active=t.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=o.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach((function(t){for(var e=t[0],r=[],i=0;i<t[1];++i)r.push("a"+i);var n="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+t[0]+"("+r.join()+")}";s[e]=Function.apply(null,r.concat(n))})),s.recalcMatrix=function(t){this._active.recalcMatrix(t)},s.getDistance=function(t){return this._active.getDistance(t)},s.getDistanceLimits=function(t){return this._active.getDistanceLimits(t)},s.lastT=function(){return this._active.lastT()},s.setMode=function(t){if(t!==this._mode){var e=this._controllerNames.indexOf(t);if(!(e<0)){var r=this._active,i=this._controllerList[e],n=Math.max(r.lastT(),i.lastT());r.recalcMatrix(n),i.setMatrix(n,r.computedMatrix),this._active=i,this._mode=t,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},function(t,e,r){"use strict";t.exports=function(t){var e=(t=t||{}).center||[0,0,0],r=t.up||[0,1,0],i=t.right||c(r),n=t.radius||1,a=t.theta||0,h=t.phi||0;if(e=[].slice.call(e,0,3),r=[].slice.call(r,0,3),s(r,r),i=[].slice.call(i,0,3),s(i,i),"eye"in t){var d=t.eye,p=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];o(i,p,r),u(i[0],i[1],i[2])<1e-6?i=c(r):s(i,i),n=u(p[0],p[1],p[2]);var g=l(r,p)/n,v=l(i,p)/n;h=Math.acos(g),a=Math.acos(v)}return n=Math.log(n),new f(t.zoomMin,t.zoomMax,e,r,i,n,a,h)};var i=r(1211),n=r(760),a=r(1348),o=r(1061),s=r(884),l=r(921);function u(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function h(t){return Math.min(1,Math.max(-1,t))}function c(t){var e=Math.abs(t[0]),r=Math.abs(t[1]),i=Math.abs(t[2]),n=[0,0,0];e>Math.max(r,i)?n[2]=1:r>Math.max(e,i)?n[0]=1:n[1]=1;for(var a=0,o=0,l=0;l<3;++l)a+=t[l]*t[l],o+=n[l]*t[l];for(l=0;l<3;++l)n[l]-=o/a*t[l];return s(n,n),n}function f(t,e,r,n,a,o,s,l){this.center=i(r),this.up=i(n),this.right=i(a),this.radius=i([o]),this.angle=i([s,l]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(t,e),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var u=0;u<16;++u)this.computedMatrix[u]=.5;this.recalcMatrix(0)}var d=f.prototype;d.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},d.getDistanceLimits=function(t){var e=this.radius.bounds[0];return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},d.recalcMatrix=function(t){this.center.curve(t),this.up.curve(t),this.right.curve(t),this.radius.curve(t),this.angle.curve(t);for(var e=this.computedUp,r=this.computedRight,i=0,n=0,a=0;a<3;++a)n+=e[a]*r[a],i+=e[a]*e[a];var l=Math.sqrt(i),h=0;for(a=0;a<3;++a)r[a]-=e[a]*n/i,h+=r[a]*r[a],e[a]/=l;var c=Math.sqrt(h);for(a=0;a<3;++a)r[a]/=c;var f=this.computedToward;o(f,e,r),s(f,f);var d=Math.exp(this.computedRadius[0]),p=this.computedAngle[0],g=this.computedAngle[1],v=Math.cos(p),m=Math.sin(p),y=Math.cos(g),x=Math.sin(g),b=this.computedCenter,_=v*y,w=m*y,A=x,T=-v*x,M=-m*x,k=y,E=this.computedEye,S=this.computedMatrix;for(a=0;a<3;++a){var C=_*r[a]+w*f[a]+A*e[a];S[4*a+1]=T*r[a]+M*f[a]+k*e[a],S[4*a+2]=C,S[4*a+3]=0}var L=S[1],I=S[5],j=S[9],R=S[2],P=S[6],O=S[10],z=I*O-j*P,N=j*R-L*O,B=L*P-I*R,F=u(z,N,B);z/=F,N/=F,B/=F,S[0]=z,S[4]=N,S[8]=B;for(a=0;a<3;++a)E[a]=b[a]+S[2+4*a]*d;for(a=0;a<3;++a){h=0;for(var D=0;D<3;++D)h+=S[a+4*D]*E[D];S[12+a]=-h}S[15]=1},d.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var i=0;i<16;++i)e[i]=r[i];return e}return r};var p=[0,0,0];d.rotate=function(t,e,r,i){if(this.angle.move(t,e,r),i){this.recalcMatrix(t);var n=this.computedMatrix;p[0]=n[2],p[1]=n[6],p[2]=n[10];for(var o=this.computedUp,s=this.computedRight,l=this.computedToward,u=0;u<3;++u)n[4*u]=o[u],n[4*u+1]=s[u],n[4*u+2]=l[u];a(n,n,i,p);for(u=0;u<3;++u)o[u]=n[4*u],s[u]=n[4*u+1];this.up.set(t,o[0],o[1],o[2]),this.right.set(t,s[0],s[1],s[2])}},d.pan=function(t,e,r,i){e=e||0,r=r||0,i=i||0,this.recalcMatrix(t);var n=this.computedMatrix,a=(Math.exp(this.computedRadius[0]),n[1]),o=n[5],s=n[9],l=u(a,o,s);a/=l,o/=l,s/=l;var h=n[0],c=n[4],f=n[8],d=h*a+c*o+f*s,p=u(h-=a*d,c-=o*d,f-=s*d),g=(h/=p)*e+a*r,v=(c/=p)*e+o*r,m=(f/=p)*e+s*r;this.center.move(t,g,v,m);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+i),this.radius.set(t,Math.log(y))},d.translate=function(t,e,r,i){this.center.move(t,e||0,r||0,i||0)},d.setMatrix=function(t,e,r,i){var a=1;"number"==typeof r&&(a=0|r),(a<0||a>3)&&(a=1);var o=(a+2)%3;e||(this.recalcMatrix(t),e=this.computedMatrix);var s=e[a],l=e[a+4],c=e[a+8];if(i){var f=Math.abs(s),d=Math.abs(l),p=Math.abs(c),g=Math.max(f,d,p);f===g?(s=s<0?-1:1,l=c=0):p===g?(c=c<0?-1:1,s=l=0):(l=l<0?-1:1,s=c=0)}else{var v=u(s,l,c);s/=v,l/=v,c/=v}var m,y,x=e[o],b=e[o+4],_=e[o+8],w=x*s+b*l+_*c,A=u(x-=s*w,b-=l*w,_-=c*w),T=l*(_/=A)-c*(b/=A),M=c*(x/=A)-s*_,k=s*b-l*x,E=u(T,M,k);if(T/=E,M/=E,k/=E,this.center.jump(t,G,W,H),this.radius.idle(t),this.up.jump(t,s,l,c),this.right.jump(t,x,b,_),2===a){var S=e[1],C=e[5],L=e[9],I=S*x+C*b+L*_,j=S*T+C*M+L*k;m=z<0?-Math.PI/2:Math.PI/2,y=Math.atan2(j,I)}else{var R=e[2],P=e[6],O=e[10],z=R*s+P*l+O*c,N=R*x+P*b+O*_,B=R*T+P*M+O*k;m=Math.asin(h(z)),y=Math.atan2(B,N)}this.angle.jump(t,y,m),this.recalcMatrix(t);var F=e[2],D=e[6],U=e[10],V=this.computedMatrix;n(V,e);var X=V[15],G=V[12]/X,W=V[13]/X,H=V[14]/X,q=Math.exp(this.computedRadius[0]);this.center.jump(t,G-F*q,W-D*q,H-U*q)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(t){this.center.idle(t),this.up.idle(t),this.right.idle(t),this.radius.idle(t),this.angle.idle(t)},d.flush=function(t){this.center.flush(t),this.up.flush(t),this.right.flush(t),this.radius.flush(t),this.angle.flush(t)},d.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},d.lookAt=function(t,e,r,i){this.recalcMatrix(t),e=e||this.computedEye,r=r||this.computedCenter;var n=(i=i||this.computedUp)[0],a=i[1],o=i[2],s=u(n,a,o);if(!(s<1e-6)){n/=s,a/=s,o/=s;var l=e[0]-r[0],c=e[1]-r[1],f=e[2]-r[2],d=u(l,c,f);if(!(d<1e-6)){l/=d,c/=d,f/=d;var p=this.computedRight,g=p[0],v=p[1],m=p[2],y=n*g+a*v+o*m,x=u(g-=y*n,v-=y*a,m-=y*o);if(!(x<.01&&(x=u(g=a*f-o*c,v=o*l-n*f,m=n*c-a*l))<1e-6)){g/=x,v/=x,m/=x,this.up.set(t,n,a,o),this.right.set(t,g,v,m),this.center.set(t,r[0],r[1],r[2]),this.radius.set(t,Math.log(d));var b=a*m-o*v,_=o*g-n*m,w=n*v-a*g,A=u(b,_,w),T=n*l+a*c+o*f,M=g*l+v*c+m*f,k=(b/=A)*l+(_/=A)*c+(w/=A)*f,E=Math.asin(h(T)),S=Math.atan2(k,M),C=this.angle._state,L=C[C.length-1],I=C[C.length-2];L%=2*Math.PI;var j=Math.abs(L+2*Math.PI-S),R=Math.abs(L-S),P=Math.abs(L-2*Math.PI-S);j<R&&(L+=2*Math.PI),P<R&&(L-=2*Math.PI),this.angle.jump(this.angle.lastT(),L,I),this.angle.set(t,S,E)}}}}},function(t,e,r){"use strict";t.exports=function(t,e,r,i,n,a){var o=n-1,s=n*n,l=o*o,u=(1+2*n)*l,h=n*l,c=s*(3-2*n),f=s*o;if(t.length){a||(a=new Array(t.length));for(var d=t.length-1;d>=0;--d)a[d]=u*t[d]+h*e[d]+c*r[d]+f*i[d];return a}return u*t+h*e+c*r+f*i},t.exports.derivative=function(t,e,r,i,n,a){var o=6*n*n-6*n,s=3*n*n-4*n+1,l=-6*n*n+6*n,u=3*n*n-2*n;if(t.length){a||(a=new Array(t.length));for(var h=t.length-1;h>=0;--h)a[h]=o*t[h]+s*e[h]+l*r[h]+u*i[h];return a}return o*t+s*e+l*r[h]+u*i}},function(t,e,r){"use strict";function i(t,e,r,i,n,a){var o=["function ",t,"(a,l,h,",i.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];return a?e.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",e,"){i=m;"),r?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),a?o.push("return -1};"):o.push("return i};"),o.join("")}function n(t,e,r,n){return new Function([i("A","x"+t+"y",e,["y"],!1,n),i("B","x"+t+"y",e,["y"],!0,n),i("P","c(x,y)"+t+"0",e,["y","c"],!1,n),i("Q","c(x,y)"+t+"0",e,["y","c"],!0,n),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}t.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},function(t,e){t.exports=function(t,e,r,i){var n,a,o,s,l,u,h,c,f,d,p,g,v,m,y,x,b,_,w,A,T,M,k,E,S=i[0],C=i[1],L=i[2],I=Math.sqrt(S*S+C*C+L*L);if(Math.abs(I)<1e-6)return null;S*=I=1/I,C*=I,L*=I,n=Math.sin(r),a=Math.cos(r),o=1-a,s=e[0],l=e[1],u=e[2],h=e[3],c=e[4],f=e[5],d=e[6],p=e[7],g=e[8],v=e[9],m=e[10],y=e[11],x=S*S*o+a,b=C*S*o+L*n,_=L*S*o-C*n,w=S*C*o-L*n,A=C*C*o+a,T=L*C*o+S*n,M=S*L*o+C*n,k=C*L*o-S*n,E=L*L*o+a,t[0]=s*x+c*b+g*_,t[1]=l*x+f*b+v*_,t[2]=u*x+d*b+m*_,t[3]=h*x+p*b+y*_,t[4]=s*w+c*A+g*T,t[5]=l*w+f*A+v*T,t[6]=u*w+d*A+m*T,t[7]=h*w+p*A+y*T,t[8]=s*M+c*k+g*E,t[9]=l*M+f*k+v*E,t[10]=u*M+d*k+m*E,t[11]=h*M+p*k+y*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},function(t,e,r){"use strict";t.exports=function(t){var e=(t=t||{}).center||[0,0,0],r=t.rotation||[0,0,0,1],i=t.radius||1;e=[].slice.call(e,0,3),h(r=[].slice.call(r,0,4),r);var n=new c(r,e,Math.log(i));n.setDistanceLimits(t.zoomMin,t.zoomMax),("eye"in t||"up"in t)&&n.lookAt(0,t.eye,t.center,t.up);return n};var i=r(1211),n=r(1212),a=r(734),o=r(760),s=r(1350);function l(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function u(t,e,r,i){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2)+Math.pow(i,2))}function h(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=u(r,i,n,a);o>1e-6?(t[0]=r/o,t[1]=i/o,t[2]=n/o,t[3]=a/o):(t[0]=t[1]=t[2]=0,t[3]=1)}function c(t,e,r){this.radius=i([r]),this.center=i(e),this.rotation=i(t),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var f=c.prototype;f.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},f.recalcMatrix=function(t){this.radius.curve(t),this.center.curve(t),this.rotation.curve(t);var e=this.computedRotation;h(e,e);var r=this.computedMatrix;a(r,e);var i=this.computedCenter,n=this.computedEye,o=this.computedUp,s=Math.exp(this.computedRadius[0]);n[0]=i[0]+s*r[2],n[1]=i[1]+s*r[6],n[2]=i[2]+s*r[10],o[0]=r[1],o[1]=r[5],o[2]=r[9];for(var l=0;l<3;++l){for(var u=0,c=0;c<3;++c)u+=r[l+4*c]*n[c];r[12+l]=-u}},f.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var i=0;i<16;++i)e[i]=r[i];return e}return r},f.idle=function(t){this.center.idle(t),this.radius.idle(t),this.rotation.idle(t)},f.flush=function(t){this.center.flush(t),this.radius.flush(t),this.rotation.flush(t)},f.pan=function(t,e,r,i){e=e||0,r=r||0,i=i||0,this.recalcMatrix(t);var n=this.computedMatrix,a=n[1],o=n[5],s=n[9],u=l(a,o,s);a/=u,o/=u,s/=u;var h=n[0],c=n[4],f=n[8],d=h*a+c*o+f*s,p=l(h-=a*d,c-=o*d,f-=s*d);h/=p,c/=p,f/=p;var g=n[2],v=n[6],m=n[10],y=g*a+v*o+m*s,x=g*h+v*c+m*f,b=l(g-=y*a+x*h,v-=y*o+x*c,m-=y*s+x*f);g/=b,v/=b,m/=b;var _=h*e+a*r,w=c*e+o*r,A=f*e+s*r;this.center.move(t,_,w,A);var T=Math.exp(this.computedRadius[0]);T=Math.max(1e-4,T+i),this.radius.set(t,Math.log(T))},f.rotate=function(t,e,r,i){this.recalcMatrix(t),e=e||0,r=r||0;var n=this.computedMatrix,a=n[0],o=n[4],s=n[8],h=n[1],c=n[5],f=n[9],d=n[2],p=n[6],g=n[10],v=e*a+r*h,m=e*o+r*c,y=e*s+r*f,x=-(p*y-g*m),b=-(g*v-d*y),_=-(d*m-p*v),w=Math.sqrt(Math.max(0,1-Math.pow(x,2)-Math.pow(b,2)-Math.pow(_,2))),A=u(x,b,_,w);A>1e-6?(x/=A,b/=A,_/=A,w/=A):(x=b=_=0,w=1);var T=this.computedRotation,M=T[0],k=T[1],E=T[2],S=T[3],C=M*w+S*x+k*_-E*b,L=k*w+S*b+E*x-M*_,I=E*w+S*_+M*b-k*x,j=S*w-M*x-k*b-E*_;if(i){x=d,b=p,_=g;var R=Math.sin(i)/l(x,b,_);x*=R,b*=R,_*=R,j=j*(w=Math.cos(e))-(C=C*w+j*x+L*_-I*b)*x-(L=L*w+j*b+I*x-C*_)*b-(I=I*w+j*_+C*b-L*x)*_}var P=u(C,L,I,j);P>1e-6?(C/=P,L/=P,I/=P,j/=P):(C=L=I=0,j=1),this.rotation.set(t,C,L,I,j)},f.lookAt=function(t,e,r,i){this.recalcMatrix(t),r=r||this.computedCenter,e=e||this.computedEye,i=i||this.computedUp;var a=this.computedMatrix;n(a,e,r,i);var o=this.computedRotation;s(o,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]),h(o,o),this.rotation.set(t,o[0],o[1],o[2],o[3]);for(var l=0,u=0;u<3;++u)l+=Math.pow(r[u]-e[u],2);this.radius.set(t,.5*Math.log(Math.max(l,1e-6))),this.center.set(t,r[0],r[1],r[2])},f.translate=function(t,e,r,i){this.center.move(t,e||0,r||0,i||0)},f.setMatrix=function(t,e){var r=this.computedRotation;s(r,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),h(r,r),this.rotation.set(t,r[0],r[1],r[2],r[3]);var i=this.computedMatrix;o(i,e);var n=i[15];if(Math.abs(n)>1e-6){var a=i[12]/n,l=i[13]/n,u=i[14]/n;this.recalcMatrix(t);var c=Math.exp(this.computedRadius[0]);this.center.set(t,a-i[2]*c,l-i[6]*c,u-i[10]*c),this.radius.idle(t)}else this.center.idle(t),this.radius.idle(t)},f.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},f.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},f.getDistanceLimits=function(t){var e=this.radius.bounds;return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},f.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},f.fromJSON=function(t){var e=this.lastT(),r=t.center;r&&this.center.set(e,r[0],r[1],r[2]);var i=t.rotation;i&&this.rotation.set(e,i[0],i[1],i[2],i[3]);var n=t.distance;n&&n>0&&this.radius.set(e,Math.log(n)),this.setDistanceLimits(t.zoomMin,t.zoomMax)}},function(t,e,r){"use strict";t.exports=function(t,e,r,i,n,a,o,s,l,u){var h=e+a+u;if(c>0){var c=Math.sqrt(h+1);t[0]=.5*(o-l)/c,t[1]=.5*(s-i)/c,t[2]=.5*(r-a)/c,t[3]=.5*c}else{var f=Math.max(e,a,u);c=Math.sqrt(2*f-h+1);e>=f?(t[0]=.5*c,t[1]=.5*(n+r)/c,t[2]=.5*(s+i)/c,t[3]=.5*(o-l)/c):a>=f?(t[0]=.5*(r+n)/c,t[1]=.5*c,t[2]=.5*(l+o)/c,t[3]=.5*(s-i)/c):(t[0]=.5*(i+s)/c,t[1]=.5*(o+l)/c,t[2]=.5*c,t[3]=.5*(r-n)/c)}return t}},function(t,e,r){"use strict";var i=r(1352),n=r(1353),a=r(760),o=r(1361),s=r(1362),l=r(1363),u=r(1212),h=r(1215),c=(r(1217),r(884)),f=[0,0,0];function d(t){this._components=t.slice(),this._time=[0],this.prevMatrix=t.slice(),this.nextMatrix=t.slice(),this.computedMatrix=t.slice(),this.computedInverse=t.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}t.exports=function(t){return new d((t=t||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var p=d.prototype;p.recalcMatrix=function(t){var e=this._time,r=i.le(e,t),o=this.computedMatrix;if(!(r<0)){var s=this._components;if(r===e.length-1)for(var l=16*r,u=0;u<16;++u)o[u]=s[l++];else{var h=e[r+1]-e[r],f=(l=16*r,this.prevMatrix),d=!0;for(u=0;u<16;++u)f[u]=s[l++];var p=this.nextMatrix;for(u=0;u<16;++u)p[u]=s[l++],d=d&&f[u]===p[u];if(h<1e-6||d)for(u=0;u<16;++u)o[u]=f[u];else n(o,f,p,(t-e[r])/h)}var g=this.computedUp;g[0]=o[1],g[1]=o[5],g[2]=o[9],c(g,g);var v=this.computedInverse;a(v,o);var m=this.computedEye,y=v[15];m[0]=v[12]/y,m[1]=v[13]/y,m[2]=v[14]/y;var x=this.computedCenter,b=Math.exp(this.computedRadius[0]);for(u=0;u<3;++u)x[u]=m[u]-o[2+4*u]*b}},p.idle=function(t){if(!(t<this.lastT())){for(var e=this._components,r=e.length-16,i=0;i<16;++i)e.push(e[r++]);this._time.push(t)}},p.flush=function(t){var e=i.gt(this._time,t)-2;e<0||(this._time.splice(0,e),this._components.splice(0,16*e))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(t,e,r,i){this.recalcMatrix(t),e=e||this.computedEye,r=r||f,i=i||this.computedUp,this.setMatrix(t,u(this.computedMatrix,e,r,i));for(var n=0,a=0;a<3;++a)n+=Math.pow(r[a]-e[a],2);n=Math.log(Math.sqrt(n)),this.computedRadius[0]=n},p.rotate=function(t,e,r,i){this.recalcMatrix(t);var n=this.computedInverse;e&&s(n,n,e),r&&o(n,n,r),i&&l(n,n,i),this.setMatrix(t,a(this.computedMatrix,n))};var g=[0,0,0];p.pan=function(t,e,r,i){g[0]=-(e||0),g[1]=-(r||0),g[2]=-(i||0),this.recalcMatrix(t);var n=this.computedInverse;h(n,n,g),this.setMatrix(t,a(n,n))},p.translate=function(t,e,r,i){g[0]=e||0,g[1]=r||0,g[2]=i||0,this.recalcMatrix(t);var n=this.computedMatrix;h(n,n,g),this.setMatrix(t,n)},p.setMatrix=function(t,e){if(!(t<this.lastT())){this._time.push(t);for(var r=0;r<16;++r)this._components.push(e[r])}},p.setDistance=function(t,e){this.computedRadius[0]=e},p.setDistanceLimits=function(t,e){var r=this._limits;r[0]=t,r[1]=e},p.getDistanceLimits=function(t){var e=this._limits;return t?(t[0]=e[0],t[1]=e[1],t):e}},function(t,e,r){"use strict";function i(t,e,r,i,n,a){var o=["function ",t,"(a,l,h,",i.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];return a?e.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",e,"){i=m;"),r?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),a?o.push("return -1};"):o.push("return i};"),o.join("")}function n(t,e,r,n){return new Function([i("A","x"+t+"y",e,["y"],!1,n),i("B","x"+t+"y",e,["y"],!0,n),i("P","c(x,y)"+t+"0",e,["y","c"],!1,n),i("Q","c(x,y)"+t+"0",e,["y","c"],!0,n),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}t.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},function(t,e,r){var i=r(1214),n=r(1354),a=r(1356),o=r(1218),s=r(1359),l=c(),u=c(),h=c();function c(){return{translate:f(),scale:f(1),skew:f(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function f(t){return[t||0,t||0,t||0]}t.exports=function(t,e,r,c){if(0===o(e)||0===o(r))return!1;var f=a(e,l.translate,l.scale,l.skew,l.perspective,l.quaternion),d=a(r,u.translate,u.scale,u.skew,u.perspective,u.quaternion);return!(!f||!d)&&(i(h.translate,l.translate,u.translate,c),i(h.skew,l.skew,u.skew,c),i(h.scale,l.scale,u.scale,c),i(h.perspective,l.perspective,u.perspective,c),s(h.quaternion,l.quaternion,u.quaternion,c),n(t,h.translate,h.scale,h.skew,h.perspective,h.quaternion),!0)}},function(t,e,r){var i={identity:r(1213),translate:r(1215),multiply:r(761),create:r(1216),scale:r(1217),fromRotationTranslation:r(1355)},n=(i.create(),i.create());t.exports=function(t,e,r,a,o,s){return i.identity(t),i.fromRotationTranslation(t,s,e),t[3]=o[0],t[7]=o[1],t[11]=o[2],t[15]=o[3],i.identity(n),0!==a[2]&&(n[9]=a[2],i.multiply(t,t,n)),0!==a[1]&&(n[9]=0,n[8]=a[1],i.multiply(t,t,n)),0!==a[0]&&(n[8]=0,n[4]=a[0],i.multiply(t,t,n)),i.scale(t,t,r),t}},function(t,e){t.exports=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=i+i,l=n+n,u=a+a,h=i*s,c=i*l,f=i*u,d=n*l,p=n*u,g=a*u,v=o*s,m=o*l,y=o*u;return t[0]=1-(d+g),t[1]=c+y,t[2]=f-m,t[3]=0,t[4]=c-y,t[5]=1-(h+g),t[6]=p+v,t[7]=0,t[8]=f+m,t[9]=p-v,t[10]=1-(h+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}},function(t,e,r){var i=r(1357),n=r(1216),a=r(1358),o=r(1218),s=r(760),l=r(1219),u={length:r(1062),normalize:r(884),dot:r(921),cross:r(1061)},h=n(),c=n(),f=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];function g(t,e,r,i,n){t[0]=e[0]*i+r[0]*n,t[1]=e[1]*i+r[1]*n,t[2]=e[2]*i+r[2]*n}t.exports=function(t,e,r,n,v,m){if(e||(e=[0,0,0]),r||(r=[0,0,0]),n||(n=[0,0,0]),v||(v=[0,0,0,1]),m||(m=[0,0,0,1]),!i(h,t))return!1;if(a(c,h),c[3]=0,c[7]=0,c[11]=0,c[15]=1,Math.abs(o(c)<1e-8))return!1;var y,x,b,_,w,A,T,M=h[3],k=h[7],E=h[11],S=h[12],C=h[13],L=h[14],I=h[15];if(0!==M||0!==k||0!==E){if(f[0]=M,f[1]=k,f[2]=E,f[3]=I,!s(c,c))return!1;l(c,c),y=v,b=c,_=(x=f)[0],w=x[1],A=x[2],T=x[3],y[0]=b[0]*_+b[4]*w+b[8]*A+b[12]*T,y[1]=b[1]*_+b[5]*w+b[9]*A+b[13]*T,y[2]=b[2]*_+b[6]*w+b[10]*A+b[14]*T,y[3]=b[3]*_+b[7]*w+b[11]*A+b[15]*T}else v[0]=v[1]=v[2]=0,v[3]=1;if(e[0]=S,e[1]=C,e[2]=L,function(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}(d,h),r[0]=u.length(d[0]),u.normalize(d[0],d[0]),n[0]=u.dot(d[0],d[1]),g(d[1],d[1],d[0],1,-n[0]),r[1]=u.length(d[1]),u.normalize(d[1],d[1]),n[0]/=r[1],n[1]=u.dot(d[0],d[2]),g(d[2],d[2],d[0],1,-n[1]),n[2]=u.dot(d[1],d[2]),g(d[2],d[2],d[1],1,-n[2]),r[2]=u.length(d[2]),u.normalize(d[2],d[2]),n[1]/=r[2],n[2]/=r[2],u.cross(p,d[1],d[2]),u.dot(d[0],p)<0)for(var j=0;j<3;j++)r[j]*=-1,d[j][0]*=-1,d[j][1]*=-1,d[j][2]*=-1;return m[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),m[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),m[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),m[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(m[0]=-m[0]),d[0][2]>d[2][0]&&(m[1]=-m[1]),d[1][0]>d[0][1]&&(m[2]=-m[2]),!0}},function(t,e){t.exports=function(t,e){var r=e[15];if(0===r)return!1;for(var i=1/r,n=0;n<16;n++)t[n]=e[n]*i;return!0}},function(t,e){t.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},function(t,e,r){t.exports=r(1360)},function(t,e){t.exports=function(t,e,r,i){var n,a,o,s,l,u=e[0],h=e[1],c=e[2],f=e[3],d=r[0],p=r[1],g=r[2],v=r[3];(a=u*d+h*p+c*g+f*v)<0&&(a=-a,d=-d,p=-p,g=-g,v=-v);1-a>1e-6?(n=Math.acos(a),o=Math.sin(n),s=Math.sin((1-i)*n)/o,l=Math.sin(i*n)/o):(s=1-i,l=i);return t[0]=s*u+l*d,t[1]=s*h+l*p,t[2]=s*c+l*g,t[3]=s*f+l*v,t}},function(t,e){t.exports=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],h=e[9],c=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*n+u*i,t[5]=o*n+h*i,t[6]=s*n+c*i,t[7]=l*n+f*i,t[8]=u*n-a*i,t[9]=h*n-o*i,t[10]=c*n-s*i,t[11]=f*n-l*i,t}},function(t,e){t.exports=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],h=e[9],c=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*n-u*i,t[1]=o*n-h*i,t[2]=s*n-c*i,t[3]=l*n-f*i,t[8]=a*i+u*n,t[9]=o*i+h*n,t[10]=s*i+c*n,t[11]=l*i+f*n,t}},function(t,e){t.exports=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],h=e[5],c=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*n+u*i,t[1]=o*n+h*i,t[2]=s*n+c*i,t[3]=l*n+f*i,t[4]=u*n-a*i,t[5]=h*n-o*i,t[6]=c*n-s*i,t[7]=f*n-l*i,t}},function(t,e,r){"use strict";t.exports=function(t,e){var r=new h(t);return r.update(e),r};var i=r(1365),n=r(1368),a=r(1369),o=r(1221),s=r(1371),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function h(t){this.gl=t,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(t)}var c=h.prototype;function f(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}c.update=function(t){function e(e,r,i){if(i in t){var n,a=t[i],o=this[i];(e?Array.isArray(a)&&Array.isArray(a[0]):Array.isArray(a))?this[i]=n=[r(a[0]),r(a[1]),r(a[2])]:this[i]=n=[r(a),r(a),r(a)];for(var s=0;s<3;++s)if(n[s]!==o[s])return!0}return!1}t=t||{};var r,a=e.bind(this,!1,Number),o=e.bind(this,!1,Boolean),l=e.bind(this,!1,String),u=e.bind(this,!0,(function(t){if(Array.isArray(t)){if(3===t.length)return[+t[0],+t[1],+t[2],1];if(4===t.length)return[+t[0],+t[1],+t[2],+t[3]]}return[0,0,0,1]})),h=!1,c=!1;if("bounds"in t)for(var f=t.bounds,d=0;d<2;++d)for(var p=0;p<3;++p)f[d][p]!==this.bounds[d][p]&&(c=!0),this.bounds[d][p]=f[d][p];if("ticks"in t){r=t.ticks,h=!0,this.autoTicks=!1;for(d=0;d<3;++d)this.tickSpacing[d]=0}else a("tickSpacing")&&(this.autoTicks=!0,c=!0);if(this._firstInit&&("ticks"in t||"tickSpacing"in t||(this.autoTicks=!0),c=!0,h=!0,this._firstInit=!1),c&&this.autoTicks&&(r=s.create(this.bounds,this.tickSpacing),h=!0),h){for(d=0;d<3;++d)r[d].sort((function(t,e){return t.x-e.x}));s.equal(r,this.ticks)?h=!1:this.ticks=r}o("tickEnable"),l("tickFont")&&(h=!0),a("tickSize"),a("tickAngle"),a("tickPad"),u("tickColor");var g=l("labels");l("labelFont")&&(g=!0),o("labelEnable"),a("labelSize"),a("labelPad"),u("labelColor"),o("lineEnable"),o("lineMirror"),a("lineWidth"),u("lineColor"),o("lineTickEnable"),o("lineTickMirror"),a("lineTickLength"),a("lineTickWidth"),u("lineTickColor"),o("gridEnable"),a("gridWidth"),u("gridColor"),o("zeroEnable"),u("zeroLineColor"),a("zeroLineWidth"),o("backgroundEnable"),u("backgroundColor"),this._text?this._text&&(g||h)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&h&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var d=[new f,new f,new f];function p(t,e,r,i,n){for(var a=t.primalOffset,o=t.primalMinor,s=t.mirrorOffset,l=t.mirrorMinor,u=i[e],h=0;h<3;++h)if(e!==h){var c=a,f=s,d=o,p=l;u&1<<h&&(c=s,f=a,d=l,p=o),c[h]=r[0][h],f[h]=r[1][h],n[h]>0?(d[h]=-1,p[h]=0):(d[h]=0,p[h]=1)}}var g=[0,0,0],v={model:l,view:l,projection:l,_ortho:!1};c.isOpaque=function(){return!0},c.isTransparent=function(){return!1},c.drawTransparent=function(t){};var m=[0,0,0],y=[0,0,0],x=[0,0,0];c.draw=function(t){t=t||v;for(var e=this.gl,r=t.model||l,i=t.view||l,n=t.projection||l,a=this.bounds,s=t._ortho||!1,h=o(r,i,n,a,s),c=h.cubeEdges,f=h.axis,b=i[12],_=i[13],w=i[14],A=i[15],T=(s?2:1)*this.pixelRatio*(n[3]*b+n[7]*_+n[11]*w+n[15]*A)/e.drawingBufferHeight,M=0;M<3;++M)this.lastCubeProps.cubeEdges[M]=c[M],this.lastCubeProps.axis[M]=f[M];var k=d;for(M=0;M<3;++M)p(d[M],M,this.bounds,c,f);e=this.gl;var E,S=g;for(M=0;M<3;++M)this.backgroundEnable[M]?S[M]=f[M]:S[M]=0;this._background.draw(r,i,n,a,S,this.backgroundColor),this._lines.bind(r,i,n,this);for(M=0;M<3;++M){var C=[0,0,0];f[M]>0?C[M]=a[1][M]:C[M]=a[0][M];for(var L=0;L<2;++L){var I=(M+1+L)%3,j=(M+1+(1^L))%3;this.gridEnable[I]&&this._lines.drawGrid(I,j,this.bounds,C,this.gridColor[I],this.gridWidth[I]*this.pixelRatio)}for(L=0;L<2;++L){I=(M+1+L)%3,j=(M+1+(1^L))%3;this.zeroEnable[j]&&Math.min(a[0][j],a[1][j])<=0&&Math.max(a[0][j],a[1][j])>=0&&this._lines.drawZero(I,j,this.bounds,C,this.zeroLineColor[j],this.zeroLineWidth[j]*this.pixelRatio)}}for(M=0;M<3;++M){this.lineEnable[M]&&this._lines.drawAxisLine(M,this.bounds,k[M].primalOffset,this.lineColor[M],this.lineWidth[M]*this.pixelRatio),this.lineMirror[M]&&this._lines.drawAxisLine(M,this.bounds,k[M].mirrorOffset,this.lineColor[M],this.lineWidth[M]*this.pixelRatio);var R=u(m,k[M].primalMinor),P=u(y,k[M].mirrorMinor),O=this.lineTickLength;for(L=0;L<3;++L){var z=T/r[5*L];R[L]*=O[L]*z,P[L]*=O[L]*z}this.lineTickEnable[M]&&this._lines.drawAxisTicks(M,k[M].primalOffset,R,this.lineTickColor[M],this.lineTickWidth[M]*this.pixelRatio),this.lineTickMirror[M]&&this._lines.drawAxisTicks(M,k[M].mirrorOffset,P,this.lineTickColor[M],this.lineTickWidth[M]*this.pixelRatio)}this._lines.unbind(),this._text.bind(r,i,n,this.pixelRatio);var N,B;function F(t){(B=[0,0,0])[t]=1}function D(t,e,r){var i=(t+1)%3,n=(t+2)%3,a=e[i],o=e[n],s=r[i],l=r[n];a>0&&l>0||a>0&&l<0||a<0&&l>0||a<0&&l<0?F(i):(o>0&&s>0||o>0&&s<0||o<0&&s>0||o<0&&s<0)&&F(n)}for(M=0;M<3;++M){var U=k[M].primalMinor,V=k[M].mirrorMinor,X=u(x,k[M].primalOffset);for(L=0;L<3;++L)this.lineTickEnable[M]&&(X[L]+=T*U[L]*Math.max(this.lineTickLength[L],0)/r[5*L]);var G=[0,0,0];if(G[M]=1,this.tickEnable[M]){-3600===this.tickAngle[M]?(this.tickAngle[M]=0,this.tickAlign[M]="auto"):this.tickAlign[M]=-1,N=1,"auto"===(E=[this.tickAlign[M],.5,N])[0]?E[0]=0:E[0]=parseInt(""+E[0]),B=[0,0,0],D(M,U,V);for(L=0;L<3;++L)X[L]+=T*U[L]*this.tickPad[L]/r[5*L];this._text.drawTicks(M,this.tickSize[M],this.tickAngle[M],X,this.tickColor[M],G,B,E)}if(this.labelEnable[M]){N=0,B=[0,0,0],this.labels[M].length>4&&(F(M),N=1),"auto"===(E=[this.labelAlign[M],.5,N])[0]?E[0]=0:E[0]=parseInt(""+E[0]);for(L=0;L<3;++L)X[L]+=T*U[L]*this.labelPad[L]/r[5*L];X[M]+=.5*(a[0][M]+a[1][M]),this._text.drawLabel(M,this.labelSize[M],this.labelAngle[M],X,this.labelColor[M],[0,0,0],B,E)}}this._text.unbind()},c.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},function(t,e,r){"use strict";(function(e){t.exports=function(t,e,r,a,s,l){var h=i(t),c=n(t,[{buffer:h,size:3}]),f=o(t);f.attributes.position.location=0;var d=new u(t,f,h,c);return d.update(e,r,a,s,l),d};var i=r(628),n=r(683),a=r(889),o=r(1063).text,s=window||e.global||{},l=s.__TEXT_CACHE||{};s.__TEXT_CACHE={};function u(t,e,r,i){this.gl=t,this.shader=e,this.buffer=r,this.vao=i,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var h=u.prototype,c=[0,0];h.bind=function(t,e,r,i){this.vao.bind(),this.shader.bind();var n=this.shader.uniforms;n.model=t,n.view=e,n.projection=r,n.pixelScale=i,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=c},h.unbind=function(){this.vao.unbind()},h.update=function(t,e,r,i,n){var o=[];function s(t,e,r,i,n,s){var u=l[r];u||(u=l[r]={});var h=u[e];h||(h=u[e]=function(t,e){try{return a(t,e)}catch(e){return console.warn('error vectorizing text:"'+t+'" error:',e),{cells:[],positions:[]}}}(e,{triangles:!0,font:r,textAlign:"center",textBaseline:"middle",lineSpacing:n,styletags:s}));for(var c=(i||12)/12,f=h.positions,d=h.cells,p=0,g=d.length;p<g;++p)for(var v=d[p],m=2;m>=0;--m){var y=f[v[m]];o.push(c*y[0],-c*y[1],t)}}for(var u=[0,0,0],h=[0,0,0],c=[0,0,0],f=[0,0,0],d={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},p=0;p<3;++p){c[p]=o.length/3|0,s(.5*(t[0][p]+t[1][p]),e[p],r[p],12,1.25,d),f[p]=(o.length/3|0)-c[p],u[p]=o.length/3|0;for(var g=0;g<i[p].length;++g)i[p][g].text&&s(i[p][g].x,i[p][g].text,i[p][g].font||n,i[p][g].fontSize||12,1.25,d);h[p]=(o.length/3|0)-u[p]}this.buffer.update(o),this.tickOffset=u,this.tickCount=h,this.labelOffset=c,this.labelCount=f},h.drawTicks=function(t,e,r,i,n,a,o,s){this.tickCount[t]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=n,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=i,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t]))},h.drawLabel=function(t,e,r,i,n,a,o,s){this.labelCount[t]&&(this.shader.uniforms.axis=a,this.shader.uniforms.color=n,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=i,this.shader.uniforms.alignDir=o,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[t],this.labelOffset[t]))},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,r(664))},function(t,e,r){"use strict";var i=r(1220);function n(t,e,r,i,n,a){this.location=t,this.dimension=e,this.a=r,this.b=i,this.c=n,this.d=a}function a(t,e,r){this.gl=t,this._ext=e,this.handle=r,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}n.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(t,e,r){if(this.bind(),i(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var a=0;a<t.length;++a){var o=t[a];"number"==typeof o?this._attribs.push(new n(a,1,o)):Array.isArray(o)&&this._attribs.push(new n(a,o.length,o[0],o[1],o[2],o[3]))}this._useElements=!!e,this._elementsType=r||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(t,e,r){r=r||0;var i=this.gl;this._useElements?i.drawElements(t,e,this._elementsType,r):i.drawArrays(t,r,e)},t.exports=function(t,e){return new a(t,e,e.createVertexArrayOES())}},function(t,e,r){"use strict";var i=r(1220);function n(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}n.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},n.prototype.update=function(t,e,r){this._elements=e,this._attributes=t,this._elementsType=r||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(t,e,r){r=r||0;var i=this.gl;this._elements?i.drawElements(t,e,this._elementsType,r):i.drawArrays(t,r,e)},t.exports=function(t){return new n(t)}},function(t,e,r){"use strict";t.exports=function(t,e,r){var o=[],s=[0,0,0],l=[0,0,0],u=[0,0,0],h=[0,0,0];o.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var c=0;c<3;++c){for(var f=o.length/3|0,p=0;p<r[c].length;++p){var g=+r[c][p].x;o.push(g,0,1,g,1,1,g,0,-1,g,0,-1,g,1,1,g,1,-1)}var v=o.length/3|0;s[c]=f,l[c]=v-f;f=o.length/3|0;for(var m=0;m<r[c].length;++m){g=+r[c][m].x;o.push(g,0,1,g,1,1,g,0,-1,g,0,-1,g,1,1,g,1,-1)}v=o.length/3|0;u[c]=f,h[c]=v-f}var y=i(t,new Float32Array(o)),x=n(t,[{buffer:y,type:t.FLOAT,size:3,stride:0,offset:0}]),b=a(t);return b.attributes.position.location=0,new d(t,y,x,b,l,s,h,u)};var i=r(628),n=r(683),a=r(1063).line,o=[0,0,0],s=[0,0,0],l=[0,0,0],u=[0,0,0],h=[1,1];function c(t){return t[0]=t[1]=t[2]=0,t}function f(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function d(t,e,r,i,n,a,o,s){this.gl=t,this.vertBuffer=e,this.vao=r,this.shader=i,this.tickCount=n,this.tickOffset=a,this.gridCount=o,this.gridOffset=s}var p=d.prototype;p.bind=function(t,e,r){this.shader.bind(),this.shader.uniforms.model=t,this.shader.uniforms.view=e,this.shader.uniforms.projection=r,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=h,this.vao.bind()},p.unbind=function(){this.vao.unbind()},p.drawAxisLine=function(t,e,r,i,n){var a=c(s);this.shader.uniforms.majorAxis=s,a[t]=e[1][t]-e[0][t],this.shader.uniforms.minorAxis=a;var o,h=f(u,r);h[t]+=e[0][t],this.shader.uniforms.offset=h,this.shader.uniforms.lineWidth=n,this.shader.uniforms.color=i,(o=c(l))[(t+2)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6),(o=c(l))[(t+1)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(t,e,r,i,n){if(this.tickCount[t]){var a=c(o);a[t]=1,this.shader.uniforms.majorAxis=a,this.shader.uniforms.offset=e,this.shader.uniforms.minorAxis=r,this.shader.uniforms.color=i,this.shader.uniforms.lineWidth=n;var s=c(l);s[t]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t])}},p.drawGrid=function(t,e,r,i,n,a){if(this.gridCount[t]){var h=c(s);h[e]=r[1][e]-r[0][e],this.shader.uniforms.minorAxis=h;var d=f(u,i);d[e]+=r[0][e],this.shader.uniforms.offset=d;var p=c(o);p[t]=1,this.shader.uniforms.majorAxis=p;var g=c(l);g[t]=1,this.shader.uniforms.screenAxis=g,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=n,this.vao.draw(this.gl.TRIANGLES,this.gridCount[t],this.gridOffset[t])}},p.drawZero=function(t,e,r,i,n,a){var o=c(s);this.shader.uniforms.majorAxis=o,o[t]=r[1][t]-r[0][t],this.shader.uniforms.minorAxis=o;var h=f(u,i);h[t]+=r[0][t],this.shader.uniforms.offset=h;var d=c(l);d[e]=1,this.shader.uniforms.screenAxis=d,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=n,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},function(t,e,r){"use strict";t.exports=function(t){for(var e=[],r=[],s=0,l=0;l<3;++l)for(var u=(l+1)%3,h=(l+2)%3,c=[0,0,0],f=[0,0,0],d=-1;d<=1;d+=2){r.push(s,s+2,s+1,s+1,s+2,s+3),c[l]=d,f[l]=d;for(var p=-1;p<=1;p+=2){c[u]=p;for(var g=-1;g<=1;g+=2)c[h]=g,e.push(c[0],c[1],c[2],f[0],f[1],f[2]),s+=1}var v=u;u=h,h=v}var m=i(t,new Float32Array(e)),y=i(t,new Uint16Array(r),t.ELEMENT_ARRAY_BUFFER),x=n(t,[{buffer:m,type:t.FLOAT,size:3,offset:0,stride:24},{buffer:m,type:t.FLOAT,size:3,offset:12,stride:24}],y),b=a(t);return b.attributes.position.location=0,b.attributes.normal.location=1,new o(t,m,x,b)};var i=r(628),n=r(683),a=r(1063).bg;function o(t,e,r,i){this.gl=t,this.buffer=e,this.vao=r,this.shader=i}var s=o.prototype;s.draw=function(t,e,r,i,n,a){for(var o=!1,s=0;s<3;++s)o=o||n[s];if(o){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:t,view:e,projection:r,bounds:i,enable:n,colors:a},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},function(t,e,r){"use strict";var i=r(668),n=r(654);t.exports=function(t,e){for(var r=i(t[0],e[0]),a=1;a<t.length;++a)r=n(r,i(t[a],e[a]));return r}},function(t,e,r){"use strict";function i(t,e){var r=t+"",i=r.indexOf("."),n=0;i>=0&&(n=r.length-i-1);var a=Math.pow(10,n),o=Math.round(t*e*a),s=o+"";if(s.indexOf("e")>=0)return s;var l=o/a,u=o%a;o<0?(l=0|-Math.ceil(l),u=0|-u):(l=0|Math.floor(l),u|=0);var h=""+l;if(o<0&&(h="-"+h),n){for(var c=""+u;c.length<n;)c="0"+c;return h+"."+c}return h}e.create=function(t,e){for(var r=[],n=0;n<3;++n){for(var a=[],o=(t[0][n],t[1][n],0);o*e[n]<=t[1][n];++o)a.push({x:o*e[n],text:i(e[n],o)});for(o=-1;o*e[n]>=t[0][n];--o)a.push({x:o*e[n],text:i(e[n],o)});r.push(a)}return r},e.equal=function(t,e){for(var r=0;r<3;++r){if(t[r].length!==e[r].length)return!1;for(var i=0;i<t[r].length;++i){var n=t[r][i],a=e[r][i];if(n.x!==a.x||n.text!==a.text||n.font!==a.font||n.fontColor!==a.fontColor||n.fontSize!==a.fontSize||n.dx!==a.dx||n.dy!==a.dy)return!1}}return!0}},function(t,e,r){"use strict";t.exports=function(t,e,r,l,c){var f=e.model||u,d=e.view||u,m=e.projection||u,y=e._ortho||!1,x=t.bounds,b=(c=c||a(f,d,m,x,y)).axis;o(h,d,f),o(h,m,h);for(var _=g,w=0;w<3;++w)_[w].lo=1/0,_[w].hi=-1/0,_[w].pixelsPerDataUnit=1/0;var A=i(s(h,h));s(h,h);for(var T=0;T<3;++T){var M=(T+1)%3,k=(T+2)%3,E=v;t:for(w=0;w<2;++w){var S=[];if(b[T]<0!=!!w){E[T]=x[w][T];for(var C=0;C<2;++C){E[M]=x[C^w][M];for(var L=0;L<2;++L)E[k]=x[L^C^w][k],S.push(E.slice())}var I=y?5:4;for(C=I;C===I;++C){if(0===S.length)continue t;S=n.positive(S,A[C])}for(C=0;C<S.length;++C){k=S[C];var j=p(v,h,k,r,l);for(L=0;L<3;++L)_[L].lo=Math.min(_[L].lo,k[L]),_[L].hi=Math.max(_[L].hi,k[L]),L!==T&&(_[L].pixelsPerDataUnit=Math.min(_[L].pixelsPerDataUnit,Math.abs(j[L])))}}}}return _};var i=r(1373),n=r(1222),a=r(1221),o=r(761),s=r(1219),l=r(1223),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=new Float32Array(16);function c(t,e,r){this.lo=t,this.hi=e,this.pixelsPerDataUnit=r}var f=[0,0,0,1],d=[0,0,0,1];function p(t,e,r,i,n){for(var a=0;a<3;++a){for(var o=f,s=d,u=0;u<3;++u)s[u]=o[u]=r[u];s[3]=o[3]=1,s[a]+=1,l(s,s,e),s[3]<0&&(t[a]=1/0),o[a]-=1,l(o,o,e),o[3]<0&&(t[a]=1/0);var h=(o[0]/o[3]-s[0]/s[3])*i,c=(o[1]/o[3]-s[1]/s[3])*n;t[a]=.25*Math.sqrt(h*h+c*c)}return t}var g=[new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0)],v=[0,0,0]},function(t,e,r){"use strict";t.exports=function(t,e,r){var i=e||0,n=r||1;return[[t[12]+t[0],t[13]+t[1],t[14]+t[2],t[15]+t[3]],[t[12]-t[0],t[13]-t[1],t[14]-t[2],t[15]-t[3]],[t[12]+t[4],t[13]+t[5],t[14]+t[6],t[15]+t[7]],[t[12]-t[4],t[13]-t[5],t[14]-t[6],t[15]-t[7]],[i*t[12]+t[8],i*t[13]+t[9],i*t[14]+t[10],i*t[15]+t[11]],[n*t[12]-t[8],n*t[13]-t[9],n*t[14]-t[10],n*t[15]-t[11]]]}},function(t,e,r){"use strict";var i=r(628),n=r(683),a=r(1375);t.exports=function(t,e){var r=[];function o(t,e,i,n,a,o){var s=[t,e,i,0,0,0,1];s[n+3]=1,s[n]=a,r.push.apply(r,s),s[6]=-1,r.push.apply(r,s),s[n]=o,r.push.apply(r,s),r.push.apply(r,s),s[6]=1,r.push.apply(r,s),s[n]=a,r.push.apply(r,s)}o(0,0,0,0,0,1),o(0,0,0,1,0,1),o(0,0,0,2,0,1),o(1,0,0,1,-1,1),o(1,0,0,2,-1,1),o(0,1,0,0,-1,1),o(0,1,0,2,-1,1),o(0,0,1,0,-1,1),o(0,0,1,1,-1,1);var l=i(t,r),u=n(t,[{type:t.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:t.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:t.FLOAT,buffer:l,size:1,offset:24,stride:28}]),h=a(t);h.attributes.position.location=0,h.attributes.color.location=1,h.attributes.weight.location=2;var c=new s(t,l,u,h);return c.update(e),c};var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,r,i){this.gl=t,this.buffer=e,this.vao=r,this.shader=i,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var l=s.prototype,u=[0,0,0],h=[0,0,0],c=[0,0];l.isTransparent=function(){return!1},l.drawTransparent=function(t){},l.draw=function(t){var e=this.gl,r=this.vao,i=this.shader;r.bind(),i.bind();var n,a=t.model||o,s=t.view||o,l=t.projection||o;this.axes&&(n=this.axes.lastCubeProps.axis);for(var f=u,d=h,p=0;p<3;++p)n&&n[p]<0?(f[p]=this.bounds[0][p],d[p]=this.bounds[1][p]):(f[p]=this.bounds[1][p],d[p]=this.bounds[0][p]);c[0]=e.drawingBufferWidth,c[1]=e.drawingBufferHeight,i.uniforms.model=a,i.uniforms.view=s,i.uniforms.projection=l,i.uniforms.coordinates=[this.position,f,d],i.uniforms.colors=this.colors,i.uniforms.screenShape=c;for(p=0;p<3;++p)i.uniforms.lineWidth=this.lineWidth[p]*this.pixelRatio,this.enabled[p]&&(r.draw(e.TRIANGLES,6,6*p),this.drawSides[p]&&r.draw(e.TRIANGLES,12,18+12*p));r.unbind()},l.update=function(t){t&&("bounds"in t&&(this.bounds=t.bounds),"position"in t&&(this.position=t.position),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"colors"in t&&(this.colors=t.colors),"enabled"in t&&(this.enabled=t.enabled),"drawSides"in t&&(this.drawSides=t.drawSides))},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},function(t,e,r){"use strict";var i=r(630),n=r(635),a=i("./vertex.glsl"),o=i("./fragment.glsl");t.exports=function(t){return n(t,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},function(t,e,r){"use strict";var i="undefined"==typeof WeakMap?r(1377):WeakMap,n=r(628),a=r(683),o=new i;t.exports=function(t){var e=o.get(t),r=e&&(e._triangleBuffer.handle||e._triangleBuffer.buffer);if(!r||!t.isBuffer(r)){var i=n(t,new Float32Array([-1,-1,-1,4,4,-1]));(e=a(t,[{buffer:i,type:t.FLOAT,size:2}]))._triangleBuffer=i,o.set(t,e)}e.bind(),t.drawArrays(t.TRIANGLES,0,3),e.unbind()}},function(t,e){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=g);var e=!1;if("function"==typeof WeakMap){var r=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var i=new r,n=Object.freeze({});if(i.set(n,1),1===i.get(n))return void(t.exports=WeakMap);e=!0}}Object.prototype.hasOwnProperty;var a=Object.getOwnPropertyNames,o=Object.defineProperty,s=Object.isExtensible,l="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var u=new ArrayBuffer(25),h=new Uint8Array(u);crypto.getRandomValues(h),l="weakmap:rand:"+Array.prototype.map.call(h,(function(t){return(t%36).toString(36)})).join("")+"___"}if(o(Object,"getOwnPropertyNames",{value:function(t){return a(t).filter(v)}}),"getPropertyNames"in Object){var c=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(t){return c(t).filter(v)}})}!function(){var t=Object.freeze;o(Object,"freeze",{value:function(e){return m(e),t(e)}});var e=Object.seal;o(Object,"seal",{value:function(t){return m(t),e(t)}});var r=Object.preventExtensions;o(Object,"preventExtensions",{value:function(t){return m(t),r(t)}})}();var f=!1,d=0,p=function(){this instanceof p||x();var t=[],e=[],r=d++;return Object.create(p.prototype,{get___:{value:y((function(i,n){var a,o=m(i);return o?r in o?o[r]:n:(a=t.indexOf(i))>=0?e[a]:n}))},has___:{value:y((function(e){var i=m(e);return i?r in i:t.indexOf(e)>=0}))},set___:{value:y((function(i,n){var a,o=m(i);return o?o[r]=n:(a=t.indexOf(i))>=0?e[a]=n:(a=t.length,e[a]=n,t[a]=i),this}))},delete___:{value:y((function(i){var n,a,o=m(i);return o?r in o&&delete o[r]:!((n=t.indexOf(i))<0)&&(a=t.length-1,t[n]=void 0,e[n]=e[a],t[n]=t[a],t.length=a,e.length=a,!0)}))}})};p.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof r?function(){function i(){this instanceof p||x();var t,i=new r,n=void 0,a=!1;return t=e?function(t,e){return i.set(t,e),i.has(t)||(n||(n=new p),n.set(t,e)),this}:function(t,e){if(a)try{i.set(t,e)}catch(r){n||(n=new p),n.set___(t,e)}else i.set(t,e);return this},Object.create(p.prototype,{get___:{value:y((function(t,e){return n?i.has(t)?i.get(t):n.get___(t,e):i.get(t,e)}))},has___:{value:y((function(t){return i.has(t)||!!n&&n.has___(t)}))},set___:{value:y(t)},delete___:{value:y((function(t){var e=!!i.delete(t);return n&&n.delete___(t)||e}))},permitHostObjects___:{value:y((function(t){if(t!==g)throw new Error("bogus call to permitHostObjects___");a=!0}))}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),i.prototype=p.prototype,t.exports=i,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=p)}function g(t){t.permitHostObjects___&&t.permitHostObjects___(g)}function v(t){return!("weakmap:"==t.substr(0,"weakmap:".length)&&"___"===t.substr(t.length-3))}function m(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[l];if(e&&e.key===t)return e;if(s(t)){e={key:t};try{return o(t,l,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function y(t){return t.prototype=null,Object.freeze(t)}function x(){f||"undefined"==typeof console||(f=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},function(t,e){t.exports=function(t,e,r,i,n){var a=1/Math.tan(e/2),o=1/(i-n);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+i)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*i*o,t[15]=0,t}},function(t,e){t.exports=function(t,e,r,i,n,a,o){var s=1/(e-r),l=1/(i-n),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(n+i)*l,t[14]=(o+a)*u,t[15]=1,t}},function(t,e,r){var i=r(630),n=r(635),a=i("./vertex.glsl"),o=i("./composite.glsl");t.exports=function(t){return n(t,a,o,null,[{name:"position",type:"vec2"}])}},function(t,e,r){"use strict";var i=r(662),n=r(6),a=["xaxis","yaxis","zaxis"];function o(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}o.prototype.merge=function(t,e){for(var r=0;r<3;++r){var o=e[a[r]];o.visible?(this.labels[r]=t._meta?n.templateString(o.title.text,t._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(this.labelColor[r]=i(o.title.font.color)),o.title.font.family&&(this.labelFont[r]=o.title.font.family),o.title.font.size&&(this.labelSize[r]=o.title.font.size)),"showline"in o&&(this.lineEnable[r]=o.showline),"linecolor"in o&&(this.lineColor[r]=i(o.linecolor)),"linewidth"in o&&(this.lineWidth[r]=o.linewidth),"showgrid"in o&&(this.gridEnable[r]=o.showgrid),"gridcolor"in o&&(this.gridColor[r]=i(o.gridcolor)),"gridwidth"in o&&(this.gridWidth[r]=o.gridwidth),"log"===o.type?this.zeroEnable[r]=!1:"zeroline"in o&&(this.zeroEnable[r]=o.zeroline),"zerolinecolor"in o&&(this.zeroLineColor[r]=i(o.zerolinecolor)),"zerolinewidth"in o&&(this.zeroLineWidth[r]=o.zerolinewidth),"ticks"in o&&o.ticks?this.lineTickEnable[r]=!0:this.lineTickEnable[r]=!1,"ticklen"in o&&(this.lineTickLength[r]=this._defaultLineTickLength[r]=o.ticklen),"tickcolor"in o&&(this.lineTickColor[r]=i(o.tickcolor)),"tickwidth"in o&&(this.lineTickWidth[r]=o.tickwidth),"tickangle"in o&&(this.tickAngle[r]="auto"===o.tickangle?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(this.tickEnable[r]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(this.tickColor[r]=i(o.tickfont.color)),o.tickfont.family&&(this.tickFont[r]=o.tickfont.family),o.tickfont.size&&(this.tickSize[r]=o.tickfont.size)),"mirror"in o?-1!==["ticks","all","allticks"].indexOf(o.mirror)?(this.lineTickMirror[r]=!0,this.lineMirror[r]=!0):!0===o.mirror?(this.lineTickMirror[r]=!1,this.lineMirror[r]=!0):(this.lineTickMirror[r]=!1,this.lineMirror[r]=!1):this.lineMirror[r]=!1,"showbackground"in o&&!1!==o.showbackground?(this.backgroundEnable[r]=!0,this.backgroundColor[r]=i(o.backgroundcolor)):this.backgroundEnable[r]=!1):(this.tickEnable[r]=!1,this.labelEnable[r]=!1,this.lineEnable[r]=!1,this.lineTickEnable[r]=!1,this.gridEnable[r]=!1,this.zeroEnable[r]=!1,this.backgroundEnable[r]=!1)}},t.exports=function(t,e){var r=new o;return r.merge(t,e),r}},function(t,e,r){"use strict";var i=r(662),n=["xaxis","yaxis","zaxis"];function a(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}a.prototype.merge=function(t){for(var e=0;e<3;++e){var r=t[n[e]];r.visible?(this.enabled[e]=r.showspikes,this.colors[e]=i(r.spikecolor),this.drawSides[e]=r.spikesides,this.lineWidth[e]=r.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},t.exports=function(t){var e=new a;return e.merge(t),e}},function(t,e,r){"use strict";t.exports=function(t){for(var e=t.axesOptions,r=t.glplot.axesPixels,s=t.fullSceneLayout,l=[[],[],[]],u=0;u<3;++u){var h=s[a[u]];if(h._length=(r[u].hi-r[u].lo)*r[u].pixelsPerDataUnit/t.dataScale[u],Math.abs(h._length)===1/0||isNaN(h._length))l[u]=[];else{h._input_range=h.range.slice(),h.range[0]=r[u].lo/t.dataScale[u],h.range[1]=r[u].hi/t.dataScale[u],h._m=1/(t.dataScale[u]*r[u].pixelsPerDataUnit),h.range[0]===h.range[1]&&(h.range[0]-=1,h.range[1]+=1);var c=h.tickmode;if("auto"===h.tickmode){h.tickmode="linear";var f=h.nticks||n.constrain(h._length/40,4,9);i.autoTicks(h,Math.abs(h.range[1]-h.range[0])/f)}for(var d=i.calcTicks(h,{msUTC:!0}),p=0;p<d.length;++p)d[p].x=d[p].x*t.dataScale[u],"date"===h.type&&(d[p].text=d[p].text.replace(/\<br\>/g," "));l[u]=d,h.tickmode=c}}e.ticks=l;for(u=0;u<3;++u){o[u]=.5*(t.glplot.bounds[0][u]+t.glplot.bounds[1][u]);for(p=0;p<2;++p)e.bounds[p][u]=t.glplot.bounds[p][u]}t.contourLevels=function(t){for(var e=new Array(3),r=0;r<3;++r){for(var i=t[r],n=new Array(i.length),a=0;a<i.length;++a)n[a]=i[a].x;e[r]=n}return e}(l)};var i=r(105),n=r(6),a=["xaxis","yaxis","zaxis"],o=[0,0,0]},function(t,e,r){"use strict";t.exports={scene:{valType:"subplotid",role:"info",dflt:"scene",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's 3D coordinate system and","a 3D scene.","If *scene* (the default value), the (x,y,z) coordinates refer to","`layout.scene`.","If *scene2*, the (x,y,z) coordinates refer to `layout.scene2`,","and so on."].join(" ")}}},function(t,e,r){"use strict";var i=r(6),n=r(57),a=r(23),o=r(730),s=r(1386),l=r(1225),u=r(212).getSubplotData;function h(t,e,r,i){for(var o=r("bgcolor"),l=n.combine(o,i.paper_bgcolor),h=["up","center","eye"],c=0;c<h.length;c++)r("camera."+h[c]+".x"),r("camera."+h[c]+".y"),r("camera."+h[c]+".z");r("camera.projection.type");var f=!!r("aspectratio.x")&&!!r("aspectratio.y")&&!!r("aspectratio.z"),d=r("aspectmode",f?"manual":"auto");f||(t.aspectratio=e.aspectratio={x:1,y:1,z:1},"manual"===d&&(e.aspectmode="auto"),t.aspectmode=e.aspectmode);var p=u(i.fullData,"gl3d",i.id);s(t,e,{font:i.font,scene:i.id,data:p,bgColor:l,calendar:i.calendar,fullLayout:i.fullLayout}),a.getComponentMethod("annotations3d","handleDefaults")(t,e,i);var g=i.getDfltFromLayout("dragmode");if(!1!==g&&!g)if(g="orbit",t.camera&&t.camera.up){var v=t.camera.up.x,m=t.camera.up.y,y=t.camera.up.z;0!==y&&(v&&m&&y?y/Math.sqrt(v*v+m*m+y*y)>.999&&(g="turntable"):g="turntable")}else g="turntable";r("dragmode",g),r("hovermode",i.getDfltFromLayout("hovermode"))}t.exports=function(t,e,r){var n=e._basePlotModules.length>1;o(t,e,r,{type:"gl3d",attributes:l,handleDefaults:h,fullLayout:e,font:e.font,fullData:r,getDfltFromLayout:function(e){if(!n)return i.validate(t[e],l[e])?t[e]:void 0},paper_bgcolor:e.paper_bgcolor,calendar:e.calendar})}},function(t,e,r){"use strict";var i=r(60).mix,n=r(6),a=r(58),o=r(1226),s=r(1053),l=r(737),u=["xaxis","yaxis","zaxis"];t.exports=function(t,e,r){var h,c;function f(t,e){return n.coerce(h,c,o,t,e)}for(var d=0;d<u.length;d++){var p=u[d];h=t[p]||{},(c=a.newContainer(e,p))._id=p[0]+r.scene,c._name=p,s(h,c,f,r),l(h,c,f,{font:r.font,letter:p[0],data:r.data,showGrid:!0,noTickson:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),f("gridcolor",i(c.color,r.bgColor,13600/187).toRgbString()),f("title.text",p[0]),c.setScale=n.noop,f("showspikes")&&(f("spikesides"),f("spikethickness"),f("spikecolor",c.color)),f("showaxeslabels"),f("showbackground")&&f("backgroundcolor")}}},function(t,e,r){"use strict";var i=r(6),n=r(151),a=r(1227);t.exports=function(t,e,r,o){function s(r,n){return i.coerce(t,e,a,r,n)}var l=s("u"),u=s("v"),h=s("w"),c=s("x"),f=s("y"),d=s("z");l&&l.length&&u&&u.length&&h&&h.length&&c&&c.length&&f&&f.length&&d&&d.length?(s("sizeref"),s("sizemode"),s("anchor"),s("lighting.ambient"),s("lighting.diffuse"),s("lighting.specular"),s("lighting.roughness"),s("lighting.fresnel"),s("lightposition.x"),s("lightposition.y"),s("lightposition.z"),n(t,e,o,s,{prefix:"",cLetter:"c"}),s("text"),s("hovertext"),s("hovertemplate"),e._length=null):e.visible=!1}},function(t,e,r){"use strict";var i=r(210);t.exports=function(t,e){for(var r=e.u,n=e.v,a=e.w,o=Math.min(e.x.length,e.y.length,e.z.length,r.length,n.length,a.length),s=-1/0,l=1/0,u=0;u<o;u++){var h=r[u],c=n[u],f=a[u],d=Math.sqrt(h*h+c*c+f*f);s=Math.max(s,d),l=Math.min(l,d)}e._len=o,e._normMax=s,i(t,e,{vals:[l,s],containerStr:"",cLetter:"c"})}},function(t,e,r){"use strict";var i=r(1064),n=r(1064).createConeMesh,a=r(6).simpleMap,o=r(693).parseColorScale,s=r(208).extractOpts,l=r(869);function u(t,e){this.scene=t,this.uid=e,this.mesh=null,this.data=null}var h=u.prototype;h.handlePick=function(t){if(t.object===this.mesh){var e=t.index=t.data.index,r=this.data.x[e],i=this.data.y[e],n=this.data.z[e],a=this.data.u[e],o=this.data.v[e],s=this.data.w[e];t.traceCoordinate=[r,i,n,a,o,s,Math.sqrt(a*a+o*o+s*s)];var l=this.data.hovertext||this.data.text;return Array.isArray(l)&&void 0!==l[e]?t.textLabel=l[e]:l&&(t.textLabel=l),!0}};var c={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},d={tip:1,tail:1,cm:.75,center:.5};function p(t,e){var r=t.fullSceneLayout,n=t.dataScale,u={};function h(t,e){var i=r[e],o=n[c[e]];return a(t,(function(t){return i.d2l(t)*o}))}u.vectors=l(h(e.u,"xaxis"),h(e.v,"yaxis"),h(e.w,"zaxis"),e._len),u.positions=l(h(e.x,"xaxis"),h(e.y,"yaxis"),h(e.z,"zaxis"),e._len);var p=s(e);u.colormap=o(e),u.vertexIntensityBounds=[p.min/e._normMax,p.max/e._normMax],u.coneOffset=f[e.anchor],"scaled"===e.sizemode?u.coneSize=e.sizeref||.5:u.coneSize=e.sizeref&&e._normMax?e.sizeref/e._normMax:.5;var g=i(u),v=e.lightposition;return g.lightPosition=[v.x,v.y,v.z],g.ambient=e.lighting.ambient,g.diffuse=e.lighting.diffuse,g.specular=e.lighting.specular,g.roughness=e.lighting.roughness,g.fresnel=e.lighting.fresnel,g.opacity=e.opacity,e._pad=d[e.anchor]*g.vectorScale*g.coneScale*e._normMax,g}h.update=function(t){this.data=t;var e=p(this.scene,t);this.mesh.update(e)},h.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},t.exports=function(t,e){var r=t.glplot.gl,i=p(t,e),a=n(r,i),o=new u(t,e.uid);return o.mesh=a,o.data=e,a._trace=o,t.glplot.add(a),o}},function(t,e){t.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},function(t,e,r){t.exports=function(t,e){var r=i(t[0],t[1],t[2]),o=i(e[0],e[1],e[2]);n(r,r),n(o,o);var s=a(r,o);return s>1?0:Math.acos(s)};var i=r(1231),n=r(884),a=r(921)},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},function(t,e){t.exports=function(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t}},function(t,e,r){t.exports=function(t,e){var r=t[0],n=t[1],a=t[2],o=e[0],s=e[1],l=e[2];return Math.abs(r-o)<=i*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=i*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-l)<=i*Math.max(1,Math.abs(a),Math.abs(l))};var i=r(1229)},function(t,e){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},function(t,e){t.exports=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}},function(t,e,r){t.exports=r(1232)},function(t,e,r){t.exports=r(1233)},function(t,e,r){t.exports=r(1234)},function(t,e){t.exports=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}},function(t,e){t.exports=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},function(t,e){t.exports=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}},function(t,e){t.exports=function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t}},function(t,e,r){t.exports=r(1235)},function(t,e,r){t.exports=r(1236)},function(t,e,r){t.exports=r(1062)},function(t,e,r){t.exports=r(1237)},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},function(t,e){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},function(t,e){t.exports=function(t,e){e=e||1;var r=2*Math.random()*Math.PI,i=2*Math.random()-1,n=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t[2]=i*e,t}},function(t,e){t.exports=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=r[3]*i+r[7]*n+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*i+r[4]*n+r[8]*a+r[12])/o,t[1]=(r[1]*i+r[5]*n+r[9]*a+r[13])/o,t[2]=(r[2]*i+r[6]*n+r[10]*a+r[14])/o,t}},function(t,e){t.exports=function(t,e,r){var i=e[0],n=e[1],a=e[2];return t[0]=i*r[0]+n*r[3]+a*r[6],t[1]=i*r[1]+n*r[4]+a*r[7],t[2]=i*r[2]+n*r[5]+a*r[8],t}},function(t,e){t.exports=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=r[0],s=r[1],l=r[2],u=r[3],h=u*i+s*a-l*n,c=u*n+l*i-o*a,f=u*a+o*n-s*i,d=-o*i-s*n-l*a;return t[0]=h*u+d*-o+c*-l-f*-s,t[1]=c*u+d*-s+f*-o-h*-l,t[2]=f*u+d*-l+h*-s-c*-o,t}},function(t,e){t.exports=function(t,e,r,i){var n=r[1],a=r[2],o=e[1]-n,s=e[2]-a,l=Math.sin(i),u=Math.cos(i);return t[0]=e[0],t[1]=n+o*u-s*l,t[2]=a+o*l+s*u,t}},function(t,e){t.exports=function(t,e,r,i){var n=r[0],a=r[2],o=e[0]-n,s=e[2]-a,l=Math.sin(i),u=Math.cos(i);return t[0]=n+s*l+o*u,t[1]=e[1],t[2]=a+s*u-o*l,t}},function(t,e){t.exports=function(t,e,r,i){var n=r[0],a=r[1],o=e[0]-n,s=e[1]-a,l=Math.sin(i),u=Math.cos(i);return t[0]=n+o*u-s*l,t[1]=a+o*l+s*u,t[2]=e[2],t}},function(t,e,r){t.exports=function(t,e,r,n,a,o){var s,l;e||(e=3);r||(r=0);l=n?Math.min(n*e+r,t.length):t.length;for(s=r;s<l;s+=e)i[0]=t[s],i[1]=t[s+1],i[2]=t[s+2],a(i,i,o),t[s]=i[0],t[s+1]=i[1],t[s+2]=i[2];return t};var i=r(1230)()},function(t,e,r){var i=r(630),n=i("./triangle-vertex.glsl"),a=i("./triangle-fragment.glsl"),o=i("./pick-vertex.glsl"),s=i("./pick-fragment.glsl");e.meshShader={vertex:n,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},e.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},function(t,e,r){"use strict";var i=r(635),n=r(628),a=r(683),o=r(742),s=r(761),l=r(760),u=r(646),h=r(1065),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(t,e,r,i,n,a,o,s,l,u,h){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.pickShader=i,this.trianglePositions=n,this.triangleVectors=a,this.triangleColors=s,this.triangleUVs=l,this.triangleIds=o,this.triangleVAO=u,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=h,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=c,this._view=c,this._projection=c,this._resolution=[1,1]}var d=f.prototype;function p(t,e){var r=i(t,e.meshShader.vertex,e.meshShader.fragment,null,e.meshShader.attributes);return r.attributes.position.location=0,r.attributes.color.location=2,r.attributes.uv.location=3,r.attributes.vector.location=4,r}function g(t,e){var r=i(t,e.pickShader.vertex,e.pickShader.fragment,null,e.pickShader.attributes);return r.attributes.position.location=0,r.attributes.id.location=1,r.attributes.vector.location=4,r}d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(t){this.pickId=t},d.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"lightPosition"in t&&(this.lightPosition=t.lightPosition),"opacity"in t&&(this.opacity=t.opacity),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),void 0!==t.tubeScale&&(this.tubeScale=t.tubeScale),void 0!==t.vectorScale&&(this.vectorScale=t.vectorScale),void 0!==t.coneScale&&(this.coneScale=t.coneScale),void 0!==t.coneOffset&&(this.coneOffset=t.coneOffset),t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t){for(var e=h({colormap:t,nshades:256,format:"rgba"}),r=new Uint8Array(1024),i=0;i<256;++i){for(var n=e[i],a=0;a<3;++a)r[4*i+a]=n[a];r[4*i+3]=255*n[3]}return u(r,[256,256,4],[4,0,1])}(t.colormap)),this.texture.generateMipmap());var r=t.cells,i=t.positions,n=t.vectors;if(i&&r&&n){var a=[],o=[],s=[],l=[],c=[];this.cells=r,this.positions=i,this.vectors=n;var f=t.meshColor||[1,1,1,1],d=t.vertexIntensity,p=1/0,g=-1/0;if(d)if(t.vertexIntensityBounds)p=+t.vertexIntensityBounds[0],g=+t.vertexIntensityBounds[1];else for(var v=0;v<d.length;++v){var m=d[v];p=Math.min(p,m),g=Math.max(g,m)}else for(v=0;v<i.length;++v){m=i[v][2];p=Math.min(p,m),g=Math.max(g,m)}this.intensity=d||function(t){for(var e=t.length,r=new Array(e),i=0;i<e;++i)r[i]=t[i][2];return r}(i),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(v=0;v<i.length;++v)for(var y=i[v],x=0;x<3;++x)!isNaN(y[x])&&isFinite(y[x])&&(this.bounds[0][x]=Math.min(this.bounds[0][x],y[x]),this.bounds[1][x]=Math.max(this.bounds[1][x],y[x]));var b=0;t:for(v=0;v<r.length;++v){var _=r[v];switch(_.length){case 3:for(x=0;x<3;++x){y=i[A=_[x]];for(var w=0;w<3;++w)if(isNaN(y[w])||!isFinite(y[w]))continue t}for(x=0;x<3;++x){var A;y=i[A=_[2-x]];a.push(y[0],y[1],y[2],y[3]);var T=n[A];o.push(T[0],T[1],T[2],T[3]||0);var M,k=f;3===k.length?s.push(k[0],k[1],k[2],1):s.push(k[0],k[1],k[2],k[3]),M=d?[(d[A]-p)/(g-p),0]:[(y[2]-p)/(g-p),0],l.push(M[0],M[1]),c.push(v)}b+=1}}this.triangleCount=b,this.trianglePositions.update(a),this.triangleVectors.update(o),this.triangleColors.update(s),this.triangleUVs.update(l),this.triangleIds.update(new Uint32Array(c))}},d.drawTransparent=d.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||c,i=t.view||c,n=t.projection||c,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var u={model:r,view:i,projection:n,inverseModel:c.slice(),clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};u.inverseModel=l(u.inverseModel,u.model),e.disable(e.CULL_FACE),this.texture.bind(0);var h=new Array(16);s(h,u.view,u.model),s(h,u.projection,h),l(h,h);for(o=0;o<3;++o)u.eyePosition[o]=h[12+o]/h[15];var f=h[15];for(o=0;o<3;++o)f+=this.lightPosition[o]*h[4*o+3];for(o=0;o<3;++o){for(var d=h[12+o],p=0;p<3;++p)d+=h[4*p+o]*this.lightPosition[p];u.lightPosition[o]=d/f}if(this.triangleCount>0){var g=this.triShader;g.bind(),g.uniforms=u,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},d.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||c,i=t.view||c,n=t.projection||c,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(r),this._view=[].slice.call(i),this._projection=[].slice.call(n),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s={model:r,view:i,projection:n,clipBounds:a,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},l=this.pickShader;l.bind(),l.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},d.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],i=this.positions[r[1]].slice(0,3),n={position:i,dataCoordinate:i,index:Math.floor(r[1]/48)};return"cone"===this.traceType?n.index=Math.floor(r[1]/48):"streamtube"===this.traceType&&(n.intensity=this.intensity[r[1]],n.velocity=this.vectors[r[1]].slice(0,3),n.divergence=this.vectors[r[1]][3],n.index=e),n},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},t.exports=function(t,e,r){var i=r.shaders;1===arguments.length&&(t=(e=t).gl);var s=p(t,i),l=g(t,i),h=o(t,u(new Uint8Array([255,255,255,255]),[1,1,4]));h.generateMipmap(),h.minFilter=t.LINEAR_MIPMAP_LINEAR,h.magFilter=t.LINEAR;var c=n(t),d=n(t),v=n(t),m=n(t),y=n(t),x=a(t,[{buffer:c,type:t.FLOAT,size:4},{buffer:y,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:v,type:t.FLOAT,size:4},{buffer:m,type:t.FLOAT,size:2},{buffer:d,type:t.FLOAT,size:4}]),b=new f(t,h,s,l,c,d,y,v,m,x,r.traceType||"cone");return b.update(e),b}},function(t,e){t.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},function(t,e){t.exports=function(t,e,r){return t*(1-r)+e*r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";t.exports={plot:r(1538),attributes:r(1273),markerSymbols:r(1084),supplyDefaults:r(1566),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:r(1093),moduleType:"trace",name:"scatter3d",basePlotModule:r(759),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_3d",description:["The data visualized as scatter point or lines in 3D dimension","is set in `x`, `y`, `z`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","Projections are achieved via `projection`.","Surface fills are achieved via `surfaceaxis`."].join(" ")}}},function(t,e,r){"use strict";var i=r(1539),n=r(1541),a=r(1545),o=r(941),s=r(1044),l=r(6),u=r(662),h=r(693).formatColor,c=r(228),f=r(1272),d=r(1084),p=r(105),g=r(215).appendArrayPointValue,v=r(1565);function m(t,e){this.scene=t,this.uid=e,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var y=m.prototype;function x(t){return null==t?0:t.indexOf("left")>-1?-1:t.indexOf("right")>-1?1:0}function b(t){return null==t?0:t.indexOf("top")>-1?-1:t.indexOf("bottom")>-1?1:0}function _(t,e){return e(4*t)}function w(t){return d[t]}function A(t,e,r,i,n){var a=null;if(l.isArrayOrTypedArray(t)){a=[];for(var o=0;o<e;o++)void 0===t[o]?a[o]=i:a[o]=r(t[o],n)}else a=r(t,l.identity);return a}function T(t,e){var r,i,n,a,o,s,f=[],d=t.fullSceneLayout,m=t.dataScale,y=d.xaxis,T=d.yaxis,M=d.zaxis,k=e.marker,E=e.line,S=e.x||[],C=e.y||[],L=e.z||[],I=S.length,j=e.xcalendar,R=e.ycalendar,P=e.zcalendar;for(o=0;o<I;o++)r=y.d2l(S[o],0,j)*m[0],i=T.d2l(C[o],0,R)*m[1],n=M.d2l(L[o],0,P)*m[2],f[o]=[r,i,n];if(Array.isArray(e.text))s=e.text;else if(void 0!==e.text)for(s=new Array(I),o=0;o<I;o++)s[o]=e.text;function O(t,e){var r=d[t];return p.tickText(r,r.d2l(e),!0).text}var z=e.texttemplate;if(z){var N=t.fullLayout._d3locale,B=Array.isArray(z),F=B?Math.min(z.length,I):I,D=B?function(t){return z[t]}:function(){return z};for(s=new Array(F),o=0;o<F;o++){var U={x:S[o],y:C[o],z:L[o]},V={xLabel:O("xaxis",S[o]),yLabel:O("yaxis",C[o]),zLabel:O("zaxis",L[o])},X={};g(X,e,o);var G=e._meta||{};s[o]=l.texttemplateString(D(o),V,N,X,U,G)}}if(a={position:f,mode:e.mode,text:s},"line"in e&&(a.lineColor=h(E,1,I),a.lineWidth=E.width,a.lineDashes=E.dash),"marker"in e){var W=c(e);a.scatterColor=h(k,1,I),a.scatterSize=A(k.size,I,_,20,W),a.scatterMarker=A(k.symbol,I,w,"●"),a.scatterLineWidth=k.line.width,a.scatterLineColor=h(k.line,1,I),a.scatterAngle=0}"textposition"in e&&(a.textOffset=function(t){var e=[0,0];if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=[0,0],t[r]&&(e[r][0]=x(t[r]),e[r][1]=b(t[r]));else e[0]=x(t),e[1]=b(t);return e}(e.textposition),a.textColor=h(e.textfont,1,I),a.textSize=A(e.textfont.size,I,l.identity,12),a.textFont=e.textfont.family,a.textAngle=0);var H=["x","y","z"];for(a.project=[!1,!1,!1],a.projectScale=[1,1,1],a.projectOpacity=[1,1,1],o=0;o<3;++o){var q=e.projection[H[o]];(a.project[o]=q.show)&&(a.projectOpacity[o]=q.opacity,a.projectScale[o]=q.scale)}a.errorBounds=v(e,m,d);var Y=function(t){for(var e=[0,0,0],r=[[0,0,0],[0,0,0],[0,0,0]],i=[1,1,1],n=0;n<3;n++){var a=t[n];a&&!1!==a.copy_zstyle&&!1!==t[2].visible&&(a=t[2]),a&&a.visible&&(e[n]=a.width/2,r[n]=u(a.color),i[n]=a.thickness)}return{capSize:e,color:r,lineWidth:i}}([e.error_x,e.error_y,e.error_z]);return a.errorColor=Y.color,a.errorLineWidth=Y.lineWidth,a.errorCapSize=Y.capSize,a.delaunayAxis=e.surfaceaxis,a.delaunayColor=u(e.surfacecolor),a}function M(t){if(Array.isArray(t)){var e=t[0];return Array.isArray(e)&&(t=e),"rgb("+t.slice(0,3).map((function(t){return Math.round(255*t)}))+")"}return null}y.handlePick=function(t){if(t.object&&(t.object===this.linePlot||t.object===this.delaunayMesh||t.object===this.textMarkers||t.object===this.scatterPlot)){var e=t.index=t.data.index;return t.object.highlight&&t.object.highlight(null),this.scatterPlot&&(t.object=this.scatterPlot,this.scatterPlot.highlight(t.data)),t.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[e]||0===this.textLabels[e])&&(t.textLabel=this.textLabels[e]):t.textLabel=this.textLabels),t.traceCoordinate=[this.data.x[e],this.data.y[e],this.data.z[e]],!0}},y.update=function(t){var e,r,l,u,h=this.scene.glplot.gl,c=f.solid;this.data=t;var d=T(this.scene,t);"mode"in d&&(this.mode=d.mode),"lineDashes"in d&&d.lineDashes in f&&(c=f[d.lineDashes]),this.color=M(d.scatterColor)||M(d.lineColor),this.dataPoints=d.position,e={gl:this.scene.glplot.gl,position:d.position,color:d.lineColor,lineWidth:d.lineWidth||1,dashes:c[0],dashScale:c[1],opacity:t.opacity,connectGaps:t.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(e):(this.linePlot=i(e),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var p=t.opacity;if(t.marker&&t.marker.opacity&&(p*=t.marker.opacity),r={gl:this.scene.glplot.gl,position:d.position,color:d.scatterColor,size:d.scatterSize,glyph:d.scatterMarker,opacity:p,orthographic:!0,lineWidth:d.scatterLineWidth,lineColor:d.scatterLineColor,project:d.project,projectScale:d.projectScale,projectOpacity:d.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(r):(this.scatterPlot=n(r),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),u={gl:this.scene.glplot.gl,position:d.position,glyph:d.text,color:d.textColor,size:d.textSize,angle:d.textAngle,alignment:d.textOffset,font:d.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:t.opacity},this.textLabels=t.hovertext||t.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(u):(this.textMarkers=n(u),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),l={gl:this.scene.glplot.gl,position:d.position,color:d.errorColor,error:d.errorBounds,lineWidth:d.errorLineWidth,capSize:d.errorCapSize,opacity:t.opacity},this.errorBars?d.errorBounds?this.errorBars.update(l):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):d.errorBounds&&(this.errorBars=a(l),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),d.delaunayAxis>=0){var g=function(t,e,r){var i,n=(r+1)%3,a=(r+2)%3,o=[],l=[];for(i=0;i<t.length;++i){var u=t[i];!isNaN(u[n])&&isFinite(u[n])&&!isNaN(u[a])&&isFinite(u[a])&&(o.push([u[n],u[a]]),l.push(i))}var h=s(o);for(i=0;i<h.length;++i)for(var c=h[i],f=0;f<c.length;++f)c[f]=l[c[f]];return{positions:t,cells:h,meshColor:e}}(d.position,d.delaunayColor,d.delaunayAxis);g.opacity=t.opacity,this.delaunayMesh?this.delaunayMesh.update(g):(g.gl=h,this.delaunayMesh=o(g),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},y.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},t.exports=function(t,e){var r=new m(t,e.uid);return r.update(e),r}},function(t,e,r){"use strict";t.exports=function(t){var e=t.gl||t.scene&&t.scene.gl,r=c(e);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;var o=f(e);o.attributes.position.location=0,o.attributes.nextPosition.location=1,o.attributes.arcLength.location=2,o.attributes.lineWidth.location=3,o.attributes.color.location=4;for(var s=i(e),l=n(e,[{buffer:s,size:3,offset:0,stride:48},{buffer:s,size:3,offset:12,stride:48},{buffer:s,size:1,offset:24,stride:48},{buffer:s,size:1,offset:28,stride:48},{buffer:s,size:4,offset:32,stride:48}]),h=u(new Array(1024),[256,1,4]),d=0;d<1024;++d)h.data[d]=255;var p=a(e,h);p.wrap=e.REPEAT;var g=new m(e,r,o,s,l,p);return g.update(t),g};var i=r(628),n=r(683),a=r(742),o=new Uint8Array(4),s=new Float32Array(o.buffer);var l=r(639),u=r(646),h=r(1540),c=h.createShader,f=h.createPickShader,d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(t,e){for(var r=0,i=0;i<3;++i){var n=t[i]-e[i];r+=n*n}return Math.sqrt(r)}function g(t){for(var e=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],r=0;r<3;++r)e[0][r]=Math.max(t[0][r],e[0][r]),e[1][r]=Math.min(t[1][r],e[1][r]);return e}function v(t,e,r,i){this.arcLength=t,this.position=e,this.index=r,this.dataCoordinate=i}function m(t,e,r,i,n,a){this.gl=t,this.shader=e,this.pickShader=r,this.buffer=i,this.vao=n,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=a,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var y=m.prototype;y.isTransparent=function(){return this.hasAlpha},y.isOpaque=function(){return!this.hasAlpha},y.pickSlots=1,y.setPickBase=function(t){this.pickId=t},y.drawTransparent=y.draw=function(t){if(this.vertexCount){var e=this.gl,r=this.shader,i=this.vao;r.bind(),r.uniforms={model:t.model||d,view:t.view||d,projection:t.projection||d,clipBounds:g(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},i.bind(),i.draw(e.TRIANGLE_STRIP,this.vertexCount),i.unbind()}},y.drawPick=function(t){if(this.vertexCount){var e=this.gl,r=this.pickShader,i=this.vao;r.bind(),r.uniforms={model:t.model||d,view:t.view||d,projection:t.projection||d,pickId:this.pickId,clipBounds:g(this.clipBounds),screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},i.bind(),i.draw(e.TRIANGLE_STRIP,this.vertexCount),i.unbind()}},y.update=function(t){var e,r;this.dirty=!0;var i=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var n=[],a=[],o=[],s=0,h=0,c=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],f=t.position||t.positions;if(f){var d=t.color||t.colors||[0,0,0,1],g=t.lineWidth||1,v=!1;t:for(e=1;e<f.length;++e){var m,y,x,b=f[e-1],_=f[e];for(a.push(s),o.push(b.slice()),r=0;r<3;++r){if(isNaN(b[r])||isNaN(_[r])||!isFinite(b[r])||!isFinite(_[r])){if(!i&&n.length>0){for(var w=0;w<24;++w)n.push(n[n.length-12]);h+=2,v=!0}continue t}c[0][r]=Math.min(c[0][r],b[r],_[r]),c[1][r]=Math.max(c[1][r],b[r],_[r])}Array.isArray(d[0])?(m=d.length>e-1?d[e-1]:d.length>0?d[d.length-1]:[0,0,0,1],y=d.length>e?d[e]:d.length>0?d[d.length-1]:[0,0,0,1]):m=y=d,3===m.length&&(m=[m[0],m[1],m[2],1]),3===y.length&&(y=[y[0],y[1],y[2],1]),!this.hasAlpha&&m[3]<1&&(this.hasAlpha=!0),x=Array.isArray(g)?g.length>e-1?g[e-1]:g.length>0?g[g.length-1]:[0,0,0,1]:g;var A=s;if(s+=p(b,_),v){for(r=0;r<2;++r)n.push(b[0],b[1],b[2],_[0],_[1],_[2],A,x,m[0],m[1],m[2],m[3]);h+=2,v=!1}n.push(b[0],b[1],b[2],_[0],_[1],_[2],A,x,m[0],m[1],m[2],m[3],b[0],b[1],b[2],_[0],_[1],_[2],A,-x,m[0],m[1],m[2],m[3],_[0],_[1],_[2],b[0],b[1],b[2],s,-x,y[0],y[1],y[2],y[3],_[0],_[1],_[2],b[0],b[1],b[2],s,x,y[0],y[1],y[2],y[3]),h+=4}}if(this.buffer.update(n),a.push(s),o.push(f[f.length-1].slice()),this.bounds=c,this.vertexCount=h,this.points=o,this.arcLength=a,"dashes"in t){var T=t.dashes.slice();for(T.unshift(0),e=1;e<T.length;++e)T[e]=T[e-1]+T[e];var M=u(new Array(1024),[256,1,4]);for(e=0;e<256;++e){for(r=0;r<4;++r)M.set(e,0,r,0);1&l.le(T,T[T.length-1]*e/255)?M.set(e,0,0,0):M.set(e,0,0,255)}this.texture.setPixels(M)}},y.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},y.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=function(t,e,r,i){return o[0]=i,o[1]=r,o[2]=e,o[3]=t,s[0]}(t.value[0],t.value[1],t.value[2],0),r=l.le(this.arcLength,e);if(r<0)return null;if(r===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),r);for(var i=this.points[r],n=this.points[Math.min(r+1,this.points.length-1)],a=(e-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),u=1-a,h=[0,0,0],c=0;c<3;++c)h[c]=u*i[c]+a*n[c];var f=Math.min(a<.5?r:r+1,this.points.length-1);return new v(e,h,f,this.points[f])}},function(t,e,r){var i=r(630),n=r(635),a=i("../shaders/vertex.glsl"),o=i("../shaders/fragment.glsl"),s=i("../shaders/pick.glsl"),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];e.createShader=function(t){return n(t,a,o,null,l)},e.createPickShader=function(t){return n(t,a,s,null,l)}},function(t,e,r){"use strict";var i=r(267),n=r(628),a=r(683),o=r(625),s=r(761),l=r(1542),u=r(1543),h=r(1544),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(t,e){var r=t[0],i=t[1],n=t[2],a=t[3];return t[0]=e[0]*r+e[4]*i+e[8]*n+e[12]*a,t[1]=e[1]*r+e[5]*i+e[9]*n+e[13]*a,t[2]=e[2]*r+e[6]*i+e[10]*n+e[14]*a,t[3]=e[3]*r+e[7]*i+e[11]*n+e[15]*a,t}function d(t,e,r,i){return f(i,i),f(i,i),f(i,i)}function p(t,e){this.index=t,this.dataCoordinate=this.position=e}function g(t){return!0===t||t>1?1:t}function v(t,e,r,i,n,a,o,s,l,u,h,c){this.gl=t,this.pixelRatio=1,this.shader=e,this.orthoShader=r,this.projectShader=i,this.pointBuffer=n,this.colorBuffer=a,this.glyphBuffer=o,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=u,this.pickOrthoShader=h,this.pickProjectShader=c,this.points=[],this._selectResult=new p(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}t.exports=function(t){var e=t.gl,r=l.createPerspective(e),i=l.createOrtho(e),o=l.createProject(e),s=l.createPickPerspective(e),u=l.createPickOrtho(e),h=l.createPickProject(e),c=n(e),f=n(e),d=n(e),p=n(e),g=a(e,[{buffer:c,size:3,type:e.FLOAT},{buffer:f,size:4,type:e.FLOAT},{buffer:d,size:2,type:e.FLOAT},{buffer:p,size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),m=new v(e,r,i,o,c,f,d,p,g,s,u,h);return m.update(t),m};var m=v.prototype;m.pickSlots=1,m.setPickBase=function(t){this.pickId=t},m.isTransparent=function(){if(this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&this.projectHasAlpha)return!0;return!1},m.isOpaque=function(){if(!this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&!this.projectHasAlpha)return!0;return!1};var y=[0,0],x=[0,0,0],b=[0,0,0],_=[0,0,0,1],w=[0,0,0,1],A=c.slice(),T=[0,0,0],M=[[0,0,0],[0,0,0]];function k(t){return t[0]=t[1]=t[2]=0,t}function E(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,t}function S(t,e,r,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[r]=i,t}function C(t,e,r,i){var n,a=e.axesProject,o=e.gl,l=t.uniforms,u=r.model||c,h=r.view||c,f=r.projection||c,p=e.axesBounds,g=function(t){for(var e=M,r=0;r<2;++r)for(var i=0;i<3;++i)e[r][i]=Math.max(Math.min(t[r][i],1e8),-1e8);return e}(e.clipBounds);n=e.axes&&e.axes.lastCubeProps?e.axes.lastCubeProps.axis:[1,1,1],y[0]=2/o.drawingBufferWidth,y[1]=2/o.drawingBufferHeight,t.bind(),l.view=h,l.projection=f,l.screenSize=y,l.highlightId=e.highlightId,l.highlightScale=e.highlightScale,l.clipBounds=g,l.pickGroup=e.pickId/255,l.pixelRatio=i;for(var v=0;v<3;++v)if(a[v]){l.scale=e.projectScale[v],l.opacity=e.projectOpacity[v];for(var m=A,C=0;C<16;++C)m[C]=0;for(C=0;C<4;++C)m[5*C]=1;m[5*v]=0,n[v]<0?m[12+v]=p[0][v]:m[12+v]=p[1][v],s(m,u,m),l.model=m;var L=(v+1)%3,I=(v+2)%3,j=k(x),R=k(b);j[L]=1,R[I]=1;var P=d(0,0,0,E(_,j)),O=d(0,0,0,E(w,R));if(Math.abs(P[1])>Math.abs(O[1])){var z=P;P=O,O=z,z=j,j=R,R=z;var N=L;L=I,I=N}P[0]<0&&(j[L]=-1),O[1]>0&&(R[I]=-1);var B=0,F=0;for(C=0;C<4;++C)B+=Math.pow(u[4*L+C],2),F+=Math.pow(u[4*I+C],2);j[L]/=Math.sqrt(B),R[I]/=Math.sqrt(F),l.axes[0]=j,l.axes[1]=R,l.fragClipBounds[0]=S(T,g[0],v,-1e8),l.fragClipBounds[1]=S(T,g[1],v,1e8),e.vao.bind(),e.vao.draw(o.TRIANGLES,e.vertexCount),e.lineWidth>0&&(o.lineWidth(e.lineWidth*i),e.vao.draw(o.LINES,e.lineVertexCount,e.vertexCount)),e.vao.unbind()}}var L=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function I(t,e,r,i,n,a,o){var s=r.gl;if((a===r.projectHasAlpha||o)&&C(e,r,i,n),a===r.hasAlpha||o){t.bind();var l=t.uniforms;l.model=i.model||c,l.view=i.view||c,l.projection=i.projection||c,y[0]=2/s.drawingBufferWidth,y[1]=2/s.drawingBufferHeight,l.screenSize=y,l.highlightId=r.highlightId,l.highlightScale=r.highlightScale,l.fragClipBounds=L,l.clipBounds=r.axes.bounds,l.opacity=r.opacity,l.pickGroup=r.pickId/255,l.pixelRatio=n,r.vao.bind(),r.vao.draw(s.TRIANGLES,r.vertexCount),r.lineWidth>0&&(s.lineWidth(r.lineWidth*n),r.vao.draw(s.LINES,r.lineVertexCount,r.vertexCount)),r.vao.unbind()}}function j(t,e,r,n){var a;a=Array.isArray(t)?e<t.length?t[e]:void 0:t,a=h(a);var o=!0;i(a)&&(a="▼",o=!1);var s=u(a,r,n);return{mesh:s[0],lines:s[1],bounds:s[2],visible:o}}m.draw=function(t){I(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!1,!1)},m.drawTransparent=function(t){I(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!0,!1)},m.drawPick=function(t){I(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,t,1,!0,!0)},m.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[2]+(t.value[1]<<8)+(t.value[0]<<16);if(e>=this.pointCount||e<0)return null;var r=this.points[e],i=this._selectResult;i.index=e;for(var n=0;n<3;++n)i.position[n]=i.dataCoordinate[n]=r[n];return i},m.highlight=function(t){if(t){var e=t.index,r=255&e,i=e>>8&255,n=e>>16&255;this.highlightId=[r/255,i/255,n/255,0]}else this.highlightId=[1,1,1,1]},m.update=function(t){if("perspective"in(t=t||{})&&(this.useOrtho=!t.perspective),"orthographic"in t&&(this.useOrtho=!!t.orthographic),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"project"in t)if(Array.isArray(t.project))this.axesProject=t.project;else{var e=!!t.project;this.axesProject=[e,e,e]}if("projectScale"in t)if(Array.isArray(t.projectScale))this.projectScale=t.projectScale.slice();else{var r=+t.projectScale;this.projectScale=[r,r,r]}if(this.projectHasAlpha=!1,"projectOpacity"in t){if(Array.isArray(t.projectOpacity))this.projectOpacity=t.projectOpacity.slice();else{r=+t.projectOpacity;this.projectOpacity=[r,r,r]}for(var i=0;i<3;++i)this.projectOpacity[i]=g(this.projectOpacity[i]),this.projectOpacity[i]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in t&&(this.opacity=g(t.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var n,a,s=t.position,l=t.font||"normal",u=t.alignment||[0,0];if(2===u.length)n=u[0],a=u[1];else{n=[],a=[];for(i=0;i<u.length;++i)n[i]=u[i][0],a[i]=u[i][1]}var h=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0],f=t.glyph,d=t.color,p=t.size,v=t.angle,m=t.lineColor,y=-1,x=0,b=0,_=0;if(s.length){_=s.length;t:for(i=0;i<_;++i){for(var w=s[i],A=0;A<3;++A)if(isNaN(w[A])||!isFinite(w[A]))continue t;var T=(F=j(f,i,l,this.pixelRatio)).mesh,M=F.lines,k=F.bounds;x+=3*T.cells.length,b+=2*M.edges.length}}var E=x+b,S=o.mallocFloat(3*E),C=o.mallocFloat(4*E),L=o.mallocFloat(2*E),I=o.mallocUint32(E);if(E>0){var R=0,P=x,O=[0,0,0,1],z=[0,0,0,1],N=Array.isArray(d)&&Array.isArray(d[0]),B=Array.isArray(m)&&Array.isArray(m[0]);t:for(i=0;i<_;++i){y+=1;for(w=s[i],A=0;A<3;++A){if(isNaN(w[A])||!isFinite(w[A]))continue t;c[A]=Math.max(c[A],w[A]),h[A]=Math.min(h[A],w[A])}T=(F=j(f,i,l,this.pixelRatio)).mesh,M=F.lines,k=F.bounds;var F,D=F.visible;if(D)if(Array.isArray(d)){if(3===(U=N?i<d.length?d[i]:[0,0,0,0]:d).length){for(A=0;A<3;++A)O[A]=U[A];O[3]=1}else if(4===U.length){for(A=0;A<4;++A)O[A]=U[A];!this.hasAlpha&&U[3]<1&&(this.hasAlpha=!0)}}else O[0]=O[1]=O[2]=0,O[3]=1;else O=[1,1,1,0];if(D)if(Array.isArray(m)){var U;if(3===(U=B?i<m.length?m[i]:[0,0,0,0]:m).length){for(A=0;A<3;++A)z[A]=U[A];z[A]=1}else if(4===U.length){for(A=0;A<4;++A)z[A]=U[A];!this.hasAlpha&&U[3]<1&&(this.hasAlpha=!0)}}else z[0]=z[1]=z[2]=0,z[3]=1;else z=[1,1,1,0];var V=.5;D?Array.isArray(p)?V=i<p.length?+p[i]:12:p?V=+p:this.useOrtho&&(V=12):V=0;var X=0;Array.isArray(v)?X=i<v.length?+v[i]:0:v&&(X=+v);var G=Math.cos(X),W=Math.sin(X);for(w=s[i],A=0;A<3;++A)c[A]=Math.max(c[A],w[A]),h[A]=Math.min(h[A],w[A]);var H=n,q=a;H=0;Array.isArray(n)?H=i<n.length?n[i]:0:n&&(H=n);q=0;Array.isArray(a)?q=i<a.length?a[i]:0:a&&(q=a);var Y=[H*=H>0?1-k[0][0]:H<0?1+k[1][0]:1,q*=q>0?1-k[0][1]:q<0?1+k[1][1]:1],Z=T.cells||[],Q=T.positions||[];for(A=0;A<Z.length;++A)for(var K=Z[A],J=0;J<3;++J){for(var $=0;$<3;++$)S[3*R+$]=w[$];for($=0;$<4;++$)C[4*R+$]=O[$];I[R]=y;var tt=Q[K[J]];L[2*R]=V*(G*tt[0]-W*tt[1]+Y[0]),L[2*R+1]=V*(W*tt[0]+G*tt[1]+Y[1]),R+=1}for(Z=M.edges,Q=M.positions,A=0;A<Z.length;++A)for(K=Z[A],J=0;J<2;++J){for($=0;$<3;++$)S[3*P+$]=w[$];for($=0;$<4;++$)C[4*P+$]=z[$];I[P]=y;tt=Q[K[J]];L[2*P]=V*(G*tt[0]-W*tt[1]+Y[0]),L[2*P+1]=V*(W*tt[0]+G*tt[1]+Y[1]),P+=1}}}this.bounds=[h,c],this.points=s,this.pointCount=s.length,this.vertexCount=x,this.lineVertexCount=b,this.pointBuffer.update(S),this.colorBuffer.update(C),this.glyphBuffer.update(L),this.idBuffer.update(I),o.free(S),o.free(C),o.free(L),o.free(I)},m.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},function(t,e,r){var i=r(635),n=r(630),a=n("./perspective.glsl"),o=n("./orthographic.glsl"),s=n("./projection.glsl"),l=n("./draw-fragment.glsl"),u=n("./pick-fragment.glsl"),h=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],c={vertex:a,fragment:l,attributes:h},f={vertex:o,fragment:l,attributes:h},d={vertex:s,fragment:l,attributes:h},p={vertex:a,fragment:u,attributes:h},g={vertex:o,fragment:u,attributes:h},v={vertex:s,fragment:u,attributes:h};function m(t,e){var r=i(t,e),n=r.attributes;return n.position.location=0,n.color.location=1,n.glyph.location=2,n.id.location=3,r}e.createPerspective=function(t){return m(t,c)},e.createOrtho=function(t){return m(t,f)},e.createProject=function(t){return m(t,d)},e.createPickPerspective=function(t){return m(t,p)},e.createPickOrtho=function(t){return m(t,g)},e.createPickProject=function(t){return m(t,v)}},function(t,e,r){"use strict";var i=r(889);t.exports=function(t,e,r){var a=n[e];a||(a=n[e]={});if(t in a)return a[t];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},s=i(t,o);o.triangles=!1;var l,u,h=i(t,o);if(r&&1!==r){for(l=0;l<s.positions.length;++l)for(u=0;u<s.positions[l].length;++u)s.positions[l][u]/=r;for(l=0;l<h.positions.length;++l)for(u=0;u<h.positions[l].length;++u)h.positions[l][u]/=r}var c=[[1/0,1/0],[-1/0,-1/0]],f=h.positions.length;for(l=0;l<f;++l){var d=h.positions[l];for(u=0;u<2;++u)c[0][u]=Math.min(c[0][u],d[u]),c[1][u]=Math.max(c[1][u],d[u])}return a[t]=[s,h,c]};var n={}},function(t,e,r){"use strict";t.exports=function(t){return t||0===t?t.toString():""}},function(t,e,r){"use strict";t.exports=function(t){var e=t.gl,r=i(e),o=n(e,[{buffer:r,type:e.FLOAT,size:3,offset:0,stride:40},{buffer:r,type:e.FLOAT,size:4,offset:12,stride:40},{buffer:r,type:e.FLOAT,size:3,offset:28,stride:40}]),l=a(e);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.offset.location=2;var u=new s(e,r,o,l);return u.update(t),u};var i=r(628),n=r(683),a=r(1546),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,r,i){this.gl=t,this.shader=i,this.buffer=e,this.vao=r,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var l=s.prototype;function u(t,e){for(var r=0;r<3;++r)t[0][r]=Math.min(t[0][r],e[r]),t[1][r]=Math.max(t[1][r],e[r])}l.isOpaque=function(){return!this.hasAlpha},l.isTransparent=function(){return this.hasAlpha},l.drawTransparent=l.draw=function(t){var e=this.gl,r=this.shader.uniforms;this.shader.bind();var i=r.view=t.view||o,n=r.projection=t.projection||o;r.model=t.model||o,r.clipBounds=this.clipBounds,r.opacity=this.opacity;var a=i[12],s=i[13],l=i[14],u=i[15],h=(t._ortho||!1?2:1)*this.pixelRatio*(n[3]*a+n[7]*s+n[11]*l+n[15]*u)/e.drawingBufferHeight;this.vao.bind();for(var c=0;c<3;++c)e.lineWidth(this.lineWidth[c]*this.pixelRatio),r.capSize=this.capSize[c]*h,this.lineCount[c]&&e.drawArrays(e.LINES,this.lineOffset[c],this.lineCount[c]);this.vao.unbind()};var h=function(){for(var t=new Array(3),e=0;e<3;++e){for(var r=[],i=1;i<=2;++i)for(var n=-1;n<=1;n+=2){var a=[0,0,0];a[(i+e)%3]=n,r.push(a)}t[e]=r}return t}();function c(t,e,r,i){for(var n=h[i],a=0;a<n.length;++a){var o=n[a];t.push(e[0],e[1],e[2],r[0],r[1],r[2],r[3],o[0],o[1],o[2])}return n.length}l.update=function(t){"lineWidth"in(t=t||{})&&(this.lineWidth=t.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in t&&(this.capSize=t.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var e=t.color||[[0,0,0],[0,0,0],[0,0,0]],r=t.position,i=t.error;if(Array.isArray(e[0])||(e=[e,e,e]),r&&i){var n=[],a=r.length,o=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=o;t:for(var l=0;l<a;++l){for(var h=r[l],f=0;f<3;++f)if(isNaN(h[f])||!isFinite(h[f]))continue t;var d=i[l],p=e[s];if(Array.isArray(p[0])&&(p=e[l]),3===p.length?p=[p[0],p[1],p[2],1]:4===p.length&&(p=[p[0],p[1],p[2],p[3]],!this.hasAlpha&&p[3]<1&&(this.hasAlpha=!0)),!isNaN(d[0][s])&&!isNaN(d[1][s])){var g;if(d[0][s]<0)(g=h.slice())[s]+=d[0][s],n.push(h[0],h[1],h[2],p[0],p[1],p[2],p[3],0,0,0,g[0],g[1],g[2],p[0],p[1],p[2],p[3],0,0,0),u(this.bounds,g),o+=2+c(n,g,p,s);if(d[1][s]>0)(g=h.slice())[s]+=d[1][s],n.push(h[0],h[1],h[2],p[0],p[1],p[2],p[3],0,0,0,g[0],g[1],g[2],p[0],p[1],p[2],p[3],0,0,0),u(this.bounds,g),o+=2+c(n,g,p,s)}}this.lineCount[s]=o-this.lineOffset[s]}this.buffer.update(n)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},function(t,e,r){"use strict";var i=r(630),n=r(635),a=i("./vertex.glsl"),o=i("./fragment.glsl");t.exports=function(t){return n(t,a,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},function(t,e){e.vertexNormals=function(t,e,r){for(var i=e.length,n=new Array(i),a=void 0===r?1e-6:r,o=0;o<i;++o)n[o]=[0,0,0];for(o=0;o<t.length;++o)for(var s=t[o],l=0,u=s[s.length-1],h=s[0],c=0;c<s.length;++c){l=u,u=h,h=s[(c+1)%s.length];for(var f=e[l],d=e[u],p=e[h],g=new Array(3),v=0,m=new Array(3),y=0,x=0;x<3;++x)g[x]=f[x]-d[x],v+=g[x]*g[x],m[x]=p[x]-d[x],y+=m[x]*m[x];if(v*y>a){var b=n[u],_=1/Math.sqrt(v*y);for(x=0;x<3;++x){var w=(x+1)%3,A=(x+2)%3;b[x]+=_*(m[w]*g[A]-m[A]*g[w])}}}for(o=0;o<i;++o){b=n[o];var T=0;for(x=0;x<3;++x)T+=b[x]*b[x];if(T>a)for(_=1/Math.sqrt(T),x=0;x<3;++x)b[x]*=_;else for(x=0;x<3;++x)b[x]=0}return n},e.faceNormals=function(t,e,r){for(var i=t.length,n=new Array(i),a=void 0===r?1e-6:r,o=0;o<i;++o){for(var s=t[o],l=new Array(3),u=0;u<3;++u)l[u]=e[s[u]];var h=new Array(3),c=new Array(3);for(u=0;u<3;++u)h[u]=l[1][u]-l[0][u],c[u]=l[2][u]-l[0][u];var f=new Array(3),d=0;for(u=0;u<3;++u){var p=(u+1)%3,g=(u+2)%3;f[u]=h[p]*c[g]-h[g]*c[p],d+=f[u]*f[u]}d=d>a?1/Math.sqrt(d):0;for(u=0;u<3;++u)f[u]*=d;n[o]=f}return n}},function(t,e,r){"use strict";t.exports=function(t,e,r,s){r=r||0,void 0===s&&(s=function(t){for(var e=t.length,r=0,i=0;i<e;++i)r=0|Math.max(r,t[i].length);return r-1}(t));if(0===t.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var l=function(t,e){for(var r=t.length,i=n.mallocUint8(r),a=0;a<r;++a)i[a]=t[a]<e|0;return i}(e,+r),u=function(t,e){for(var r=t.length,o=e*(e+1)/2*r|0,s=n.mallocUint32(2*o),l=0,u=0;u<r;++u)for(var h=t[u],c=(e=h.length,0);c<e;++c)for(var f=0;f<c;++f){var d=h[f],p=h[c];s[l++]=0|Math.min(d,p),s[l++]=0|Math.max(d,p)}a(i(s,[l/2|0,2]));var g=2;for(u=2;u<l;u+=2)s[u-2]===s[u]&&s[u-1]===s[u+1]||(s[g++]=s[u],s[g++]=s[u+1]);return i(s,[g/2|0,2])}(t,s),h=function(t,e,r,a){for(var o=t.data,s=t.shape[0],l=n.mallocDouble(s),u=0,h=0;h<s;++h){var c=o[2*h],f=o[2*h+1];if(r[c]!==r[f]){var d=e[c],p=e[f];o[2*u]=c,o[2*u+1]=f,l[u++]=(p-a)/(p-d)}}return t.shape[0]=u,i(l,[u])}(u,e,l,+r),c=function(t,e){var r=n.mallocInt32(2*e),i=t.shape[0],a=t.data;r[0]=0;for(var o=0,s=0;s<i;++s){var l=a[2*s];if(l!==o){for(r[2*o+1]=s;++o<l;)r[2*o]=s,r[2*o+1]=s;r[2*o]=s}}r[2*o+1]=i;for(;++o<e;)r[2*o]=r[2*o+1]=i;return r}(u,0|e.length),f=o(s)(t,u.data,c,l),d=function(t){for(var e=0|t.shape[0],r=t.data,i=new Array(e),n=0;n<e;++n)i[n]=[r[2*n],r[2*n+1]];return i}(u),p=[].slice.call(h.data,0,h.shape[0]);return n.free(l),n.free(u.data),n.free(h.data),n.free(c),{cells:f,vertexIds:d,vertexWeights:p}};var i=r(646),n=r(625),a=r(1549),o=r(1551)},function(t,e,r){"use strict";var i=r(1550),n={};t.exports=function(t){var e=t.order,r=t.dtype,a=[e,r].join(":"),o=n[a];return o||(n[a]=o=i(e,r)),o(t),t}},function(t,e,r){"use strict";var i=r(625),n=32;function a(t){switch(t){case"uint8":return[i.mallocUint8,i.freeUint8];case"uint16":return[i.mallocUint16,i.freeUint16];case"uint32":return[i.mallocUint32,i.freeUint32];case"int8":return[i.mallocInt8,i.freeInt8];case"int16":return[i.mallocInt16,i.freeInt16];case"int32":return[i.mallocInt32,i.freeInt32];case"float32":return[i.mallocFloat,i.freeFloat];case"float64":return[i.mallocDouble,i.freeDouble];default:return null}}function o(t){for(var e=[],r=0;r<t;++r)e.push("s"+r);for(r=0;r<t;++r)e.push("n"+r);for(r=1;r<t;++r)e.push("d"+r);for(r=1;r<t;++r)e.push("e"+r);for(r=1;r<t;++r)e.push("f"+r);return e}t.exports=function(t,e){var r=["'use strict'"],i=["ndarraySortWrapper",t.join("d"),e].join("");r.push(["function ",i,"(",["array"].join(","),"){"].join(""));for(var s=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],l=0;l<t.length;++l)s.push(["s",l,"=stride[",l,"]|0,n",l,"=shape[",l,"]|0"].join(""));var u=new Array(t.length),h=[];for(l=0;l<t.length;++l){0!==(d=t[l])&&(0===h.length?u[d]="1":u[d]=h.join("*"),h.push("n"+d))}var c=-1,f=-1;for(l=0;l<t.length;++l){var d,p=t[l];0!==p&&(c>0?s.push(["d",p,"=s",p,"-d",c,"*n",c].join("")):s.push(["d",p,"=s",p].join("")),c=p),0!==(d=t.length-1-l)&&(f>0?s.push(["e",d,"=s",d,"-e",f,"*n",f,",f",d,"=",u[d],"-f",f,"*n",f].join("")):s.push(["e",d,"=s",d,",f",d,"=",u[d]].join("")),f=d)}r.push("var "+s.join(","));var g=["0","n0-1","data","offset"].concat(o(t.length));r.push(["if(n0<=",n,"){","insertionSort(",g.join(","),")}else{","quickSort(",g.join(","),")}"].join("")),r.push("}return "+i);var v=new Function("insertionSort","quickSort",r.join("\n")),m=function(t,e){var r=["'use strict'"],i=["ndarrayInsertionSort",t.join("d"),e].join(""),n=["left","right","data","offset"].concat(o(t.length)),s=a(e),l=["i,j,cptr,ptr=left*s0+offset"];if(t.length>1){for(var u=[],h=1;h<t.length;++h)l.push("i"+h),u.push("n"+h);s?l.push("scratch=malloc("+u.join("*")+")"):l.push("scratch=new Array("+u.join("*")+")"),l.push("dptr","sptr","a","b")}else l.push("scratch");function c(t){return"generic"===e?["data.get(",t,")"].join(""):["data[",t,"]"].join("")}function f(t,r){return"generic"===e?["data.set(",t,",",r,")"].join(""):["data[",t,"]=",r].join("")}if(r.push(["function ",i,"(",n.join(","),"){var ",l.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),t.length>1){r.push("dptr=0;sptr=ptr");for(h=t.length-1;h>=0;--h){0!==(d=t[h])&&r.push(["for(i",d,"=0;i",d,"<n",d,";++i",d,"){"].join(""))}r.push("scratch[dptr++]=",c("sptr"));for(h=0;h<t.length;++h){0!==(d=t[h])&&r.push("sptr+=d"+d,"}")}r.push("__g:while(j--\x3eleft){","dptr=0","sptr=cptr-s0");for(h=1;h<t.length;++h)1===h&&r.push("__l:"),r.push(["for(i",h,"=0;i",h,"<n",h,";++i",h,"){"].join(""));r.push(["a=",c("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(h=t.length-1;h>=1;--h)r.push("sptr+=e"+h,"dptr+=f"+h,"}");r.push("dptr=cptr;sptr=cptr-s0");for(h=t.length-1;h>=0;--h){0!==(d=t[h])&&r.push(["for(i",d,"=0;i",d,"<n",d,";++i",d,"){"].join(""))}r.push(f("dptr",c("sptr")));for(h=0;h<t.length;++h){0!==(d=t[h])&&r.push(["dptr+=d",d,";sptr+=d",d].join(""),"}")}r.push("cptr-=s0\n}"),r.push("dptr=cptr;sptr=0");for(h=t.length-1;h>=0;--h){0!==(d=t[h])&&r.push(["for(i",d,"=0;i",d,"<n",d,";++i",d,"){"].join(""))}r.push(f("dptr","scratch[sptr++]"));for(h=0;h<t.length;++h){var d;0!==(d=t[h])&&r.push("dptr+=d"+d,"}")}}else r.push("scratch="+c("ptr"),"while((j--\x3eleft)&&("+c("cptr-s0")+">scratch)){",f("cptr",c("cptr-s0")),"cptr-=s0","}",f("cptr","scratch"));return r.push("}"),t.length>1&&s&&r.push("free(scratch)"),r.push("} return "+i),s?new Function("malloc","free",r.join("\n"))(s[0],s[1]):new Function(r.join("\n"))()}(t,e),y=function(t,e,r){var i=["'use strict'"],s=["ndarrayQuickSort",t.join("d"),e].join(""),l=["left","right","data","offset"].concat(o(t.length)),u=a(e),h=0;i.push(["function ",s,"(",l.join(","),"){"].join(""));var c=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(t.length>1){for(var f=[],d=1;d<t.length;++d)f.push("n"+d),c.push("i"+d);for(d=0;d<8;++d)c.push("b_ptr"+d);c.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+f.join("*")),u?c.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):c.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else c.push("pivot1","pivot2");function p(t){return["(offset+",t,"*s0)"].join("")}function g(t){return"generic"===e?["data.get(",t,")"].join(""):["data[",t,"]"].join("")}function v(t,r){return"generic"===e?["data.set(",t,",",r,")"].join(""):["data[",t,"]=",r].join("")}function m(e,r,n){if(1===e.length)i.push("ptr0="+p(e[0]));else for(var a=0;a<e.length;++a)i.push(["b_ptr",a,"=s0*",e[a]].join(""));r&&i.push("pivot_ptr=0"),i.push("ptr_shift=offset");for(a=t.length-1;a>=0;--a){0!==(o=t[a])&&i.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""))}if(e.length>1)for(a=0;a<e.length;++a)i.push(["ptr",a,"=b_ptr",a,"+ptr_shift"].join(""));i.push(n),r&&i.push("++pivot_ptr");for(a=0;a<t.length;++a){var o;0!==(o=t[a])&&(e.length>1?i.push("ptr_shift+=d"+o):i.push("ptr0+=d"+o),i.push("}"))}}function y(e,r,n,a){if(1===r.length)i.push("ptr0="+p(r[0]));else{for(var o=0;o<r.length;++o)i.push(["b_ptr",o,"=s0*",r[o]].join(""));i.push("ptr_shift=offset")}n&&i.push("pivot_ptr=0"),e&&i.push(e+":");for(o=1;o<t.length;++o)i.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""));if(r.length>1)for(o=0;o<r.length;++o)i.push(["ptr",o,"=b_ptr",o,"+ptr_shift"].join(""));i.push(a);for(o=t.length-1;o>=1;--o)n&&i.push("pivot_ptr+=f"+o),r.length>1?i.push("ptr_shift+=e"+o):i.push("ptr0+=e"+o),i.push("}")}function x(){t.length>1&&u&&i.push("free(pivot1)","free(pivot2)")}function b(e,r){var n="el"+e,a="el"+r;if(t.length>1){var o="__l"+ ++h;y(o,[n,a],!1,["comp=",g("ptr0"),"-",g("ptr1"),"\n","if(comp>0){tmp0=",n,";",n,"=",a,";",a,"=tmp0;break ",o,"}\n","if(comp<0){break ",o,"}"].join(""))}else i.push(["if(",g(p(n)),">",g(p(a)),"){tmp0=",n,";",n,"=",a,";",a,"=tmp0}"].join(""))}function _(e,r){t.length>1?m([e,r],!1,v("ptr0",g("ptr1"))):i.push(v(p(e),g(p(r))))}function w(e,r,n){if(t.length>1){var a="__l"+ ++h;y(a,[r],!0,[e,"=",g("ptr0"),"-pivot",n,"[pivot_ptr]\n","if(",e,"!==0){break ",a,"}"].join(""))}else i.push([e,"=",g(p(r)),"-pivot",n].join(""))}function A(e,r){t.length>1?m([e,r],!1,["tmp=",g("ptr0"),"\n",v("ptr0",g("ptr1")),"\n",v("ptr1","tmp")].join("")):i.push(["ptr0=",p(e),"\n","ptr1=",p(r),"\n","tmp=",g("ptr0"),"\n",v("ptr0",g("ptr1")),"\n",v("ptr1","tmp")].join(""))}function T(e,r,n){t.length>1?(m([e,r,n],!1,["tmp=",g("ptr0"),"\n",v("ptr0",g("ptr1")),"\n",v("ptr1",g("ptr2")),"\n",v("ptr2","tmp")].join("")),i.push("++"+r,"--"+n)):i.push(["ptr0=",p(e),"\n","ptr1=",p(r),"\n","ptr2=",p(n),"\n","++",r,"\n","--",n,"\n","tmp=",g("ptr0"),"\n",v("ptr0",g("ptr1")),"\n",v("ptr1",g("ptr2")),"\n",v("ptr2","tmp")].join(""))}function M(t,e){A(t,e),i.push("--"+e)}function k(e,r,n){t.length>1?m([e,r],!0,[v("ptr0",g("ptr1")),"\n",v("ptr1",["pivot",n,"[pivot_ptr]"].join(""))].join("")):i.push(v(p(e),g(p(r))),v(p(r),"pivot"+n))}function E(e,r){i.push(["if((",r,"-",e,")<=",n,"){\n","insertionSort(",e,",",r,",data,offset,",o(t.length).join(","),")\n","}else{\n",s,"(",e,",",r,",data,offset,",o(t.length).join(","),")\n","}"].join(""))}function S(e,r,n){t.length>1?(i.push(["__l",++h,":while(true){"].join("")),m([e],!0,["if(",g("ptr0"),"!==pivot",r,"[pivot_ptr]){break __l",h,"}"].join("")),i.push(n,"}")):i.push(["while(",g(p(e)),"===pivot",r,"){",n,"}"].join(""))}return i.push("var "+c.join(",")),b(1,2),b(4,5),b(1,3),b(2,3),b(1,4),b(3,4),b(2,5),b(2,3),b(4,5),t.length>1?m(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",g("ptr1"),"\n","pivot2[pivot_ptr]=",g("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",g("ptr0"),"\n","y=",g("ptr2"),"\n","z=",g("ptr4"),"\n",v("ptr5","x"),"\n",v("ptr6","y"),"\n",v("ptr7","z")].join("")):i.push(["pivot1=",g(p("el2")),"\n","pivot2=",g(p("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",g(p("el1")),"\n","y=",g(p("el3")),"\n","z=",g(p("el5")),"\n",v(p("index1"),"x"),"\n",v(p("index3"),"y"),"\n",v(p("index5"),"z")].join("")),_("index2","left"),_("index4","right"),i.push("if(pivots_are_equal){"),i.push("for(k=less;k<=great;++k){"),w("comp","k",1),i.push("if(comp===0){continue}"),i.push("if(comp<0){"),i.push("if(k!==less){"),A("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),i.push("while(true){"),w("comp","great",1),i.push("if(comp>0){"),i.push("great--"),i.push("}else if(comp<0){"),T("k","less","great"),i.push("break"),i.push("}else{"),M("k","great"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}else{"),i.push("for(k=less;k<=great;++k){"),w("comp_pivot1","k",1),i.push("if(comp_pivot1<0){"),i.push("if(k!==less){"),A("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),w("comp_pivot2","k",2),i.push("if(comp_pivot2>0){"),i.push("while(true){"),w("comp","great",2),i.push("if(comp>0){"),i.push("if(--great<k){break}"),i.push("continue"),i.push("}else{"),w("comp","great",1),i.push("if(comp<0){"),T("k","less","great"),i.push("}else{"),M("k","great"),i.push("}"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),k("left","(less-1)",1),k("right","(great+1)",2),E("left","(less-2)"),E("(great+2)","right"),i.push("if(pivots_are_equal){"),x(),i.push("return"),i.push("}"),i.push("if(less<index1&&great>index5){"),S("less",1,"++less"),S("great",2,"--great"),i.push("for(k=less;k<=great;++k){"),w("comp_pivot1","k",1),i.push("if(comp_pivot1===0){"),i.push("if(k!==less){"),A("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),w("comp_pivot2","k",2),i.push("if(comp_pivot2===0){"),i.push("while(true){"),w("comp","great",2),i.push("if(comp===0){"),i.push("if(--great<k){break}"),i.push("continue"),i.push("}else{"),w("comp","great",1),i.push("if(comp<0){"),T("k","less","great"),i.push("}else{"),M("k","great"),i.push("}"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),x(),E("less","great"),i.push("}return "+s),t.length>1&&u?new Function("insertionSort","malloc","free",i.join("\n"))(r,u[0],u[1]):new Function("insertionSort",i.join("\n"))(r)}(t,e,m);return v(m,y)}},function(t,e,r){"use strict";t.exports=function(t){var e=a[t];e||(e=a[t]=function(t){var e=0,r=new Array(t+1);r[0]=[[]];for(var a=1;a<=t;++a)for(var o=r[a]=n(a),s=0;s<o.length;++s)e=Math.max(e,o[a].length);var l=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",t,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];function u(t){if(!(t.length<=0)){l.push("R.push(");for(var e=0;e<t.length;++e){var r=t[e];e>0&&l.push(","),l.push("[");for(var i=0;i<r.length;++i){var n=r[i];i>0&&l.push(","),l.push("B(C,E,c[",n[0],"],c[",n[1],"])")}l.push("]")}l.push(");")}}for(a=t+1;a>1;--a){a<t+1&&l.push("else "),l.push("if(l===",a,"){");var h=[];for(s=0;s<a;++s)h.push("(S[c["+s+"]]<<"+s+")");l.push("var M=",h.join("+"),";if(M===0||M===",(1<<a)-1,"){continue}switch(M){");for(o=r[a-1],s=0;s<o.length;++s)l.push("case ",s,":"),u(o[s]),l.push("break;");l.push("}}")}return l.push("}return R;};return getContour",t,"d"),new Function("pool",l.join(""))(i)}(t));return e};var i=r(625),n=r(1552),a={}},function(t,e,r){"use strict";t.exports=function(t){for(var e=1<<t+1,r=new Array(e),i=0;i<e;++i)r[i]=a(t,i);return r};var i=r(1270);function n(t,e,r){for(var i=new Array(t),n=0;n<t;++n)i[n]=0,n===e&&(i[n]+=.5),n===r&&(i[n]+=.5);return i}function a(t,e){if(0===e||e===(1<<t+1)-1)return[];for(var r=[],a=[],o=0;o<=t;++o)if(e&1<<o){r.push(n(t,o-1,o-1)),a.push(null);for(var s=0;s<=t;++s)~e&1<<s&&(r.push(n(t,o-1,s-1)),a.push([o,s]))}var l=i(r),u=[];t:for(o=0;o<l.length;++o){var h=l[o],c=[];for(s=0;s<h.length;++s){if(!a[h[s]])continue t;c.push(a[h[s]].slice())}u.push(c)}return u}},function(t,e,r){"use strict";t.exports=function(t){for(var e=0,r=0,i=1;i<t.length;++i)t[i][0]<t[e][0]&&(e=i),t[i][0]>t[r][0]&&(r=i);return e<r?[[e],[r]]:e>r?[[r],[e]]:[[e]]}},function(t,e,r){"use strict";t.exports=function(t){var e=i(t),r=e.length;if(r<=2)return[];for(var n=new Array(r),a=e[r-1],o=0;o<r;++o){var s=e[o];n[o]=[a,s],a=s}return n};var i=r(1555)},function(t,e,r){"use strict";t.exports=function(t){var e=t.length;if(e<3){for(var r=new Array(e),n=0;n<e;++n)r[n]=n;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}var a=new Array(e);for(n=0;n<e;++n)a[n]=n;a.sort((function(e,r){var i=t[e][0]-t[r][0];return i||t[e][1]-t[r][1]}));var o=[a[0],a[1]],s=[a[0],a[1]];for(n=2;n<e;++n){for(var l=a[n],u=t[l],h=o.length;h>1&&i(t[o[h-2]],t[o[h-1]],u)<=0;)h-=1,o.pop();for(o.push(l),h=s.length;h>1&&i(t[s[h-2]],t[s[h-1]],u)>=0;)h-=1,s.pop();s.push(l)}r=new Array(s.length+o.length-2);for(var c=0,f=(n=0,o.length);n<f;++n)r[c++]=o[n];for(var d=s.length-2;d>0;--d)r[c++]=s[d];return r};var i=r(634)[3]},function(t,e,r){"use strict";t.exports=function(t,e){try{return i(t,!0)}catch(o){var r=n(t);if(r.length<=e)return[];var a=function(t,e){for(var r=t.length,i=new Array(r),n=0;n<e.length;++n)i[n]=t[e[n]];var a=e.length;for(n=0;n<r;++n)e.indexOf(n)<0&&(i[a++]=t[n]);return i}(t,r);return function(t,e){for(var r=t.length,i=e.length,n=0;n<r;++n)for(var a=t[n],o=0;o<a.length;++o){var s=a[o];if(s<i)a[o]=e[s];else{s-=i;for(var l=0;l<i;++l)s>=e[l]&&(s+=1);a[o]=s}}return t}(i(a,!0),r)}};var i=r(1199),n=r(1558)},function(t,e,r){"use strict";var i=r(643),n=r(897);function a(t,e){var r=t.length,i=t.length-e.length,n=Math.min;if(i)return i;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return(s=t[0]+t[1]-e[0]-e[1])||n(t[0],t[1])-n(e[0],e[1]);case 3:var a=t[0]+t[1],o=e[0]+e[1];if(s=a+t[2]-(o+e[2]))return s;var s,l=n(t[0],t[1]),u=n(e[0],e[1]);return(s=n(l,t[2])-n(u,e[2]))||n(l+t[2],a)-n(u+e[2],o);default:var h=t.slice(0);h.sort();var c=e.slice(0);c.sort();for(var f=0;f<r;++f)if(i=h[f]-c[f])return i;return 0}}function o(t,e){return a(t[0],e[0])}function s(t,e){if(e){for(var r=t.length,i=new Array(r),n=0;n<r;++n)i[n]=[t[n],e[n]];i.sort(o);for(n=0;n<r;++n)t[n]=i[n][0],e[n]=i[n][1];return t}return t.sort(a),t}function l(t){if(0===t.length)return[];for(var e=1,r=t.length,i=1;i<r;++i){var n=t[i];if(a(n,t[i-1])){if(i===e){e++;continue}t[e++]=n}}return t.length=e,t}function u(t,e){for(var r=0,i=t.length-1,n=-1;r<=i;){var o=r+i>>1,s=a(t[o],e);s<=0?(0===s&&(n=o),r=o+1):s>0&&(i=o-1)}return n}function h(t,e){for(var r=new Array(t.length),n=0,o=r.length;n<o;++n)r[n]=[];for(var s=[],l=(n=0,e.length);n<l;++n)for(var h=e[n],c=h.length,f=1,d=1<<c;f<d;++f){s.length=i.popCount(f);for(var p=0,g=0;g<c;++g)f&1<<g&&(s[p++]=h[g]);var v=u(t,s);if(!(v<0))for(;r[v++].push(n),!(v>=t.length||0!==a(t[v],s)););}return r}function c(t,e){if(e<0)return[];for(var r=[],n=(1<<e+1)-1,a=0;a<t.length;++a)for(var o=t[a],l=n;l<1<<o.length;l=i.nextCombination(l)){for(var u=new Array(e+1),h=0,c=0;c<o.length;++c)l&1<<c&&(u[h++]=o[c]);r.push(u)}return s(r)}e.dimension=function(t){for(var e=0,r=Math.max,i=0,n=t.length;i<n;++i)e=r(e,t[i].length);return e-1},e.countVertices=function(t){for(var e=-1,r=Math.max,i=0,n=t.length;i<n;++i)for(var a=t[i],o=0,s=a.length;o<s;++o)e=r(e,a[o]);return e+1},e.cloneCells=function(t){for(var e=new Array(t.length),r=0,i=t.length;r<i;++r)e[r]=t[r].slice(0);return e},e.compareCells=a,e.normalize=s,e.unique=l,e.findCell=u,e.incidence=h,e.dual=function(t,e){if(!e)return h(l(c(t,0)),t);for(var r=new Array(e),i=0;i<e;++i)r[i]=[];i=0;for(var n=t.length;i<n;++i)for(var a=t[i],o=0,s=a.length;o<s;++o)r[a[o]].push(i);return r},e.explode=function(t){for(var e=[],r=0,i=t.length;r<i;++r)for(var n=t[r],a=0|n.length,o=1,l=1<<a;o<l;++o){for(var u=[],h=0;h<a;++h)o>>>h&1&&u.push(n[h]);e.push(u)}return s(e)},e.skeleton=c,e.boundary=function(t){for(var e=[],r=0,i=t.length;r<i;++r)for(var n=t[r],a=0,o=n.length;a<o;++a){for(var l=new Array(n.length-1),u=0,h=0;u<o;++u)u!==a&&(l[h++]=n[u]);e.push(l)}return s(e)},e.connectedComponents=function(t,e){return e?function(t,e){for(var r=new n(e),i=0;i<t.length;++i)for(var a=t[i],o=0;o<a.length;++o)for(var s=o+1;s<a.length;++s)r.link(a[o],a[s]);var l=[],u=r.ranks;for(i=0;i<u.length;++i)u[i]=-1;for(i=0;i<t.length;++i){var h=r.find(t[i][0]);u[h]<0?(u[h]=l.length,l.push([t[i].slice(0)])):l[u[h]].push(t[i].slice(0))}return l}(t,e):function(t){for(var e=l(s(c(t,0))),r=new n(e.length),i=0;i<t.length;++i)for(var a=t[i],o=0;o<a.length;++o)for(var h=u(e,[a[o]]),f=o+1;f<a.length;++f)r.link(h,u(e,[a[f]]));var d=[],p=r.ranks;for(i=0;i<p.length;++i)p[i]=-1;for(i=0;i<t.length;++i){var g=r.find(u(e,[t[i][0]]));p[g]<0?(p[g]=d.length,d.push([t[i].slice(0)])):d[p[g]].push(t[i].slice(0))}return d}(t)}},function(t,e,r){"use strict";t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var r=t[0].length,i=[t[0]],a=[0],o=1;o<e;++o)if(i.push(t[o]),n(i,r)){if(a.push(o),a.length===r+1)return a}else i.pop();return a};var i=r(634);function n(t,e){for(var r=new Array(e+1),n=0;n<t.length;++n)r[n]=t[n];for(n=0;n<=t.length;++n){for(var a=t.length;a<=e;++a){for(var o=new Array(e),s=0;s<e;++s)o[s]=Math.pow(a+1-n,s);r[a]=o}if(i.apply(void 0,r))return!0}return!1}},function(t,e,r){var i=r(630),n=i("./triangle-vertex.glsl"),a=i("./triangle-fragment.glsl"),o=i("./edge-vertex.glsl"),s=i("./edge-fragment.glsl"),l=i("./point-vertex.glsl"),u=i("./point-fragment.glsl"),h=i("./pick-vertex.glsl"),c=i("./pick-fragment.glsl"),f=i("./pick-point-vertex.glsl"),d=i("./contour-vertex.glsl"),p=i("./contour-fragment.glsl");e.meshShader={vertex:n,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.wireShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.pointShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},e.pickShader={vertex:h,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},e.pointPickShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},e.contourShader={vertex:d,fragment:p,attributes:[{name:"position",type:"vec3"}]}},function(t,e,r){"use strict";var i=r(1561),n=r(1564);function a(t,e){for(var r=[0,0,0,0],i=0;i<4;++i)for(var n=0;n<4;++n)r[n]+=t[4*i+n]*e[i];return r}function o(t,e,r,i,n){for(var o=a(i,a(r,a(e,[t[0],t[1],t[2],1]))),s=0;s<3;++s)o[s]/=o[3];return[.5*n[0]*(1+o[0]),.5*n[1]*(1-o[1])]}function s(t,e){for(var r=[0,0,0],i=0;i<t.length;++i)for(var n=t[i],a=e[i],o=0;o<3;++o)r[o]+=a*n[o];return r}t.exports=function(t,e,r,a,l,u){if(1===t.length)return[0,t[0].slice()];for(var h=new Array(t.length),c=0;c<t.length;++c)h[c]=o(t[c],r,a,l,u);var f=0,d=1/0;for(c=0;c<h.length;++c){for(var p=0,g=0;g<2;++g)p+=Math.pow(h[c][g]-e[g],2);p<d&&(d=p,f=c)}var v=function(t,e){if(2===t.length){for(var r=0,a=0,o=0;o<2;++o)r+=Math.pow(e[o]-t[0][o],2),a+=Math.pow(e[o]-t[1][o],2);return r=Math.sqrt(r),a=Math.sqrt(a),r+a<1e-6?[1,0]:[a/(r+a),r/(a+r)]}if(3===t.length){var s=[0,0];return n(t[0],t[1],t[2],e,s),i(t,s)}return[]}(h,e),m=0;for(c=0;c<3;++c){if(v[c]<-.001||v[c]>1.0001)return null;m+=v[c]}if(Math.abs(m-1)>.001)return null;return[f,s(t,v),v]}},function(t,e,r){"use strict";t.exports=function(t,e){for(var r=e.length,a=new Array(r+1),o=0;o<r;++o){for(var s=new Array(r+1),l=0;l<=r;++l)s[l]=t[l][o];a[o]=s}a[r]=new Array(r+1);for(o=0;o<=r;++o)a[r][o]=1;var u=new Array(r+1);for(o=0;o<r;++o)u[o]=e[o];u[r]=1;var h=i(a,u),c=n(h[r+1]);0===c&&(c=1);var f=new Array(r+1);for(o=0;o<=r;++o)f[o]=n(h[o])/c;return f};var i=r(1271);function n(t){for(var e=0,r=0;r<t.length;++r)e+=t[r];return e}},function(t,e,r){"use strict";var i=r(668),n=r(654),a=r(702),o=r(1563);function s(t,e){for(var r=new Array(t.length-1),i=1;i<t.length;++i)for(var n=r[i-1]=new Array(t.length-1),a=0,o=0;a<t.length;++a)a!==e&&(n[o++]=t[i][a]);return r}function l(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var i=0;i<t;++i)e[r][i]=["m[",r,"][",i,"]"].join("")}return e}function u(t){if(2===t.length)return["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("");for(var e=[],r=0;r<t.length;++r)e.push(["scale(",u(s(t,r)),",",(i=r,1&i?"-":""),t[0][r],")"].join(""));return function t(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var r=e.length>>1;return["sum(",t(e.slice(0,r)),",",t(e.slice(r)),")"].join("")}(e);var i}function h(t){return new Function("sum","scale","prod","compress",["function robustDeterminant",t,"(m){return compress(",u(l(t)),")};return robustDeterminant",t].join(""))(n,a,i,o)}var c=[function(){return[0]},function(t){return[t[0][0]]}];!function(){for(;c.length<6;)c.push(h(c.length));for(var e=[],r=["function robustDeterminant(m){switch(m.length){"],i=0;i<6;++i)e.push("det"+i),r.push("case ",i,":return det",i,"(m);");r.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),e.push("CACHE","gen",r.join(""));var n=Function.apply(void 0,e);for(t.exports=n.apply(void 0,c.concat([c,h])),i=0;i<c.length;++i)t.exports[i]=c[i]}()},function(t,e,r){"use strict";t.exports=function(t){for(var e=t.length,r=t[t.length-1],i=e,n=e-2;n>=0;--n){var a=r,o=t[n];(l=o-((r=a+o)-a))&&(t[--i]=r,r=l)}var s=0;for(n=i;n<e;++n){var l;a=t[n];(l=(o=r)-((r=a+o)-a))&&(t[s++]=l)}return t[s++]=r,t.length=s,t}},function(t,e,r){"use strict";var i=new Float64Array(4),n=new Float64Array(4),a=new Float64Array(4);t.exports=function(t,e,r,o,s){i.length<o.length&&(i=new Float64Array(o.length),n=new Float64Array(o.length),a=new Float64Array(o.length));for(var l=0;l<o.length;++l)i[l]=t[l]-o[l],n[l]=e[l]-t[l],a[l]=r[l]-t[l];var u=0,h=0,c=0,f=0,d=0,p=0;for(l=0;l<o.length;++l){var g=n[l],v=a[l],m=i[l];u+=g*g,h+=g*v,c+=v*v,f+=m*g,d+=m*v,p+=m*m}var y,x,b,_,w,A=Math.abs(u*c-h*h),T=h*d-c*f,M=h*f-u*d;if(T+M<=A)if(T<0)M<0&&f<0?(M=0,-f>=u?(T=1,y=u+2*f+p):y=f*(T=-f/u)+p):(T=0,d>=0?(M=0,y=p):-d>=c?(M=1,y=c+2*d+p):y=d*(M=-d/c)+p);else if(M<0)M=0,f>=0?(T=0,y=p):-f>=u?(T=1,y=u+2*f+p):y=f*(T=-f/u)+p;else{var k=1/A;y=(T*=k)*(u*T+h*(M*=k)+2*f)+M*(h*T+c*M+2*d)+p}else T<0?(b=c+d)>(x=h+f)?(_=b-x)>=(w=u-2*h+c)?(T=1,M=0,y=u+2*f+p):y=(T=_/w)*(u*T+h*(M=1-T)+2*f)+M*(h*T+c*M+2*d)+p:(T=0,b<=0?(M=1,y=c+2*d+p):d>=0?(M=0,y=p):y=d*(M=-d/c)+p):M<0?(b=u+f)>(x=h+d)?(_=b-x)>=(w=u-2*h+c)?(M=1,T=0,y=c+2*d+p):y=(T=1-(M=_/w))*(u*T+h*M+2*f)+M*(h*T+c*M+2*d)+p:(M=0,b<=0?(T=1,y=u+2*f+p):f>=0?(T=0,y=p):y=f*(T=-f/u)+p):(_=c+d-h-f)<=0?(T=0,M=1,y=c+2*d+p):_>=(w=u-2*h+c)?(T=1,M=0,y=u+2*f+p):y=(T=_/w)*(u*T+h*(M=1-T)+2*f)+M*(h*T+c*M+2*d)+p;var E=1-T-M;for(l=0;l<o.length;++l)s[l]=E*t[l]+T*e[l]+M*r[l];return y<0?0:y}},function(t,e,r){"use strict";var i=r(23);function n(t,e,r,n){if(!e||!e.visible)return null;for(var a=i.getComponentMethod("errorbars","makeComputeError")(e),o=new Array(t.length),s=0;s<t.length;s++){var l=a(+t[s],s);if("log"===n.type){var u=n.c2l(t[s]),h=t[s]-l[0],c=t[s]+l[1];if(o[s]=[(n.c2l(h,!0)-u)*r,(n.c2l(c,!0)-u)*r],h>0){var f=n.c2l(h);n._lowerLogErrorBound||(n._lowerLogErrorBound=f),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,f)}}else o[s]=[-l[0]*r,l[1]*r]}return o}t.exports=function(t,e,r){var i=[n(t.x,t.error_x,e[0],r.xaxis),n(t.y,t.error_y,e[1],r.yaxis),n(t.z,t.error_z,e[2],r.zaxis)],a=function(t){for(var e=0;e<t.length;e++)if(t[e])return t[e].length;return 0}(i);if(0===a)return null;for(var o=new Array(a),s=0;s<a;s++){for(var l=[[0,0,0],[0,0,0]],u=0;u<3;u++)if(i[u])for(var h=0;h<2;h++)l[h][u]=i[u][s][h];o[s]=l}return o}},function(t,e,r){"use strict";var i=r(23),n=r(6),a=r(206),o=r(644),s=r(648),l=r(649),u=r(1273);t.exports=function(t,e,r,h){function c(r,i){return n.coerce(t,e,u,r,i)}if(function(t,e,r,n){var a=0,o=r("x"),s=r("y"),l=r("z");i.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],n),o&&s&&l&&(a=Math.min(o.length,s.length,l.length),e._length=e._xlength=e._ylength=e._zlength=a);return a}(t,e,c,h)){c("text"),c("hovertext"),c("hovertemplate"),c("mode"),a.hasLines(e)&&(c("connectgaps"),s(t,e,r,h,c)),a.hasMarkers(e)&&o(t,e,r,h,c,{noSelect:!0}),a.hasText(e)&&(c("texttemplate"),l(t,e,h,c,{noSelect:!0}));var f=(e.line||{}).color,d=(e.marker||{}).color;c("surfaceaxis")>=0&&c("surfacecolor",f||d);for(var p=["x","y","z"],g=0;g<3;++g){var v="projection."+p[g];c(v+".show")&&(c(v+".opacity"),c(v+".scale"))}var m=i.getComponentMethod("errorbars","supplyDefaults");m(t,e,f||d||r,{axis:"z"}),m(t,e,f||d||r,{axis:"y",inherit:"z"}),m(t,e,f||d||r,{axis:"x",inherit:"z"})}else e.visible=!1}},function(t,e,r){"use strict";t.exports={attributes:r(806),supplyDefaults:r(1200).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:r(1568),plot:r(1569),moduleType:"trace",name:"surface",basePlotModule:r(759),categories:["gl3d","2dMap","showLegend"],meta:{description:["The data the describes the coordinates of the surface is set in `z`.","Data in `z` should be a {2D array}.","Coordinates in `x` and `y` can either be 1D {arrays}","or {2D arrays} (e.g. to graph parametric surfaces).","If not provided in `x` and `y`, the x and y coordinates are assumed","to be linear starting at 0 with a unit step.","The color scale corresponds to the `z` values by default.","For custom color scales, use `surfacecolor` which should be a {2D array},","where its bounds can be controlled using `cmin` and `cmax`."].join(" ")}}},function(t,e,r){"use strict";var i=r(210);t.exports=function(t,e){e.surfacecolor?i(t,e,{vals:e.surfacecolor,containerStr:"",cLetter:"c"}):i(t,e,{vals:e.z,containerStr:"",cLetter:"c"})}},function(t,e,r){"use strict";var i=r(1570),n=r(646),a=r(1575).d2,o=r(744),s=r(745),l=r(6).isArrayOrTypedArray,u=r(693).parseColorScale,h=r(662),c=r(208).extractOpts;function f(t,e,r){this.scene=t,this.uid=r,this.surface=e,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var d=f.prototype;d.getXat=function(t,e,r,i){var n=l(this.data.x)?l(this.data.x[0])?this.data.x[e][t]:this.data.x[t]:t;return void 0===r?n:i.d2l(n,0,r)},d.getYat=function(t,e,r,i){var n=l(this.data.y)?l(this.data.y[0])?this.data.y[e][t]:this.data.y[e]:e;return void 0===r?n:i.d2l(n,0,r)},d.getZat=function(t,e,r,i){var n=this.data.z[e][t];return null===n&&this.data.connectgaps&&this.data._interpolatedZ&&(n=this.data._interpolatedZ[e][t]),void 0===r?n:i.d2l(n,0,r)},d.handlePick=function(t){if(t.object===this.surface){var e=(t.data.index[0]-1)/this.dataScaleX-1,r=(t.data.index[1]-1)/this.dataScaleY-1,i=Math.max(Math.min(Math.round(e),this.data.z[0].length-1),0),n=Math.max(Math.min(Math.round(r),this.data._ylength-1),0);t.index=[i,n],t.traceCoordinate=[this.getXat(i,n),this.getYat(i,n),this.getZat(i,n)],t.dataCoordinate=[this.getXat(i,n,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(i,n,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(i,n,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var a=0;a<3;a++){var o=t.dataCoordinate[a];null!=o&&(t.dataCoordinate[a]*=this.scene.dataScale[a])}var s=this.data.hovertext||this.data.text;return Array.isArray(s)&&s[n]&&void 0!==s[n][i]?t.textLabel=s[n][i]:t.textLabel=s||"",t.data.dataCoordinate=t.dataCoordinate.slice(),this.surface.highlight(t.data),this.scene.glplot.spikes.position=t.dataCoordinate,!0}};var p=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function g(t,e){if(t<e)return 0;for(var r=0;0===Math.floor(t%e);)t/=e,r++;return r}function v(t){for(var e=[],r=0;r<p.length;r++){var i=p[r];e.push(g(t,i))}return e}function m(t){for(var e=v(t),r=t,i=0;i<p.length;i++)if(e[i]>0){r=p[i];break}return r}function y(t,e){if(!(t<1||e<1)){for(var r=v(t),i=v(e),n=1,a=0;a<p.length;a++)n*=Math.pow(p[a],Math.max(r[a],i[a]));return n}}d.calcXnums=function(t){var e,r=[];for(e=1;e<t;e++){var i=this.getXat(e-1,0),n=this.getXat(e,0);r[e-1]=n!==i&&null!=i&&null!=n?Math.abs(n-i):0}var a=0;for(e=1;e<t;e++)a+=r[e-1];for(e=1;e<t;e++)0===r[e-1]?r[e-1]=1:r[e-1]=Math.round(a/r[e-1]);return r},d.calcYnums=function(t){var e,r=[];for(e=1;e<t;e++){var i=this.getYat(0,e-1),n=this.getYat(0,e);r[e-1]=n!==i&&null!=i&&null!=n?Math.abs(n-i):0}var a=0;for(e=1;e<t;e++)a+=r[e-1];for(e=1;e<t;e++)0===r[e-1]?r[e-1]=1:r[e-1]=Math.round(a/r[e-1]);return r};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],b=x[9],_=x[13];function w(t,e,r){var i=r[8]+r[2]*e[0]+r[5]*e[1];return t[0]=(r[6]+r[0]*e[0]+r[3]*e[1])/i,t[1]=(r[7]+r[1]*e[0]+r[4]*e[1])/i,t}function A(t,e,r){return function(t,e,r,i){for(var n=[0,0],o=t.shape[0],s=t.shape[1],l=0;l<o;l++)for(var u=0;u<s;u++)r(n,[l,u],i),t.set(l,u,a(e,n[0],n[1]))}(t,e,w,r),t}function T(t,e){for(var r=!1,i=0;i<t.length;i++)if(e===t[i]){r=!0;break}!1===r&&t.push(e)}d.estimateScale=function(t,e){for(var r=1+function(t){if(0!==t.length){for(var e=1,r=0;r<t.length;r++)e=y(e,t[r]);return e}}(0===e?this.calcXnums(t):this.calcYnums(t));r<b;)r*=2;for(;r>_;)r--,r/=m(r),++r<b&&(r=_);var i=Math.round(r/t);return i>1?i:1},d.refineCoords=function(t){for(var e=this.dataScaleX,r=this.dataScaleY,i=t[0].shape[0],a=t[0].shape[1],o=0|Math.floor(t[0].shape[0]*e+1),s=0|Math.floor(t[0].shape[1]*r+1),l=1+i+1,u=1+a+1,h=n(new Float32Array(l*u),[l,u]),c=[1/e,0,0,0,1/r,0,0,0,1],f=0;f<t.length;++f){this.surface.padField(h,t[f]);var d=n(new Float32Array(o*s),[o,s]);A(d,h,c),t[f]=d}},d.setContourLevels=function(){var t,e,r,i=[[],[],[]],n=[!1,!1,!1],a=!1;for(t=0;t<3;++t)if(this.showContour[t]&&(a=!0,this.contourSize[t]>0&&null!==this.contourStart[t]&&null!==this.contourEnd[t]&&this.contourEnd[t]>this.contourStart[t]))for(n[t]=!0,e=this.contourStart[t];e<this.contourEnd[t];e+=this.contourSize[t])r=e*this.scene.dataScale[t],T(i[t],r);if(a){var o=[[],[],[]];for(t=0;t<3;++t)this.showContour[t]&&(o[t]=n[t]?i[t]:this.scene.contourLevels[t]);this.surface.update({levels:o})}},d.update=function(t){var e,r,i,a,l=this.scene,f=l.fullSceneLayout,d=this.surface,p=t.opacity,g=u(t,p),v=l.dataScale,m=t.z[0].length,y=t._ylength,x=l.contourLevels;this.data=t;var b=[];for(e=0;e<3;e++)for(b[e]=[],r=0;r<m;r++)b[e][r]=[];for(r=0;r<m;r++)for(i=0;i<y;i++)b[0][r][i]=this.getXat(r,i,t.xcalendar,f.xaxis),b[1][r][i]=this.getYat(r,i,t.ycalendar,f.yaxis),b[2][r][i]=this.getZat(r,i,t.zcalendar,f.zaxis);if(t.connectgaps)for(t._emptypoints=s(b[2]),o(b[2],t._emptypoints),t._interpolatedZ=[],r=0;r<m;r++)for(t._interpolatedZ[r]=[],i=0;i<y;i++)t._interpolatedZ[r][i]=b[2][r][i];for(e=0;e<3;e++)for(r=0;r<m;r++)for(i=0;i<y;i++)null==(a=b[e][r][i])?b[e][r][i]=NaN:a=b[e][r][i]*=v[e];for(e=0;e<3;e++)for(r=0;r<m;r++)for(i=0;i<y;i++)null!=(a=b[e][r][i])&&(this.minValues[e]>a&&(this.minValues[e]=a),this.maxValues[e]<a&&(this.maxValues[e]=a));for(e=0;e<3;e++)this.objectOffset[e]=.5*(this.minValues[e]+this.maxValues[e]);for(e=0;e<3;e++)for(r=0;r<m;r++)for(i=0;i<y;i++)null!=(a=b[e][r][i])&&(b[e][r][i]-=this.objectOffset[e]);var w=[n(new Float32Array(m*y),[m,y]),n(new Float32Array(m*y),[m,y]),n(new Float32Array(m*y),[m,y])];for(e=0;e<3;e++)for(r=0;r<m;r++)for(i=0;i<y;i++)w[e].set(r,i,b[e][r][i]);b=[];var A={colormap:g,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!t.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:t.opacityscale,opacity:t.opacity},T=c(t);if(A.intensityBounds=[T.min,T.max],t.surfacecolor){var M=n(new Float32Array(m*y),[m,y]);for(r=0;r<m;r++)for(i=0;i<y;i++)M.set(r,i,t.surfacecolor[i][r]);w.push(M)}else A.intensityBounds[0]*=v[2],A.intensityBounds[1]*=v[2];(_<w[0].shape[0]||_<w[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(w[0].shape[0],0),this.dataScaleY=this.estimateScale(w[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(w)),t.surfacecolor&&(A.intensity=w.pop());var k=[!0,!0,!0],E=["x","y","z"];for(e=0;e<3;++e){var S=t.contours[E[e]];k[e]=S.highlight,A.showContour[e]=S.show||S.highlight,A.showContour[e]&&(A.contourProject[e]=[S.project.x,S.project.y,S.project.z],S.show?(this.showContour[e]=!0,A.levels[e]=x[e],d.highlightColor[e]=A.contourColor[e]=h(S.color),S.usecolormap?d.highlightTint[e]=A.contourTint[e]=0:d.highlightTint[e]=A.contourTint[e]=1,A.contourWidth[e]=S.width,this.contourStart[e]=S.start,this.contourEnd[e]=S.end,this.contourSize[e]=S.size):(this.showContour[e]=!1,this.contourStart[e]=null,this.contourEnd[e]=null,this.contourSize[e]=0),S.highlight&&(A.dynamicColor[e]=h(S.highlightcolor),A.dynamicWidth[e]=S.highlightwidth))}(function(t){var e=t[0].rgb,r=t[t.length-1].rgb;return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]})(g)&&(A.vertexColor=!0),A.objectOffset=this.objectOffset,A.coords=w,d.update(A),d.visible=t.visible,d.enableDynamic=k,d.enableHighlight=k,d.snapToData=!0,"lighting"in t&&(d.ambientLight=t.lighting.ambient,d.diffuseLight=t.lighting.diffuse,d.specularLight=t.lighting.specular,d.roughness=t.lighting.roughness,d.fresnel=t.lighting.fresnel),"lightposition"in t&&(d.lightPosition=[t.lightposition.x,t.lightposition.y,t.lightposition.z]),p&&p<1&&(d.supportsTransparency=!0)},d.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},t.exports=function(t,e){var r=t.glplot.gl,n=i({gl:r}),a=new f(t,n,e.uid);return n._trace=a,a.update(e),t.glplot.add(n),a}},function(t,e,r){"use strict";t.exports=function(t){var e=t.gl,r=y(e),i=b(e),s=x(e),l=_(e),u=n(e),h=a(e,[{buffer:u,size:4,stride:40,offset:0},{buffer:u,size:3,stride:40,offset:16},{buffer:u,size:3,stride:40,offset:28}]),c=n(e),f=a(e,[{buffer:c,size:4,stride:20,offset:0},{buffer:c,size:1,stride:20,offset:16}]),d=n(e),p=a(e,[{buffer:d,size:2,type:e.FLOAT}]),g=o(e,1,256,e.RGBA,e.UNSIGNED_BYTE);g.minFilter=e.LINEAR,g.magFilter=e.LINEAR;var v=new k(e,[0,0],[[0,0,0],[0,0,0]],r,i,u,h,g,s,l,c,f,d,p,[0,0,0]),m={levels:[[],[],[]]};for(var w in t)m[w]=t[w];return m.colormap=m.colormap||"jet",v.update(m),v};var i=r(643),n=r(628),a=r(683),o=r(742),s=r(625),l=r(1065),u=r(763),h=r(1571),c=r(646),f=r(878),d=r(761),p=r(760),g=r(639),v=r(1573),m=r(1574),y=m.createShader,x=m.createContourShader,b=m.createPickShader,_=m.createPickContourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],T=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function M(t,e,r,i,n){this.position=t,this.index=e,this.uv=r,this.level=i,this.dataCoordinate=n}!function(){for(var t=0;t<3;++t){var e=T[t],r=(t+2)%3;e[(t+1)%3+0]=1,e[r+3]=1,e[t+6]=1}}();function k(t,e,r,i,n,a,o,l,u,h,f,d,p,g,v){this.gl=t,this.shape=e,this.bounds=r,this.objectOffset=v,this.intensityBounds=[],this._shader=i,this._pickShader=n,this._coordinateBuffer=a,this._vao=o,this._colorMap=l,this._contourShader=u,this._contourPickShader=h,this._contourBuffer=f,this._contourVAO=d,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new M([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=p,this._dynamicVAO=g,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[c(s.mallocFloat(1024),[0,0]),c(s.mallocFloat(1024),[0,0]),c(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.opacityscale=!1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var E=k.prototype;E.isTransparent=function(){return this.opacity<1||this.opacityscale},E.isOpaque=function(){if(this.opacityscale)return!1;if(this.opacity<1)return!1;if(this.opacity>=1)return!0;for(var t=0;t<3;++t)if(this._contourCounts[t].length>0)return!0;return!1},E.pickSlots=1,E.setPickBase=function(t){this.pickId=t};var S=[0,0,0],C={showSurface:!1,showContour:!1,projections:[w.slice(),w.slice(),w.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function L(t,e){var r,i,n,a=e.axes&&e.axes.lastCubeProps.axis||S,o=e.showSurface,s=e.showContour;for(r=0;r<3;++r)for(o=o||e.surfaceProject[r],i=0;i<3;++i)s=s||e.contourProject[r][i];for(r=0;r<3;++r){var l=C.projections[r];for(i=0;i<16;++i)l[i]=0;for(i=0;i<4;++i)l[5*i]=1;l[5*r]=0,l[12+r]=e.axesBounds[+(a[r]>0)][r],d(l,t.model,l);var u=C.clipBounds[r];for(n=0;n<2;++n)for(i=0;i<3;++i)u[n][i]=t.clipBounds[n][i];u[0][r]=-1e8,u[1][r]=1e8}return C.showSurface=o,C.showContour=s,C}var I={model:w,view:w,projection:w,inverseModel:w.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},j=w.slice(),R=[1,0,0,0,1,0,0,0,1];function P(t,e){t=t||{};var r=this.gl;r.disable(r.CULL_FACE),this._colorMap.bind(0);var i=I;i.model=t.model||w,i.view=t.view||w,i.projection=t.projection||w,i.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],i.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],i.objectOffset=this.objectOffset,i.contourColor=this.contourColor[0],i.inverseModel=p(i.inverseModel,i.model);for(var n=0;n<2;++n)for(var a=i.clipBounds[n],o=0;o<3;++o)a[o]=Math.min(Math.max(this.clipBounds[n][o],-1e8),1e8);i.kambient=this.ambientLight,i.kdiffuse=this.diffuseLight,i.kspecular=this.specularLight,i.roughness=this.roughness,i.fresnel=this.fresnel,i.opacity=this.opacity,i.height=0,i.permutation=R,i.vertexColor=this.vertexColor;var s=j;for(d(s,i.view,i.model),d(s,i.projection,s),p(s,s),n=0;n<3;++n)i.eyePosition[n]=s[12+n]/s[15];var l=s[15];for(n=0;n<3;++n)l+=this.lightPosition[n]*s[4*n+3];for(n=0;n<3;++n){var u=s[12+n];for(o=0;o<3;++o)u+=s[4*o+n]*this.lightPosition[o];i.lightPosition[n]=u/l}var h=L(i,this);if(h.showSurface){for(this._shader.bind(),this._shader.uniforms=i,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(r.TRIANGLES,this._vertexCount),n=0;n<3;++n)this.surfaceProject[n]&&this.vertexCount&&(this._shader.uniforms.model=h.projections[n],this._shader.uniforms.clipBounds=h.clipBounds[n],this._vao.draw(r.TRIANGLES,this._vertexCount));this._vao.unbind()}if(h.showContour){var c=this._contourShader;i.kambient=1,i.kdiffuse=0,i.kspecular=0,i.opacity=1,c.bind(),c.uniforms=i;var f=this._contourVAO;for(f.bind(),n=0;n<3;++n)for(c.uniforms.permutation=T[n],r.lineWidth(this.contourWidth[n]*this.pixelRatio),o=0;o<this.contourLevels[n].length;++o)o===this.highlightLevel[n]?(c.uniforms.contourColor=this.highlightColor[n],c.uniforms.contourTint=this.highlightTint[n]):0!==o&&o-1!==this.highlightLevel[n]||(c.uniforms.contourColor=this.contourColor[n],c.uniforms.contourTint=this.contourTint[n]),this._contourCounts[n][o]&&(c.uniforms.height=this.contourLevels[n][o],f.draw(r.LINES,this._contourCounts[n][o],this._contourOffsets[n][o]));for(n=0;n<3;++n)for(c.uniforms.model=h.projections[n],c.uniforms.clipBounds=h.clipBounds[n],o=0;o<3;++o)if(this.contourProject[n][o]){c.uniforms.permutation=T[o],r.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var g=0;g<this.contourLevels[o].length;++g)g===this.highlightLevel[o]?(c.uniforms.contourColor=this.highlightColor[o],c.uniforms.contourTint=this.highlightTint[o]):0!==g&&g-1!==this.highlightLevel[o]||(c.uniforms.contourColor=this.contourColor[o],c.uniforms.contourTint=this.contourTint[o]),this._contourCounts[o][g]&&(c.uniforms.height=this.contourLevels[o][g],f.draw(r.LINES,this._contourCounts[o][g],this._contourOffsets[o][g]))}for(f.unbind(),(f=this._dynamicVAO).bind(),n=0;n<3;++n)if(0!==this._dynamicCounts[n])for(c.uniforms.model=i.model,c.uniforms.clipBounds=i.clipBounds,c.uniforms.permutation=T[n],r.lineWidth(this.dynamicWidth[n]*this.pixelRatio),c.uniforms.contourColor=this.dynamicColor[n],c.uniforms.contourTint=this.dynamicTint[n],c.uniforms.height=this.dynamicLevel[n],f.draw(r.LINES,this._dynamicCounts[n],this._dynamicOffsets[n]),o=0;o<3;++o)this.contourProject[o][n]&&(c.uniforms.model=h.projections[o],c.uniforms.clipBounds=h.clipBounds[o],f.draw(r.LINES,this._dynamicCounts[n],this._dynamicOffsets[n]));f.unbind()}}E.draw=function(t){return P.call(this,t,!1)},E.drawTransparent=function(t){return P.call(this,t,!0)};var O={model:w,view:w,projection:w,inverseModel:w,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function z(t,e){return Array.isArray(t)?[e(t[0]),e(t[1]),e(t[2])]:[e(t),e(t),e(t)]}function N(t){return Array.isArray(t)?3===t.length?[t[0],t[1],t[2],1]:[t[0],t[1],t[2],t[3]]:[0,0,0,1]}function B(t){if(Array.isArray(t)){if(Array.isArray(t))return[N(t[0]),N(t[1]),N(t[2])];var e=N(t);return[e.slice(),e.slice(),e.slice()]}}E.drawPick=function(t){t=t||{};var e=this.gl;e.disable(e.CULL_FACE);var r=O;r.model=t.model||w,r.view=t.view||w,r.projection=t.projection||w,r.shape=this._field[2].shape,r.pickId=this.pickId/255,r.lowerBound=this.bounds[0],r.upperBound=this.bounds[1],r.objectOffset=this.objectOffset,r.permutation=R;for(var i=0;i<2;++i)for(var n=r.clipBounds[i],a=0;a<3;++a)n[a]=Math.min(Math.max(this.clipBounds[i][a],-1e8),1e8);var o=L(r,this);if(o.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=r,this._vao.bind(),this._vao.draw(e.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&(this._pickShader.uniforms.model=o.projections[i],this._pickShader.uniforms.clipBounds=o.clipBounds[i],this._vao.draw(e.TRIANGLES,this._vertexCount));this._vao.unbind()}if(o.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=r;var l=this._contourVAO;for(l.bind(),a=0;a<3;++a)for(e.lineWidth(this.contourWidth[a]*this.pixelRatio),s.uniforms.permutation=T[a],i=0;i<this.contourLevels[a].length;++i)this._contourCounts[a][i]&&(s.uniforms.height=this.contourLevels[a][i],l.draw(e.LINES,this._contourCounts[a][i],this._contourOffsets[a][i]));for(i=0;i<3;++i)for(s.uniforms.model=o.projections[i],s.uniforms.clipBounds=o.clipBounds[i],a=0;a<3;++a)if(this.contourProject[i][a]){s.uniforms.permutation=T[a],e.lineWidth(this.contourWidth[a]*this.pixelRatio);for(var u=0;u<this.contourLevels[a].length;++u)this._contourCounts[a][u]&&(s.uniforms.height=this.contourLevels[a][u],l.draw(e.LINES,this._contourCounts[a][u],this._contourOffsets[a][u]))}l.unbind()}},E.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=this._field[2].shape,r=this._pickResult,i=e[0]*(t.value[0]+(t.value[2]>>4)/16)/255,n=Math.floor(i),a=i-n,o=e[1]*(t.value[1]+(15&t.value[2])/16)/255,s=Math.floor(o),l=o-s;n+=1,s+=1;var u=r.position;u[0]=u[1]=u[2]=0;for(var h=0;h<2;++h)for(var c=h?a:1-a,f=0;f<2;++f)for(var d=n+h,p=s+f,v=c*(f?l:1-l),m=0;m<3;++m)u[m]+=this._field[m].get(d,p)*v;for(var y=this._pickResult.level,x=0;x<3;++x)if(y[x]=g.le(this.contourLevels[x],u[x]),y[x]<0)this.contourLevels[x].length>0&&(y[x]=0);else if(y[x]<this.contourLevels[x].length-1){var b=this.contourLevels[x][y[x]],_=this.contourLevels[x][y[x]+1];Math.abs(b-u[x])>Math.abs(_-u[x])&&(y[x]+=1)}for(r.index[0]=a<.5?n:n+1,r.index[1]=l<.5?s:s+1,r.uv[0]=i/e[0],r.uv[1]=o/e[1],m=0;m<3;++m)r.dataCoordinate[m]=this._field[m].get(r.index[0],r.index[1]);return r},E.padField=function(t,e){var r=e.shape.slice(),i=t.shape.slice();u.assign(t.lo(1,1).hi(r[0],r[1]),e),u.assign(t.lo(1).hi(r[0],1),e.hi(r[0],1)),u.assign(t.lo(1,i[1]-1).hi(r[0],1),e.lo(0,r[1]-1).hi(r[0],1)),u.assign(t.lo(0,1).hi(1,r[1]),e.hi(1)),u.assign(t.lo(i[0]-1,1).hi(1,r[1]),e.lo(r[0]-1)),t.set(0,0,e.get(0,0)),t.set(0,i[1]-1,e.get(0,r[1]-1)),t.set(i[0]-1,0,e.get(r[0]-1,0)),t.set(i[0]-1,i[1]-1,e.get(r[0]-1,r[1]-1))},E.update=function(t){t=t||{},this.objectOffset=t.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in t&&(this.contourWidth=z(t.contourWidth,Number)),"showContour"in t&&(this.showContour=z(t.showContour,Boolean)),"showSurface"in t&&(this.showSurface=!!t.showSurface),"contourTint"in t&&(this.contourTint=z(t.contourTint,Boolean)),"contourColor"in t&&(this.contourColor=B(t.contourColor)),"contourProject"in t&&(this.contourProject=z(t.contourProject,(function(t){return z(t,Boolean)}))),"surfaceProject"in t&&(this.surfaceProject=t.surfaceProject),"dynamicColor"in t&&(this.dynamicColor=B(t.dynamicColor)),"dynamicTint"in t&&(this.dynamicTint=z(t.dynamicTint,Number)),"dynamicWidth"in t&&(this.dynamicWidth=z(t.dynamicWidth,Number)),"opacity"in t&&(this.opacity=t.opacity),"opacityscale"in t&&(this.opacityscale=t.opacityscale),"colorBounds"in t&&(this.colorBounds=t.colorBounds),"vertexColor"in t&&(this.vertexColor=t.vertexColor?1:0);var e=t.field||t.coords&&t.coords[2]||null,r=!1;if(e||(e=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in t||"coords"in t){var n=(e.shape[0]+2)*(e.shape[1]+2);n>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(i.nextPow2(n))),this._field[2]=c(this._field[2].data,[e.shape[0]+2,e.shape[1]+2]),this.padField(this._field[2],e),this.shape=e.shape.slice();for(var a=this.shape,o=0;o<2;++o)this._field[2].size>this._field[o].data.length&&(s.freeFloat(this._field[o].data),this._field[o].data=s.mallocFloat(this._field[2].size)),this._field[o]=c(this._field[o].data,[a[0]+2,a[1]+2]);if(t.coords){var d=t.coords;if(!Array.isArray(d)||3!==d.length)throw new Error("gl-surface: invalid coordinates for x/y");for(o=0;o<2;++o){var p=d[o];for(b=0;b<2;++b)if(p.shape[b]!==a[b])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[o],p)}}else if(t.ticks){var g=t.ticks;if(!Array.isArray(g)||2!==g.length)throw new Error("gl-surface: invalid ticks");for(o=0;o<2;++o){var m=g[o];if((Array.isArray(m)||m.length)&&(m=c(m)),m.shape[0]!==a[o])throw new Error("gl-surface: invalid tick length");var y=c(m.data,a);y.stride[o]=m.stride[0],y.stride[1^o]=0,this.padField(this._field[o],y)}}else{for(o=0;o<2;++o){var x=[0,0];x[o]=1,this._field[o]=c(this._field[o].data,[a[0]+2,a[1]+2],x,0)}this._field[0].set(0,0,0);for(var b=0;b<a[0];++b)this._field[0].set(b+1,0,b);for(this._field[0].set(a[0]+1,0,a[0]-1),this._field[1].set(0,0,0),b=0;b<a[1];++b)this._field[1].set(0,b+1,b);this._field[1].set(0,a[1]+1,a[1]-1)}var _=this._field,w=c(s.mallocFloat(3*_[2].size*2),[3,a[0]+2,a[1]+2,2]);for(o=0;o<3;++o)v(w.pick(o),_[o],"mirror");var T=c(s.mallocFloat(3*_[2].size),[a[0]+2,a[1]+2,3]);for(o=0;o<a[0]+2;++o)for(b=0;b<a[1]+2;++b){var M=w.get(0,o,b,0),k=w.get(0,o,b,1),E=w.get(1,o,b,0),S=w.get(1,o,b,1),C=w.get(2,o,b,0),L=w.get(2,o,b,1),I=E*L-S*C,j=C*k-L*M,R=M*S-k*E,P=Math.sqrt(I*I+j*j+R*R);P<1e-8?(P=Math.max(Math.abs(I),Math.abs(j),Math.abs(R)))<1e-8?(R=1,j=I=0,P=1):P=1/P:P=1/Math.sqrt(P),T.set(o,b,0,I*P),T.set(o,b,1,j*P),T.set(o,b,2,R*P)}s.free(w.data);var O=[1/0,1/0,1/0],N=[-1/0,-1/0,-1/0],F=1/0,D=-1/0,U=(a[0]-1)*(a[1]-1)*6,V=s.mallocFloat(i.nextPow2(10*U)),X=0,G=0;for(o=0;o<a[0]-1;++o)t:for(b=0;b<a[1]-1;++b){for(var W=0;W<2;++W)for(var H=0;H<2;++H)for(var q=0;q<3;++q){var Y=this._field[q].get(1+o+W,1+b+H);if(isNaN(Y)||!isFinite(Y))continue t}for(q=0;q<6;++q){var Z=o+A[q][0],Q=b+A[q][1],K=this._field[0].get(Z+1,Q+1),J=this._field[1].get(Z+1,Q+1);Y=this._field[2].get(Z+1,Q+1),I=T.get(Z+1,Q+1,0),j=T.get(Z+1,Q+1,1),R=T.get(Z+1,Q+1,2),t.intensity&&($=t.intensity.get(Z,Q));var $=t.intensity?t.intensity.get(Z,Q):Y+this.objectOffset[2];V[X++]=Z,V[X++]=Q,V[X++]=K,V[X++]=J,V[X++]=Y,V[X++]=0,V[X++]=$,V[X++]=I,V[X++]=j,V[X++]=R,O[0]=Math.min(O[0],K+this.objectOffset[0]),O[1]=Math.min(O[1],J+this.objectOffset[1]),O[2]=Math.min(O[2],Y+this.objectOffset[2]),F=Math.min(F,$),N[0]=Math.max(N[0],K+this.objectOffset[0]),N[1]=Math.max(N[1],J+this.objectOffset[1]),N[2]=Math.max(N[2],Y+this.objectOffset[2]),D=Math.max(D,$),G+=1}}for(t.intensityBounds&&(F=+t.intensityBounds[0],D=+t.intensityBounds[1]),o=6;o<X;o+=10)V[o]=(V[o]-F)/(D-F);this._vertexCount=G,this._coordinateBuffer.update(V.subarray(0,X)),s.freeFloat(V),s.free(T.data),this.bounds=[O,N],this.intensity=t.intensity||this._field[2],this.intensityBounds[0]===F&&this.intensityBounds[1]===D||(r=!0),this.intensityBounds=[F,D]}if("levels"in t){var tt=t.levels;for(tt=Array.isArray(tt[0])?tt.slice():[[],[],tt],o=0;o<3;++o)tt[o]=tt[o].slice(),tt[o].sort((function(t,e){return t-e}));for(o=0;o<3;++o)for(b=0;b<tt[o].length;++b)tt[o][b]-=this.objectOffset[o];t:for(o=0;o<3;++o){if(tt[o].length!==this.contourLevels[o].length){r=!0;break}for(b=0;b<tt[o].length;++b)if(tt[o][b]!==this.contourLevels[o][b]){r=!0;break t}}this.contourLevels=tt}if(r){_=this._field,a=this.shape;for(var et=[],rt=0;rt<3;++rt){var it=this.contourLevels[rt],nt=[],at=[],ot=[0,0,0];for(o=0;o<it.length;++o){var st=f(this._field[rt],it[o]);nt.push(et.length/5|0),G=0;t:for(b=0;b<st.cells.length;++b){var lt=st.cells[b];for(q=0;q<2;++q){var ut=st.positions[lt[q]],ht=ut[0],ct=0|Math.floor(ht),ft=ht-ct,dt=ut[1],pt=0|Math.floor(dt),gt=dt-pt,vt=!1;e:for(var mt=0;mt<3;++mt){ot[mt]=0;var yt=(rt+mt+1)%3;for(W=0;W<2;++W){var xt=W?ft:1-ft;for(Z=0|Math.min(Math.max(ct+W,0),a[0]),H=0;H<2;++H){var bt=H?gt:1-gt;if(Q=0|Math.min(Math.max(pt+H,0),a[1]),Y=mt<2?this._field[yt].get(Z,Q):(this.intensity.get(Z,Q)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Y)||isNaN(Y)){vt=!0;break e}var _t=xt*bt;ot[mt]+=_t*Y}}}if(vt){if(q>0){for(var wt=0;wt<5;++wt)et.pop();G-=1}continue t}et.push(ot[0],ot[1],ut[0],ut[1],ot[2]),G+=1}}at.push(G)}this._contourOffsets[rt]=nt,this._contourCounts[rt]=at}var At=s.mallocFloat(et.length);for(o=0;o<et.length;++o)At[o]=et[o];this._contourBuffer.update(At),s.freeFloat(At)}t.colormap&&this._colorMap.setPixels(function(t,e){var r=h([l({colormap:t,nshades:256,format:"rgba"}).map((function(t,r){var i=e?function(t,e){if(!e)return 1;if(!e.length)return 1;for(var r=0;r<e.length;++r){if(e.length<2)return 1;if(e[r][0]===t)return e[r][1];if(e[r][0]>t&&r>0){var i=(e[r][0]-t)/(e[r][0]-e[r-1][0]);return e[r][1]*(1-i)+i*e[r-1][1]}}return 1}(r/255,e):1;return[t[0],t[1],t[2],255*i]}))]);return u.divseq(r,255),r}(t.colormap,this.opacityscale))},E.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var t=0;t<3;++t)s.freeFloat(this._field[t].data)},E.highlight=function(t){var e,r;if(!t)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(e=0;e<3;++e)this.enableHighlight[e]?this.highlightLevel[e]=t.level[e]:this.highlightLevel[e]=-1;for(r=this.snapToData?t.dataCoordinate:t.position,e=0;e<3;++e)r[e]-=this.objectOffset[e];if(this.enableDynamic[0]&&r[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&r[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&r[2]!==this.dynamicLevel[2]){for(var i=0,n=this.shape,a=s.mallocFloat(12*n[0]*n[1]),o=0;o<3;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=r[o];var l=(o+1)%3,u=(o+2)%3,h=this._field[o],c=this._field[l],d=this._field[u],p=f(h,r[o]),g=p.cells,v=p.positions;for(this._dynamicOffsets[o]=i,e=0;e<g.length;++e)for(var m=g[e],y=0;y<2;++y){var x=v[m[y]],b=+x[0],_=0|b,w=0|Math.min(_+1,n[0]),A=b-_,T=1-A,M=+x[1],k=0|M,E=0|Math.min(k+1,n[1]),S=M-k,C=1-S,L=T*C,I=T*S,j=A*C,R=A*S,P=L*c.get(_,k)+I*c.get(_,E)+j*c.get(w,k)+R*c.get(w,E),O=L*d.get(_,k)+I*d.get(_,E)+j*d.get(w,k)+R*d.get(w,E);if(isNaN(P)||isNaN(O)){y&&(i-=1);break}a[2*i+0]=P,a[2*i+1]=O,i+=1}this._dynamicCounts[o]=i-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(a.subarray(0,2*i)),s.freeFloat(a)}}},function(t,e,r){"use strict";var i=r(646),n=r(1572);t.exports=function(t,e){for(var r=[],a=t,o=1;Array.isArray(a);)r.push(a.length),o*=a.length,a=a[0];return 0===r.length?i():(e||(e=i(new Float64Array(o),r)),n(e,t),e)}},function(t,e,r){t.exports=r(731)({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},function(t,e,r){"use strict";t.exports=function(t,e,r){if(Array.isArray(r)){if(r.length!==e.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else r=i(e.dimension,"string"==typeof r?r:"clamp");if(t.dimension!==e.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(t.shape[e.dimension]!==e.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var n=0;n<e.dimension;++n)if(t.shape[n]!==e.shape[n])throw new Error("ndarray-gradient: shape mismatch");if(0===e.size)return t;if(e.dimension<=0)return t.set(0),t;return function(t){var e=t.join();if(m=o[e])return m;var r=t.length,i=["function gradient(dst,src){var s=src.shape.slice();"];function n(e){for(var n=r-e.length,a=[],o=[],s=[],l=0;l<r;++l)e.indexOf(l+1)>=0?s.push("0"):e.indexOf(-(l+1))>=0?s.push("s["+l+"]-1"):(s.push("-1"),a.push("1"),o.push("s["+l+"]-2"));var u=".lo("+a.join()+").hi("+o.join()+")";if(0===a.length&&(u=""),n>0){i.push("if(1");for(l=0;l<r;++l)e.indexOf(l+1)>=0||e.indexOf(-(l+1))>=0||i.push("&&s[",l,"]>2");i.push("){grad",n,"(src.pick(",s.join(),")",u);for(l=0;l<r;++l)e.indexOf(l+1)>=0||e.indexOf(-(l+1))>=0||i.push(",dst.pick(",s.join(),",",l,")",u);i.push(");")}for(l=0;l<e.length;++l){var h=Math.abs(e[l])-1,c="dst.pick("+s.join()+","+h+")"+u;switch(t[h]){case"clamp":var f=s.slice(),d=s.slice();e[l]<0?f[h]="s["+h+"]-2":d[h]="1",0===n?i.push("if(s[",h,"]>1){dst.set(",s.join(),",",h,",0.5*(src.get(",f.join(),")-src.get(",d.join(),")))}else{dst.set(",s.join(),",",h,",0)};"):i.push("if(s[",h,"]>1){diff(",c,",src.pick(",f.join(),")",u,",src.pick(",d.join(),")",u,");}else{zero(",c,");};");break;case"mirror":0===n?i.push("dst.set(",s.join(),",",h,",0);"):i.push("zero(",c,");");break;case"wrap":var p=s.slice(),g=s.slice();e[l]<0?(p[h]="s["+h+"]-2",g[h]="0"):(p[h]="s["+h+"]-1",g[h]="1"),0===n?i.push("if(s[",h,"]>2){dst.set(",s.join(),",",h,",0.5*(src.get(",p.join(),")-src.get(",g.join(),")))}else{dst.set(",s.join(),",",h,",0)};"):i.push("if(s[",h,"]>2){diff(",c,",src.pick(",p.join(),")",u,",src.pick(",g.join(),")",u,");}else{zero(",c,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}n>0&&i.push("};")}for(var s=0;s<1<<r;++s){for(var c=[],f=0;f<r;++f)s&1<<f&&c.push(f+1);for(var d=0;d<1<<c.length;++d){var p=c.slice();for(f=0;f<c.length;++f)d&1<<f&&(p[f]=-p[f]);n(p)}}i.push("return dst;};return gradient");var g=["diff","zero"],v=[l,u];for(s=1;s<=r;++s)g.push("grad"+s),v.push(h(s));g.push(i.join(""));var m=Function.apply(void 0,g).apply(void 0,v);return a[e]=m,m}(r)(t,e)};var i=r(762),n=r(731),a={},o={},s={body:"",args:[],thisVars:[],localVars:[]},l=n({args:["array","array","array"],pre:s,post:s,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),u=n({args:["array"],pre:s,post:s,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"});function h(t){if(t in a)return a[t];for(var e=[],r=0;r<t;++r)e.push("out",r,"s=0.5*(inp",r,"l-inp",r,"r);");var o=["array"],l=["junk"];for(r=0;r<t;++r){o.push("array"),l.push("out"+r+"s");var u=i(t);u[r]=-1,o.push({array:0,offset:u.slice()}),u[r]=1,o.push({array:0,offset:u.slice()}),l.push("inp"+r+"l","inp"+r+"r")}return a[t]=n({args:o,pre:s,post:s,body:{body:e.join(""),args:l.map((function(t){return{name:t,lvalue:0===t.indexOf("out"),rvalue:0===t.indexOf("inp"),count:"junk"!==t|0}})),thisVars:[],localVars:[]},funcName:"fdTemplate"+t})}},function(t,e,r){var i=r(635),n=r(630),a=n("../shaders/vertex.glsl"),o=n("../shaders/fragment.glsl"),s=n("../shaders/contour-vertex.glsl"),l=n("../shaders/pick.glsl");e.createShader=function(t){var e=i(t,a,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},e.createPickShader=function(t){var e=i(t,a,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},e.createContourShader=function(t){var e=i(t,s,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e},e.createPickContourShader=function(t){var e=i(t,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e}},function(t,e,r){"use strict";function i(t,e){var r=Math.floor(e),i=e-r,n=0<=r&&r<t.shape[0],a=0<=r+1&&r+1<t.shape[0];return(1-i)*(n?+t.get(r):0)+i*(a?+t.get(r+1):0)}function n(t,e,r){var i=Math.floor(e),n=e-i,a=0<=i&&i<t.shape[0],o=0<=i+1&&i+1<t.shape[0],s=Math.floor(r),l=r-s,u=0<=s&&s<t.shape[1],h=0<=s+1&&s+1<t.shape[1],c=a&&u?t.get(i,s):0,f=a&&h?t.get(i,s+1):0;return(1-l)*((1-n)*c+n*(o&&u?t.get(i+1,s):0))+l*((1-n)*f+n*(o&&h?t.get(i+1,s+1):0))}function a(t,e,r,i){var n=Math.floor(e),a=e-n,o=0<=n&&n<t.shape[0],s=0<=n+1&&n+1<t.shape[0],l=Math.floor(r),u=r-l,h=0<=l&&l<t.shape[1],c=0<=l+1&&l+1<t.shape[1],f=Math.floor(i),d=i-f,p=0<=f&&f<t.shape[2],g=0<=f+1&&f+1<t.shape[2],v=o&&h&&p?t.get(n,l,f):0,m=o&&c&&p?t.get(n,l+1,f):0,y=s&&h&&p?t.get(n+1,l,f):0,x=s&&c&&p?t.get(n+1,l+1,f):0,b=o&&h&&g?t.get(n,l,f+1):0,_=o&&c&&g?t.get(n,l+1,f+1):0;return(1-d)*((1-u)*((1-a)*v+a*y)+u*((1-a)*m+a*x))+d*((1-u)*((1-a)*b+a*(s&&h&&g?t.get(n+1,l,f+1):0))+u*((1-a)*_+a*(s&&c&&g?t.get(n+1,l+1,f+1):0)))}function o(t){var e,r,i=0|t.shape.length,n=new Array(i),a=new Array(i),o=new Array(i),s=new Array(i);for(e=0;e<i;++e)r=+arguments[e+1],n[e]=Math.floor(r),a[e]=r-n[e],o[e]=0<=n[e]&&n[e]<t.shape[e],s[e]=0<=n[e]+1&&n[e]+1<t.shape[e];var l,u,h,c=0;t:for(e=0;e<1<<i;++e){for(u=1,h=t.offset,l=0;l<i;++l)if(e&1<<l){if(!s[l])continue t;u*=a[l],h+=t.stride[l]*(n[l]+1)}else{if(!o[l])continue t;u*=1-a[l],h+=t.stride[l]*n[l]}c+=u*t.data[h]}return c}t.exports=function(t,e,r,s){switch(t.shape.length){case 0:return 0;case 1:return i(t,e);case 2:return n(t,e,r);case 3:return a(t,e,r,s);default:return o.apply(void 0,arguments)}},t.exports.d1=i,t.exports.d2=n,t.exports.d3=a},function(t,e,r){"use strict";t.exports={attributes:r(868),supplyDefaults:r(1577),calc:r(1578),colorbar:{min:"cmin",max:"cmax"},plot:r(1579),moduleType:"trace",name:"mesh3d",basePlotModule:r(759),categories:["gl3d","showLegend"],meta:{description:["Draws sets of triangles with coordinates given by","three 1-dimensional arrays in `x`, `y`, `z` and","(1) a sets of `i`, `j`, `k` indices","(2) Delaunay triangulation or","(3) the Alpha-shape algorithm or","(4) the Convex-hull algorithm"].join(" ")}}},function(t,e,r){"use strict";var i=r(23),n=r(6),a=r(151),o=r(868);t.exports=function(t,e,r,s){function l(r,i){return n.coerce(t,e,o,r,i)}function u(t){var e=t.map((function(t){var e=l(t);return e&&n.isArrayOrTypedArray(e)?e:null}));return e.every((function(t){return t&&t.length===e[0].length}))&&e}u(["x","y","z"])?(u(["i","j","k"]),(!e.i||e.j&&e.k)&&(!e.j||e.k&&e.i)&&(!e.k||e.i&&e.j)?(i.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],s),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach((function(t){l(t)})),l("contour.show")&&(l("contour.color"),l("contour.width")),"intensity"in t?(l("intensity"),l("intensitymode"),a(t,e,s,l,{prefix:"",cLetter:"c"})):(e.showscale=!1,"facecolor"in t?l("facecolor"):"vertexcolor"in t?l("vertexcolor"):l("color",r)),l("text"),l("hovertext"),l("hovertemplate"),e._length=null):e.visible=!1):e.visible=!1}},function(t,e,r){"use strict";var i=r(210);t.exports=function(t,e){e.intensity&&i(t,e,{vals:e.intensity,containerStr:"",cLetter:"c"})}},function(t,e,r){"use strict";var i=r(941),n=r(1044),a=r(1580),o=r(1270),s=r(693).parseColorScale,l=r(662),u=r(208).extractOpts,h=r(869);function c(t,e,r){this.scene=t,this.uid=r,this.mesh=e,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var f=c.prototype;function d(t){for(var e=[],r=t.length,i=0;i<r;i++)e[i]=l(t[i]);return e}function p(t,e,r,i){for(var n=[],a=e.length,o=0;o<a;o++)n[o]=t.d2l(e[o],0,i)*r;return n}function g(t){for(var e=[],r=t.length,i=0;i<r;i++)e[i]=Math.round(t[i]);return e}function v(t,e){for(var r=t.length,i=0;i<r;i++)if(t[i]<=-.5||t[i]>=e-.5)return!1;return!0}f.handlePick=function(t){if(t.object===this.mesh){var e=t.index=t.data.index;t.data._cellCenter?t.traceCoordinate=t.data.dataCoordinate:t.traceCoordinate=[this.data.x[e],this.data.y[e],this.data.z[e]];var r=this.data.hovertext||this.data.text;return Array.isArray(r)&&void 0!==r[e]?t.textLabel=r[e]:r&&(t.textLabel=r),!0}},f.update=function(t){var e=this.scene,r=e.fullSceneLayout;this.data=t;var i,c=t.x.length,f=h(p(r.xaxis,t.x,e.dataScale[0],t.xcalendar),p(r.yaxis,t.y,e.dataScale[1],t.ycalendar),p(r.zaxis,t.z,e.dataScale[2],t.zcalendar));if(t.i&&t.j&&t.k){if(t.i.length!==t.j.length||t.j.length!==t.k.length||!v(t.i,c)||!v(t.j,c)||!v(t.k,c))return;i=h(g(t.i),g(t.j),g(t.k))}else i=0===t.alphahull?o(f):t.alphahull>0?a(t.alphahull,f):function(t,e){for(var r=["x","y","z"].indexOf(t),i=[],a=e.length,o=0;o<a;o++)i[o]=[e[o][(r+1)%3],e[o][(r+2)%3]];return n(i)}(t.delaunayaxis,f);var m={positions:f,cells:i,lightPosition:[t.lightposition.x,t.lightposition.y,t.lightposition.z],ambient:t.lighting.ambient,diffuse:t.lighting.diffuse,specular:t.lighting.specular,roughness:t.lighting.roughness,fresnel:t.lighting.fresnel,vertexNormalsEpsilon:t.lighting.vertexnormalsepsilon,faceNormalsEpsilon:t.lighting.facenormalsepsilon,opacity:t.opacity,contourEnable:t.contour.show,contourColor:l(t.contour.color).slice(0,3),contourWidth:t.contour.width,useFacetNormals:t.flatshading};if(t.intensity){var y=u(t);this.color="#fff";var x=t.intensitymode;m[x+"Intensity"]=t.intensity,m[x+"IntensityBounds"]=[y.min,y.max],m.colormap=s(t)}else t.vertexcolor?(this.color=t.vertexcolor[0],m.vertexColors=d(t.vertexcolor)):t.facecolor?(this.color=t.facecolor[0],m.cellColors=d(t.facecolor)):(this.color=t.color,m.meshColor=l(t.color));this.mesh.update(m)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},t.exports=function(t,e){var r=t.glplot.gl,n=i({gl:r}),a=new c(t,n,e.uid);return n._trace=a,a.update(e),t.glplot.add(n),a}},function(t,e,r){t.exports=function(t,e){return n(i(t,e))};var i=r(1581),n=r(1584)},function(t,e,r){"use strict";t.exports=function(t,e){return i(e).filter((function(r){for(var i=new Array(r.length),a=0;a<r.length;++a)i[a]=e[r[a]];return n(i)*t<1}))};var i=r(1044),n=r(1582)},function(t,e,r){t.exports=function(t){for(var e=i(t),r=0,n=0;n<t.length;++n)for(var a=t[n],o=0;o<e.length;++o)r+=Math.pow(a[o]-e[o],2);return Math.sqrt(r/t.length)};var i=r(1583)},function(t,e,r){"use strict";var i=r(762),n=r(1271);function a(t,e){for(var r=0,i=t.length,n=0;n<i;++n)r+=t[n]*e[n];return r}function o(t){var e=t.length;if(0===e)return[];t[0].length;var r=i([t.length+1,t.length+1],1),o=i([t.length+1],1);r[e][e]=0;for(var s=0;s<e;++s){for(var l=0;l<=s;++l)r[l][s]=r[s][l]=2*a(t[s],t[l]);o[s]=a(t[s],t[s])}var u=n(r,o),h=0,c=u[e+1];for(s=0;s<c.length;++s)h+=c[s];var f=new Array(e);for(s=0;s<e;++s){c=u[s];var d=0;for(l=0;l<c.length;++l)d+=c[l];f[s]=d/h}return f}function s(t){if(0===t.length)return[];for(var e=t[0].length,r=i([e]),n=o(t),a=0;a<t.length;++a)for(var s=0;s<e;++s)r[s]+=t[a][s]*n[a];return r}s.barycenetric=o,t.exports=s},function(t,e,r){"use strict";t.exports=function(t){return n(i(t))};var i=r(1585),n=r(1586)},function(t,e,r){"use strict";t.exports=function(t){var e,r,i,n=t.length,a=0;for(e=0;e<n;++e)a+=t[e].length;var o=new Array(a),s=0;for(e=0;e<n;++e){var l=t[e],u=l.length;for(r=0;r<u;++r){var h=o[s++]=new Array(u-1),c=0;for(i=0;i<u;++i)i!==r&&(h[c++]=l[i]);if(1&r){var f=h[1];h[1]=h[0],h[0]=f}}}return o}},function(t,e,r){"use strict";var i=r(1274),n=r(1587),a=r(1275);t.exports=function(t){t.sort(n);for(var e=t.length,r=0,o=0;o<e;++o){var s=t[o],l=a(s);if(0!==l){if(r>0){var u=t[r-1];if(0===i(s,u)&&a(u)!==l){r-=1;continue}}t[r++]=s}}return t.length=r,t}},function(t,e,r){"use strict";var i=r(1274),n=r(1275);t.exports=function(t,e){return i(t,e)||n(t)-n(e)}},function(t,e,r){"use strict";t.exports={attributes:r(1085),supplyDefaults:r(1276).supplyDefaults,calc:r(1277),colorbar:{min:"cmin",max:"cmax"},plot:r(1086).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:r(759),categories:["gl3d","showLegend"],meta:{description:["Draws isosurfaces between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}}},function(t,e,r){"use strict";t.exports={attributes:r(1278),supplyDefaults:r(1590),calc:r(1277),colorbar:{min:"cmin",max:"cmax"},plot:r(1591),moduleType:"trace",name:"volume",basePlotModule:r(759),categories:["gl3d","showLegend"],meta:{description:["Draws volume trace between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}}},function(t,e,r){"use strict";var i=r(6),n=r(1278),a=r(1276).supplyIsoDefaults,o=r(1200).opacityscaleDefaults;t.exports=function(t,e,r,s){function l(r,a){return i.coerce(t,e,n,r,a)}a(t,e,r,s,l),o(t,e,s,l)}},function(t,e,r){"use strict";var i=r(941),n=r(693).parseColorScale,a=r(662),o=r(208).extractOpts,s=r(869),l=r(1086).findNearestOnAxis,u=r(1086).generateIsoMeshes;function h(t,e,r){this.scene=t,this.uid=r,this.mesh=e,this.name="",this.data=null,this.showContour=!1}var c=h.prototype;c.handlePick=function(t){if(t.object===this.mesh){var e=t.data.index,r=this.data._meshX[e],i=this.data._meshY[e],n=this.data._meshZ[e],a=this.data._Ys.length,o=this.data._Zs.length,s=l(r,this.data._Xs).id,u=l(i,this.data._Ys).id,h=l(n,this.data._Zs).id,c=t.index=h+o*u+o*a*s;t.traceCoordinate=[this.data._meshX[c],this.data._meshY[c],this.data._meshZ[c],this.data._value[c]];var f=this.data.hovertext||this.data.text;return Array.isArray(f)&&void 0!==f[c]?t.textLabel=f[c]:f&&(t.textLabel=f),!0}},c.update=function(t){var e=this.scene,r=e.fullSceneLayout;function i(t,e,r,i){return e.map((function(e){return t.d2l(e,0,i)*r}))}this.data=u(t);var l={positions:s(i(r.xaxis,t._meshX,e.dataScale[0],t.xcalendar),i(r.yaxis,t._meshY,e.dataScale[1],t.ycalendar),i(r.zaxis,t._meshZ,e.dataScale[2],t.zcalendar)),cells:s(t._meshI,t._meshJ,t._meshK),lightPosition:[t.lightposition.x,t.lightposition.y,t.lightposition.z],ambient:t.lighting.ambient,diffuse:t.lighting.diffuse,specular:t.lighting.specular,roughness:t.lighting.roughness,fresnel:t.lighting.fresnel,vertexNormalsEpsilon:t.lighting.vertexnormalsepsilon,faceNormalsEpsilon:t.lighting.facenormalsepsilon,opacity:t.opacity,opacityscale:t.opacityscale,contourEnable:t.contour.show,contourColor:a(t.contour.color).slice(0,3),contourWidth:t.contour.width,useFacetNormals:t.flatshading},h=o(t);l.vertexIntensity=t._meshIntensity,l.vertexIntensityBounds=[h.min,h.max],l.colormap=n(t),this.mesh.update(l)},c.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},t.exports=function(t,e){var r=t.glplot.gl,n=i({gl:r}),a=new h(t,n,e.uid);return n._trace=a,a.update(e),t.glplot.add(n),a}},function(t,e,r){"use strict";t.exports={moduleType:"trace",name:"streamtube",basePlotModule:r(759),categories:["gl3d","showLegend"],attributes:r(1279),supplyDefaults:r(1593),colorbar:{min:"cmin",max:"cmax"},calc:r(1045).calc,plot:r(1594),eventData:function(t,e){return t.tubex=t.x,t.tubey=t.y,t.tubez=t.z,t.tubeu=e.traceCoordinate[3],t.tubev=e.traceCoordinate[4],t.tubew=e.traceCoordinate[5],t.norm=e.traceCoordinate[6],t.divergence=e.traceCoordinate[7],delete t.x,delete t.y,delete t.z,t},meta:{description:["Use a streamtube trace to visualize flow in a vector field.","","Specify a vector field using 6 1D arrays of equal length,","3 position arrays `x`, `y` and `z`","and 3 vector component arrays `u`, `v`, and `w`.","","By default, the tubes' starting positions will be cut from the vector field's","x-z plane at its minimum y value.","To specify your own starting position, use attributes `starts.x`, `starts.y`","and `starts.z`.","The color is encoded by the norm of (u, v, w), and the local radius","by the divergence of (u, v, w)."].join(" ")}}},function(t,e,r){"use strict";var i=r(6),n=r(151),a=r(1279);t.exports=function(t,e,r,o){function s(r,n){return i.coerce(t,e,a,r,n)}var l=s("u"),u=s("v"),h=s("w"),c=s("x"),f=s("y"),d=s("z");l&&l.length&&u&&u.length&&h&&h.length&&c&&c.length&&f&&f.length&&d&&d.length?(s("starts.x"),s("starts.y"),s("starts.z"),s("maxdisplayed"),s("sizeref"),s("lighting.ambient"),s("lighting.diffuse"),s("lighting.specular"),s("lighting.roughness"),s("lighting.fresnel"),s("lightposition.x"),s("lightposition.y"),s("lightposition.z"),n(t,e,o,s,{prefix:"",cLetter:"c"}),s("text"),s("hovertext"),s("hovertemplate"),e._length=null):e.visible=!1}},function(t,e,r){"use strict";var i=r(1595),n=i.createTubeMesh,a=r(6),o=r(693).parseColorScale,s=r(208).extractOpts,l=r(869),u={xaxis:0,yaxis:1,zaxis:2};function h(t,e){this.scene=t,this.uid=e,this.mesh=null,this.data=null}var c=h.prototype;function f(t){var e=t.length;return e>2?t.slice(1,e-1):2===e?[(t[0]+t[1])/2]:t}function d(t){var e=t.length;return 1===e?[.5,.5]:[t[1]-t[0],t[e-1]-t[e-2]]}function p(t,e){var r=t.fullSceneLayout,n=t.dataScale,h=e._len,c={};function p(t,e){var i=r[e],o=n[u[e]];return a.simpleMap(t,(function(t){return i.d2l(t)*o}))}if(c.vectors=l(p(e._u,"xaxis"),p(e._v,"yaxis"),p(e._w,"zaxis"),h),!h)return{positions:[],cells:[]};var g=p(e._Xs,"xaxis"),v=p(e._Ys,"yaxis"),m=p(e._Zs,"zaxis");if(c.meshgrid=[g,v,m],c.gridFill=e._gridFill,e._slen)c.startingPositions=l(p(e._startsX,"xaxis"),p(e._startsY,"yaxis"),p(e._startsZ,"zaxis"));else{for(var y=v[0],x=f(g),b=f(m),_=new Array(x.length*b.length),w=0,A=0;A<x.length;A++)for(var T=0;T<b.length;T++)_[w++]=[x[A],y,b[T]];c.startingPositions=_}c.colormap=o(e),c.tubeSize=e.sizeref,c.maxLength=e.maxdisplayed;var M=p(e._xbnds,"xaxis"),k=p(e._ybnds,"yaxis"),E=p(e._zbnds,"zaxis"),S=d(g),C=d(v),L=d(m),I=[[M[0]-S[0],k[0]-C[0],E[0]-L[0]],[M[1]+S[1],k[1]+C[1],E[1]+L[1]]],j=i(c,I),R=s(e);j.vertexIntensityBounds=[R.min/e._normMax,R.max/e._normMax];var P=e.lightposition;return j.lightPosition=[P.x,P.y,P.z],j.ambient=e.lighting.ambient,j.diffuse=e.lighting.diffuse,j.specular=e.lighting.specular,j.roughness=e.lighting.roughness,j.fresnel=e.lighting.fresnel,j.opacity=e.opacity,e._pad=j.tubeScale*e.sizeref*2,j}c.handlePick=function(t){var e=this.scene.fullSceneLayout,r=this.scene.dataScale;function i(t,i){var n=e[i],a=r[u[i]];return n.l2c(t)/a}if(t.object===this.mesh){var n=t.data.position,a=t.data.velocity;return t.traceCoordinate=[i(n[0],"xaxis"),i(n[1],"yaxis"),i(n[2],"zaxis"),i(a[0],"xaxis"),i(a[1],"yaxis"),i(a[2],"zaxis"),t.data.intensity*this.data._normMax,t.data.divergence],t.textLabel=this.data.hovertext||this.data.text,!0}},c.update=function(t){this.data=t;var e=p(this.scene,t);this.mesh.update(e)},c.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},t.exports=function(t,e){var r=t.glplot.gl,i=p(t,e),a=n(r,i),o=new h(t,e.uid);return o.mesh=a,o.data=e,a._trace=o,t.glplot.add(a),o}},function(t,e,r){"use strict";var i=r(1228),n=r(1596),a=["xyz","xzy","yxz","yzx","zxy","zyx"],o=function(t,e,r,a){for(var o=0,s=0;s<t.length;s++)for(var l=t[s].velocities,u=0;u<l.length;u++)o=Math.max(o,i.length(l[u]));var h=t.map((function(t){return function(t,e,r,a){for(var o=t.points,s=t.velocities,l=t.divergences,u=[],h=[],c=[],f=[],d=[],p=[],g=0,v=0,m=n.create(),y=n.create(),x=0;x<o.length;x++){var b=o[x],_=s[x],w=l[x];0===e&&(w=.05*r),v=i.length(_)/a,m=n.create(),i.copy(m,_),m[3]=w;for(var A=0;A<8;A++)d[A]=[b[0],b[1],b[2],A];if(f.length>0)for(A=0;A<8;A++){var T=(A+1)%8;u.push(f[A],d[A],d[T],d[T],f[T],f[A]),c.push(y,m,m,m,y,y),p.push(g,v,v,v,g,g);var M=u.length;h.push([M-6,M-5,M-4],[M-3,M-2,M-1])}var k=f;f=d,d=k;var E=y;y=m,m=E;var S=g;g=v,v=S}return{positions:u,cells:h,vectors:c,vertexIntensity:p}}(t,r,a,o)})),c=[],f=[],d=[],p=[];for(s=0;s<h.length;s++){var g=h[s],v=c.length;c=c.concat(g.positions),d=d.concat(g.vectors),p=p.concat(g.vertexIntensity);for(u=0;u<g.cells.length;u++){var m=g.cells[u],y=[];f.push(y);for(var x=0;x<m.length;x++)y.push(m[x]+v)}}return{positions:c,cells:f,vectors:d,vertexIntensity:p,colormap:e}},s=function(t,e){var r,i=t.length;for(r=0;r<i;r++){var n=t[r];if(n===e)return r;if(n>e)return r-1}return r},l=function(t,e,r){return t<e?e:t>r?r:t},u=function(t){var e=1/0;t.sort((function(t,e){return t-e}));for(var r=t.length,i=1;i<r;i++){var n=Math.abs(t[i]-t[i-1]);n<e&&(e=n)}return e};t.exports=function(t,e){var r=t.startingPositions,n=t.maxLength||1e3,h=t.tubeSize||1,c=t.absoluteTubeSize,f=t.gridFill||"+x+y+z",d={};-1!==f.indexOf("-x")&&(d.reversedX=!0),-1!==f.indexOf("-y")&&(d.reversedY=!0),-1!==f.indexOf("-z")&&(d.reversedZ=!0),d.filled=a.indexOf(f.replace(/-/g,"").replace(/\+/g,""));var p=t.getVelocity||function(e){return function(t,e,r){var n=e.vectors,a=e.meshgrid,o=t[0],u=t[1],h=t[2],c=a[0].length,f=a[1].length,d=a[2].length,p=s(a[0],o),g=s(a[1],u),v=s(a[2],h),m=p+1,y=g+1,x=v+1;if(p=l(p,0,c-1),m=l(m,0,c-1),g=l(g,0,f-1),y=l(y,0,f-1),v=l(v,0,d-1),x=l(x,0,d-1),p<0||g<0||v<0||m>c-1||y>f-1||x>d-1)return i.create();var b,_,w,A,T,M,k=a[0][p],E=a[0][m],S=a[1][g],C=a[1][y],L=a[2][v],I=(o-k)/(E-k),j=(u-S)/(C-S),R=(h-L)/(a[2][x]-L);switch(isFinite(I)||(I=.5),isFinite(j)||(j=.5),isFinite(R)||(R=.5),r.reversedX&&(p=c-1-p,m=c-1-m),r.reversedY&&(g=f-1-g,y=f-1-y),r.reversedZ&&(v=d-1-v,x=d-1-x),r.filled){case 5:T=v,M=x,w=g*d,A=y*d,b=p*d*f,_=m*d*f;break;case 4:T=v,M=x,b=p*d,_=m*d,w=g*d*c,A=y*d*c;break;case 3:w=g,A=y,T=v*f,M=x*f,b=p*f*d,_=m*f*d;break;case 2:w=g,A=y,b=p*f,_=m*f,T=v*f*c,M=x*f*c;break;case 1:b=p,_=m,T=v*c,M=x*c,w=g*c*d,A=y*c*d;break;default:b=p,_=m,w=g*c,A=y*c,T=v*c*f,M=x*c*f}var P=n[b+w+T],O=n[b+w+M],z=n[b+A+T],N=n[b+A+M],B=n[_+w+T],F=n[_+w+M],D=n[_+A+T],U=n[_+A+M],V=i.create(),X=i.create(),G=i.create(),W=i.create();i.lerp(V,P,B,I),i.lerp(X,O,F,I),i.lerp(G,z,D,I),i.lerp(W,N,U,I);var H=i.create(),q=i.create();i.lerp(H,V,G,j),i.lerp(q,X,W,j);var Y=i.create();return i.lerp(Y,H,q,R),Y}(e,t,d)},g=t.getDivergence||function(t,e){var r=i.create(),n=1e-4;i.add(r,t,[n,0,0]);var a=p(r);i.subtract(a,a,e),i.scale(a,a,1/n),i.add(r,t,[0,n,0]);var o=p(r);i.subtract(o,o,e),i.scale(o,o,1/n),i.add(r,t,[0,0,n]);var s=p(r);return i.subtract(s,s,e),i.scale(s,s,1/n),i.add(r,a,o),i.add(r,r,s),r},v=[],m=e[0][0],y=e[0][1],x=e[0][2],b=e[1][0],_=e[1][1],w=e[1][2],A=function(t){var e=t[0],r=t[1],i=t[2];return!(e<m||e>b||r<y||r>_||i<x||i>w)},T=10*i.distance(e[0],e[1])/n,M=T*T,k=1,E=0,S=r.length;S>1&&(k=function(t){for(var e=[],r=[],i=[],n={},a={},o={},s=t.length,l=0;l<s;l++){var h=t[l],c=h[0],f=h[1],d=h[2];n[c]||(e.push(c),n[c]=!0),a[f]||(r.push(f),a[f]=!0),o[d]||(i.push(d),o[d]=!0)}var p=u(e),g=u(r),v=u(i),m=Math.min(p,g,v);return isFinite(m)?m:1}(r));for(var C=0;C<S;C++){var L=i.create();i.copy(L,r[C]);var I=[L],j=[],R=p(L),P=L;j.push(R);var O=[],z=g(L,R),N=i.length(z);isFinite(N)&&N>E&&(E=N),O.push(N),v.push({points:I,velocities:j,divergences:O});for(var B=0;B<100*n&&I.length<n&&A(L);){B++;var F=i.clone(R),D=i.squaredLength(F);if(0===D)break;if(D>M&&i.scale(F,F,T/Math.sqrt(D)),i.add(F,F,L),R=p(F),i.squaredDistance(P,F)-M>-1e-4*M){I.push(F),P=F,j.push(R);z=g(F,R),N=i.length(z);isFinite(N)&&N>E&&(E=N),O.push(N)}L=F}}var U=o(v,t.colormap,E,k);return c?U.tubeScale=c:(0===E&&(E=1),U.tubeScale=.5*h*k/E),U};var h=r(1619),c=r(1064).createMesh;t.exports.createTubeMesh=function(t,e){return c(t,e,{shaders:h,traceType:"streamtube"})}},function(t,e,r){t.exports={create:r(1597),clone:r(1598),fromValues:r(1599),copy:r(1600),set:r(1601),add:r(1602),subtract:r(1603),multiply:r(1604),divide:r(1605),min:r(1606),max:r(1607),scale:r(1280),scaleAndAdd:r(1608),distance:r(1609),squaredDistance:r(1610),length:r(1611),squaredLength:r(1612),negate:r(1613),inverse:r(1614),normalize:r(1281),dot:r(1615),lerp:r(1616),random:r(1617),transformMat4:r(1223),transformQuat:r(1618)}},function(t,e){t.exports=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},function(t,e){t.exports=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},function(t,e){t.exports=function(t,e,r,i){var n=new Float32Array(4);return n[0]=t,n[1]=e,n[2]=r,n[3]=i,n}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},function(t,e){t.exports=function(t,e,r,i,n){return t[0]=e,t[1]=r,t[2]=i,t[3]=n,t}},function(t,e){t.exports=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}},function(t,e){t.exports=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}},function(t,e){t.exports=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}},function(t,e){t.exports=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}},function(t,e){t.exports=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}},function(t,e){t.exports=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}},function(t,e){t.exports=function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t}},function(t,e){t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(r*r+i*i+n*n+a*a)}},function(t,e){t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2],a=e[3]-t[3];return r*r+i*i+n*n+a*a}},function(t,e){t.exports=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];return Math.sqrt(e*e+r*r+i*i+n*n)}},function(t,e){t.exports=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];return e*e+r*r+i*i+n*n}},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}},function(t,e){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}},function(t,e){t.exports=function(t,e,r,i){var n=e[0],a=e[1],o=e[2],s=e[3];return t[0]=n+i*(r[0]-n),t[1]=a+i*(r[1]-a),t[2]=o+i*(r[2]-o),t[3]=s+i*(r[3]-s),t}},function(t,e,r){var i=r(1281),n=r(1280);t.exports=function(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),i(t,t),n(t,t,e),t}},function(t,e){t.exports=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=r[0],s=r[1],l=r[2],u=r[3],h=u*i+s*a-l*n,c=u*n+l*i-o*a,f=u*a+o*n-s*i,d=-o*i-s*n-l*a;return t[0]=h*u+d*-o+c*-l-f*-s,t[1]=c*u+d*-s+f*-o-h*-l,t[2]=f*u+d*-l+h*-s-c*-o,t[3]=e[3],t}},function(t,e,r){var i=r(630),n=i("./triangle-vertex.glsl"),a=i("./triangle-fragment.glsl"),o=i("./pick-vertex.glsl"),s=i("./pick-fragment.glsl");e.meshShader={vertex:n,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},e.pickShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}}])]);