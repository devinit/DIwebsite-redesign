(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1072:function(e,t,n){"use strict";var r=n(859),a=n(591),i=n(396),o=n(387).extendFlat;e.exports=o({x:r.x,y:r.y,z:r.z,marker:r.marker,histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:r.xbins,nbinsy:r.nbinsy,ybins:r.ybins,autobinx:r.autobinx,autobiny:r.autobiny,bingroup:r.bingroup,xbingroup:r.xbingroup,ybingroup:r.ybingroup,autocontour:a.autocontour,ncontours:a.ncontours,contours:a.contours,line:{color:a.line.color,width:o({},a.line.width,{dflt:.5,description:"Sets the contour line width in (in px)"}),dash:a.line.dash,smoothing:a.line.smoothing,editType:"plot"},zhoverformat:r.zhoverformat,hovertemplate:r.hovertemplate},i("",{cLetter:"z",editTypeOverride:"calc"}))},1157:function(e,t,n){"use strict";e.exports=n(1319)},1319:function(e,t,n){"use strict";e.exports={attributes:n(1072),supplyDefaults:n(1320),crossTraceDefaults:n(721),calc:n(838),plot:n(855).plot,layerName:"contourlayer",style:n(856),colorbar:n(710),hoverPoints:n(935),moduleType:"trace",name:"histogram2dcontour",basePlotModule:n(409),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{hrName:"histogram_2d_contour",description:["The sample data from which statistics are computed is set in `x`","and `y` (where `x` and `y` represent marginal distributions,","binning is set in `xbins` and `ybins` in this case)","or `z` (where `z` represent the 2D distribution and binning set,","binning is set by `x` and `y` in this case).","The resulting distribution is visualized as a contour plot."].join(" ")}}},1320:function(e,t,n){"use strict";var r=n(380),a=n(951),i=n(708),o=n(709),s=n(1072);e.exports=function(e,t,n,l){function c(n,a){return r.coerce(e,t,s,n,a)}a(e,t,c,l),!1!==t.visible&&(i(e,t,c,(function(n){return r.coerce2(e,t,s,n)})),o(e,t,c,l),c("hovertemplate"))}},412:function(e,t,n){"use strict";var r=n(398),a=n(391).hovertemplateAttrs,i=n(391).texttemplateAttrs,o=n(396),s=n(406),l=n(444),c=n(387).extendFlat,u=s({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),h=c({},r.marker.line.width,{dflt:0}),d=c({width:h,editType:"calc"},o("marker.line")),p=c({line:d,editType:"calc"},o("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,role:"style",editType:"style",description:"Sets the opacity of the bars."}});e.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,texttemplate:i({editType:"plot"},{keys:l.eventDataKeys}),hovertext:r.hovertext,hovertemplate:a({},{keys:l.eventDataKeys}),textposition:{valType:"enumerated",role:"info",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",role:"info",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",role:"info",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:c({},u,{description:"Sets the font used for `text`."}),insidetextfont:c({},u,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:c({},u,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],role:"info",dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:c({},r.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",role:"info",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,role:"info",editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,role:"info",editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:p,offsetgroup:{valType:"string",role:"info",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",role:"info",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,_deprecated:{bardir:{valType:"enumerated",role:"info",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}}},432:function(e,t,n){"use strict";var r=n(380),a=n(382),i=n(381),o=n(434),s=n(488),l=n(395).getAxisGroup,c=n(412),u=r.coerceFont;function h(e,t,n,r){var a=t.orientation,i=t[{v:"x",h:"y"}[a]+"axis"],o=l(n,i)+a,s=n._alignmentOpts||{},c=r("alignmentgroup"),u=s[o];u||(u=s[o]={});var h=u[c];h?h.traces.push(t):h=u[c]={traces:[t],alignmentIndex:Object.keys(u).length,offsetGroups:{}};var d=r("offsetgroup"),p=h.offsetGroups,f=p[d];d&&(f||(f=p[d]={offsetIndex:Object.keys(p).length}),t._offsetIndex=f.offsetIndex)}function d(e,t,n,a,i,o){var s=!(!1===(o=o||{}).moduleHasSelected),l=!(!1===o.moduleHasUnselected),c=!(!1===o.moduleHasConstrain),h=!(!1===o.moduleHasCliponaxis),d=!(!1===o.moduleHasTextangle),p=!(!1===o.moduleHasInsideanchor),f=!!o.hasPathbar,g=Array.isArray(i)||"auto"===i,y=g||"inside"===i,m=g||"outside"===i;if(y||m){var v=u(a,"textfont",n.font),x=r.extendFlat({},v),b=!(e.textfont&&e.textfont.color);if(b&&delete x.color,u(a,"insidetextfont",x),f){var T=r.extendFlat({},v);b&&delete T.color,u(a,"pathbar.textfont",T)}m&&u(a,"outsidetextfont",v),s&&a("selected.textfont.color"),l&&a("unselected.textfont.color"),c&&a("constraintext"),h&&a("cliponaxis"),d&&a("textangle"),a("texttemplate")}y&&p&&a("insidetextanchor")}e.exports={supplyDefaults:function(e,t,n,l){function u(n,a){return r.coerce(e,t,c,n,a)}if(o(e,t,l,u)){u("orientation",t.x&&!t.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var h=u("textposition");d(e,t,l,u,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(e,t,u,n,l);var p=(t.marker.line||{}).color,f=i.getComponentMethod("errorbars","supplyDefaults");f(e,t,p||a.defaultLine,{axis:"y"}),f(e,t,p||a.defaultLine,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,u)}else t.visible=!1},crossTraceDefaults:function(e,t){var n;function a(e){return r.coerce(n._input,n,c,e)}if("group"===t.barmode)for(var i=0;i<e.length;i++)"bar"===(n=e[i]).type&&(n._input,h(0,n,t,a))},handleGroupingDefaults:h,handleText:d}},434:function(e,t,n){"use strict";var r=n(380),a=n(381);e.exports=function(e,t,n,i){var o,s=i("x"),l=i("y");if(a.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),s){var c=r.minRowLength(s);l?o=Math.min(c,r.minRowLength(l)):(o=c,i("y0"),i("dy"))}else{if(!l)return 0;o=r.minRowLength(l),i("x0"),i("dx")}return t._length=o,o}},444:function(e,t,n){"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},474:function(e,t,n){"use strict";var r=n(380);e.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");var a=t.marker;if(a){r.mergeArray(a.opacity,e,"mo",!0),r.mergeArray(a.color,e,"mc");var i=a.line;i&&(r.mergeArray(i.color,e,"mlc"),r.mergeArrayCastPositive(i.width,e,"mlw"))}}},484:function(e,t,n){"use strict";var r=n(398),a=n(399),i=n(391).hovertemplateAttrs,o=n(396),s=n(485).FORMAT_LINK,l=n(387).extendFlat;e.exports=l({z:{valType:"data_array",editType:"calc",description:"Sets the z data."},x:l({},r.x,{impliedEdits:{xtype:"array"}}),x0:l({},r.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},r.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},r.y,{impliedEdits:{ytype:"array"}}),y0:l({},r.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},r.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"calc",description:"Same as `text`."},transpose:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:"Transposes the z data."},xtype:{valType:"enumerated",values:["array","scaled"],role:"info",editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's x coordinates are given by *x*","(the default behavior when `x` is provided).","If *scaled*, the heatmap's x coordinates are given by *x0* and *dx*","(the default behavior when `x` is not provided)."].join(" ")},ytype:{valType:"enumerated",values:["array","scaled"],role:"info",editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's y coordinates are given by *y*","(the default behavior when `y` is provided)","If *scaled*, the heatmap's y coordinates are given by *y0* and *dy*","(the default behavior when `y` is not provided)"].join(" ")},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,role:"style",editType:"calc",description:["Picks a smoothing algorithm use to smooth `z` data."].join(" ")},hoverongaps:{valType:"boolean",dflt:!0,role:"style",editType:"none",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data have hover labels associated with them."].join(" ")},connectgaps:{valType:"boolean",role:"info",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array and `zsmooth` is not false;","otherwise it is defaulted to false."].join(" ")},xgap:{valType:"number",dflt:0,min:0,role:"style",editType:"plot",description:"Sets the horizontal gap (in pixels) between bricks."},ygap:{valType:"number",dflt:0,min:0,role:"style",editType:"plot",description:"Sets the vertical gap (in pixels) between bricks."},zhoverformat:{valType:"string",dflt:"",role:"style",editType:"none",description:["Sets the hover text formatting rule using d3 formatting mini-languages","which are very similar to those in Python. See:",s].join(" ")},hovertemplate:i(),showlegend:l({},a.showlegend,{dflt:!1})},{transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},488:function(e,t,n){"use strict";var r=n(382),a=n(401).hasColorscale,i=n(403);e.exports=function(e,t,n,o,s){n("marker.color",o),a(e,"marker")&&i(e,t,s,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",r.defaultLine),a(e,"marker.line")&&i(e,t,s,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")}},496:function(e,t,n){"use strict";e.exports=function(e){return e.end+e.size/1e6}},499:function(e,t,n){"use strict";var r=n(385);e.exports={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,a){var i=a[t];return r(i)?(i=Number(i),n[e]+=i,i):0},avg:function(e,t,n,a,i){var o=a[t];return r(o)&&(o=Number(o),n[e]+=o,i[e]++),0},min:function(e,t,n,a){var i=a[t];if(r(i)){if(i=Number(i),!r(n[e]))return n[e]=i,i;if(n[e]>i){var o=i-n[e];return n[e]=i,o}}return 0},max:function(e,t,n,a){var i=a[t];if(r(i)){if(i=Number(i),!r(n[e]))return n[e]=i,i;if(n[e]<i){var o=i-n[e];return n[e]=i,o}}return 0}}},500:function(e,t,n){"use strict";e.exports={percent:function(e,t){for(var n=e.length,r=100/t,a=0;a<n;a++)e[a]*=r},probability:function(e,t){for(var n=e.length,r=0;r<n;r++)e[r]/=t},density:function(e,t,n,r){var a=e.length;r=r||1;for(var i=0;i<a;i++)e[i]*=n[i]*r},"probability density":function(e,t,n,r){var a=e.length;r&&(t/=r);for(var i=0;i<a;i++)e[i]*=n[i]/t}}},501:function(e,t,n){"use strict";e.exports=function(e,t){for(var n=e.length,r=0,a=0;a<n;a++)t[a]?(e[a]/=t[a],r+=e[a]):e[a]=null;return r}},502:function(e,t,n){"use strict";var r=n(390),a=r.ONEAVGYEAR,i=r.ONEAVGMONTH,o=r.ONEDAY,s=r.ONEHOUR,l=r.ONEMIN,c=r.ONESEC,u=n(384).tickIncrement;function h(e,t,n,r){if(e*t<=0)return 1/0;for(var a=Math.abs(t-e),i="date"===n.type,o=d(a,i),s=0;s<10;s++){var l=d(80*o,i);if(o===l)break;if(!p(l,e,t,i,n,r))break;o=l}return o}function d(e,t){return t&&e>c?e>o?e>1.1*a?a:e>1.1*i?i:o:e>s?s:e>l?l:c:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function p(e,t,n,r,i,s){if(r&&e>o){var l=f(t,i,s),c=f(n,i,s),u=e===a?0:1;return l[u]!==c[u]}return Math.floor(n/e)-Math.floor(t/e)>.1}function f(e,t,n){var r=t.c2d(e,a,n).split("-");return""===r[0]&&(r.unshift(),r[0]="-"+r[0]),r}e.exports=function(e,t,n,r,i){var s,l,c=-1.1*t,d=-.1*t,p=e-d,f=n[0],g=n[1],y=Math.min(h(f+d,f+p,r,i),h(g+d,g+p,r,i)),m=Math.min(h(f+c,f+d,r,i),h(g+c,g+d,r,i));if(y>m&&m<Math.abs(g-f)/4e3?(s=y,l=!1):(s=Math.min(y,m),l=!0),"date"===r.type&&s>o){var v=s===a?1:6,x=s===a?"M12":"M1";return function(t,n){var o=r.c2d(t,a,i),s=o.indexOf("-",v);s>0&&(o=o.substr(0,s));var c=r.d2c(o,0,i);if(c<t){var h=u(c,x,!1,i);(c+h)/2<t+e&&(c=h)}return n&&l?u(c,x,!0,i):c}}return function(t,n){var r=s*Math.round(t/s);return r+s/10<t&&r+.9*s<t+e&&(r+=s),n&&l&&(r-=s),r}}},544:function(e,t,n){"use strict";var r=n(380),a=[[-1,0],[1,0],[0,-1],[0,1]];function i(e){return.5-.25*Math.min(1,.5*e)}function o(e,t,n){var r,i,o,s,l,c,u,h,d,p,f,g,y,m=0;for(s=0;s<t.length;s++){for(i=(r=t[s])[0],o=r[1],f=e[i][o],p=0,d=0,l=0;l<4;l++)(u=e[i+(c=a[l])[0]])&&void 0!==(h=u[o+c[1]])&&(0===p?g=y=h:(g=Math.min(g,h),y=Math.max(y,h)),d++,p+=h);if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";e[i][o]=p/d,void 0===f?d<4&&(m=1):(e[i][o]=(1+n)*e[i][o]-n*f,y>g&&(m=Math.max(m,Math.abs(e[i][o]-f)/(y-g))))}return m}e.exports=function(e,t){var n,a=1;for(o(e,t),n=0;n<t.length&&!(t[n][2]<4);n++);for(t=t.slice(n),n=0;n<100&&a>.01;n++)a=o(e,t,i(a));return a>.01&&r.log("interp2d didn't converge quickly",a),e}},545:function(e,t,n){"use strict";var r=n(380).maxRowLength;e.exports=function(e){var t,n,a,i,o,s,l,c,u=[],h={},d=[],p=e[0],f=[],g=[0,0,0],y=r(e);for(n=0;n<e.length;n++)for(t=f,f=p,p=e[n+1]||[],a=0;a<y;a++)void 0===f[a]&&((s=(void 0!==f[a-1]?1:0)+(void 0!==f[a+1]?1:0)+(void 0!==t[a]?1:0)+(void 0!==p[a]?1:0))?(0===n&&s++,0===a&&s++,n===e.length-1&&s++,a===f.length-1&&s++,s<4&&(h[[n,a]]=[n,a,s]),u.push([n,a,s])):d.push([n,a]));for(;d.length;){for(l={},c=!1,o=d.length-1;o>=0;o--)(s=((h[[(n=(i=d[o])[0])-1,a=i[1]]]||g)[2]+(h[[n+1,a]]||g)[2]+(h[[n,a-1]]||g)[2]+(h[[n,a+1]]||g)[2])/20)&&(l[i]=[n,a,s],d.splice(o,1),c=!0);if(!c)throw"findEmpties iterated with no new neighbors";for(i in l)h[i]=l[i],u.push(l[i])}return u.sort((function(e,t){return t[2]-e[2]}))}},556:function(e,t,n){"use strict";var r=n(385),a=n(380),i=n(390).BADNUM;e.exports=function(e,t,n,o){var s,l,c,u,h,d;function p(e){if(r(e))return+e}if(t&&t.transpose){for(s=0,h=0;h<e.length;h++)s=Math.max(s,e[h].length);if(0===s)return!1;c=function(e){return e.length},u=function(e,t,n){return(e[n]||[])[t]}}else s=e.length,c=function(e,t){return e[t].length},u=function(e,t,n){return(e[t]||[])[n]};var f=function(e,t,n){return t===i||n===i?i:u(e,t,n)};function g(e){if(t&&"carpet"!==t.type&&"contourcarpet"!==t.type&&e&&"category"===e.type&&t["_"+e._id.charAt(0)].length){var n=e._id.charAt(0),r={},o=t["_"+n+"CategoryMap"]||t[n];for(h=0;h<o.length;h++)r[o[h]]=h;return function(t){var n=r[e._categories[t]];return n+1?n:i}}return a.identity}var y=g(n),m=g(o);o&&"category"===o.type&&(s=o._categories.length);var v=new Array(s);for(h=0;h<s;h++)for(l=n&&"category"===n.type?n._categories.length:c(e,h),v[h]=new Array(l),d=0;d<l;d++)v[h][d]=p(f(e,m(h),y(d)));return v}},557:function(e,t,n){"use strict";var r=n(380),a=n(390).BADNUM;e.exports=function(e,t,n,i,o,s){var l,c,u,h,d=e._length,p=t.makeCalcdata(e,i),f=n.makeCalcdata(e,o),g=e.text,y=void 0!==g&&r.isArray1D(g),m=e.hovertext,v=void 0!==m&&r.isArray1D(m),x=r.distinctVals(p),b=x.vals,T=r.distinctVals(f),w=T.vals,M=[],z=w.length,A=b.length;for(l=0;l<s.length;l++)M[l]=r.init2dArray(z,A);y&&(u=r.init2dArray(z,A)),v&&(h=r.init2dArray(z,A));var _=r.init2dArray(z,A);for(l=0;l<d;l++)if(p[l]!==a&&f[l]!==a){var k=r.findBin(p[l]+x.minDiff/2,b),S=r.findBin(f[l]+T.minDiff/2,w);for(c=0;c<s.length;c++){var I=e[s[c]];M[c][S][k]=I[l],_[S][k]=l}y&&(u[S][k]=g[l]),v&&(h[S][k]=m[l])}for(e["_"+i]=b,e["_"+o]=w,c=0;c<s.length;c++)e["_"+s[c]]=M[c];y&&(e._text=u),v&&(e._hovertext=h),t&&"category"===t.type&&(e["_"+i+"CategoryMap"]=b.map((function(e){return t._categories[e]}))),n&&"category"===n.type&&(e["_"+o+"CategoryMap"]=w.map((function(e){return n._categories[e]}))),e._after2before=_}},564:function(e,t,n){"use strict";var r=n(381),a=n(380),i=n(384),o=n(699),s=n(421),l=n(557),c=n(556),u=n(544),h=n(545),d=n(612),p=n(390).BADNUM;function f(e){for(var t=[],n=e.length,r=0;r<n;r++){var a=e[r];a!==p&&t.push(a)}return t}e.exports=function(e,t){var n,g,y,m,v,x,b,T,w,M=i.getFromId(e,t.xaxis||"x"),z=i.getFromId(e,t.yaxis||"y"),A=r.traceIs(t,"contour"),_=r.traceIs(t,"histogram"),k=r.traceIs(t,"gl2d"),S=A?"best":t.zsmooth;if(M._minDtick=0,z._minDtick=0,_)n=(w=o(e,t)).x,g=w.x0,y=w.dx,m=w.y,v=w.y0,x=w.dy,b=w.z;else{var I=t.z;a.isArray1D(I)?(l(t,M,z,"x","y",["z"]),n=t._x,m=t._y,I=t._z):(n=t._x=t.x?M.makeCalcdata(t,"x"):[],m=t._y=t.y?z.makeCalcdata(t,"y"):[]),g=t.x0,y=t.dx,v=t.y0,x=t.dy,b=c(I,t,M,z)}function O(e){S=t._input.zsmooth=t.zsmooth=!1,a.warn('cannot use zsmooth: "fast": '+e)}if((M.rangebreaks||z.rangebreaks)&&(b=function(e,t,n){for(var r=[],a=-1,i=0;i<n.length;i++)if(t[i]!==p){a++,r[a]=[];for(var o=0;o<n[i].length;o++)e[o]!==p&&r[a].push(n[i][o])}return r}(n,m,b),_||(n=f(n),m=f(m),t._x=n,t._y=m)),_||!A&&!t.connectgaps||(t._emptypoints=h(b),u(b,t._emptypoints)),"fast"===S)if("log"===M.type||"log"===z.type)O("log axis found");else if(!_){if(n.length){var L=(n[n.length-1]-n[0])/(n.length-1),E=Math.abs(L/100);for(T=0;T<n.length-1;T++)if(Math.abs(n[T+1]-n[T]-L)>E){O("x scale is not linear");break}}if(m.length&&"fast"===S){var D=(m[m.length-1]-m[0])/(m.length-1),F=Math.abs(D/100);for(T=0;T<m.length-1;T++)if(Math.abs(m[T+1]-m[T]-D)>F){O("y scale is not linear");break}}}var j=a.maxRowLength(b),N="scaled"===t.xtype?"":n,C=d(t,N,g,y,j,M),R="scaled"===t.ytype?"":m,B=d(t,R,v,x,b.length,z);k||(t._extremes[M._id]=i.findExtremes(M,C),t._extremes[z._id]=i.findExtremes(z,B));var H={x:C,y:B,z:b,text:t._text||t.text,hovertext:t._hovertext||t.hovertext};if(N&&N.length===C.length-1&&(H.xCenter=N),R&&R.length===B.length-1&&(H.yCenter=R),_&&(H.xRanges=w.xRanges,H.yRanges=w.yRanges,H.pts=w.pts),A||s(e,t,{vals:b,cLetter:"z"}),A&&t.contours&&"heatmap"===t.contours.coloring){var P={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar};H.xfill=d(P,N,g,y,j,M),H.yfill=d(P,R,v,x,b.length,z)}return[H]}},565:function(e,t,n){"use strict";var r=n(385),a=n(380),i=n(381),o=n(384),s=n(474),l=n(499),c=n(500),u=n(501),h=n(502);function d(e,t,n,s,l){var c,u,h,p,f,g,y,m=s+"bins",v=e._fullLayout,x=t["_"+s+"bingroup"],b=v._histogramBinOpts[x],T="overlay"===v.barmode,w=function(e){return n.r2c(e,0,p)},M=function(e){return n.c2r(e,0,p)},z="date"===n.type?function(e){return e||0===e?a.cleanDate(e,null,p):null}:function(e){return r(e)?Number(e):null};function A(e,t,n){t[e+"Found"]?(t[e]=z(t[e]),null===t[e]&&(t[e]=n[e])):(g[e]=t[e]=n[e],a.nestedProperty(u[0],m+"."+e).set(n[e]))}if(t["_"+s+"autoBinFinished"])delete t["_"+s+"autoBinFinished"];else{u=b.traces;var _=[],k=!0,S=!1,I=!1;for(c=0;c<u.length;c++)if((h=u[c]).visible){var O=b.dirs[c];f=h["_"+O+"pos0"]=n.makeCalcdata(h,O),_=a.concat(_,f),delete h["_"+s+"autoBinFinished"],!0===t.visible&&(k?k=!1:(delete h._autoBin,h["_"+s+"autoBinFinished"]=1),i.traceIs(h,"2dMap")&&(S=!0),"histogram2dcontour"===h.type&&(I=!0))}p=u[0][s+"calendar"];var L=o.autoBin(_,n,b.nbins,S,p,b.sizeFound&&b.size),E=u[0]._autoBin={};if(g=E[b.dirs[0]]={},I&&(b.size||(L.start=M(o.tickIncrement(w(L.start),L.size,!0,p))),void 0===b.end&&(L.end=M(o.tickIncrement(w(L.end),L.size,!1,p)))),T&&!i.traceIs(t,"2dMap")&&0===L._dataSpan&&"category"!==n.type&&"multicategory"!==n.type){if(l)return[L,f,!0];L=function(e,t,n,r,i){var o,s,l,c=e._fullLayout,u=function(e,t){for(var n=t.xaxis,r=t.yaxis,a=t.orientation,i=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===a&&l.xaxis===n&&l.yaxis===r&&i.push(l)}return i}(e,t),h=!1,p=1/0,f=[t];for(o=0;o<u.length;o++)if((s=u[o])===t)h=!0;else if(h){var g=d(e,s,n,r,!0),y=g[0],m=g[2];s["_"+r+"autoBinFinished"]=1,s["_"+r+"pos0"]=g[1],m?f.push(s):p=Math.min(p,y.size)}else l=c._histogramBinOpts[s["_"+r+"bingroup"]],p=Math.min(p,l.size||s[i].size);var v=new Array(f.length);for(o=0;o<f.length;o++)for(var x=f[o]["_"+r+"pos0"],b=0;b<x.length;b++)if(void 0!==x[b]){v[o]=x[b];break}isFinite(p)||(p=a.distinctVals(v).minDiff);for(o=0;o<f.length;o++){var T=(s=f[o])[r+"calendar"],w={start:n.c2r(v[o]-p/2,0,T),end:n.c2r(v[o]+p/2,0,T),size:p};s._input[i]=s[i]=w,(l=c._histogramBinOpts[s["_"+r+"bingroup"]])&&a.extendFlat(l,w)}return t[i]}(e,t,n,s,m)}(y=h.cumulative||{}).enabled&&"include"!==y.currentbin&&("decreasing"===y.direction?L.start=M(o.tickIncrement(w(L.start),L.size,!0,p)):L.end=M(o.tickIncrement(w(L.end),L.size,!1,p))),b.size=L.size,b.sizeFound||(g.size=L.size,a.nestedProperty(u[0],m+".size").set(L.size)),A("start",b,L),A("end",b,L)}f=t["_"+s+"pos0"],delete t["_"+s+"pos0"];var D=t._input[m]||{},F=a.extendFlat({},b),j=b.start,N=n.r2l(D.start),C=void 0!==N;if((b.startFound||C)&&N!==n.r2l(j)){var R=C?N:a.aggNums(Math.min,null,f),B={type:"category"===n.type||"multicategory"===n.type?"linear":n.type,r2l:n.r2l,dtick:b.size,tick0:j,calendar:p,range:[R,o.tickIncrement(R,b.size,!1,p)].map(n.l2r)},H=o.tickFirst(B);H>n.r2l(R)&&(H=o.tickIncrement(H,b.size,!0,p)),F.start=n.l2r(H),C||a.nestedProperty(t,m+".start").set(F.start)}var P=b.end,G=n.r2l(D.end),U=void 0!==G;if((b.endFound||U)&&G!==n.r2l(P)){var V=U?G:a.aggNums(Math.max,null,f);F.end=n.l2r(V),U||a.nestedProperty(t,m+".start").set(F.end)}var q="autobin"+s;return!1===t._input[q]&&(t._input[m]=a.extendFlat({},t[m]||{}),delete t._input[q],delete t[q]),[F,f]}e.exports={calc:function(e,t){var n,i,p,f,g=[],y=[],m=o.getFromId(e,"h"===t.orientation?t.yaxis:t.xaxis),v="h"===t.orientation?"y":"x",x={x:"y",y:"x"}[v],b=t[v+"calendar"],T=t.cumulative,w=d(e,t,m,v),M=w[0],z=w[1],A="string"==typeof M.size,_=[],k=A?_:M,S=[],I=[],O=[],L=0,E=t.histnorm,D=t.histfunc,F=-1!==E.indexOf("density");T.enabled&&F&&(E=E.replace(/ ?density$/,""),F=!1);var j,N="max"===D||"min"===D?null:0,C=l.count,R=c[E],B=!1,H=function(e){return m.r2c(e,0,b)};for(a.isArrayOrTypedArray(t[x])&&"count"!==D&&(j=t[x],B="avg"===D,C=l[D]),n=H(M.start),p=H(M.end)+(n-o.tickIncrement(n,M.size,!1,b))/1e6;n<p&&g.length<1e6&&(i=o.tickIncrement(n,M.size,!1,b),g.push((n+i)/2),y.push(N),O.push([]),_.push(n),F&&S.push(1/(i-n)),B&&I.push(0),!(i<=n));)n=i;_.push(n),A||"date"!==m.type||(k={start:H(k.start),end:H(k.end),size:k.size}),e._fullLayout._roundFnOpts||(e._fullLayout._roundFnOpts={});var P=t["_"+v+"bingroup"],G={leftGap:1/0,rightGap:1/0};P&&(e._fullLayout._roundFnOpts[P]||(e._fullLayout._roundFnOpts[P]=G),G=e._fullLayout._roundFnOpts[P]);var U,V=y.length,q=!0,K=G.leftGap,Z=G.rightGap,W={};for(n=0;n<z.length;n++){var X=z[n];(f=a.findBin(X,k))>=0&&f<V&&(L+=C(f,n,y,j,I),q&&O[f].length&&X!==z[O[f][0]]&&(q=!1),O[f].push(n),W[n]=f,K=Math.min(K,X-_[f]),Z=Math.min(Z,_[f+1]-X))}G.leftGap=K,G.rightGap=Z,q||(U=function(t,n){return function(){var r=e._fullLayout._roundFnOpts[P];return h(r.leftGap,r.rightGap,_,m,b)(t,n)}}),B&&(L=u(y,I)),R&&R(y,L,S),T.enabled&&function(e,t,n){var r,a,i;function o(t){i=e[t],e[t]/=2}function s(t){a=e[t],e[t]=i+a/2,i+=a}if("half"===n)if("increasing"===t)for(o(0),r=1;r<e.length;r++)s(r);else for(o(e.length-1),r=e.length-2;r>=0;r--)s(r);else if("increasing"===t){for(r=1;r<e.length;r++)e[r]+=e[r-1];"exclude"===n&&(e.unshift(0),e.pop())}else{for(r=e.length-2;r>=0;r--)e[r]+=e[r+1];"exclude"===n&&(e.push(0),e.shift())}}(y,T.direction,T.currentbin);var J=Math.min(g.length,y.length),Y=[],$=0,Q=J-1;for(n=0;n<J;n++)if(y[n]){$=n;break}for(n=J-1;n>=$;n--)if(y[n]){Q=n;break}for(n=$;n<=Q;n++)if(r(g[n])&&r(y[n])){var ee={p:g[n],s:y[n],b:0};T.enabled||(ee.pts=O[n],q?ee.ph0=ee.ph1=O[n].length?z[O[n][0]]:g[n]:(t._computePh=!0,ee.ph0=U(_[n]),ee.ph1=U(_[n+1],!0))),Y.push(ee)}return 1===Y.length&&(Y[0].width1=o.tickIncrement(Y[0].p,M.size,!1,b)-Y[0].p),s(Y,t),a.isArrayOrTypedArray(t.selectedpoints)&&a.tagSelected(Y,t,W),Y},calcAllAutoBins:d}},591:function(e,t,n){"use strict";var r=n(484),a=n(398),i=n(396),o=n(490).dash,s=n(406),l=n(387).extendFlat,c=n(617),u=c.COMPARISON_OPS2,h=c.INTERVAL_OPS,d=n(485).FORMAT_LINK,p=a.line;e.exports=l({z:r.z,x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,hovertext:r.hovertext,transpose:r.transpose,xtype:r.xtype,ytype:r.ytype,zhoverformat:r.zhoverformat,hovertemplate:r.hovertemplate,hoverongaps:r.hoverongaps,connectgaps:l({},r.connectgaps,{description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array","otherwise it is defaulted to false."].join(" ")}),fillcolor:{valType:"color",role:"style",editType:"calc",description:["Sets the fill color if `contours.type` is *constraint*.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},autocontour:{valType:"boolean",dflt:!0,role:"style",editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0},description:["Determines whether or not the contour level attributes are","picked by an algorithm.","If *true*, the number of contour levels can be set in `ncontours`.","If *false*, set the contour level attributes in `contours`."].join(" ")},ncontours:{valType:"integer",dflt:15,min:1,role:"style",editType:"calc",description:["Sets the maximum number of contour levels. The actual number","of contours will be chosen automatically to be less than or","equal to the value of `ncontours`.","Has an effect only if `autocontour` is *true* or if","`contours.size` is missing."].join(" ")},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",role:"info",editType:"calc",description:["If `levels`, the data is represented as a contour plot with multiple","levels displayed. If `constraint`, the data is represented as constraints","with the invalid region shaded as specified by the `operation` and","`value` parameters."].join(" ")},start:{valType:"number",dflt:null,role:"style",editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,role:"style",editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,role:"style",editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the step between each contour level.","Must be positive."].join(" ")},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",role:"style",editType:"calc",description:["Determines the coloring method showing the contour values.","If *fill*, coloring is done evenly between each contour level","If *heatmap*, a heatmap gradient coloring is applied","between each contour level.","If *lines*, coloring is done on the contour lines.","If *none*, no coloring is applied on this trace."].join(" ")},showlines:{valType:"boolean",dflt:!0,role:"style",editType:"plot",description:["Determines whether or not the contour lines are drawn.","Has an effect only if `contours.coloring` is set to *fill*."].join(" ")},showlabels:{valType:"boolean",dflt:!1,role:"style",editType:"plot",description:["Determines whether to label the contour lines with their values."].join(" ")},labelfont:s({editType:"plot",colorEditType:"style",description:["Sets the font used for labeling the contour levels.","The default color comes from the lines, if shown.","The default family and size come from `layout.font`."].join(" ")}),labelformat:{valType:"string",dflt:"",role:"style",editType:"plot",description:["Sets the contour label formatting rule using d3 formatting","mini-language which is very similar to Python, see:",d].join(" ")},operation:{valType:"enumerated",values:[].concat(u).concat(h),role:"info",dflt:"=",editType:"calc",description:["Sets the constraint operation.","*=* keeps regions equal to `value`","*<* and *<=* keep regions less than `value`","*>* and *>=* keep regions greater than `value`","*[]*, *()*, *[)*, and *(]* keep regions inside `value[0]` to `value[1]`","*][*, *)(*, *](*, *)[* keep regions outside `value[0]` to value[1]`","Open vs. closed intervals make no difference to constraint display, but","all versions are allowed for consistency with filter transforms."].join(" ")},value:{valType:"any",dflt:0,role:"info",editType:"calc",description:["Sets the value or values of the constraint boundary.","When `operation` is set to one of the comparison values","("+u+")","*value* is expected to be a number.","When `operation` is set to one of the interval values","("+h+")","*value* is expected to be an array of two numbers where the first","is the lower bound and the second is the upper bound."].join(" ")},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:l({},p.color,{editType:"style+colorbars",description:["Sets the color of the contour level.","Has no effect if `contours.coloring` is set to *lines*."].join(" ")}),width:{valType:"number",min:0,role:"style",editType:"style+colorbars",description:["Sets the contour line width in (in px)","Defaults to *0.5* when `contours.type` is *levels*.","Defaults to *2* when `contour.type` is *constraint*."].join(" ")},dash:o,smoothing:l({},p.smoothing,{description:["Sets the amount of smoothing for the contour lines,","where *0* corresponds to no smoothing."].join(" ")}),editType:"plot"}},i("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},592:function(e,t,n){"use strict";e.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},612:function(e,t,n){"use strict";var r=n(381),a=n(380).isArrayOrTypedArray;e.exports=function(e,t,n,i,o,s){var l,c,u,h=[],d=r.traceIs(e,"contour"),p=r.traceIs(e,"histogram"),f=r.traceIs(e,"gl2d");if(a(t)&&t.length>1&&!p&&"category"!==s.type){var g=t.length;if(!(g<=o))return d?t.slice(0,o):t.slice(0,o+1);if(d||f)h=t.slice(0,o);else if(1===o)h=[t[0]-.5,t[0]+.5];else{for(h=[1.5*t[0]-.5*t[1]],u=1;u<g;u++)h.push(.5*(t[u-1]+t[u]));h.push(1.5*t[g-1]-.5*t[g-2])}if(g<o){var y=h[h.length-1],m=y-h[h.length-2];for(u=g;u<o;u++)y+=m,h.push(y)}}else{var v=e[s._id.charAt(0)+"calendar"];if(p)l=s.r2c(n,0,v);else if(a(t)&&1===t.length)l=t[0];else if(void 0===n)l=0;else{l=("log"===s.type?s.d2c:s.r2c)(n,0,v)}for(c=i||1,u=d||f?0:-.5;u<o;u++)h.push(l+c*u)}return h}},613:function(e,t,n){"use strict";var r=n(383),a=n(402),i=n(496);e.exports=function(e){var t=e.contours,n=t.start,o=i(t),s=t.size||1,l=Math.floor((o-n)/s)+1,c="lines"===t.coloring?0:1,u=a.extractOpts(e);isFinite(s)||(s=1,l=1);var h,d,p=u.reversescale?a.flipScale(u.colorscale):u.colorscale,f=p.length,g=new Array(f),y=new Array(f);if("heatmap"===t.coloring){var m=u.min,v=u.max;for(d=0;d<f;d++)h=p[d],g[d]=h[0]*(v-m)+m,y[d]=h[1];var x=r.extent([m,v,t.start,t.start+s*(l-1)]),b=x[m<v?0:1],T=x[m<v?1:0];b!==m&&(g.splice(0,0,b),y.splice(0,0,y[0])),T!==v&&(g.push(T),y.push(y[y.length-1]))}else for(d=0;d<f;d++)h=p[d],g[d]=(h[0]*(l+c-1)-c/2)*s+n,y[d]=h[1];return a.makeColorScaleFunc({domain:g,range:y},{noNumericCheck:!0})}},679:function(e,t,n){"use strict";var r=n(380);e.exports=function(e,t,n,a){if(a||(a={}),e("contours.showlabels")){var i=t.font;r.coerceFont(e,"contours.labelfont",{family:i.family,size:i.size,color:n}),e("contours.labelformat")}!1!==a.hasHover&&e("zhoverformat")}},699:function(e,t,n){"use strict";var r=n(380),a=n(384),i=n(499),o=n(500),s=n(501),l=n(502),c=n(565).calcAllAutoBins;function u(e,t,n,r){var a,i=new Array(e);if(r)for(a=0;a<e;a++)i[a]=1/(t[a+1]-t[a]);else{var o=1/n;for(a=0;a<e;a++)i[a]=o}return i}function h(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function d(e,t,n,r,a,i){var o,s=e.length-1,c=new Array(s),u=l(n,r,e,a,i);for(o=0;o<s;o++){var h=(t||[])[o];c[o]=void 0===h?[u(e[o]),u(e[o+1],!0)]:[h,h]}return c}e.exports=function(e,t){var n,l,p,f,g=a.getFromId(e,t.xaxis),y=a.getFromId(e,t.yaxis),m=t.xcalendar,v=t.ycalendar,x=function(e){return g.r2c(e,0,m)},b=function(e){return y.r2c(e,0,v)},T=c(e,t,g,"x"),w=T[0],M=T[1],z=c(e,t,y,"y"),A=z[0],_=z[1],k=t._length;M.length>k&&M.splice(k,M.length-k),_.length>k&&_.splice(k,_.length-k);var S=[],I=[],O=[],L="string"==typeof w.size,E="string"==typeof A.size,D=[],F=[],j=L?D:w,N=E?F:A,C=0,R=[],B=[],H=t.histnorm,P=t.histfunc,G=-1!==H.indexOf("density"),U="max"===P||"min"===P?null:0,V=i.count,q=o[H],K=!1,Z=[],W=[],X="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";X&&"count"!==P&&(K="avg"===P,V=i[P]);var J=w.size,Y=x(w.start),$=x(w.end)+(Y-a.tickIncrement(Y,J,!1,m))/1e6;for(n=Y;n<$;n=a.tickIncrement(n,J,!1,m))I.push(U),D.push(n),K&&O.push(0);D.push(n);var Q,ee=I.length,te=(n-Y)/ee,ne=(Q=Y+te/2,g.c2r(Q,0,m)),re=A.size,ae=b(A.start),ie=b(A.end)+(ae-a.tickIncrement(ae,re,!1,v))/1e6;for(n=ae;n<ie;n=a.tickIncrement(n,re,!1,v)){S.push(I.slice()),F.push(n);var oe=new Array(ee);for(l=0;l<ee;l++)oe[l]=[];B.push(oe),K&&R.push(O.slice())}F.push(n);var se=S.length,le=(n-ae)/se,ce=function(e){return y.c2r(e,0,v)}(ae+le/2);G&&(Z=u(I.length,j,te,L),W=u(S.length,N,le,E)),L||"date"!==g.type||(j=h(x,j)),E||"date"!==y.type||(N=h(b,N));var ue=!0,he=!0,de=new Array(ee),pe=new Array(se),fe=1/0,ge=1/0,ye=1/0,me=1/0;for(n=0;n<k;n++){var ve=M[n],xe=_[n];p=r.findBin(ve,j),f=r.findBin(xe,N),p>=0&&p<ee&&f>=0&&f<se&&(C+=V(p,n,S[f],X,R[f]),B[f][p].push(n),ue&&(void 0===de[p]?de[p]=ve:de[p]!==ve&&(ue=!1)),he&&(void 0===pe[f]?pe[f]=xe:pe[f]!==xe&&(he=!1)),fe=Math.min(fe,ve-D[p]),ge=Math.min(ge,D[p+1]-ve),ye=Math.min(ye,xe-F[f]),me=Math.min(me,F[f+1]-xe))}if(K)for(f=0;f<se;f++)C+=s(S[f],R[f]);if(q)for(f=0;f<se;f++)q(S[f],C,Z,W[f]);return{x:M,xRanges:d(D,ue&&de,fe,ge,g,m),x0:ne,dx:te,y:_,yRanges:d(F,he&&pe,ye,me,y,v),y0:ce,dy:le,z:S,pts:B}}},700:function(e,t,n){"use strict";var r=n(383),a=n(411),i=n(381),o=n(380),s=n(402).makeColorScaleFuncFromTrace,l=n(429);function c(e,t){var n=t.length-2,r=o.constrain(o.findBin(e,t),0,n),a=t[r],i=t[r+1],s=o.constrain(r+(e-a)/(i-a)-.5,0,n),l=Math.round(s),c=Math.abs(s-l);return s&&s!==n&&c?{bin0:l,frac:c,bin1:Math.round(l+c/(s-l))}:{bin0:l,bin1:l,frac:0}}function u(e,t){var n=t.length-1,r=o.constrain(o.findBin(e,t),0,n),a=t[r],i=(e-a)/(t[r+1]-a)||0;return i<=0?{bin0:r,bin1:r,frac:0}:i<.5?{bin0:r,bin1:r+1,frac:i}:{bin0:r+1,bin1:r,frac:1-i}}function h(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(255*n[3])}e.exports=function(e,t,n,d){var p=t.xaxis,f=t.yaxis;o.makeTraceGroups(d,n,"hm").each((function(t){var n,d,g,y,m,v,x=r.select(this),b=t[0],T=b.trace,w=b.z,M=b.x,z=b.y,A=b.xCenter,_=b.yCenter,k=i.traceIs(T,"contour"),S=k?"best":T.zsmooth,I=w.length,O=o.maxRowLength(w),L=!1,E=!1;for(v=0;void 0===n&&v<M.length-1;)n=p.c2p(M[v]),v++;for(v=M.length-1;void 0===d&&v>0;)d=p.c2p(M[v]),v--;for(d<n&&(g=d,d=n,n=g,L=!0),v=0;void 0===y&&v<z.length-1;)y=f.c2p(z[v]),v++;for(v=z.length-1;void 0===m&&v>0;)m=f.c2p(z[v]),v--;if(m<y&&(g=y,y=m,m=g,E=!0),k&&(A=M,_=z,M=b.xfill,z=b.yfill),"fast"!==S){var D="best"===S?0:.5;n=Math.max(-D*p._length,n),d=Math.min((1+D)*p._length,d),y=Math.max(-D*f._length,y),m=Math.min((1+D)*f._length,m)}var F=Math.round(d-n),j=Math.round(m-y);if(F<=0||j<=0){x.selectAll("image").data([]).exit().remove()}else{var N,C;"fast"===S?(N=O,C=I):(N=F,C=j);var R=document.createElement("canvas");R.width=N,R.height=C;var B,H,P=R.getContext("2d"),G=s(T,{noNumericCheck:!0,returnArray:!0});"fast"===S?(B=L?function(e){return O-1-e}:o.identity,H=E?function(e){return I-1-e}:o.identity):(B=function(e){return o.constrain(Math.round(p.c2p(M[e])-n),0,F)},H=function(e){return o.constrain(Math.round(f.c2p(z[e])-y),0,j)});var U,V,q,K,Z,W=H(0),X=[W,W],J=L?0:1,Y=E?0:1,$=0,Q=0,ee=0,te=0;if(S){var ne,re=0;try{ne=new Uint8Array(F*j*4)}catch(e){ne=new Array(F*j*4)}if("best"===S){var ae,ie,oe,se=A||M,le=_||z,ce=new Array(se.length),ue=new Array(le.length),he=new Array(F),de=A?u:c,pe=_?u:c;for(v=0;v<se.length;v++)ce[v]=Math.round(p.c2p(se[v])-n);for(v=0;v<le.length;v++)ue[v]=Math.round(f.c2p(le[v])-y);for(v=0;v<F;v++)he[v]=de(v,ce);for(V=0;V<j;V++)for(ie=w[(ae=pe(V,ue)).bin0],oe=w[ae.bin1],v=0;v<F;v++,re+=4)h(ne,re,Z=ze(ie,oe,he[v],ae))}else for(V=0;V<I;V++)for(K=w[V],X=H(V),v=0;v<F;v++)Z=Me(K[v],1),h(ne,re=4*(X*F+B(v)),Z);var fe=P.createImageData(F,j);try{fe.data.set(ne)}catch(e){var ge=fe.data,ye=ge.length;for(V=0;V<ye;V++)ge[V]=ne[V]}P.putImageData(fe,0,0)}else{var me=T.xgap,ve=T.ygap,xe=Math.floor(me/2),be=Math.floor(ve/2);for(V=0;V<I;V++)if(K=w[V],X.reverse(),X[Y]=H(V+1),X[0]!==X[1]&&void 0!==X[0]&&void 0!==X[1])for(U=[q=B(0),q],v=0;v<O;v++)U.reverse(),U[J]=B(v+1),U[0]!==U[1]&&void 0!==U[0]&&void 0!==U[1]&&(Z=Me(K[v],(U[1]-U[0])*(X[1]-X[0])),P.fillStyle="rgba("+Z.join(",")+")",P.fillRect(U[0]+xe,X[0]+be,U[1]-U[0]-me,X[1]-X[0]-ve))}Q=Math.round(Q/$),ee=Math.round(ee/$),te=Math.round(te/$);var Te=a("rgb("+Q+","+ee+","+te+")");e._hmpixcount=(e._hmpixcount||0)+$,e._hmlumcount=(e._hmlumcount||0)+$*Te.getLuminance();var we=x.selectAll("image").data(t);we.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),we.attr({height:j,width:F,x:n,y:y,"xlink:href":R.toDataURL("image/png")})}function Me(e,t){if(void 0!==e){var n=G(e);return n[0]=Math.round(n[0]),n[1]=Math.round(n[1]),n[2]=Math.round(n[2]),$+=t,Q+=n[0]*t,ee+=n[1]*t,te+=n[2]*t,n}return[0,0,0,0]}function ze(e,t,n,r){var a=e[n.bin0];if(void 0===a)return Me(void 0,1);var i,o=e[n.bin1],s=t[n.bin0],l=t[n.bin1],c=o-a||0,u=s-a||0;return i=void 0===o?void 0===l?0:void 0===s?2*(l-a):2*(2*l-s-a)/3:void 0===l?void 0===s?0:2*(2*a-o-s)/3:void 0===s?2*(2*l-o-a)/3:l+a-o-s,Me(a+n.frac*c+r.frac*(u+n.frac*i))}}))}},701:function(e,t,n){"use strict";var r=n(383);e.exports=function(e){r.select(e).selectAll(".hm image").style("opacity",(function(e){return e.trace.opacity}))}},702:function(e,t,n){"use strict";var r=n(412),a=n(391).hovertemplateAttrs,i=n(720),o=n(891),s=n(387).extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the x axis."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the y axis."].join(" ")},text:s({},r.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:s({},r.hovertext,{description:"Same as `text`."}),orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],role:"style",dflt:"count",editType:"calc",description:["Specifies the binning function used for this histogram trace.","If *count*, the histogram values are computed by counting the","number of values lying inside each bin.","If *sum*, *avg*, *min*, *max*,","the histogram values are computed using","the sum, the average, the minimum or the maximum","of the values lying inside each bin respectively."].join(" ")},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",role:"style",editType:"calc",description:["Specifies the type of normalization used for this histogram trace.","If **, the span of each bar corresponds to the number of","occurrences (i.e. the number of data points lying inside the bins).","If *percent* / *probability*, the span of each bar corresponds to","the percentage / fraction of occurrences with respect to the total","number of sample points","(here, the sum of all bin HEIGHTS equals 100% / 1).","If *density*, the span of each bar corresponds to the number of","occurrences in a bin divided by the size of the bin interval","(here, the sum of all bin AREAS equals the","total number of sample points).","If *probability density*, the area of each bar corresponds to the","probability that an event will fall into the corresponding bin","(here, the sum of all bin AREAS equals 1)."].join(" ")},cumulative:{enabled:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:["If true, display the cumulative distribution by summing the","binned values. Use the `direction` and `centralbin` attributes","to tune the accumulation method.","Note: in this mode, the *density* `histnorm` settings behave","the same as their equivalents without *density*:","** and *density* both rise to the number of data points, and","*probability* and *probability density* both rise to the","number of sample points."].join(" ")},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",role:"info",editType:"calc",description:["Only applies if cumulative is enabled.","If *increasing* (default) we sum all prior bins, so the result","increases from left to right. If *decreasing* we sum later bins","so the result decreases from left to right."].join(" ")},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",role:"info",editType:"calc",description:["Only applies if cumulative is enabled.","Sets whether the current bin is included, excluded, or has half","of its value included in the current cumulative value.","*include* is the default for compatibility with various other","tools, however it introduces a half-bin bias to the results.","*exclude* makes the opposite half-bin bias, and *half* removes","it."].join(" ")},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,role:"style",editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `xbins.size` is provided."].join(" ")},xbins:i("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,role:"style",editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `ybins.size` is provided."].join(" ")},ybins:i("y",!0),autobinx:{valType:"boolean",dflt:null,role:"style",editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobinx` is not needed. However, we accept","`autobinx: true` or `false` and will update `xbins` accordingly","before deleting `autobinx` from the trace."].join(" ")},autobiny:{valType:"boolean",dflt:null,role:"style",editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobiny` is not needed. However, we accept","`autobiny: true` or `false` and will update `ybins` accordingly","before deleting `autobiny` from the trace."].join(" ")},bingroup:{valType:"string",role:"info",dflt:"",editType:"calc",description:["Set a group of histogram traces which will have compatible bin settings.","Note that traces on the same subplot and with the same *orientation*","under `barmode` *stack*, *relative* and *group* are forced into the same bingroup,","Using `bingroup`, traces under `barmode` *overlay* and on different axes","(of the same axis type) can have compatible bin settings.","Note that histogram and histogram2d* trace can share the same `bingroup`"].join(" ")},hovertemplate:a({},{keys:o.eventDataKeys}),marker:r.marker,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,_deprecated:{bardir:r._deprecated.bardir}}},708:function(e,t,n){"use strict";e.exports=function(e,t,n,r){var a=r("contours.start"),i=r("contours.end"),o=!1===a||!1===i,s=n("contours.size");!(o?t.autocontour=!0:n("autocontour",!1))&&s||n("ncontours")}},709:function(e,t,n){"use strict";var r=n(403),a=n(679);e.exports=function(e,t,n,i,o){var s,l=n("contours.coloring"),c="";"fill"===l&&(s=n("contours.showlines")),!1!==s&&("lines"!==l&&(c=n("line.color","#000")),n("line.width",.5),n("line.dash")),"none"!==l&&(!0!==e.showlegend&&(t.showlegend=!1),t._dfltShowLegend=!1,r(e,t,i,n,{prefix:"",cLetter:"z"})),n("line.smoothing"),a(n,i,c,o)}},710:function(e,t,n){"use strict";var r=n(402),a=n(613),i=n(496);e.exports={min:"zmin",max:"zmax",calc:function(e,t,n){var o=t.contours,s=t.line,l=o.size||1,c=o.coloring,u=a(t,{isColorbar:!0});if("heatmap"===c){var h=r.extractOpts(t);n._fillgradient=h.reversescale?r.flipScale(h.colorscale):h.colorscale,n._zrange=[h.min,h.max]}else"fill"===c&&(n._fillcolor=u);n._line={color:"lines"===c?u:s.color,width:!1!==o.showlines?s.width:0,dash:s.dash},n._levels={start:o.start,end:i(o),size:l}}}},719:function(e,t,n){"use strict";var r=n(397),a=n(380),i=n(384),o=n(402).extractOpts;e.exports=function(e,t,n,s,l,c){var u,h,d,p,f=e.cd[0],g=f.trace,y=e.xa,m=e.ya,v=f.x,x=f.y,b=f.z,T=f.xCenter,w=f.yCenter,M=f.zmask,z=g.zhoverformat,A=v,_=x;if(!1!==e.index){try{d=Math.round(e.index[1]),p=Math.round(e.index[0])}catch(t){return void a.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(d<0||d>=b[0].length||p<0||p>b.length)return}else{if(r.inbox(t-v[0],t-v[v.length-1],0)>0||r.inbox(n-x[0],n-x[x.length-1],0)>0)return;if(c){var k;for(A=[2*v[0]-v[1]],k=1;k<v.length;k++)A.push((v[k]+v[k-1])/2);for(A.push([2*v[v.length-1]-v[v.length-2]]),_=[2*x[0]-x[1]],k=1;k<x.length;k++)_.push((x[k]+x[k-1])/2);_.push([2*x[x.length-1]-x[x.length-2]])}d=Math.max(0,Math.min(A.length-2,a.findBin(t,A))),p=Math.max(0,Math.min(_.length-2,a.findBin(n,_)))}var S=y.c2p(v[d]),I=y.c2p(v[d+1]),O=m.c2p(x[p]),L=m.c2p(x[p+1]);c?(I=S,u=v[d],L=O,h=x[p]):(u=T?T[d]:(v[d]+v[d+1])/2,h=w?w[p]:(x[p]+x[p+1])/2,y&&"category"===y.type&&(u=v[d]),m&&"category"===m.type&&(h=x[p]),g.zsmooth&&(S=I=y.c2p(u),O=L=m.c2p(h)));var E=b[p][d];if(M&&!M[p][d]&&(E=void 0),void 0!==E||g.hoverongaps){var D;Array.isArray(f.hovertext)&&Array.isArray(f.hovertext[p])?D=f.hovertext[p][d]:Array.isArray(f.text)&&Array.isArray(f.text[p])&&(D=f.text[p][d]);var F=o(g),j={type:"linear",range:[F.min,F.max],hoverformat:z,_separators:y._separators,_numFormat:y._numFormat},N=i.tickText(j,E,"hover").text;return[a.extendFlat(e,{index:g._after2before?g._after2before[p][d]:[p,d],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:S,x1:I,y0:O,y1:L,xLabelVal:u,yLabelVal:h,zLabelVal:E,zLabel:N,text:D})]}}},720:function(e,t,n){"use strict";e.exports=function(e,t){return{start:{valType:"any",role:"style",editType:"calc",description:["Sets the starting value for the",e,"axis bins. Defaults to the minimum data value,","shifted down if necessary to make nice round values","and to remove ambiguous bin edges. For example, if most of the","data is integers we shift the bin edges 0.5 down, so a `size`","of 5 would have a default `start` of -0.5, so it is clear","that 0-4 are in the first bin, 5-9 in the second, but","continuous data gets a start of 0 and bins [0,5), [5,10) etc.","Dates behave similarly, and `start` should be a date string.","For category data, `start` is based on the category serial","numbers, and defaults to -0.5.",t?"If multiple non-overlaying histograms share a subplot, the first explicit `start` is used exactly and all others are shifted down (if necessary) to differ from that one by an integer number of bins.":""].join(" ")},end:{valType:"any",role:"style",editType:"calc",description:["Sets the end value for the",e,"axis bins. The last bin may not end exactly at this value,","we increment the bin edge by `size` from `start` until we","reach or exceed `end`. Defaults to the maximum data value.","Like `start`, for dates use a date string, and for category","data `end` is based on the category serial numbers."].join(" ")},size:{valType:"any",role:"style",editType:"calc",description:["Sets the size of each",e,"axis bin.","Default behavior: If `nbins"+e+"` is 0 or omitted,","we choose a nice round bin size such that the number of bins","is about the same as the typical number of samples in each bin.","If `nbins"+e+"` is provided, we choose a nice round","bin size giving no more than that many bins.","For date data, use milliseconds or *M<n>* for months, as in","`axis.dtick`. For category data, the number of categories to","bin together (always defaults to 1).",t?"If multiple non-overlaying histograms share a subplot, the first explicit `size` is used and all others discarded. If no `size` is provided,the sample data from all traces is combined to determine `size` as described above.":""].join(" ")},editType:"calc"}}},721:function(e,t,n){"use strict";var r=n(380),a=n(395),i=n(381).traceIs,o=n(432).handleGroupingDefaults,s=r.nestedProperty,l=a.getAxisGroup,c=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],u=["x","y"];e.exports=function(e,t){var n,h,d,p,f,g,y,m=t._histogramBinOpts={},v=[],x={},b=[];function T(e,t){return r.coerce(n._input,n,n._module.attributes,e,t)}function w(e){return"v"===e.orientation?"x":"y"}function M(e,n,i){var o=e.uid+"__"+i;n||(n=o);var s=function(e,n){return a.getFromTrace({_fullLayout:t},e,n).type}(e,i),l=e[i+"calendar"]||"",c=m[n],u=!0;c&&(s===c.axType&&l===c.calendar?(u=!1,c.traces.push(e),c.dirs.push(i)):(n=o,s!==c.axType&&r.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+s,"axis","with bins on","type:"+c.axType,"axis."].join(" ")),l!==c.calendar&&r.warn(["Attempted to group the bins of trace",e.index,"set with a",l,"calendar","with bins",c.calendar?"on a "+c.calendar+" calendar":"w/o a set calendar"].join(" ")))),u&&(m[n]={traces:[e],dirs:[i],axType:s,calendar:e[i+"calendar"]||""}),e["_"+i+"bingroup"]=n}for(f=0;f<e.length;f++)n=e[f],i(n,"histogram")&&(v.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,i(n,"2dMap")||o(n._input,n,t,T));var z=t._alignmentOpts||{};for(f=0;f<v.length;f++){if(n=v[f],d="",!i(n,"2dMap")){if(p=w(n),"group"===t.barmode&&n.alignmentgroup){var A=n[p+"axis"],_=l(t,A)+n.orientation;(z[_]||{})[n.alignmentgroup]&&(d=_)}d||"overlay"===t.barmode||(d=l(t,n.xaxis)+l(t,n.yaxis)+w(n))}d?(x[d]||(x[d]=[]),x[d].push(n)):b.push(n)}for(d in x)if(1!==(h=x[d]).length){var k=!1;for(f=0;f<h.length;f++){n=h[f],k=T("bingroup");break}for(d=k||d,f=0;f<h.length;f++){var S=(n=h[f])._input.bingroup;S&&S!==d&&r.warn(["Trace",n.index,"must match","within bingroup",d+".","Ignoring its bingroup:",S,"setting."].join(" ")),n.bingroup=d,M(n,d,w(n))}}else b.push(h[0]);for(f=0;f<b.length;f++){n=b[f];var I=T("bingroup");if(i(n,"2dMap"))for(y=0;y<2;y++){var O=T((p=u[y])+"bingroup",I?I+"__"+p:null);M(n,O,p)}else M(n,I,w(n))}for(d in m){var L=m[d];for(h=L.traces,g=0;g<c.length;g++){var E,D,F=c[g],j=F.name;if("nbins"!==j||!L.sizeFound){for(f=0;f<h.length;f++){if(n=h[f],p=L.dirs[f],E=F.aStr[p],void 0!==s(n._input,E).get()){L[j]=T(E),L[j+"Found"]=!0;break}(D=(n._autoBin||{})[p]||{})[j]&&s(n,E).set(D[j])}if("start"===j||"end"===j)for(;f<h.length;f++)(n=h[f])["_"+p+"bingroup"]&&T(E,(D=(n._autoBin||{})[p]||{})[j]);"nbins"!==j||L.sizeFound||L.nbinsFound||(n=h[0],L[j]=T(E))}}}}},737:function(e,t,n){"use strict";var r=n(384),a=n(380);function i(e,t,n){var a={type:"linear",range:[e,t]};return r.autoTicks(a,(t-e)/(n||15)),a}e.exports=function(e,t){var n=e.contours;if(e.autocontour){var o=e.zmin,s=e.zmax;(e.zauto||void 0===o)&&(o=a.aggNums(Math.min,null,t)),(e.zauto||void 0===s)&&(s=a.aggNums(Math.max,null,t));var l=i(o,s,e.ncontours);n.size=l.dtick,n.start=r.tickFirst(l),l.range.reverse(),n.end=r.tickFirst(l),n.start===o&&(n.start+=n.size),n.end===s&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),e._input.contours||(e._input.contours={}),a.extendFlat(e._input.contours,{start:n.start,end:n.end,size:n.size}),e._input.autocontour=!0}else if("constraint"!==n.type){var c,u=n.start,h=n.end,d=e._input.contours;if(u>h&&(n.start=d.start=h,h=n.end=d.end=u,u=n.start),!(n.size>0))c=u===h?1:i(u,h,e.ncontours).dtick,d.size=n.size=c}}},838:function(e,t,n){"use strict";var r=n(402),a=n(564),i=n(737),o=n(496);e.exports=function(e,t){var n=a(e,t),s=n[0].z;i(t,s);var l,c=t.contours,u=r.extractOpts(t);if("heatmap"===c.coloring&&u.auto&&!1===t.autocontour){var h=c.start,d=o(c),p=c.size||1,f=Math.floor((d-h)/p)+1;isFinite(p)||(p=1,f=1);var g=h-p/2;l=[g,g+f*p]}else l=s;return r.calc(e,t,{vals:l,cLetter:"z"}),n}},855:function(e,t,n){"use strict";var r=n(383),a=n(380),i=n(386),o=n(402),s=n(393),l=n(384),c=n(523),u=n(700),h=n(886),d=n(887),p=n(888),f=n(889),g=n(890),y=n(592),m=y.LABELOPTIMIZER;function v(e,t){var n,r,o,s,l,c,u,h="",d=0,p=e.edgepaths.map((function(e,t){return t})),f=!0;function g(e){return Math.abs(e[1]-t[2][1])<.01}function y(e){return Math.abs(e[0]-t[0][0])<.01}function m(e){return Math.abs(e[0]-t[2][0])<.01}for(;p.length;){for(c=i.smoothopen(e.edgepaths[d],e.smoothing),h+=f?c:c.replace(/^M/,"L"),p.splice(p.indexOf(d),1),n=e.edgepaths[d][e.edgepaths[d].length-1],s=-1,o=0;o<4;o++){if(!n){a.log("Missing end?",d,e);break}for(u=n,Math.abs(u[1]-t[0][1])<.01&&!m(n)?r=t[1]:y(n)?r=t[0]:g(n)?r=t[3]:m(n)&&(r=t[2]),l=0;l<e.edgepaths.length;l++){var v=e.edgepaths[l][0];Math.abs(n[0]-r[0])<.01?Math.abs(n[0]-v[0])<.01&&(v[1]-n[1])*(r[1]-v[1])>=0&&(r=v,s=l):Math.abs(n[1]-r[1])<.01?Math.abs(n[1]-v[1])<.01&&(v[0]-n[0])*(r[0]-v[0])>=0&&(r=v,s=l):a.log("endpt to newendpt is not vert. or horz.",n,r,v)}if(n=r,s>=0)break;h+="L"+r}if(s===e.edgepaths.length){a.log("unclosed perimeter path");break}d=s,(f=-1===p.indexOf(d))&&(d=p[0],h+="Z")}for(d=0;d<e.paths.length;d++)h+=i.smoothclosed(e.paths[d],e.smoothing);return h}function x(e,t,n,r){var i=t.width/2,o=t.height/2,s=e.x,l=e.y,c=e.theta,u=Math.cos(c)*i,h=Math.sin(c)*i,d=(s>r.center?r.right-s:s-r.left)/(u+Math.abs(Math.sin(c)*o)),p=(l>r.middle?r.bottom-l:l-r.top)/(Math.abs(h)+Math.cos(c)*o);if(d<1||p<1)return 1/0;var f=m.EDGECOST*(1/(d-1)+1/(p-1));f+=m.ANGLECOST*c*c;for(var g=s-u,y=l-h,v=s+u,x=l+h,b=0;b<n.length;b++){var T=n[b],w=Math.cos(T.theta)*T.width/2,M=Math.sin(T.theta)*T.width/2,z=2*a.segmentDistance(g,y,v,x,T.x-w,T.y-M,T.x+w,T.y+M)/(t.height+T.height),A=T.level===t.level,_=A?m.SAMELEVELDISTANCE:1;if(z<=_)return 1/0;f+=m.NEIGHBORCOST*(A?m.SAMELEVELFACTOR:1)/(z-_)}return f}function b(e){var t,n,r=e.trace._emptypoints,a=[],i=e.z.length,o=e.z[0].length,s=[];for(t=0;t<o;t++)s.push(1);for(t=0;t<i;t++)a.push(s.slice());for(t=0;t<r.length;t++)a[(n=r[t])[0]][n[1]]=0;return e.zmask=a,a}t.plot=function(e,n,o,s){var l=n.xaxis,c=n.yaxis;a.makeTraceGroups(s,o,"contour").each((function(o){var s=r.select(this),m=o[0],x=m.trace,T=m.x,w=m.y,M=x.contours,z=p(M,n,m),A=a.ensureSingle(s,"g","heatmapcoloring"),_=[];"heatmap"===M.coloring&&(_=[o]),u(e,n,_,A),h(z),d(z);var k=l.c2p(T[0],!0),S=l.c2p(T[T.length-1],!0),I=c.c2p(w[0],!0),O=c.c2p(w[w.length-1],!0),L=[[k,O],[S,O],[S,I],[k,I]],E=z;"constraint"===M.type&&(E=f(z,M._operation)),function(e,t,n){var r=a.ensureSingle(e,"g","contourbg").selectAll("path").data("fill"===n.coloring?[0]:[]);r.enter().append("path"),r.exit().remove(),r.attr("d","M"+t.join("L")+"Z").style("stroke","none")}(s,L,M),function(e,t,n,i){var o="fill"===i.coloring||"constraint"===i.type&&"="!==i._operation,s="M"+n.join("L")+"Z";o&&g(t,i);var l=a.ensureSingle(e,"g","contourfill").selectAll("path").data(o?t:[]);l.enter().append("path"),l.exit().remove(),l.each((function(e){var t=(e.prefixBoundary?s:"")+v(e,n);t?r.select(this).attr("d",t).style("stroke","none"):r.select(this).remove()}))}(s,E,L,M),function(e,n,o,s,l){var c=a.ensureSingle(e,"g","contourlines"),u=!1!==l.showlines,h=l.showlabels,d=u&&h,p=t.createLines(c,u||h,n),f=t.createLineClip(c,d,o,s.trace.uid),g=e.selectAll("g.contourlabels").data(h?[0]:[]);if(g.exit().remove(),g.enter().append("g").classed("contourlabels",!0),h){var m=[],v=[];a.clearLocationCache();var x=t.labelFormatter(o,s),b=i.tester.append("text").attr("data-notex",1).call(i.font,l.labelfont),T=n[0].xaxis,w=n[0].yaxis,M=T._length,z=w._length,A=T.range,_=w.range,k=a.aggNums(Math.min,null,s.x),S=a.aggNums(Math.max,null,s.x),I=a.aggNums(Math.min,null,s.y),O=a.aggNums(Math.max,null,s.y),L=Math.max(T.c2p(k,!0),0),E=Math.min(T.c2p(S,!0),M),D=Math.max(w.c2p(O,!0),0),F=Math.min(w.c2p(I,!0),z),j={};A[0]<A[1]?(j.left=L,j.right=E):(j.left=E,j.right=L),_[0]<_[1]?(j.top=D,j.bottom=F):(j.top=F,j.bottom=D),j.middle=(j.top+j.bottom)/2,j.center=(j.left+j.right)/2,m.push([[j.left,j.top],[j.right,j.top],[j.right,j.bottom],[j.left,j.bottom]]);var N=Math.sqrt(M*M+z*z),C=y.LABELDISTANCE*N/Math.max(1,n.length/y.LABELINCREASE);p.each((function(e){var n=t.calcTextOpts(e.level,x,b,o);r.select(this).selectAll("path").each((function(){var e=a.getVisibleSegment(this,j,n.height/2);if(e&&!(e.len<(n.width+n.height)*y.LABELMIN))for(var r=Math.min(Math.ceil(e.len/C),y.LABELMAX),i=0;i<r;i++){var o=t.findBestTextLocation(this,e,n,v,j);if(!o)break;t.addLabelData(o,n,v,m)}}))})),b.remove(),t.drawLabels(g,v,o,f,d?m:null)}h&&!u&&p.remove()}(s,z,e,m,M),function(e,t,n,r,o){var s=r.trace,l=n._fullLayout._clips,c="clip"+s.uid,u=l.selectAll("#"+c).data(s.connectgaps?[]:[0]);if(u.enter().append("clipPath").classed("contourclip",!0).attr("id",c),u.exit().remove(),!1===s.connectgaps){var p={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:r.x,y:r.y,z:b(r),smoothing:0};h([p]),d([p]),g([p],{type:"levels"}),a.ensureSingle(u,"path","").attr("d",(p.prefixBoundary?"M"+o.join("L")+"Z":"")+v(p,o))}else c=null;i.setClipUrl(e,c,n)}(s,n,e,m,L)}))},t.createLines=function(e,t,n){var r=n[0].smoothing,a=e.selectAll("g.contourlevel").data(t?n:[]);if(a.exit().remove(),a.enter().append("g").classed("contourlevel",!0),t){var o=a.selectAll("path.openline").data((function(e){return e.pedgepaths||e.edgepaths}));o.exit().remove(),o.enter().append("path").classed("openline",!0),o.attr("d",(function(e){return i.smoothopen(e,r)})).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var s=a.selectAll("path.closedline").data((function(e){return e.ppaths||e.paths}));s.exit().remove(),s.enter().append("path").classed("closedline",!0),s.attr("d",(function(e){return i.smoothclosed(e,r)})).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return a},t.createLineClip=function(e,t,n,r){var a=t?"clipline"+r:null,o=n._fullLayout._clips.selectAll("#"+a).data(t?[0]:[]);return o.exit().remove(),o.enter().append("clipPath").classed("contourlineclip",!0).attr("id",a),i.setClipUrl(e,a,n),o},t.labelFormatter=function(e,t){var n=e._fullLayout,r=t.trace,a=r.contours,i={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(a.labelformat)i.tickformat=a.labelformat,c(i,n);else{var s=o.extractOpts(r);if(s&&s.colorbar&&s.colorbar._axis)i=s.colorbar._axis;else{if("constraint"===a.type){var u=a.value;Array.isArray(u)?i.range=[u[0],u[u.length-1]]:i.range=[u,u]}else i.range=[a.start,a.end],i.nticks=(a.end-a.start)/a.size;i.range[0]===i.range[1]&&(i.range[1]+=i.range[0]||1),i.nticks||(i.nticks=1e3),c(i,n),l.prepTicks(i),i._tmin=null,i._tmax=null}}return function(e){return l.tickText(i,e).text}},t.calcTextOpts=function(e,t,n,r){var a=t(e);n.text(a).call(s.convertToTspans,r);var o=n.node(),l=i.bBox(o,!0);return{text:a,width:l.width,height:l.height,fontSize:+o.style["font-size"].replace("px",""),level:e,dy:(l.top+l.bottom)/2}},t.findBestTextLocation=function(e,t,n,r,i){var o,s,l,c,u,h=n.width;t.isClosed?(s=t.len/m.INITIALSEARCHPOINTS,o=t.min+s/2,l=t.max):(s=(t.len-h)/(m.INITIALSEARCHPOINTS+1),o=t.min+s+h/2,l=t.max-(s+h)/2);for(var d=1/0,p=0;p<m.ITERATIONS;p++){for(var f=o;f<l;f+=s){var g=a.getTextLocation(e,t.total,f,h),y=x(g,n,r,i);y<d&&(d=y,u=g,c=f)}if(d>2*m.MAXCOST)break;p&&(s/=2),l=(o=c-s/2)+1.5*s}if(d<=m.MAXCOST)return u},t.addLabelData=function(e,t,n,r){var a=t.fontSize,i=t.width+a/3,o=Math.max(0,t.height-a/3),s=e.x,l=e.y,c=e.theta,u=Math.sin(c),h=Math.cos(c),d=function(e,t){return[s+e*h-t*u,l+e*u+t*h]},p=[d(-i/2,-o/2),d(-i/2,o/2),d(i/2,o/2),d(i/2,-o/2)];n.push({text:t.text,x:s,y:l,dy:t.dy,theta:c,level:t.level,width:i,height:o}),r.push(p)},t.drawLabels=function(e,t,n,i,o){var l=e.selectAll("text").data(t,(function(e){return e.text+","+e.x+","+e.y+","+e.theta}));if(l.exit().remove(),l.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each((function(e){var t=e.x+Math.sin(e.theta)*e.dy,a=e.y-Math.cos(e.theta)*e.dy;r.select(this).text(e.text).attr({x:t,y:a,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+a+")"}).call(s.convertToTspans,n)})),o){for(var c="",u=0;u<o.length;u++)c+="M"+o[u].join("L")+"Z";a.ensureSingle(i,"path","").attr("d",c)}}},856:function(e,t,n){"use strict";var r=n(383),a=n(386),i=n(701),o=n(613);e.exports=function(e){var t=r.select(e).selectAll("g.contour");t.style("opacity",(function(e){return e[0].trace.opacity})),t.each((function(e){var t=r.select(this),n=e[0].trace,i=n.contours,s=n.line,l=i.size||1,c=i.start,u="constraint"===i.type,h=!u&&"lines"===i.coloring,d=!u&&"fill"===i.coloring,p=h||d?o(n):null;t.selectAll("g.contourlevel").each((function(e){r.select(this).selectAll("path").call(a.lineGroupStyle,s.width,h?p(e.level):s.color,s.dash)}));var f=i.labelfont;if(t.selectAll("g.contourlabels text").each((function(e){a.font(r.select(this),{family:f.family,size:f.size,color:f.color||(h?p(e.level):s.color)})})),u)t.selectAll("g.contourfill path").style("fill",n.fillcolor);else if(d){var g;t.selectAll("g.contourfill path").style("fill",(function(e){return void 0===g&&(g=e.level),p(e.level+.5*l)})),void 0===g&&(g=c),t.selectAll("g.contourbg path").style("fill",p(g-.5*l))}})),i(e)}},859:function(e,t,n){"use strict";var r=n(702),a=n(720),i=n(484),o=n(399),s=n(391).hovertemplateAttrs,l=n(396),c=n(387).extendFlat;e.exports=c({x:r.x,y:r.y,z:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},marker:{color:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},editType:"calc"},histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:a("x"),nbinsy:r.nbinsy,ybins:a("y"),autobinx:r.autobinx,autobiny:r.autobiny,bingroup:c({},r.bingroup,{description:["Set the `xbingroup` and `ybingroup` default prefix","For example, setting a `bingroup` of *1* on two histogram2d traces","will make them their x-bins and y-bins match separately."].join(" ")}),xbingroup:c({},r.bingroup,{description:["Set a group of histogram traces which will have compatible x-bin settings.","Using `xbingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible x-bin settings.","Note that the same `xbingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),ybingroup:c({},r.bingroup,{description:["Set a group of histogram traces which will have compatible y-bin settings.","Using `ybingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible y-bin settings.","Note that the same `ybingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,zhoverformat:i.zhoverformat,hovertemplate:s({},{keys:"z"}),showlegend:c({},o.showlegend,{dflt:!1})},l("",{cLetter:"z",autoColorDflt:!1}))},886:function(e,t,n){"use strict";var r=n(592);function a(e,t){var n=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);return 5===n||10===n?e>(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4?5===n?713:1114:5===n?104:208:15===n?0:n}e.exports=function(e){var t,n,i,o,s,l,c,u,h,d=e[0].z,p=d.length,f=d[0].length,g=2===p||2===f;for(n=0;n<p-1;n++)for(o=[],0===n&&(o=o.concat(r.BOTTOMSTART)),n===p-2&&(o=o.concat(r.TOPSTART)),t=0;t<f-1;t++)for(i=o.slice(),0===t&&(i=i.concat(r.LEFTSTART)),t===f-2&&(i=i.concat(r.RIGHTSTART)),s=t+","+n,l=[[d[n][t],d[n][t+1]],[d[n+1][t],d[n+1][t+1]]],h=0;h<e.length;h++)(c=a((u=e[h]).level,l))&&(u.crossings[s]=c,-1!==i.indexOf(c)&&(u.starts.push([t,n]),g&&-1!==i.indexOf(c,i.indexOf(c)+1)&&u.starts.push([t,n])))}},887:function(e,t,n){"use strict";var r=n(380),a=n(592);function i(e,t,n,r){return Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<r}function o(e,t,n,o,l){var c,u=t.join(","),h=e.crossings[u],d=function(e,t,n){var r=0,i=0;e>20&&t?208===e||1114===e?r=0===n[0]?1:-1:i=0===n[1]?1:-1:-1!==a.BOTTOMSTART.indexOf(e)?i=1:-1!==a.LEFTSTART.indexOf(e)?r=1:-1!==a.TOPSTART.indexOf(e)?i=-1:r=-1;return[r,i]}(h,n,t),p=[s(e,t,[-d[0],-d[1]])],f=e.z.length,g=e.z[0].length,y=t.slice(),m=d.slice();for(c=0;c<1e4;c++){if(h>20?(h=a.CHOOSESADDLE[h][(d[0]||d[1])<0?0:1],e.crossings[u]=a.SADDLEREMAINDER[h]):delete e.crossings[u],!(d=a.NEWDELTA[h])){r.log("Found bad marching index:",h,t,e.level);break}p.push(s(e,t,d)),t[0]+=d[0],t[1]+=d[1],u=t.join(","),i(p[p.length-1],p[p.length-2],o,l)&&p.pop();var v=d[0]&&(t[0]<0||t[0]>g-2)||d[1]&&(t[1]<0||t[1]>f-2);if(t[0]===y[0]&&t[1]===y[1]&&d[0]===m[0]&&d[1]===m[1]||n&&v)break;h=e.crossings[u]}1e4===c&&r.log("Infinite loop in contour?");var x,b,T,w,M,z,A,_,k,S,I,O,L,E,D,F=i(p[0],p[p.length-1],o,l),j=0,N=.2*e.smoothing,C=[],R=0;for(c=1;c<p.length;c++)O=p[c],L=p[c-1],E=void 0,D=void 0,E=O[2]-L[2],D=O[3]-L[3],j+=A=Math.sqrt(E*E+D*D),C.push(A);var B=j/C.length*N;function H(e){return p[e%p.length]}for(c=p.length-2;c>=R;c--)if((x=C[c])<B){for(T=0,b=c-1;b>=R&&x+C[b]<B;b--)x+=C[b];if(F&&c===p.length-2)for(T=0;T<b&&x+C[T]<B;T++)x+=C[T];M=c-b+T+1,z=Math.floor((c+b+T+2)/2),w=F||c!==p.length-2?F||-1!==b?M%2?H(z):[(H(z)[0]+H(z+1)[0])/2,(H(z)[1]+H(z+1)[1])/2]:p[0]:p[p.length-1],p.splice(b+1,c-b+1,w),c=b+1,T&&(R=T),F&&(c===p.length-2?p[T]=p[p.length-1]:0===c&&(p[p.length-1]=p[0]))}for(p.splice(0,R),c=0;c<p.length;c++)p[c].length=2;if(!(p.length<2))if(F)p.pop(),e.paths.push(p);else{n||r.log("Unclosed interior contour?",e.level,y.join(","),p.join("L"));var P=!1;for(_=0;_<e.edgepaths.length;_++)if(S=e.edgepaths[_],!P&&i(S[0],p[p.length-1],o,l)){p.pop(),P=!0;var G=!1;for(k=0;k<e.edgepaths.length;k++)if(i((I=e.edgepaths[k])[I.length-1],p[0],o,l)){G=!0,p.shift(),e.edgepaths.splice(_,1),k===_?e.paths.push(p.concat(I)):(k>_&&k--,e.edgepaths[k]=I.concat(p,S));break}G||(e.edgepaths[_]=p.concat(S))}for(_=0;_<e.edgepaths.length&&!P;_++)i((S=e.edgepaths[_])[S.length-1],p[0],o,l)&&(p.shift(),e.edgepaths[_]=S.concat(p),P=!0);P||e.edgepaths.push(p)}}function s(e,t,n){var r=t[0]+Math.max(n[0],0),a=t[1]+Math.max(n[1],0),i=e.z[a][r],o=e.xaxis,s=e.yaxis;if(n[1]){var l=(e.level-i)/(e.z[a][r+1]-i);return[o.c2p((1-l)*e.x[r]+l*e.x[r+1],!0),s.c2p(e.y[a],!0),r+l,a]}var c=(e.level-i)/(e.z[a+1][r]-i);return[o.c2p(e.x[r],!0),s.c2p((1-c)*e.y[a]+c*e.y[a+1],!0),r,a+c]}e.exports=function(e,t,n){var a,i,s,l;for(t=t||.01,n=n||.01,i=0;i<e.length;i++){for(s=e[i],l=0;l<s.starts.length;l++)o(s,s.starts[l],"edge",t,n);for(a=0;Object.keys(s.crossings).length&&a<1e4;)a++,o(s,Object.keys(s.crossings)[0].split(",").map(Number),void 0,t,n);1e4===a&&r.log("Infinite loop in contour?")}}},888:function(e,t,n){"use strict";var r=n(380),a=n(934),i=n(496);e.exports=function(e,t,n){for(var o="constraint"===e.type?a[e._operation](e.value):e,s=o.size,l=[],c=i(o),u=n.trace._carpetTrace,h=u?{xaxis:u.aaxis,yaxis:u.baxis,x:n.a,y:n.b}:{xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y},d=o.start;d<c;d+=s)if(l.push(r.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},h)),l.length>1e3){r.warn("Too many contours, clipping at 1000",e);break}return l}},889:function(e,t,n){"use strict";var r=n(380);function a(e){return r.extendFlat({},e,{edgepaths:r.extendDeep([],e.edgepaths),paths:r.extendDeep([],e.paths),starts:r.extendDeep([],e.starts)})}e.exports=function(e,t){var n,i,o,s=function(e){return e.reverse()},l=function(e){return e};switch(t){case"=":case"<":return e;case">":for(1!==e.length&&r.warn("Contour data invalid for the specified inequality operation."),i=e[0],n=0;n<i.edgepaths.length;n++)i.edgepaths[n]=s(i.edgepaths[n]);for(n=0;n<i.paths.length;n++)i.paths[n]=s(i.paths[n]);for(n=0;n<i.starts.length;n++)i.starts[n]=s(i.starts[n]);return e;case"][":var c=s;s=l,l=c;case"[]":for(2!==e.length&&r.warn("Contour data invalid for the specified inequality range operation."),i=a(e[0]),o=a(e[1]),n=0;n<i.edgepaths.length;n++)i.edgepaths[n]=s(i.edgepaths[n]);for(n=0;n<i.paths.length;n++)i.paths[n]=s(i.paths[n]);for(n=0;n<i.starts.length;n++)i.starts[n]=s(i.starts[n]);for(;o.edgepaths.length;)i.edgepaths.push(l(o.edgepaths.shift()));for(;o.paths.length;)i.paths.push(l(o.paths.shift()));for(;o.starts.length;)i.starts.push(l(o.starts.shift()));return[i]}}},890:function(e,t,n){"use strict";e.exports=function(e,t){var n,r=e[0],a=r.z;switch(t.type){case"levels":var i=Math.min(a[0][0],a[0][1]);for(n=0;n<e.length;n++){var o=e[n];o.prefixBoundary=!o.edgepaths.length&&(i>o.level||o.starts.length&&i===o.level)}break;case"constraint":if(r.prefixBoundary=!1,r.edgepaths.length)return;var s=r.x.length,l=r.y.length,c=-1/0,u=1/0;for(n=0;n<l;n++)u=Math.min(u,a[n][0]),u=Math.min(u,a[n][s-1]),c=Math.max(c,a[n][0]),c=Math.max(c,a[n][s-1]);for(n=1;n<s-1;n++)u=Math.min(u,a[0][n]),u=Math.min(u,a[l-1][n]),c=Math.max(c,a[0][n]),c=Math.max(c,a[l-1][n]);var h,d,p=t.value;switch(t._operation){case">":p>c&&(r.prefixBoundary=!0);break;case"<":(p<u||r.starts.length&&p===u)&&(r.prefixBoundary=!0);break;case"[]":h=Math.min(p[0],p[1]),((d=Math.max(p[0],p[1]))<u||h>c||r.starts.length&&d===u)&&(r.prefixBoundary=!0);break;case"][":h=Math.min(p[0],p[1]),d=Math.max(p[0],p[1]),h<u&&d>c&&(r.prefixBoundary=!0)}}}},891:function(e,t,n){"use strict";e.exports={eventDataKeys:["binNumber"]}},934:function(e,t,n){"use strict";var r=n(617),a=n(385);function i(e,t){var n,i=Array.isArray(t);function o(e){return a(e)?+e:null}return-1!==r.COMPARISON_OPS2.indexOf(e)?n=o(i?t[0]:t):-1!==r.INTERVAL_OPS.indexOf(e)?n=i?[o(t[0]),o(t[1])]:[o(t),o(t)]:-1!==r.SET_OPS.indexOf(e)&&(n=i?t.map(o):[o(t)]),n}function o(e){return function(t){t=i(e,t);var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return{start:n,end:r,size:r-n}}}function s(e){return function(t){return{start:t=i(e,t),end:1/0,size:1/0}}}e.exports={"[]":o("[]"),"][":o("]["),">":s(">"),"<":s("<"),"=":s("=")}},935:function(e,t,n){"use strict";var r=n(382),a=n(719);e.exports=function(e,t,n,i,o){var s=a(e,t,n,i,o,!0);return s&&s.forEach((function(e){var t=e.trace;"constraint"===t.contours.type&&(t.fillcolor&&r.opacity(t.fillcolor)?e.color=r.addOpacity(t.fillcolor,1):t.contours.showlines&&r.opacity(t.line.color)&&(e.color=r.addOpacity(t.line.color,1)))})),s}},951:function(e,t,n){"use strict";var r=n(381),a=n(380);e.exports=function(e,t,n,i){var o=n("x"),s=n("y"),l=a.minRowLength(o),c=a.minRowLength(s);l&&c?(t._length=Math.min(l,c),r.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],i),(n("z")||n("marker.color"))&&n("histfunc"),n("histnorm"),n("autobinx"),n("autobiny")):t.visible=!1}}}]);