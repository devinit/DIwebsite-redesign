(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1022:function(e,t,r){"use strict";var n=r(379),i=r(378),a=r(401),o=r(609);function s(e,t,r,n){var i=n("opacityscale");"max"===i?t.opacityscale=[[0,.1],[1,1]]:"min"===i?t.opacityscale=[[0,1],[1,.1]]:"extremes"===i?t.opacityscale=function(e,t){for(var r=[],n=0;n<32;n++){var i=n/31,a=t+(1-t)*(1-Math.pow(Math.sin(e*i*Math.PI),2));r.push([i,Math.max(0,Math.min(1,a))])}return r}(1,.1):function(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var r=0;r<e.length;r++){var n=e[r];if(2!==n.length||+n[0]<t)return!1;t=+n[0]}return!0}(i)||(t.opacityscale=void 0)}function l(e,t,r){t in e&&!(r in e)&&(e[r]=e[t])}e.exports={supplyDefaults:function(e,t,r,c){var u,h;function f(r,n){return i.coerce(e,t,o,r,n)}var d=f("x"),p=f("y"),m=f("z");if(!m||!m.length||d&&d.length<1||p&&p.length<1)t.visible=!1;else{t._xlength=Array.isArray(d)&&i.isArrayOrTypedArray(d[0])?m.length:m[0].length,t._ylength=m.length,n.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],c),f("text"),f("hovertext"),f("hovertemplate"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach((function(e){f(e)}));var v=f("surfacecolor"),g=["x","y","z"];for(u=0;u<3;++u){var y="contours."+g[u],b=f(y+".show"),x=f(y+".highlight");if(b||x)for(h=0;h<3;++h)f(y+".project."+g[h]);b&&(f(y+".color"),f(y+".width"),f(y+".usecolormap")),x&&(f(y+".highlightcolor"),f(y+".highlightwidth")),f(y+".start"),f(y+".end"),f(y+".size")}v||(l(e,"zmin","cmin"),l(e,"zmax","cmax"),l(e,"zauto","cauto")),a(e,t,c,f,{prefix:"",cLetter:"c"}),s(e,t,c,f),t._length=null}},opacityscaleDefaults:s}},1097:function(e,t,r){"use strict";var n=r(1437),i=r(517),a=["args","body"],o=["pre","post","printCode","funcName","blockSize"];e.exports=function(e){for(var t in e)a.indexOf(t)<0&&o.indexOf(t)<0&&console.warn("cwise: Unknown argument '"+t+"' passed to expression compiler");for(var r=0;r<a.length;++r)if(!e[a[r]])throw new Error("cwise: Missing argument: "+a[r]);return i({args:e.args,pre:n(e.pre||function(){}),body:n(e.body),post:n(e.post||function(){}),debug:!!e.printCode,funcName:e.funcName||e.body.name||"cwise",blockSize:e.blockSize||64})}},1168:function(e,t,r){"use strict";e.exports=r(1426)},1426:function(e,t,r){"use strict";e.exports={attributes:r(609),supplyDefaults:r(1022).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:r(1427),plot:r(1428),moduleType:"trace",name:"surface",basePlotModule:r(557),categories:["gl3d","2dMap","showLegend"],meta:{description:["The data the describes the coordinates of the surface is set in `z`.","Data in `z` should be a {2D array}.","Coordinates in `x` and `y` can either be 1D {arrays}","or {2D arrays} (e.g. to graph parametric surfaces).","If not provided in `x` and `y`, the x and y coordinates are assumed","to be linear starting at 0 with a unit step.","The color scale corresponds to the `z` values by default.","For custom color scales, use `surfacecolor` which should be a {2D array},","where its bounds can be controlled using `cmin` and `cmax`."].join(" ")}}},1427:function(e,t,r){"use strict";var n=r(419);e.exports=function(e,t){t.surfacecolor?n(e,t,{vals:t.surfacecolor,containerStr:"",cLetter:"c"}):n(e,t,{vals:t.z,containerStr:"",cLetter:"c"})}},1428:function(e,t,r){"use strict";var n=r(1429),i=r(431),a=r(1434),o=r(1442),s=r(378).isArrayOrTypedArray,l=r(487).parseColorScale,c=r(451),u=r(400).extractOpts,h=r(542),f=r(543);function d(e,t,r){this.scene=e,this.uid=r,this.surface=t,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var p=d.prototype;p.getXat=function(e,t,r,n){var i=s(this.data.x)?s(this.data.x[0])?this.data.x[t][e]:this.data.x[e]:e;return void 0===r?i:n.d2l(i,0,r)},p.getYat=function(e,t,r,n){var i=s(this.data.y)?s(this.data.y[0])?this.data.y[t][e]:this.data.y[t]:t;return void 0===r?i:n.d2l(i,0,r)},p.getZat=function(e,t,r,n){var i=this.data.z[t][e];return null===i&&this.data.connectgaps&&this.data._interpolatedZ&&(i=this.data._interpolatedZ[t][e]),void 0===r?i:n.d2l(i,0,r)},p.handlePick=function(e){if(e.object===this.surface){var t=(e.data.index[0]-1)/this.dataScaleX-1,r=(e.data.index[1]-1)/this.dataScaleY-1,n=Math.max(Math.min(Math.round(t),this.data.z[0].length-1),0),i=Math.max(Math.min(Math.round(r),this.data._ylength-1),0);e.index=[n,i],e.traceCoordinate=[this.getXat(n,i),this.getYat(n,i),this.getZat(n,i)],e.dataCoordinate=[this.getXat(n,i,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(n,i,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(n,i,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var a=0;a<3;a++){var o=e.dataCoordinate[a];null!=o&&(e.dataCoordinate[a]*=this.scene.dataScale[a])}var s=this.data.hovertext||this.data.text;return Array.isArray(s)&&s[i]&&void 0!==s[i][n]?e.textLabel=s[i][n]:e.textLabel=s||"",e.data.dataCoordinate=e.dataCoordinate.slice(),this.surface.highlight(e.data),this.scene.glplot.spikes.position=e.dataCoordinate,!0}};var m=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function v(e,t){if(e<t)return 0;for(var r=0;0===Math.floor(e%t);)e/=t,r++;return r}function g(e){for(var t=[],r=0;r<m.length;r++){var n=m[r];t.push(v(e,n))}return t}function y(e){for(var t=g(e),r=e,n=0;n<m.length;n++)if(t[n]>0){r=m[n];break}return r}function b(e,t){if(!(e<1||t<1)){for(var r=g(e),n=g(t),i=1,a=0;a<m.length;a++)i*=Math.pow(m[a],Math.max(r[a],n[a]));return i}}p.calcXnums=function(e){var t,r=[];for(t=1;t<e;t++){var n=this.getXat(t-1,0),i=this.getXat(t,0);r[t-1]=i!==n&&null!=n&&null!=i?Math.abs(i-n):0}var a=0;for(t=1;t<e;t++)a+=r[t-1];for(t=1;t<e;t++)0===r[t-1]?r[t-1]=1:r[t-1]=Math.round(a/r[t-1]);return r},p.calcYnums=function(e){var t,r=[];for(t=1;t<e;t++){var n=this.getYat(0,t-1),i=this.getYat(0,t);r[t-1]=i!==n&&null!=n&&null!=i?Math.abs(i-n):0}var a=0;for(t=1;t<e;t++)a+=r[t-1];for(t=1;t<e;t++)0===r[t-1]?r[t-1]=1:r[t-1]=Math.round(a/r[t-1]);return r};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],S=x[9],w=x[13];function k(e,t){for(var r=!1,n=0;n<e.length;n++)if(t===e[n]){r=!0;break}!1===r&&e.push(t)}p.estimateScale=function(e,t){for(var r=1+function(e){if(0!==e.length){for(var t=1,r=0;r<e.length;r++)t=b(t,e[r]);return t}}(0===t?this.calcXnums(e):this.calcYnums(e));r<S;)r*=2;for(;r>w;)r--,r/=y(r),++r<S&&(r=w);var n=Math.round(r/e);return n>1?n:1},p.refineCoords=function(e){for(var t=this.dataScaleX,r=this.dataScaleY,n=e[0].shape[0],o=e[0].shape[1],s=0|Math.floor(e[0].shape[0]*t+1),l=0|Math.floor(e[0].shape[1]*r+1),c=1+n+1,u=1+o+1,h=i(new Float32Array(c*u),[c,u]),f=0;f<e.length;++f){this.surface.padField(h,e[f]);var d=i(new Float32Array(s*l),[s,l]);a(d,h,[t,0,0,0,r,0,0,0,1]),e[f]=d}},p.setContourLevels=function(){var e,t,r,n=[[],[],[]],i=[!1,!1,!1],a=!1;for(e=0;e<3;++e)if(this.showContour[e]&&(a=!0,this.contourSize[e]>0&&null!==this.contourStart[e]&&null!==this.contourEnd[e]&&this.contourEnd[e]>this.contourStart[e]))for(i[e]=!0,t=this.contourStart[e];t<this.contourEnd[e];t+=this.contourSize[e])r=t*this.scene.dataScale[e],k(n[e],r);if(a){var o=[[],[],[]];for(e=0;e<3;++e)this.showContour[e]&&(o[e]=i[e]?n[e]:this.scene.contourLevels[e]);this.surface.update({levels:o})}},p.update=function(e){var t,r,n,a,s=this.scene,d=s.fullSceneLayout,p=this.surface,m=e.opacity,v=l(e,m),g=s.dataScale,y=e.z[0].length,b=e._ylength,x=s.contourLevels;this.data=e;var S=[];for(t=0;t<3;t++)for(S[t]=[],r=0;r<y;r++)S[t][r]=[];for(r=0;r<y;r++)for(n=0;n<b;n++)S[0][r][n]=this.getXat(r,n,e.xcalendar,d.xaxis),S[1][r][n]=this.getYat(r,n,e.ycalendar,d.yaxis),S[2][r][n]=this.getZat(r,n,e.zcalendar,d.zaxis);if(e.connectgaps)for(e._emptypoints=f(S[2]),h(S[2],e._emptypoints),e._interpolatedZ=[],r=0;r<y;r++)for(e._interpolatedZ[r]=[],n=0;n<b;n++)e._interpolatedZ[r][n]=S[2][r][n];for(t=0;t<3;t++)for(r=0;r<y;r++)for(n=0;n<b;n++)null==(a=S[t][r][n])?S[t][r][n]=NaN:a=S[t][r][n]*=g[t];for(t=0;t<3;t++)for(r=0;r<y;r++)for(n=0;n<b;n++)null!=(a=S[t][r][n])&&(this.minValues[t]>a&&(this.minValues[t]=a),this.maxValues[t]<a&&(this.maxValues[t]=a));for(t=0;t<3;t++)this.objectOffset[t]=.5*(this.minValues[t]+this.maxValues[t]);for(t=0;t<3;t++)for(r=0;r<y;r++)for(n=0;n<b;n++)null!=(a=S[t][r][n])&&(S[t][r][n]-=this.objectOffset[t]);var k=[i(new Float32Array(y*b),[y,b]),i(new Float32Array(y*b),[y,b]),i(new Float32Array(y*b),[y,b])];o(k[0],(function(e,t){return S[0][e][t]})),o(k[1],(function(e,t){return S[1][e][t]})),o(k[2],(function(e,t){return S[2][e][t]})),S=[];var C={colormap:v,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!e.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:e.opacityscale,opacity:e.opacity},_=u(e);if(C.intensityBounds=[_.min,_.max],e.surfacecolor){var E=i(new Float32Array(y*b),[y,b]);o(E,(function(t,r){return e.surfacecolor[r][t]})),k.push(E)}else C.intensityBounds[0]*=g[2],C.intensityBounds[1]*=g[2];(w<k[0].shape[0]||w<k[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(k[0].shape[0],0),this.dataScaleY=this.estimateScale(k[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(k)),e.surfacecolor&&(C.intensity=k.pop());var L=[!0,!0,!0],A=["x","y","z"];for(t=0;t<3;++t){var I=e.contours[A[t]];L[t]=I.highlight,C.showContour[t]=I.show||I.highlight,C.showContour[t]&&(C.contourProject[t]=[I.project.x,I.project.y,I.project.z],I.show?(this.showContour[t]=!0,C.levels[t]=x[t],p.highlightColor[t]=C.contourColor[t]=c(I.color),I.usecolormap?p.highlightTint[t]=C.contourTint[t]=0:p.highlightTint[t]=C.contourTint[t]=1,C.contourWidth[t]=I.width,this.contourStart[t]=I.start,this.contourEnd[t]=I.end,this.contourSize[t]=I.size):(this.showContour[t]=!1,this.contourStart[t]=null,this.contourEnd[t]=null,this.contourSize[t]=0),I.highlight&&(C.dynamicColor[t]=c(I.highlightcolor),C.dynamicWidth[t]=I.highlightwidth))}(function(e){var t=e[0].rgb,r=e[e.length-1].rgb;return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]})(v)&&(C.vertexColor=!0),C.objectOffset=this.objectOffset,C.coords=k,p.update(C),p.visible=e.visible,p.enableDynamic=L,p.enableHighlight=L,p.snapToData=!0,"lighting"in e&&(p.ambientLight=e.lighting.ambient,p.diffuseLight=e.lighting.diffuse,p.specularLight=e.lighting.specular,p.roughness=e.lighting.roughness,p.fresnel=e.lighting.fresnel),"lightposition"in e&&(p.lightPosition=[e.lightposition.x,e.lightposition.y,e.lightposition.z]),m&&m<1&&(p.supportsTransparency=!0)},p.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},e.exports=function(e,t){var r=e.glplot.gl,i=n({gl:r}),a=new d(e,i,t.uid);return i._trace=a,a.update(t),e.glplot.add(i),a}},1429:function(e,t,r){"use strict";e.exports=function(e){var t=e.gl,r=y(t),n=x(t),s=b(t),l=S(t),c=i(t),u=a(t,[{buffer:c,size:4,stride:40,offset:0},{buffer:c,size:3,stride:40,offset:16},{buffer:c,size:3,stride:40,offset:28}]),h=i(t),f=a(t,[{buffer:h,size:4,stride:20,offset:0},{buffer:h,size:1,stride:20,offset:16}]),d=i(t),p=a(t,[{buffer:d,size:2,type:t.FLOAT}]),m=o(t,1,256,t.RGBA,t.UNSIGNED_BYTE);m.minFilter=t.LINEAR,m.magFilter=t.LINEAR;var v=new E(t,[0,0],[[0,0,0],[0,0,0]],r,n,c,u,m,s,l,h,f,d,p,[0,0,0]),g={levels:[[],[],[]]};for(var w in e)g[w]=e[w];return g.colormap=g.colormap||"jet",v.update(g),v};var n=r(428),i=r(411),a=r(475),o=r(540),s=r(402),l=r(883),c=r(560),u=r(1430),h=r(431),f=r(685),d=r(558),p=r(529),m=r(423),v=r(1432),g=r(1433),y=g.createShader,b=g.createContourShader,x=g.createPickShader,S=g.createPickContourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],k=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],C=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function _(e,t,r,n,i){this.position=e,this.index=t,this.uv=r,this.level=n,this.dataCoordinate=i}!function(){for(var e=0;e<3;++e){var t=C[e],r=(e+2)%3;t[(e+1)%3+0]=1,t[r+3]=1,t[e+6]=1}}();function E(e,t,r,n,i,a,o,l,c,u,f,d,p,m,v){this.gl=e,this.shape=t,this.bounds=r,this.objectOffset=v,this.intensityBounds=[],this._shader=n,this._pickShader=i,this._coordinateBuffer=a,this._vao=o,this._colorMap=l,this._contourShader=c,this._contourPickShader=u,this._contourBuffer=f,this._contourVAO=d,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new _([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=p,this._dynamicVAO=m,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[h(s.mallocFloat(1024),[0,0]),h(s.mallocFloat(1024),[0,0]),h(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.opacityscale=!1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var L=E.prototype;L.isTransparent=function(){return this.opacity<1||this.opacityscale},L.isOpaque=function(){if(this.opacityscale)return!1;if(this.opacity<1)return!1;if(this.opacity>=1)return!0;for(var e=0;e<3;++e)if(this._contourCounts[e].length>0)return!0;return!1},L.pickSlots=1,L.setPickBase=function(e){this.pickId=e};var A=[0,0,0],I={showSurface:!1,showContour:!1,projections:[w.slice(),w.slice(),w.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function T(e,t){var r,n,i,a=t.axes&&t.axes.lastCubeProps.axis||A,o=t.showSurface,s=t.showContour;for(r=0;r<3;++r)for(o=o||t.surfaceProject[r],n=0;n<3;++n)s=s||t.contourProject[r][n];for(r=0;r<3;++r){var l=I.projections[r];for(n=0;n<16;++n)l[n]=0;for(n=0;n<4;++n)l[5*n]=1;l[5*r]=0,l[12+r]=t.axesBounds[+(a[r]>0)][r],d(l,e.model,l);var c=I.clipBounds[r];for(i=0;i<2;++i)for(n=0;n<3;++n)c[i][n]=e.clipBounds[i][n];c[0][r]=-1e8,c[1][r]=1e8}return I.showSurface=o,I.showContour=s,I}var j={model:w,view:w,projection:w,inverseModel:w.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},O=w.slice(),N=[1,0,0,0,1,0,0,0,1];function P(e,t){e=e||{};var r=this.gl;r.disable(r.CULL_FACE),this._colorMap.bind(0);var n=j;n.model=e.model||w,n.view=e.view||w,n.projection=e.projection||w,n.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],n.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],n.objectOffset=this.objectOffset,n.contourColor=this.contourColor[0],n.inverseModel=p(n.inverseModel,n.model);for(var i=0;i<2;++i)for(var a=n.clipBounds[i],o=0;o<3;++o)a[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8);n.kambient=this.ambientLight,n.kdiffuse=this.diffuseLight,n.kspecular=this.specularLight,n.roughness=this.roughness,n.fresnel=this.fresnel,n.opacity=this.opacity,n.height=0,n.permutation=N,n.vertexColor=this.vertexColor;var s=O;for(d(s,n.view,n.model),d(s,n.projection,s),p(s,s),i=0;i<3;++i)n.eyePosition[i]=s[12+i]/s[15];var l=s[15];for(i=0;i<3;++i)l+=this.lightPosition[i]*s[4*i+3];for(i=0;i<3;++i){var c=s[12+i];for(o=0;o<3;++o)c+=s[4*o+i]*this.lightPosition[o];n.lightPosition[i]=c/l}var u=T(n,this);if(u.showSurface){for(this._shader.bind(),this._shader.uniforms=n,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(r.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&this.vertexCount&&(this._shader.uniforms.model=u.projections[i],this._shader.uniforms.clipBounds=u.clipBounds[i],this._vao.draw(r.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){var h=this._contourShader;n.kambient=1,n.kdiffuse=0,n.kspecular=0,n.opacity=1,h.bind(),h.uniforms=n;var f=this._contourVAO;for(f.bind(),i=0;i<3;++i)for(h.uniforms.permutation=C[i],r.lineWidth(this.contourWidth[i]*this.pixelRatio),o=0;o<this.contourLevels[i].length;++o)o===this.highlightLevel[i]?(h.uniforms.contourColor=this.highlightColor[i],h.uniforms.contourTint=this.highlightTint[i]):0!==o&&o-1!==this.highlightLevel[i]||(h.uniforms.contourColor=this.contourColor[i],h.uniforms.contourTint=this.contourTint[i]),this._contourCounts[i][o]&&(h.uniforms.height=this.contourLevels[i][o],f.draw(r.LINES,this._contourCounts[i][o],this._contourOffsets[i][o]));for(i=0;i<3;++i)for(h.uniforms.model=u.projections[i],h.uniforms.clipBounds=u.clipBounds[i],o=0;o<3;++o)if(this.contourProject[i][o]){h.uniforms.permutation=C[o],r.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var m=0;m<this.contourLevels[o].length;++m)m===this.highlightLevel[o]?(h.uniforms.contourColor=this.highlightColor[o],h.uniforms.contourTint=this.highlightTint[o]):0!==m&&m-1!==this.highlightLevel[o]||(h.uniforms.contourColor=this.contourColor[o],h.uniforms.contourTint=this.contourTint[o]),this._contourCounts[o][m]&&(h.uniforms.height=this.contourLevels[o][m],f.draw(r.LINES,this._contourCounts[o][m],this._contourOffsets[o][m]))}for(f.unbind(),(f=this._dynamicVAO).bind(),i=0;i<3;++i)if(0!==this._dynamicCounts[i])for(h.uniforms.model=n.model,h.uniforms.clipBounds=n.clipBounds,h.uniforms.permutation=C[i],r.lineWidth(this.dynamicWidth[i]*this.pixelRatio),h.uniforms.contourColor=this.dynamicColor[i],h.uniforms.contourTint=this.dynamicTint[i],h.uniforms.height=this.dynamicLevel[i],f.draw(r.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]),o=0;o<3;++o)this.contourProject[o][i]&&(h.uniforms.model=u.projections[o],h.uniforms.clipBounds=u.clipBounds[o],f.draw(r.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]));f.unbind()}}L.draw=function(e){return P.call(this,e,!1)},L.drawTransparent=function(e){return P.call(this,e,!0)};var B={model:w,view:w,projection:w,inverseModel:w,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function M(e,t){return Array.isArray(e)?[t(e[0]),t(e[1]),t(e[2])]:[t(e),t(e),t(e)]}function F(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],1]:[e[0],e[1],e[2],e[3]]:[0,0,0,1]}function z(e){if(Array.isArray(e)){if(Array.isArray(e))return[F(e[0]),F(e[1]),F(e[2])];var t=F(e);return[t.slice(),t.slice(),t.slice()]}}L.drawPick=function(e){e=e||{};var t=this.gl;t.disable(t.CULL_FACE);var r=B;r.model=e.model||w,r.view=e.view||w,r.projection=e.projection||w,r.shape=this._field[2].shape,r.pickId=this.pickId/255,r.lowerBound=this.bounds[0],r.upperBound=this.bounds[1],r.objectOffset=this.objectOffset,r.permutation=N;for(var n=0;n<2;++n)for(var i=r.clipBounds[n],a=0;a<3;++a)i[a]=Math.min(Math.max(this.clipBounds[n][a],-1e8),1e8);var o=T(r,this);if(o.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=r,this._vao.bind(),this._vao.draw(t.TRIANGLES,this._vertexCount),n=0;n<3;++n)this.surfaceProject[n]&&(this._pickShader.uniforms.model=o.projections[n],this._pickShader.uniforms.clipBounds=o.clipBounds[n],this._vao.draw(t.TRIANGLES,this._vertexCount));this._vao.unbind()}if(o.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=r;var l=this._contourVAO;for(l.bind(),a=0;a<3;++a)for(t.lineWidth(this.contourWidth[a]*this.pixelRatio),s.uniforms.permutation=C[a],n=0;n<this.contourLevels[a].length;++n)this._contourCounts[a][n]&&(s.uniforms.height=this.contourLevels[a][n],l.draw(t.LINES,this._contourCounts[a][n],this._contourOffsets[a][n]));for(n=0;n<3;++n)for(s.uniforms.model=o.projections[n],s.uniforms.clipBounds=o.clipBounds[n],a=0;a<3;++a)if(this.contourProject[n][a]){s.uniforms.permutation=C[a],t.lineWidth(this.contourWidth[a]*this.pixelRatio);for(var c=0;c<this.contourLevels[a].length;++c)this._contourCounts[a][c]&&(s.uniforms.height=this.contourLevels[a][c],l.draw(t.LINES,this._contourCounts[a][c],this._contourOffsets[a][c]))}l.unbind()}},L.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=this._field[2].shape,r=this._pickResult,n=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255,i=Math.floor(n),a=n-i,o=t[1]*(e.value[1]+(15&e.value[2])/16)/255,s=Math.floor(o),l=o-s;i+=1,s+=1;var c=r.position;c[0]=c[1]=c[2]=0;for(var u=0;u<2;++u)for(var h=u?a:1-a,f=0;f<2;++f)for(var d=i+u,p=s+f,v=h*(f?l:1-l),g=0;g<3;++g)c[g]+=this._field[g].get(d,p)*v;for(var y=this._pickResult.level,b=0;b<3;++b)if(y[b]=m.le(this.contourLevels[b],c[b]),y[b]<0)this.contourLevels[b].length>0&&(y[b]=0);else if(y[b]<this.contourLevels[b].length-1){var x=this.contourLevels[b][y[b]],S=this.contourLevels[b][y[b]+1];Math.abs(x-c[b])>Math.abs(S-c[b])&&(y[b]+=1)}for(r.index[0]=a<.5?i:i+1,r.index[1]=l<.5?s:s+1,r.uv[0]=n/t[0],r.uv[1]=o/t[1],g=0;g<3;++g)r.dataCoordinate[g]=this._field[g].get(r.index[0],r.index[1]);return r},L.padField=function(e,t){var r=t.shape.slice(),n=e.shape.slice();c.assign(e.lo(1,1).hi(r[0],r[1]),t),c.assign(e.lo(1).hi(r[0],1),t.hi(r[0],1)),c.assign(e.lo(1,n[1]-1).hi(r[0],1),t.lo(0,r[1]-1).hi(r[0],1)),c.assign(e.lo(0,1).hi(1,r[1]),t.hi(1)),c.assign(e.lo(n[0]-1,1).hi(1,r[1]),t.lo(r[0]-1)),e.set(0,0,t.get(0,0)),e.set(0,n[1]-1,t.get(0,r[1]-1)),e.set(n[0]-1,0,t.get(r[0]-1,0)),e.set(n[0]-1,n[1]-1,t.get(r[0]-1,r[1]-1))},L.update=function(e){e=e||{},this.objectOffset=e.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in e&&(this.contourWidth=M(e.contourWidth,Number)),"showContour"in e&&(this.showContour=M(e.showContour,Boolean)),"showSurface"in e&&(this.showSurface=!!e.showSurface),"contourTint"in e&&(this.contourTint=M(e.contourTint,Boolean)),"contourColor"in e&&(this.contourColor=z(e.contourColor)),"contourProject"in e&&(this.contourProject=M(e.contourProject,(function(e){return M(e,Boolean)}))),"surfaceProject"in e&&(this.surfaceProject=e.surfaceProject),"dynamicColor"in e&&(this.dynamicColor=z(e.dynamicColor)),"dynamicTint"in e&&(this.dynamicTint=M(e.dynamicTint,Number)),"dynamicWidth"in e&&(this.dynamicWidth=M(e.dynamicWidth,Number)),"opacity"in e&&(this.opacity=e.opacity),"opacityscale"in e&&(this.opacityscale=e.opacityscale),"colorBounds"in e&&(this.colorBounds=e.colorBounds),"vertexColor"in e&&(this.vertexColor=e.vertexColor?1:0);var t=e.field||e.coords&&e.coords[2]||null,r=!1;if(t||(t=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in e||"coords"in e){var i=(t.shape[0]+2)*(t.shape[1]+2);i>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(n.nextPow2(i))),this._field[2]=h(this._field[2].data,[t.shape[0]+2,t.shape[1]+2]),this.padField(this._field[2],t),this.shape=t.shape.slice();for(var a=this.shape,o=0;o<2;++o)this._field[2].size>this._field[o].data.length&&(s.freeFloat(this._field[o].data),this._field[o].data=s.mallocFloat(this._field[2].size)),this._field[o]=h(this._field[o].data,[a[0]+2,a[1]+2]);if(e.coords){var d=e.coords;if(!Array.isArray(d)||3!==d.length)throw new Error("gl-surface: invalid coordinates for x/y");for(o=0;o<2;++o){var p=d[o];for(x=0;x<2;++x)if(p.shape[x]!==a[x])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[o],p)}}else if(e.ticks){var m=e.ticks;if(!Array.isArray(m)||2!==m.length)throw new Error("gl-surface: invalid ticks");for(o=0;o<2;++o){var g=m[o];if((Array.isArray(g)||g.length)&&(g=h(g)),g.shape[0]!==a[o])throw new Error("gl-surface: invalid tick length");var y=h(g.data,a);y.stride[o]=g.stride[0],y.stride[1^o]=0,this.padField(this._field[o],y)}}else{for(o=0;o<2;++o){var b=[0,0];b[o]=1,this._field[o]=h(this._field[o].data,[a[0]+2,a[1]+2],b,0)}this._field[0].set(0,0,0);for(var x=0;x<a[0];++x)this._field[0].set(x+1,0,x);for(this._field[0].set(a[0]+1,0,a[0]-1),this._field[1].set(0,0,0),x=0;x<a[1];++x)this._field[1].set(0,x+1,x);this._field[1].set(0,a[1]+1,a[1]-1)}var S=this._field,w=h(s.mallocFloat(3*S[2].size*2),[3,a[0]+2,a[1]+2,2]);for(o=0;o<3;++o)v(w.pick(o),S[o],"mirror");var C=h(s.mallocFloat(3*S[2].size),[a[0]+2,a[1]+2,3]);for(o=0;o<a[0]+2;++o)for(x=0;x<a[1]+2;++x){var _=w.get(0,o,x,0),E=w.get(0,o,x,1),L=w.get(1,o,x,0),A=w.get(1,o,x,1),I=w.get(2,o,x,0),T=w.get(2,o,x,1),j=L*T-A*I,O=I*E-T*_,N=_*A-E*L,P=Math.sqrt(j*j+O*O+N*N);P<1e-8?(P=Math.max(Math.abs(j),Math.abs(O),Math.abs(N)))<1e-8?(N=1,O=j=0,P=1):P=1/P:P=1/Math.sqrt(P),C.set(o,x,0,j*P),C.set(o,x,1,O*P),C.set(o,x,2,N*P)}s.free(w.data);var B=[1/0,1/0,1/0],F=[-1/0,-1/0,-1/0],D=1/0,R=-1/0,U=(a[0]-1)*(a[1]-1)*6,V=s.mallocFloat(n.nextPow2(10*U)),W=0,G=0;for(o=0;o<a[0]-1;++o)e:for(x=0;x<a[1]-1;++x){for(var q=0;q<2;++q)for(var K=0;K<2;++K)for(var H=0;H<3;++H){var X=this._field[H].get(1+o+q,1+x+K);if(isNaN(X)||!isFinite(X))continue e}for(H=0;H<6;++H){var Y=o+k[H][0],Z=x+k[H][1],$=this._field[0].get(Y+1,Z+1),J=this._field[1].get(Y+1,Z+1);X=this._field[2].get(Y+1,Z+1),j=C.get(Y+1,Z+1,0),O=C.get(Y+1,Z+1,1),N=C.get(Y+1,Z+1,2),e.intensity&&(Q=e.intensity.get(Y,Z));var Q=e.intensity?e.intensity.get(Y,Z):X+this.objectOffset[2];V[W++]=Y,V[W++]=Z,V[W++]=$,V[W++]=J,V[W++]=X,V[W++]=0,V[W++]=Q,V[W++]=j,V[W++]=O,V[W++]=N,B[0]=Math.min(B[0],$+this.objectOffset[0]),B[1]=Math.min(B[1],J+this.objectOffset[1]),B[2]=Math.min(B[2],X+this.objectOffset[2]),D=Math.min(D,Q),F[0]=Math.max(F[0],$+this.objectOffset[0]),F[1]=Math.max(F[1],J+this.objectOffset[1]),F[2]=Math.max(F[2],X+this.objectOffset[2]),R=Math.max(R,Q),G+=1}}for(e.intensityBounds&&(D=+e.intensityBounds[0],R=+e.intensityBounds[1]),o=6;o<W;o+=10)V[o]=(V[o]-D)/(R-D);this._vertexCount=G,this._coordinateBuffer.update(V.subarray(0,W)),s.freeFloat(V),s.free(C.data),this.bounds=[B,F],this.intensity=e.intensity||this._field[2],this.intensityBounds[0]===D&&this.intensityBounds[1]===R||(r=!0),this.intensityBounds=[D,R]}if("levels"in e){var ee=e.levels;for(ee=Array.isArray(ee[0])?ee.slice():[[],[],ee],o=0;o<3;++o)ee[o]=ee[o].slice(),ee[o].sort((function(e,t){return e-t}));for(o=0;o<3;++o)for(x=0;x<ee[o].length;++x)ee[o][x]-=this.objectOffset[o];e:for(o=0;o<3;++o){if(ee[o].length!==this.contourLevels[o].length){r=!0;break}for(x=0;x<ee[o].length;++x)if(ee[o][x]!==this.contourLevels[o][x]){r=!0;break e}}this.contourLevels=ee}if(r){S=this._field,a=this.shape;for(var te=[],re=0;re<3;++re){var ne=this.contourLevels[re],ie=[],ae=[],oe=[0,0,0];for(o=0;o<ne.length;++o){var se=f(this._field[re],ne[o]);ie.push(te.length/5|0),G=0;e:for(x=0;x<se.cells.length;++x){var le=se.cells[x];for(H=0;H<2;++H){var ce=se.positions[le[H]],ue=ce[0],he=0|Math.floor(ue),fe=ue-he,de=ce[1],pe=0|Math.floor(de),me=de-pe,ve=!1;t:for(var ge=0;ge<3;++ge){oe[ge]=0;var ye=(re+ge+1)%3;for(q=0;q<2;++q){var be=q?fe:1-fe;for(Y=0|Math.min(Math.max(he+q,0),a[0]),K=0;K<2;++K){var xe=K?me:1-me;if(Z=0|Math.min(Math.max(pe+K,0),a[1]),X=ge<2?this._field[ye].get(Y,Z):(this.intensity.get(Y,Z)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(X)||isNaN(X)){ve=!0;break t}var Se=be*xe;oe[ge]+=Se*X}}}if(ve){if(H>0){for(var we=0;we<5;++we)te.pop();G-=1}continue e}te.push(oe[0],oe[1],ce[0],ce[1],oe[2]),G+=1}}ae.push(G)}this._contourOffsets[re]=ie,this._contourCounts[re]=ae}var ke=s.mallocFloat(te.length);for(o=0;o<te.length;++o)ke[o]=te[o];this._contourBuffer.update(ke),s.freeFloat(ke)}e.colormap&&this._colorMap.setPixels(function(e,t){var r=u([l({colormap:e,nshades:256,format:"rgba"}).map((function(e,r){var n=t?function(e,t){if(!t)return 1;if(!t.length)return 1;for(var r=0;r<t.length;++r){if(t.length<2)return 1;if(t[r][0]===e)return t[r][1];if(t[r][0]>e&&r>0){var n=(t[r][0]-e)/(t[r][0]-t[r-1][0]);return t[r][1]*(1-n)+n*t[r-1][1]}}return 1}(r/255,t):1;return[e[0],e[1],e[2],255*n]}))]);return c.divseq(r,255),r}(e.colormap,this.opacityscale))},L.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var e=0;e<3;++e)s.freeFloat(this._field[e].data)},L.highlight=function(e){var t,r;if(!e)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(t=0;t<3;++t)this.enableHighlight[t]?this.highlightLevel[t]=e.level[t]:this.highlightLevel[t]=-1;for(r=this.snapToData?e.dataCoordinate:e.position,t=0;t<3;++t)r[t]-=this.objectOffset[t];if(this.enableDynamic[0]&&r[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&r[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&r[2]!==this.dynamicLevel[2]){for(var n=0,i=this.shape,a=s.mallocFloat(12*i[0]*i[1]),o=0;o<3;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=r[o];var l=(o+1)%3,c=(o+2)%3,u=this._field[o],h=this._field[l],d=this._field[c],p=f(u,r[o]),m=p.cells,v=p.positions;for(this._dynamicOffsets[o]=n,t=0;t<m.length;++t)for(var g=m[t],y=0;y<2;++y){var b=v[g[y]],x=+b[0],S=0|x,w=0|Math.min(S+1,i[0]),k=x-S,C=1-k,_=+b[1],E=0|_,L=0|Math.min(E+1,i[1]),A=_-E,I=1-A,T=C*I,j=C*A,O=k*I,N=k*A,P=T*h.get(S,E)+j*h.get(S,L)+O*h.get(w,E)+N*h.get(w,L),B=T*d.get(S,E)+j*d.get(S,L)+O*d.get(w,E)+N*d.get(w,L);if(isNaN(P)||isNaN(B)){y&&(n-=1);break}a[2*n+0]=P,a[2*n+1]=B,n+=1}this._dynamicCounts[o]=n-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(a.subarray(0,2*n)),s.freeFloat(a)}}},1430:function(e,t,r){"use strict";var n=r(431),i=r(1431);e.exports=function(e,t){for(var r=[],a=e,o=1;Array.isArray(a);)r.push(a.length),o*=a.length,a=a[0];return 0===r.length?n():(t||(t=n(new Float64Array(o),r)),i(t,e),t)}},1431:function(e,t,r){e.exports=r(517)({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},1432:function(e,t,r){"use strict";e.exports=function(e,t,r){if(Array.isArray(r)){if(r.length!==t.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else r=n(t.dimension,"string"==typeof r?r:"clamp");if(e.dimension!==t.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(e.shape[t.dimension]!==t.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var i=0;i<t.dimension;++i)if(e.shape[i]!==t.shape[i])throw new Error("ndarray-gradient: shape mismatch");if(0===t.size)return e;if(t.dimension<=0)return e.set(0),e;return function(e){var t=e.join();if(g=o[t])return g;var r=e.length,n=["function gradient(dst,src){var s=src.shape.slice();"];function i(t){for(var i=r-t.length,a=[],o=[],s=[],l=0;l<r;++l)t.indexOf(l+1)>=0?s.push("0"):t.indexOf(-(l+1))>=0?s.push("s["+l+"]-1"):(s.push("-1"),a.push("1"),o.push("s["+l+"]-2"));var c=".lo("+a.join()+").hi("+o.join()+")";if(0===a.length&&(c=""),i>0){n.push("if(1");for(l=0;l<r;++l)t.indexOf(l+1)>=0||t.indexOf(-(l+1))>=0||n.push("&&s[",l,"]>2");n.push("){grad",i,"(src.pick(",s.join(),")",c);for(l=0;l<r;++l)t.indexOf(l+1)>=0||t.indexOf(-(l+1))>=0||n.push(",dst.pick(",s.join(),",",l,")",c);n.push(");")}for(l=0;l<t.length;++l){var u=Math.abs(t[l])-1,h="dst.pick("+s.join()+","+u+")"+c;switch(e[u]){case"clamp":var f=s.slice(),d=s.slice();t[l]<0?f[u]="s["+u+"]-2":d[u]="1",0===i?n.push("if(s[",u,"]>1){dst.set(",s.join(),",",u,",0.5*(src.get(",f.join(),")-src.get(",d.join(),")))}else{dst.set(",s.join(),",",u,",0)};"):n.push("if(s[",u,"]>1){diff(",h,",src.pick(",f.join(),")",c,",src.pick(",d.join(),")",c,");}else{zero(",h,");};");break;case"mirror":0===i?n.push("dst.set(",s.join(),",",u,",0);"):n.push("zero(",h,");");break;case"wrap":var p=s.slice(),m=s.slice();t[l]<0?(p[u]="s["+u+"]-2",m[u]="0"):(p[u]="s["+u+"]-1",m[u]="1"),0===i?n.push("if(s[",u,"]>2){dst.set(",s.join(),",",u,",0.5*(src.get(",p.join(),")-src.get(",m.join(),")))}else{dst.set(",s.join(),",",u,",0)};"):n.push("if(s[",u,"]>2){diff(",h,",src.pick(",p.join(),")",c,",src.pick(",m.join(),")",c,");}else{zero(",h,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}i>0&&n.push("};")}for(var s=0;s<1<<r;++s){for(var h=[],f=0;f<r;++f)s&1<<f&&h.push(f+1);for(var d=0;d<1<<h.length;++d){var p=h.slice();for(f=0;f<h.length;++f)d&1<<f&&(p[f]=-p[f]);i(p)}}n.push("return dst;};return gradient");var m=["diff","zero"],v=[l,c];for(s=1;s<=r;++s)m.push("grad"+s),v.push(u(s));m.push(n.join(""));var g=Function.apply(void 0,m).apply(void 0,v);return a[t]=g,g}(r)(e,t)};var n=r(559),i=r(517),a={},o={},s={body:"",args:[],thisVars:[],localVars:[]},l=i({args:["array","array","array"],pre:s,post:s,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),c=i({args:["array"],pre:s,post:s,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"});function u(e){if(e in a)return a[e];for(var t=[],r=0;r<e;++r)t.push("out",r,"s=0.5*(inp",r,"l-inp",r,"r);");var o=["array"],l=["junk"];for(r=0;r<e;++r){o.push("array"),l.push("out"+r+"s");var c=n(e);c[r]=-1,o.push({array:0,offset:c.slice()}),c[r]=1,o.push({array:0,offset:c.slice()}),l.push("inp"+r+"l","inp"+r+"r")}return a[e]=i({args:o,pre:s,post:s,body:{body:t.join(""),args:l.map((function(e){return{name:e,lvalue:0===e.indexOf("out"),rvalue:0===e.indexOf("inp"),count:"junk"!==e|0}})),thisVars:[],localVars:[]},funcName:"fdTemplate"+e})}},1433:function(e,t,r){var n=r(418),i=r(413),a=i("../shaders/vertex.glsl"),o=i("../shaders/fragment.glsl"),s=i("../shaders/contour-vertex.glsl"),l=i("../shaders/pick.glsl");t.createShader=function(e){var t=n(e,a,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},t.createPickShader=function(e){var t=n(e,a,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},t.createContourShader=function(e){var t=n(e,s,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t},t.createPickContourShader=function(e){var t=n(e,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t}},1434:function(e,t,r){"use strict";var n=r(1435),i=r(1439);e.exports=function(e,t,r){var a=t.dimension,o=i([],r);return n(e,t,(function(e,t){for(var r=0;r<a;++r){e[r]=o[(a+1)*a+r];for(var n=0;n<a;++n)e[r]+=o[(a+1)*n+r]*t[n]}var i=o[(a+1)*(a+1)-1];for(n=0;n<a;++n)i+=o[(a+1)*n+a]*t[n];var s=1/i;for(r=0;r<a;++r)e[r]*=s;return e})),e}},1435:function(e,t,r){"use strict";var n=r(1436),i=r(1097),a=i({args:["index","array","scalar","scalar","scalar"],pre:function(e,t,r,n,i){this.warped=new Array(i)},body:function(e,t,r,n,i){r(this.warped,e),n.apply(void 0,this.warped)}}),o=i({args:["index","array","scalar","scalar","scalar"],pre:function(){this.warped=[0]},body:function(e,t,r,n,i){r(this.warped,e),n(i,this.warped[0])}}),s=i({args:["index","array","scalar","scalar","scalar"],pre:function(){this.warped=[0,0]},body:function(e,t,r,n,i){r(this.warped,e),n(i,this.warped[0],this.warped[1])}}),l=i({args:["index","array","scalar","scalar","scalar"],pre:function(){this.warped=[0,0,0]},body:function(e,t,r,n,i){r(this.warped,e),n(i,this.warped[0],this.warped[1],this.warped[2])}});e.exports=function(e,t,r){switch(t.shape.length){case 1:o(e,r,n.d1,t);break;case 2:s(e,r,n.d2,t);break;case 3:l(e,r,n.d3,t);break;default:a(e,r,n.bind(void 0,t),t.shape.length)}return e}},1436:function(e,t,r){"use strict";function n(e,t){var r=Math.floor(t),n=t-r,i=0<=r&&r<e.shape[0],a=0<=r+1&&r+1<e.shape[0];return(1-n)*(i?+e.get(r):0)+n*(a?+e.get(r+1):0)}function i(e,t,r){var n=Math.floor(t),i=t-n,a=0<=n&&n<e.shape[0],o=0<=n+1&&n+1<e.shape[0],s=Math.floor(r),l=r-s,c=0<=s&&s<e.shape[1],u=0<=s+1&&s+1<e.shape[1],h=a&&c?e.get(n,s):0,f=a&&u?e.get(n,s+1):0;return(1-l)*((1-i)*h+i*(o&&c?e.get(n+1,s):0))+l*((1-i)*f+i*(o&&u?e.get(n+1,s+1):0))}function a(e,t,r,n){var i=Math.floor(t),a=t-i,o=0<=i&&i<e.shape[0],s=0<=i+1&&i+1<e.shape[0],l=Math.floor(r),c=r-l,u=0<=l&&l<e.shape[1],h=0<=l+1&&l+1<e.shape[1],f=Math.floor(n),d=n-f,p=0<=f&&f<e.shape[2],m=0<=f+1&&f+1<e.shape[2],v=o&&u&&p?e.get(i,l,f):0,g=o&&h&&p?e.get(i,l+1,f):0,y=s&&u&&p?e.get(i+1,l,f):0,b=s&&h&&p?e.get(i+1,l+1,f):0,x=o&&u&&m?e.get(i,l,f+1):0,S=o&&h&&m?e.get(i,l+1,f+1):0;return(1-d)*((1-c)*((1-a)*v+a*y)+c*((1-a)*g+a*b))+d*((1-c)*((1-a)*x+a*(s&&u&&m?e.get(i+1,l,f+1):0))+c*((1-a)*S+a*(s&&h&&m?e.get(i+1,l+1,f+1):0)))}function o(e){var t,r,n=0|e.shape.length,i=new Array(n),a=new Array(n),o=new Array(n),s=new Array(n);for(t=0;t<n;++t)r=+arguments[t+1],i[t]=Math.floor(r),a[t]=r-i[t],o[t]=0<=i[t]&&i[t]<e.shape[t],s[t]=0<=i[t]+1&&i[t]+1<e.shape[t];var l,c,u,h=0;e:for(t=0;t<1<<n;++t){for(c=1,u=e.offset,l=0;l<n;++l)if(t&1<<l){if(!s[l])continue e;c*=a[l],u+=e.stride[l]*(i[l]+1)}else{if(!o[l])continue e;c*=1-a[l],u+=e.stride[l]*i[l]}h+=c*e.data[u]}return h}e.exports=function(e,t,r,s){switch(e.shape.length){case 0:return 0;case 1:return n(e,t);case 2:return i(e,t,r);case 3:return a(e,t,r,s);default:return o.apply(void 0,arguments)}},e.exports.d1=n,e.exports.d2=i,e.exports.d3=a},1437:function(e,t,r){"use strict";(function(t){var n=r(1438),i=r(476),a=0;function o(e,t,r){this.name=e,this.lvalue=t,this.rvalue=r,this.count=0}function s(e,t,r,n){this.body=e,this.args=t,this.thisVars=r,this.localVars=n}e.exports=function(e){for(var r=["(",e,")()"].join(""),l=n.parse(r,{range:!0}),c="_inline_"+a+++"_",u=function(e){for(var t=e.body[0].expression.callee.params,r=new Array(t.length),n=0;n<t.length;++n)r[n]=t[n].name;return r}(l),h=new Array(u.length),f=0;f<u.length;++f)h[f]=new o([c,"arg",f,"_"].join(""),!1,!1);for(var d=new Array(r.length),p=(f=0,r.length);f<p;++f)d[f]=r.charAt(f);var m,v=[],g=[];function y(e,t){for(var r=e.range[0],n=e.range[1],i=r+1;i<n;++i)d[i]="";d[r]=t}return function e(r,n){if(r.parent=n,"MemberExpression"===r.type)r.computed?(e(r.object,r),e(r.property,r)):"ThisExpression"===r.object.type?y(r,(b=r.property.name,x="this_"+b.replace(/\_/g,"__"),g.push(x),x)):e(r.object,r);else{if("ThisExpression"===r.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===r.type){var i=r.name,a=u.indexOf(i);if(a>=0){var o=h[a],s=function(e){return"AssignmentExpression"===e.parent.type&&e.parent.left===e?"="===e.parent.operator?1:3:"UpdateExpression"===e.parent.type?3:2}(r);1&s&&(o.lvalue=!0),2&s&&(o.rvalue=!0),++o.count,y(r,o.name)}else(function(e){if("eval"===e)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?e in window:void 0!==t?e in t:"undefined"!=typeof self&&e in self})(i)||y(r,function(e){var t=c+e.replace(/\_/g,"__");return v.push(t),t}(i))}else if("Literal"===r.type)"string"==typeof r.value&&y(r,"'"+r.value.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'");else{if("WithStatement"===r.type)throw new Error("cwise-parser: with() statements not allowed");for(var l=Object.keys(r),f=0,d=l.length;f<d;++f)if("parent"!==l[f]){var p=r[l[f]];if(p)if(p instanceof Array)for(var m=0;m<p.length;++m)p[m]&&"string"==typeof p[m].type&&e(p[m],r);else"string"==typeof p.type&&e(p,r)}}}var b,x}(l.body[0].expression.callee.body,void 0),i(v),i(g),new s((m=l.body[0].expression.callee.body,d.slice(m.range[0],m.range[1]).join("")),h,g,v)}}).call(this,r(150))},1438:function(e,t,r){var n,i,a;!function(r,o){"use strict";i=[t],void 0===(a="function"==typeof(n=function(e){var t,r,n,i,a,o,s,l,c,u,h,f,d,p,m,v,g,y;function b(e,t){if(!e)throw new Error("ASSERT: "+t)}function x(e){return e>=48&&e<=57}function S(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function w(e){return"01234567".indexOf(e)>=0}function k(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function C(e){return 10===e||13===e||8232===e||8233===e}function _(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&s.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function E(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&s.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function L(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function A(e){return"eval"===e||"arguments"===e}function I(e,t,r,n,i){var a;b("number"==typeof r,"Comment must have valid position"),g.lastCommentStart>=r||(g.lastCommentStart=r,a={type:e,value:t},y.range&&(a.range=[r,n]),y.loc&&(a.loc=i),y.comments.push(a),y.attachComment&&(y.leadingComments.push(a),y.trailingComments.push(a)))}function T(e){var t,r,n,i;for(t=h-e,r={start:{line:f,column:h-d-e}};h<p;)if(n=c.charCodeAt(h),++h,C(n))return y.comments&&(i=c.slice(t+e,h-1),r.end={line:f,column:h-d-1},I("Line",i,t,h-1,r)),13===n&&10===c.charCodeAt(h)&&++h,++f,void(d=h);y.comments&&(i=c.slice(t+e,h),r.end={line:f,column:h-d},I("Line",i,t,h,r))}function j(){var e,t,r,n;for(y.comments&&(e=h-2,t={start:{line:f,column:h-d-2}});h<p;)if(C(r=c.charCodeAt(h)))13===r&&10===c.charCodeAt(h+1)&&++h,++f,++h,d=h,h>=p&&H({},o.UnexpectedToken,"ILLEGAL");else if(42===r){if(47===c.charCodeAt(h+1))return++h,++h,void(y.comments&&(n=c.slice(e+2,h-2),t.end={line:f,column:h-d},I("Block",n,e,h,t)));++h}else++h;H({},o.UnexpectedToken,"ILLEGAL")}function O(){var e,t;for(t=0===h;h<p;)if(k(e=c.charCodeAt(h)))++h;else if(C(e))++h,13===e&&10===c.charCodeAt(h)&&++h,++f,d=h,t=!0;else if(47===e)if(47===(e=c.charCodeAt(h+1)))++h,++h,T(2),t=!0;else{if(42!==e)break;++h,++h,j()}else if(t&&45===e){if(45!==c.charCodeAt(h+1)||62!==c.charCodeAt(h+2))break;h+=3,T(3)}else{if(60!==e)break;if("!--"!==c.slice(h+1,h+4))break;++h,++h,++h,++h,T(4)}}function N(e){var t,r,n,i=0;for(r="u"===e?4:2,t=0;t<r;++t){if(!(h<p&&S(c[h])))return"";n=c[h++],i=16*i+"0123456789abcdef".indexOf(n.toLowerCase())}return String.fromCharCode(i)}function P(){var e,t;for(e=c.charCodeAt(h++),t=String.fromCharCode(e),92===e&&(117!==c.charCodeAt(h)&&H({},o.UnexpectedToken,"ILLEGAL"),++h,(e=N("u"))&&"\\"!==e&&_(e.charCodeAt(0))||H({},o.UnexpectedToken,"ILLEGAL"),t=e);h<p&&E(e=c.charCodeAt(h));)++h,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==c.charCodeAt(h)&&H({},o.UnexpectedToken,"ILLEGAL"),++h,(e=N("u"))&&"\\"!==e&&E(e.charCodeAt(0))||H({},o.UnexpectedToken,"ILLEGAL"),t+=e);return t}function B(){var e,r;return e=h,{type:1===(r=92===c.charCodeAt(h)?P():function(){var e,t;for(e=h++;h<p;){if(92===(t=c.charCodeAt(h)))return h=e,P();if(!E(t))break;++h}return c.slice(e,h)}()).length?t.Identifier:function(e){if(u&&L(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}(r)?t.Keyword:"null"===r?t.NullLiteral:"true"===r||"false"===r?t.BooleanLiteral:t.Identifier,value:r,lineNumber:f,lineStart:d,start:e,end:h}}function M(){var e,r,n,i,a=h,s=c.charCodeAt(h),l=c[h];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++h,y.tokenize&&(40===s?y.openParenToken=y.tokens.length:123===s&&(y.openCurlyToken=y.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(s),lineNumber:f,lineStart:d,start:a,end:h};default:if(61===(e=c.charCodeAt(h+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return h+=2,{type:t.Punctuator,value:String.fromCharCode(s)+String.fromCharCode(e),lineNumber:f,lineStart:d,start:a,end:h};case 33:case 61:return h+=2,61===c.charCodeAt(h)&&++h,{type:t.Punctuator,value:c.slice(a,h),lineNumber:f,lineStart:d,start:a,end:h}}}return">>>="===(i=c.substr(h,4))?{type:t.Punctuator,value:i,lineNumber:f,lineStart:d,start:a,end:h+=4}:">>>"===(n=i.substr(0,3))||"<<="===n||">>="===n?{type:t.Punctuator,value:n,lineNumber:f,lineStart:d,start:a,end:h+=3}:l===(r=n.substr(0,2))[1]&&"+-<>&|".indexOf(l)>=0||"=>"===r?{type:t.Punctuator,value:r,lineNumber:f,lineStart:d,start:a,end:h+=2}:"<>=!+-*%&|^/".indexOf(l)>=0?(++h,{type:t.Punctuator,value:l,lineNumber:f,lineStart:d,start:a,end:h}):void H({},o.UnexpectedToken,"ILLEGAL")}function F(){var e,r,n;if(b(x((n=c[h]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),r=h,e="","."!==n){if(e=c[h++],n=c[h],"0"===e){if("x"===n||"X"===n)return++h,function(e){for(var r="";h<p&&S(c[h]);)r+=c[h++];return 0===r.length&&H({},o.UnexpectedToken,"ILLEGAL"),_(c.charCodeAt(h))&&H({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt("0x"+r,16),lineNumber:f,lineStart:d,start:e,end:h}}(r);if(w(n)&&function(){var e,t;for(e=h+1;e<p;++e){if("8"===(t=c[e])||"9"===t)return!1;if(!w(t))return!0}return!0}())return function(e){for(var r="0"+c[h++];h<p&&w(c[h]);)r+=c[h++];return(_(c.charCodeAt(h))||x(c.charCodeAt(h)))&&H({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt(r,8),octal:!0,lineNumber:f,lineStart:d,start:e,end:h}}(r)}for(;x(c.charCodeAt(h));)e+=c[h++];n=c[h]}if("."===n){for(e+=c[h++];x(c.charCodeAt(h));)e+=c[h++];n=c[h]}if("e"===n||"E"===n)if(e+=c[h++],"+"!==(n=c[h])&&"-"!==n||(e+=c[h++]),x(c.charCodeAt(h)))for(;x(c.charCodeAt(h));)e+=c[h++];else H({},o.UnexpectedToken,"ILLEGAL");return _(c.charCodeAt(h))&&H({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:f,lineStart:d,start:r,end:h}}function z(){var e,r,n,i;return v=null,O(),e=h,r=function(){var e,t,r,n;for(b("/"===(e=c[h]),"Regular expression literal must start with a slash"),t=c[h++],r=!1,n=!1;h<p;)if(t+=e=c[h++],"\\"===e)C((e=c[h++]).charCodeAt(0))&&H({},o.UnterminatedRegExp),t+=e;else if(C(e.charCodeAt(0)))H({},o.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){n=!0;break}"["===e&&(r=!0)}return n||H({},o.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,r,n;for(t="",r="";h<p&&E((e=c[h]).charCodeAt(0));)if(++h,"\\"===e&&h<p)if("u"===(e=c[h])){if(n=++h,e=N("u"))for(r+=e,t+="\\u";n<h;++n)t+=c[n];else h=n,r+="u",t+="\\u";X({},o.UnexpectedToken,"ILLEGAL")}else t+="\\",X({},o.UnexpectedToken,"ILLEGAL");else r+=e,t+=e;return{value:r,literal:t}}(),i=function(e,t){var r;try{r=new RegExp(e,t)}catch(e){H({},o.InvalidRegExp)}return r}(r.value,n.value),y.tokenize?{type:t.RegularExpression,value:i,lineNumber:f,lineStart:d,start:e,end:h}:{literal:r.literal+n.literal,value:i,start:e,end:h}}function D(){var e,t,r,n;return O(),e=h,t={start:{line:f,column:h-d}},r=z(),t.end={line:f,column:h-d},y.tokenize||(y.tokens.length>0&&(n=y.tokens[y.tokens.length-1]).range[0]===e&&"Punctuator"===n.type&&("/"!==n.value&&"/="!==n.value||y.tokens.pop()),y.tokens.push({type:"RegularExpression",value:r.literal,range:[e,h],loc:t})),r}function R(){var e;return O(),h>=p?{type:t.EOF,lineNumber:f,lineStart:d,start:h,end:h}:_(e=c.charCodeAt(h))?B():40===e||41===e||59===e?M():39===e||34===e?function(){var e,r,n,i,a,s,l,u,m="",v=!1;for(l=f,u=d,b("'"===(e=c[h])||'"'===e,"String literal must starts with a quote"),r=h,++h;h<p;){if((n=c[h++])===e){e="";break}if("\\"===n)if((n=c[h++])&&C(n.charCodeAt(0)))++f,"\r"===n&&"\n"===c[h]&&++h,d=h;else switch(n){case"u":case"x":s=h,(a=N(n))?m+=a:(h=s,m+=n);break;case"n":m+="\n";break;case"r":m+="\r";break;case"t":m+="\t";break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:w(n)?(0!==(i="01234567".indexOf(n))&&(v=!0),h<p&&w(c[h])&&(v=!0,i=8*i+"01234567".indexOf(c[h++]),"0123".indexOf(n)>=0&&h<p&&w(c[h])&&(i=8*i+"01234567".indexOf(c[h++]))),m+=String.fromCharCode(i)):m+=n}else{if(C(n.charCodeAt(0)))break;m+=n}}return""!==e&&H({},o.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:m,octal:v,startLineNumber:l,startLineStart:u,lineNumber:f,lineStart:d,start:r,end:h}}():46===e?x(c.charCodeAt(h+1))?F():M():x(e)?F():y.tokenize&&47===e?function(){var e,t;if(!(e=y.tokens[y.tokens.length-1]))return D();if("Punctuator"===e.type){if("]"===e.value)return M();if(")"===e.value)return!(t=y.tokens[y.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?M():D();if("}"===e.value){if(y.tokens[y.openCurlyToken-3]&&"Keyword"===y.tokens[y.openCurlyToken-3].type){if(!(t=y.tokens[y.openCurlyToken-4]))return M()}else{if(!y.tokens[y.openCurlyToken-4]||"Keyword"!==y.tokens[y.openCurlyToken-4].type)return M();if(!(t=y.tokens[y.openCurlyToken-5]))return D()}return n.indexOf(t.value)>=0?M():D()}return D()}return"Keyword"===e.type&&"this"!==e.value?D():M()}():M()}function U(){var e,n,i;return O(),e={start:{line:f,column:h-d}},n=R(),e.end={line:f,column:h-d},n.type!==t.EOF&&(i=c.slice(n.start,n.end),y.tokens.push({type:r[n.type],value:i,range:[n.start,n.end],loc:e})),n}function V(){var e;return h=(e=v).end,f=e.lineNumber,d=e.lineStart,v=void 0!==y.tokens?U():R(),h=e.end,f=e.lineNumber,d=e.lineStart,e}function W(){var e,t,r;e=h,t=f,r=d,v=void 0!==y.tokens?U():R(),h=e,f=t,d=r}function G(e,t){this.line=e,this.column=t}function q(e,t,r,n){this.start=new G(e,t),this.end=new G(r,n)}function K(){var e,t,r,n;return e=h,t=f,r=d,O(),n=f!==t,h=e,f=t,d=r,n}function H(e,t){var r,n=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(function(e,t){return b(t<n.length,"Message reference must be in range"),n[t]}));throw"number"==typeof e.lineNumber?((r=new Error("Line "+e.lineNumber+": "+i)).index=e.start,r.lineNumber=e.lineNumber,r.column=e.start-d+1):((r=new Error("Line "+f+": "+i)).index=h,r.lineNumber=f,r.column=h-d+1),r.description=i,r}function X(){try{H.apply(null,arguments)}catch(e){if(!y.errors)throw e;y.errors.push(e)}}function Y(e){if(e.type===t.EOF&&H(e,o.UnexpectedEOS),e.type===t.NumericLiteral&&H(e,o.UnexpectedNumber),e.type===t.StringLiteral&&H(e,o.UnexpectedString),e.type===t.Identifier&&H(e,o.UnexpectedIdentifier),e.type===t.Keyword){if(function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(e.value))H(e,o.UnexpectedReserved);else if(u&&L(e.value))return void X(e,o.StrictReservedWord);H(e,o.UnexpectedToken,e.value)}H(e,o.UnexpectedToken,e.value)}function Z(e){var r=V();r.type===t.Punctuator&&r.value===e||Y(r)}function $(e){var r=V();r.type===t.Keyword&&r.value===e||Y(r)}function J(e){return v.type===t.Punctuator&&v.value===e}function Q(e){return v.type===t.Keyword&&v.value===e}function ee(){var e,r=h,n=f,i=d,a=v;if(59===c.charCodeAt(h)||J(";"))V();else{if(e=f,O(),f!==e)return h=r,f=n,d=i,void(v=a);v.type===t.EOF||J("}")||Y(v)}}function te(e){return e.type===i.Identifier||e.type===i.MemberExpression}function re(e,t){var r,n,i;return r=u,i=v,n=_e(),t&&u&&A(e[0].name)&&X(t,o.StrictParamName),u=r,m.markEnd(m.createFunctionExpression(null,e,[],n),i)}function ne(){var e,r;return r=v,(e=V()).type===t.StringLiteral||e.type===t.NumericLiteral?(u&&e.octal&&X(e,o.StrictOctalLiteral),m.markEnd(m.createLiteral(e),r)):m.markEnd(m.createIdentifier(e.value),r)}function ie(){var e,r,n,i,a,s;return s=v,(e=v).type===t.Identifier?(n=ne(),"get"!==e.value||J(":")?"set"!==e.value||J(":")?(Z(":"),i=me(),m.markEnd(m.createProperty("init",n,i),s)):(r=ne(),Z("("),(e=v).type!==t.Identifier?(Z(")"),X(e,o.UnexpectedToken,e.value),i=re([])):(a=[ye()],Z(")"),i=re(a,e)),m.markEnd(m.createProperty("set",r,i),s)):(r=ne(),Z("("),Z(")"),i=re([]),m.markEnd(m.createProperty("get",r,i),s))):e.type!==t.EOF&&e.type!==t.Punctuator?(r=ne(),Z(":"),i=me(),m.markEnd(m.createProperty("init",r,i),s)):void Y(e)}function ae(){var e,r,n,s;if(J("("))return function(){var e;return Z("("),e=ve(),Z(")"),e}();if(J("["))return function(){var e,t=[];for(e=v,Z("[");!J("]");)J(",")?(V(),t.push(null)):(t.push(me()),J("]")||Z(","));return V(),m.markEnd(m.createArrayExpression(t),e)}();if(J("{"))return function(){var e,t,r,n,s,l=[],c={},h=String;for(s=v,Z("{");!J("}");)t=(e=ie()).key.type===i.Identifier?e.key.name:h(e.key.value),n="init"===e.kind?a.Data:"get"===e.kind?a.Get:a.Set,r="$"+t,Object.prototype.hasOwnProperty.call(c,r)?(c[r]===a.Data?u&&n===a.Data?X({},o.StrictDuplicateProperty):n!==a.Data&&X({},o.AccessorDataProperty):n===a.Data?X({},o.AccessorDataProperty):c[r]&n&&X({},o.AccessorGetSet),c[r]|=n):c[r]=n,l.push(e),J("}")||Z(",");return Z("}"),m.markEnd(m.createObjectExpression(l),s)}();if(e=v.type,s=v,e===t.Identifier)n=m.createIdentifier(V().value);else if(e===t.StringLiteral||e===t.NumericLiteral)u&&v.octal&&X(v,o.StrictOctalLiteral),n=m.createLiteral(V());else if(e===t.Keyword){if(Q("function"))return function(){var e,t,r,n,i,a,s,l,c,h=null;c=v,$("function"),J("(")||(e=v,h=ye(),u?A(e.value)&&X(e,o.StrictFunctionName):A(e.value)?(r=e,n=o.StrictFunctionName):L(e.value)&&(r=e,n=o.StrictReservedWord));i=Ee(r),a=i.params,t=i.stricted,r=i.firstRestricted,i.message&&(n=i.message);l=u,s=_e(),u&&r&&H(r,n);u&&t&&X(t,n);return u=l,m.markEnd(m.createFunctionExpression(h,a,[],s),c)}();Q("this")?(V(),n=m.createThisExpression()):Y(V())}else e===t.BooleanLiteral?((r=V()).value="true"===r.value,n=m.createLiteral(r)):e===t.NullLiteral?((r=V()).value=null,n=m.createLiteral(r)):J("/")||J("/=")?(n=void 0!==y.tokens?m.createLiteral(D()):m.createLiteral(z()),W()):Y(V());return m.markEnd(n,s)}function oe(){var e=[];if(Z("("),!J(")"))for(;h<p&&(e.push(me()),!J(")"));)Z(",");return Z(")"),e}function se(){var e,r;return r=v,function(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}(e=V())||Y(e),m.markEnd(m.createIdentifier(e.value),r)}function le(){return Z("."),se()}function ce(){var e;return Z("["),e=ve(),Z("]"),e}function ue(){var e,t,r;return r=v,$("new"),e=function(){var e,t,r;b(g.allowIn,"callee of new expression always allow in keyword."),r=v,e=Q("new")?ue():ae();for(;J(".")||J("[");)J("[")?(t=ce(),e=m.createMemberExpression("[",e,t)):(t=le(),e=m.createMemberExpression(".",e,t)),m.markEnd(e,r);return e}(),t=J("(")?oe():[],m.markEnd(m.createNewExpression(e,t),r)}function he(){var e,r,n=v;return e=function(){var e,t,r,n,i=g.allowIn;for(n=v,g.allowIn=!0,e=Q("new")?ue():ae();;){if(J("."))r=le(),e=m.createMemberExpression(".",e,r);else if(J("("))t=oe(),e=m.createCallExpression(e,t);else{if(!J("["))break;r=ce(),e=m.createMemberExpression("[",e,r)}m.markEnd(e,n)}return g.allowIn=i,e}(),v.type===t.Punctuator&&(!J("++")&&!J("--")||K()||(u&&e.type===i.Identifier&&A(e.name)&&X({},o.StrictLHSPostfix),te(e)||X({},o.InvalidLHSInAssignment),r=V(),e=m.markEnd(m.createPostfixExpression(r.value,e),n))),e}function fe(){var e,r,n;return v.type!==t.Punctuator&&v.type!==t.Keyword?r=he():J("++")||J("--")?(n=v,e=V(),r=fe(),u&&r.type===i.Identifier&&A(r.name)&&X({},o.StrictLHSPrefix),te(r)||X({},o.InvalidLHSInAssignment),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n)):J("+")||J("-")||J("~")||J("!")?(n=v,e=V(),r=fe(),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n)):Q("delete")||Q("void")||Q("typeof")?(n=v,e=V(),r=fe(),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n),u&&"delete"===r.operator&&r.argument.type===i.Identifier&&X({},o.StrictDelete)):r=he(),r}function de(e,r){var n=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=r?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function pe(){var e,t,r,n,i;return i=v,e=function(){var e,t,r,n,i,a,o,s,l,c;if(e=v,l=fe(),0===(i=de(n=v,g.allowIn)))return l;for(n.prec=i,V(),t=[e,v],a=[l,n,o=fe()];(i=de(v,g.allowIn))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,l=a.pop(),r=m.createBinaryExpression(s,l,o),t.pop(),e=t[t.length-1],m.markEnd(r,e),a.push(r);(n=V()).prec=i,a.push(n),t.push(v),r=fe(),a.push(r)}for(r=a[c=a.length-1],t.pop();c>1;)r=m.createBinaryExpression(a[c-1].value,a[c-2],r),c-=2,e=t.pop(),m.markEnd(r,e);return r}(),J("?")&&(V(),t=g.allowIn,g.allowIn=!0,r=me(),g.allowIn=t,Z(":"),n=me(),e=m.createConditionalExpression(e,r,n),m.markEnd(e,i)),e}function me(){var e,r,n,a,s,l;return e=v,s=v,a=r=pe(),v.type!==t.Punctuator||"="!==(l=v.value)&&"*="!==l&&"/="!==l&&"%="!==l&&"+="!==l&&"-="!==l&&"<<="!==l&&">>="!==l&&">>>="!==l&&"&="!==l&&"^="!==l&&"|="!==l||(te(r)||X({},o.InvalidLHSInAssignment),u&&r.type===i.Identifier&&A(r.name)&&X(e,o.StrictLHSAssignment),e=V(),n=me(),a=m.markEnd(m.createAssignmentExpression(e.value,r,n),s)),a}function ve(){var e,t=v;if(e=me(),J(",")){for(e=m.createSequenceExpression([e]);h<p&&J(",");)V(),e.expressions.push(me());m.markEnd(e,t)}return e}function ge(){var e,t;return t=v,Z("{"),e=function(){for(var e,t=[];h<p&&!J("}")&&void 0!==(e=Ae());)t.push(e);return t}(),Z("}"),m.markEnd(m.createBlockStatement(e),t)}function ye(){var e,r;return r=v,(e=V()).type!==t.Identifier&&Y(e),m.markEnd(m.createIdentifier(e.value),r)}function be(e){var t,r,n=null;return r=v,t=ye(),u&&A(t.name)&&X({},o.StrictVarName),"const"===e?(Z("="),n=me()):J("=")&&(V(),n=me()),m.markEnd(m.createVariableDeclarator(t,n),r)}function xe(e){var t=[];do{if(t.push(be(e)),!J(","))break;V()}while(h<p);return t}function Se(){var e,t,r,n,i,a,s,l,c,u,h=g.allowIn;return e=t=r=null,$("for"),Z("("),J(";")?V():(Q("var")||Q("let")?(g.allowIn=!1,u=v,l=V(),c=xe(),e=m.markEnd(m.createVariableDeclaration(c,l.value),u),g.allowIn=h,1===e.declarations.length&&Q("in")&&(V(),n=e,i=ve(),e=null)):(g.allowIn=!1,e=ve(),g.allowIn=h,Q("in")&&(te(e)||X({},o.InvalidLHSInForIn),V(),n=e,i=ve(),e=null)),void 0===n&&Z(";")),void 0===n&&(J(";")||(t=ve()),Z(";"),J(")")||(r=ve())),Z(")"),s=g.inIteration,g.inIteration=!0,a=Ce(),g.inIteration=s,void 0===n?m.createForStatement(e,t,r,a):m.createForInStatement(n,i,a)}function we(){var e,t,r,n=[];for(r=v,Q("default")?(V(),e=null):($("case"),e=ve()),Z(":");h<p&&!(J("}")||Q("default")||Q("case"));)t=Ce(),n.push(t);return m.markEnd(m.createSwitchCase(e,n),r)}function ke(){var e,t,r,n,i=[],a=null;return $("try"),e=ge(),Q("catch")&&i.push((n=v,$("catch"),Z("("),J(")")&&Y(v),t=ye(),u&&A(t.name)&&X({},o.StrictCatchVariable),Z(")"),r=ge(),m.markEnd(m.createCatchClause(t,r),n))),Q("finally")&&(V(),a=ge()),0!==i.length||a||H({},o.NoCatchOrFinally),m.createTryStatement(e,[],i,a)}function Ce(){var e,r,n,a,s,l,f,d,y,b=v.type;if(b===t.EOF&&Y(v),b===t.Punctuator&&"{"===v.value)return ge();if(a=v,b===t.Punctuator)switch(v.value){case";":return m.markEnd((Z(";"),m.createEmptyStatement()),a);case"(":return m.markEnd(function(){var e=ve();return ee(),m.createExpressionStatement(e)}(),a)}if(b===t.Keyword)switch(v.value){case"break":return m.markEnd(function(){var e,r=null;return $("break"),59===c.charCodeAt(h)?(V(),g.inIteration||g.inSwitch||H({},o.IllegalBreak),m.createBreakStatement(null)):K()?(g.inIteration||g.inSwitch||H({},o.IllegalBreak),m.createBreakStatement(null)):(v.type===t.Identifier&&(e="$"+(r=ye()).name,Object.prototype.hasOwnProperty.call(g.labelSet,e)||H({},o.UnknownLabel,r.name)),ee(),null!==r||g.inIteration||g.inSwitch||H({},o.IllegalBreak),m.createBreakStatement(r))}(),a);case"continue":return m.markEnd(function(){var e,r=null;return $("continue"),59===c.charCodeAt(h)?(V(),g.inIteration||H({},o.IllegalContinue),m.createContinueStatement(null)):K()?(g.inIteration||H({},o.IllegalContinue),m.createContinueStatement(null)):(v.type===t.Identifier&&(e="$"+(r=ye()).name,Object.prototype.hasOwnProperty.call(g.labelSet,e)||H({},o.UnknownLabel,r.name)),ee(),null!==r||g.inIteration||H({},o.IllegalContinue),m.createContinueStatement(r))}(),a);case"debugger":return m.markEnd(($("debugger"),ee(),m.createDebuggerStatement()),a);case"do":return m.markEnd(($("do"),y=g.inIteration,g.inIteration=!0,f=Ce(),g.inIteration=y,$("while"),Z("("),d=ve(),Z(")"),J(";")&&V(),m.createDoWhileStatement(f,d)),a);case"for":return m.markEnd(Se(),a);case"function":return m.markEnd(Le(),a);case"if":return m.markEnd(function(){var e,t,r;return $("if"),Z("("),e=ve(),Z(")"),t=Ce(),Q("else")?(V(),r=Ce()):r=null,m.createIfStatement(e,t,r)}(),a);case"return":return m.markEnd((l=null,$("return"),g.inFunctionBody||X({},o.IllegalReturn),32===c.charCodeAt(h)&&_(c.charCodeAt(h+1))?(l=ve(),ee(),m.createReturnStatement(l)):K()?m.createReturnStatement(null):(J(";")||J("}")||v.type===t.EOF||(l=ve()),ee(),m.createReturnStatement(l))),a);case"switch":return m.markEnd(function(){var e,t,r,n,i;if($("switch"),Z("("),e=ve(),Z(")"),Z("{"),t=[],J("}"))return V(),m.createSwitchStatement(e,t);for(n=g.inSwitch,g.inSwitch=!0,i=!1;h<p&&!J("}");)null===(r=we()).test&&(i&&H({},o.MultipleDefaultsInSwitch),i=!0),t.push(r);return g.inSwitch=n,Z("}"),m.createSwitchStatement(e,t)}(),a);case"throw":return m.markEnd(function(){var e;return $("throw"),K()&&H({},o.NewlineAfterThrow),e=ve(),ee(),m.createThrowStatement(e)}(),a);case"try":return m.markEnd(ke(),a);case"var":return m.markEnd(($("var"),s=xe(),ee(),m.createVariableDeclaration(s,"var")),a);case"while":return m.markEnd(function(){var e,t,r;return $("while"),Z("("),e=ve(),Z(")"),r=g.inIteration,g.inIteration=!0,t=Ce(),g.inIteration=r,m.createWhileStatement(e,t)}(),a);case"with":return m.markEnd(function(){var e,t;return u&&(O(),X({},o.StrictModeWith)),$("with"),Z("("),e=ve(),Z(")"),t=Ce(),m.createWithStatement(e,t)}(),a)}return(e=ve()).type===i.Identifier&&J(":")?(V(),n="$"+e.name,Object.prototype.hasOwnProperty.call(g.labelSet,n)&&H({},o.Redeclaration,"Label",e.name),g.labelSet[n]=!0,r=Ce(),delete g.labelSet[n],m.markEnd(m.createLabeledStatement(e,r),a)):(ee(),m.markEnd(m.createExpressionStatement(e),a))}function _e(){var e,r,n,a,s,l,f,d,y=[];for(d=v,Z("{");h<p&&v.type===t.StringLiteral&&(r=v,e=Ae(),y.push(e),e.expression.type===i.Literal);)"use strict"===c.slice(r.start+1,r.end-1)?(u=!0,n&&X(n,o.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(a=g.labelSet,s=g.inIteration,l=g.inSwitch,f=g.inFunctionBody,g.labelSet={},g.inIteration=!1,g.inSwitch=!1,g.inFunctionBody=!0;h<p&&!J("}")&&void 0!==(e=Ae());)y.push(e);return Z("}"),g.labelSet=a,g.inIteration=s,g.inSwitch=l,g.inFunctionBody=f,m.markEnd(m.createBlockStatement(y),d)}function Ee(e){var t,r,n,i,a,s,l=[];if(Z("("),!J(")"))for(i={};h<p&&(r=v,t=ye(),a="$"+r.value,u?(A(r.value)&&(n=r,s=o.StrictParamName),Object.prototype.hasOwnProperty.call(i,a)&&(n=r,s=o.StrictParamDupe)):e||(A(r.value)?(e=r,s=o.StrictParamName):L(r.value)?(e=r,s=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,a)&&(e=r,s=o.StrictParamDupe)),l.push(t),i[a]=!0,!J(")"));)Z(",");return Z(")"),{params:l,stricted:n,firstRestricted:e,message:s}}function Le(){var e,t,r,n,i,a,s,l,c,h;return h=v,$("function"),n=v,e=ye(),u?A(n.value)&&X(n,o.StrictFunctionName):A(n.value)?(s=n,l=o.StrictFunctionName):L(n.value)&&(s=n,l=o.StrictReservedWord),t=(a=Ee(s)).params,i=a.stricted,s=a.firstRestricted,a.message&&(l=a.message),c=u,r=_e(),u&&s&&H(s,l),u&&i&&X(i,l),u=c,m.markEnd(m.createFunctionDeclaration(e,t,[],r),h)}function Ae(){if(v.type===t.Keyword)switch(v.value){case"const":case"let":return e=v.value,n=v,$(e),r=xe(e),ee(),m.markEnd(m.createVariableDeclaration(r,e),n);case"function":return Le();default:return Ce()}var e,r,n;if(v.type!==t.EOF)return Ce()}function Ie(){var e,r;return O(),W(),r=v,u=!1,e=function(){for(var e,r,n,a=[];h<p&&(r=v).type===t.StringLiteral&&(e=Ae(),a.push(e),e.expression.type===i.Literal);)"use strict"===c.slice(r.start+1,r.end-1)?(u=!0,n&&X(n,o.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(;h<p&&void 0!==(e=Ae());)a.push(e);return a}(),m.markEnd(m.createProgram(e),r)}function Te(){var e,t,r,n=[];for(e=0;e<y.tokens.length;++e)r={type:(t=y.tokens[e]).type,value:t.value},y.range&&(r.range=t.range),y.loc&&(r.loc=t.loc),n.push(r);y.tokens=n}(r={})[(t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",r[t.EOF]="<end>",r[t.Identifier]="Identifier",r[t.Keyword]="Keyword",r[t.NullLiteral]="Null",r[t.NumericLiteral]="Numeric",r[t.Punctuator]="Punctuator",r[t.StringLiteral]="String",r[t.RegularExpression]="RegularExpression",n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],i={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},a={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},s={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")},l={name:"SyntaxTree",processComment:function(e){var t,r;if(!(e.type===i.Program&&e.body.length>0)){for(y.trailingComments.length>0?y.trailingComments[0].range[0]>=e.range[1]?(r=y.trailingComments,y.trailingComments=[]):y.trailingComments.length=0:y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(r=y.bottomRightStack[y.bottomRightStack.length-1].trailingComments,delete y.bottomRightStack[y.bottomRightStack.length-1].trailingComments);y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].range[0]>=e.range[0];)t=y.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):y.leadingComments.length>0&&y.leadingComments[y.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=y.leadingComments,y.leadingComments=[]),r&&(e.trailingComments=r),y.bottomRightStack.push(e)}},markEnd:function(e,t){return y.range&&(e.range=[t.start,h]),y.loc&&(e.loc=new q(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),f,h-d),this.postProcess(e)),y.attachComment&&this.processComment(e),e},postProcess:function(e){return y.source&&(e.loc.source=y.source),e},createArrayExpression:function(e){return{type:i.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,r){return{type:i.AssignmentExpression,operator:e,left:t,right:r}},createBinaryExpression:function(e,t,r){return{type:"||"===e||"&&"===e?i.LogicalExpression:i.BinaryExpression,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:i.BlockStatement,body:e}},createBreakStatement:function(e){return{type:i.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:i.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:i.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,r){return{type:i.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:i.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:i.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:i.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:i.EmptyStatement}},createExpressionStatement:function(e){return{type:i.ExpressionStatement,expression:e}},createForStatement:function(e,t,r,n){return{type:i.ForStatement,init:e,test:t,update:r,body:n}},createForInStatement:function(e,t,r){return{type:i.ForInStatement,left:e,right:t,body:r,each:!1}},createFunctionDeclaration:function(e,t,r,n){return{type:i.FunctionDeclaration,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,r,n){return{type:i.FunctionExpression,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:i.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:i.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:i.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:i.Literal,value:e.value,raw:c.slice(e.start,e.end)}},createMemberExpression:function(e,t,r){return{type:i.MemberExpression,computed:"["===e,object:t,property:r}},createNewExpression:function(e,t){return{type:i.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:i.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:i.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:i.Program,body:e}},createProperty:function(e,t,r){return{type:i.Property,key:t,value:r,kind:e}},createReturnStatement:function(e){return{type:i.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:i.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:i.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:i.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:i.ThisExpression}},createThrowStatement:function(e){return{type:i.ThrowStatement,argument:e}},createTryStatement:function(e,t,r,n){return{type:i.TryStatement,block:e,guardedHandlers:t,handlers:r,finalizer:n}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:i.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:i.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:i.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:i.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:i.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:i.WithStatement,object:e,body:t}}},e.version="1.2.5",e.tokenize=function(e,r){var n;"string"==typeof e||e instanceof String||(e=String(e)),m=l,h=0,f=(c=e).length>0?1:0,d=0,p=c.length,v=null,g={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},(r=r||{}).tokens=!0,y.tokens=[],y.tokenize=!0,y.openParenToken=-1,y.openCurlyToken=-1,y.range="boolean"==typeof r.range&&r.range,y.loc="boolean"==typeof r.loc&&r.loc,"boolean"==typeof r.comment&&r.comment&&(y.comments=[]),"boolean"==typeof r.tolerant&&r.tolerant&&(y.errors=[]);try{if(W(),v.type===t.EOF)return y.tokens;for(V();v.type!==t.EOF;)try{V()}catch(e){if(v,y.errors){y.errors.push(e);break}throw e}Te(),n=y.tokens,void 0!==y.comments&&(n.comments=y.comments),void 0!==y.errors&&(n.errors=y.errors)}catch(e){throw e}finally{y={}}return n},e.parse=function(e,t){var r,n;n=String,"string"==typeof e||e instanceof String||(e=n(e)),m=l,h=0,f=(c=e).length>0?1:0,d=0,p=c.length,v=null,g={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},void 0!==t&&(y.range="boolean"==typeof t.range&&t.range,y.loc="boolean"==typeof t.loc&&t.loc,y.attachComment="boolean"==typeof t.attachComment&&t.attachComment,y.loc&&null!==t.source&&void 0!==t.source&&(y.source=n(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(y.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(y.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(y.errors=[]),y.attachComment&&(y.range=!0,y.comments=[],y.bottomRightStack=[],y.trailingComments=[],y.leadingComments=[]));try{r=Ie(),void 0!==y.comments&&(r.comments=y.comments),void 0!==y.tokens&&(Te(),r.tokens=y.tokens),void 0!==y.errors&&(r.errors=y.errors)}catch(e){throw e}finally{y={}}return r},e.Syntax=function(){var e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),i)i.hasOwnProperty(e)&&(t[e]=i[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()})?n.apply(t,i):n)||(e.exports=a)}()},1439:function(e,t,r){"use strict";e.exports=function(e,t){switch(t.length){case 0:break;case 1:e[0]=1/t[0];break;case 4:n(e,t);break;case 9:i(e,t);break;case 16:a(e,t);break;default:throw new Error("currently supports matrices up to 4x4")}return e};var n=r(1440),i=r(1441),a=r(529)},1440:function(e,t){e.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*a-i*n;return o?(o=1/o,e[0]=a*o,e[1]=-n*o,e[2]=-i*o,e[3]=r*o,e):null}},1441:function(e,t){e.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=u*o-s*c,f=-u*a+s*l,d=c*a-o*l,p=r*h+n*f+i*d;return p?(p=1/p,e[0]=h*p,e[1]=(-u*n+i*c)*p,e[2]=(s*n-i*o)*p,e[3]=f*p,e[4]=(u*r-i*l)*p,e[5]=(-s*r+i*a)*p,e[6]=d*p,e[7]=(-c*r+n*l)*p,e[8]=(o*r-n*a)*p,e):null}},1442:function(e,t,r){"use strict";var n=r(1097)({args:["index","array","scalar"],body:function(e,t,r){r.apply(void 0,e)}});e.exports=function(e,t){return n(e,t),e}},542:function(e,t,r){"use strict";var n=r(378),i=[[-1,0],[1,0],[0,-1],[0,1]];function a(e){return.5-.25*Math.min(1,.5*e)}function o(e,t,r){var n,a,o,s,l,c,u,h,f,d,p,m,v,g=0;for(s=0;s<t.length;s++){for(a=(n=t[s])[0],o=n[1],p=e[a][o],d=0,f=0,l=0;l<4;l++)(u=e[a+(c=i[l])[0]])&&void 0!==(h=u[o+c[1]])&&(0===d?m=v=h:(m=Math.min(m,h),v=Math.max(v,h)),f++,d+=h);if(0===f)throw"iterateInterp2d order is wrong: no defined neighbors";e[a][o]=d/f,void 0===p?f<4&&(g=1):(e[a][o]=(1+r)*e[a][o]-r*p,v>m&&(g=Math.max(g,Math.abs(e[a][o]-p)/(v-m))))}return g}e.exports=function(e,t){var r,i=1;for(o(e,t),r=0;r<t.length&&!(t[r][2]<4);r++);for(t=t.slice(r),r=0;r<100&&i>.01;r++)i=o(e,t,a(i));return i>.01&&n.log("interp2d didn't converge quickly",i),e}},543:function(e,t,r){"use strict";var n=r(378).maxRowLength;e.exports=function(e){var t,r,i,a,o,s,l,c,u=[],h={},f=[],d=e[0],p=[],m=[0,0,0],v=n(e);for(r=0;r<e.length;r++)for(t=p,p=d,d=e[r+1]||[],i=0;i<v;i++)void 0===p[i]&&((s=(void 0!==p[i-1]?1:0)+(void 0!==p[i+1]?1:0)+(void 0!==t[i]?1:0)+(void 0!==d[i]?1:0))?(0===r&&s++,0===i&&s++,r===e.length-1&&s++,i===p.length-1&&s++,s<4&&(h[[r,i]]=[r,i,s]),u.push([r,i,s])):f.push([r,i]));for(;f.length;){for(l={},c=!1,o=f.length-1;o>=0;o--)(s=((h[[(r=(a=f[o])[0])-1,i=a[1]]]||m)[2]+(h[[r+1,i]]||m)[2]+(h[[r,i-1]]||m)[2]+(h[[r,i+1]]||m)[2])/20)&&(l[a]=[r,i,s],f.splice(o,1),c=!0);if(!c)throw"findEmpties iterated with no new neighbors";for(a in l)h[a]=l[a],u.push(l[a])}return u.sort((function(e,t){return t[2]-e[2]}))}},609:function(e,t,r){"use strict";var n=r(380),i=r(394),a=r(389).hovertemplateAttrs,o=r(397),s=r(385).extendFlat,l=r(392).overrideAll;function c(e){return{valType:"boolean",role:"info",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",e,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}function u(e){return{show:{valType:"boolean",role:"info",dflt:!1,description:["Determines whether or not contour lines about the",e,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,role:"style",editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,role:"style",editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,role:"style",editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:c("x"),y:c("y"),z:c("z")},color:{valType:"color",role:"style",dflt:n.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",role:"info",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",role:"style",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",role:"info",dflt:!0,description:["Determines whether or not contour lines about the",e,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",role:"style",dflt:n.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",role:"style",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}var h=e.exports=l(s({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",role:"info",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:a(),connectgaps:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},i("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:u("x"),y:u("y"),z:u("z")},hidesurface:{valType:"boolean",role:"info",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",role:"style",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",role:"style",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",role:"style",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",role:"style",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",role:"style",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",role:"style",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",role:"style",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",role:"style",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",role:"style",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",role:"style",editType:"calc",description:["Sets the opacityscale."," The opacityscale must be an array containing"," arrays mapping a normalized value to an opacity value."," At minimum, a mapping for the lowest (0) and highest (1)"," values are required. For example,"," `[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have"," higher opacity values and those in the middle would be more transparent"," Alternatively, `opacityscale` may be a palette name string"," of the following list: 'min', 'max', 'extremes' and 'uniform'."," The default is 'uniform'."].join("")},_deprecated:{zauto:s({},i.zauto,{description:"Obsolete. Use `cauto` instead."}),zmin:s({},i.zmin,{description:"Obsolete. Use `cmin` instead."}),zmax:s({},i.zmax,{description:"Obsolete. Use `cmax` instead."})},hoverinfo:s({},o.hoverinfo),showlegend:s({},o.showlegend,{dflt:!1})}),"calc","nested");h.x.editType=h.y.editType=h.z.editType="calc+clearAxisTypes",h.transforms=void 0}}]);