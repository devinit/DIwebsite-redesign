(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1102:function(e,t,n){"use strict";var i=n(380),a=n(381),r=n(905),o=n(403);function s(e,t,n,i,r){var s=r("isomin"),l=r("isomax");null!=l&&null!=s&&s>l&&(t.isomin=null,t.isomax=null);var h=r("x"),c=r("y"),f=r("z"),d=r("value");h&&h.length&&c&&c.length&&f&&f.length&&d&&d.length?(a.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],i),["x","y","z"].forEach((function(e){var t="caps."+e;r(t+".show")&&r(t+".fill");var n="slices."+e;r(n+".show")&&(r(n+".fill"),r(n+".locations"))})),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach((function(e){r(e)})),o(e,t,i,r,{prefix:"",cLetter:"c"}),t._length=null):t.visible=!1}e.exports={supplyDefaults:function(e,t,n,a){s(e,t,n,a,(function(n,a){return i.coerce(e,t,r,n,a)}))},supplyIsoDefaults:s}},1103:function(e,t,n){"use strict";var i=n(421),a=n(863).processGrid,r=n(863).filter;e.exports=function(e,t){t._len=Math.min(t.x.length,t.y.length,t.z.length,t.value.length),t._x=r(t.x,t._len),t._y=r(t.y,t._len),t._z=r(t.z,t._len),t._value=r(t.value,t._len);var n=a(t);t._gridFill=n.fill,t._Xs=n.Xs,t._Ys=n.Ys,t._Zs=n.Zs,t._len=n.len;for(var o=1/0,s=-1/0,l=0;l<t._len;l++){var h=t._value[l];o=Math.min(o,h),s=Math.max(s,h)}t._minValues=o,t._maxValues=s,t._vMin=void 0===t.isomin||null===t.isomin?o:t.isomin,t._vMax=void 0===t.isomax||null===t.isomin?s:t.isomax,i(e,t,{vals:[t._vMin,t._vMax],containerStr:"",cLetter:"c"})}},611:function(e,t,n){"use strict";var i=n(382),a=n(396),r=n(391).hovertemplateAttrs,o=n(399),s=n(387).extendFlat,l=n(394).overrideAll;function h(e){return{valType:"boolean",role:"info",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",e,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}function c(e){return{show:{valType:"boolean",role:"info",dflt:!1,description:["Determines whether or not contour lines about the",e,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,role:"style",editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,role:"style",editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,role:"style",editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:h("x"),y:h("y"),z:h("z")},color:{valType:"color",role:"style",dflt:i.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",role:"info",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",role:"style",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",role:"info",dflt:!0,description:["Determines whether or not contour lines about the",e,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",role:"style",dflt:i.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",role:"style",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}var f=e.exports=l(s({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",role:"info",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:r(),connectgaps:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},a("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:c("x"),y:c("y"),z:c("z")},hidesurface:{valType:"boolean",role:"info",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",role:"style",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",role:"style",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",role:"style",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",role:"style",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",role:"style",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",role:"style",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",role:"style",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",role:"style",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",role:"style",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",role:"style",editType:"calc",description:["Sets the opacityscale."," The opacityscale must be an array containing"," arrays mapping a normalized value to an opacity value."," At minimum, a mapping for the lowest (0) and highest (1)"," values are required. For example,"," `[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have"," higher opacity values and those in the middle would be more transparent"," Alternatively, `opacityscale` may be a palette name string"," of the following list: 'min', 'max', 'extremes' and 'uniform'."," The default is 'uniform'."].join("")},_deprecated:{zauto:s({},a.zauto,{description:"Obsolete. Use `cauto` instead."}),zmin:s({},a.zmin,{description:"Obsolete. Use `cmin` instead."}),zmax:s({},a.zmax,{description:"Obsolete. Use `cmax` instead."})},hoverinfo:s({},o.hoverinfo),showlegend:s({},o.showlegend,{dflt:!1})}),"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes",f.transforms=void 0},676:function(e,t,n){"use strict";var i=n(396),a=n(391).hovertemplateAttrs,r=n(611),o=n(399),s=n(387).extendFlat;e.exports=s({x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the X coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Y coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Z coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},i:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *first* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `i[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `i` represents a","point in space, which is the first vertex of a triangle."].join(" ")},j:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *second* vertex of a triangle. For example, `{i[m], j[m], k[m]}` ","together represent face m (triangle m) in the mesh, where `j[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `j` represents a","point in space, which is the second vertex of a triangle."].join(" ")},k:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *third* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `k[m] = n` points to the triplet ","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `k` represents a","point in space, which is the third vertex of a triangle."].join(" ")},text:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:a({editType:"calc"}),delaunayaxis:{valType:"enumerated",role:"info",values:["x","y","z"],dflt:"z",editType:"calc",description:["Sets the Delaunay axis, which is the axis that is perpendicular to the surface of the","Delaunay triangulation.","It has an effect if `i`, `j`, `k` are not provided and `alphahull` is set to indicate","Delaunay triangulation."].join(" ")},alphahull:{valType:"number",role:"style",dflt:-1,editType:"calc",description:["Determines how the mesh surface triangles are derived from the set of","vertices (points) represented by the `x`, `y` and `z` arrays, if","the `i`, `j`, `k` arrays are not supplied.","For general use of `mesh3d` it is preferred that `i`, `j`, `k` are","supplied.","If *-1*, Delaunay triangulation is used, which is mainly suitable if the","mesh is a single, more or less layer surface that is perpendicular to `delaunayaxis`.","In case the `delaunayaxis` intersects the mesh surface at more than one point","it will result triangles that are very long in the dimension of `delaunayaxis`.","If *>0*, the alpha-shape algorithm is used. In this case, the positive `alphahull` value","signals the use of the alpha-shape algorithm, _and_ its value","acts as the parameter for the mesh fitting.","If *0*,  the convex-hull algorithm is used. It is suitable for convex bodies","or if the intention is to enclose the `x`, `y` and `z` point set into a convex","hull."].join(" ")},intensity:{valType:"data_array",editType:"calc",description:["Sets the intensity values for vertices or cells","as defined by `intensitymode`.","It can be used for plotting fields on meshes."].join(" ")},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc",role:"info",description:["Determines the source of `intensity` values."].join(" ")},color:{valType:"color",role:"style",editType:"calc",description:"Sets the color of the whole mesh"},vertexcolor:{valType:"data_array",role:"style",editType:"calc",description:["Sets the color of each vertex","Overrides *color*. While Red, green and blue colors","are in the range of 0 and 255; in the case of having","vertex color data in RGBA format, the alpha color","should be normalized to be between 0 and 1."].join(" ")},facecolor:{valType:"data_array",role:"style",editType:"calc",description:["Sets the color of each face","Overrides *color* and *vertexcolor*."].join(" ")},transforms:void 0},i("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:r.opacity,flatshading:{valType:"boolean",role:"style",dflt:!1,editType:"calc",description:["Determines whether or not normal smoothing is applied to the meshes,","creating meshes with an angular, low-poly look via flat reflections."].join(" ")},contour:{show:s({},r.contours.x.show,{description:["Sets whether or not dynamic contours are shown on hover"].join(" ")}),color:r.contours.x.color,width:r.contours.x.width,editType:"calc"},lightposition:{x:s({},r.lightposition.x,{dflt:1e5}),y:s({},r.lightposition.y,{dflt:1e5}),z:s({},r.lightposition.z,{dflt:0}),editType:"calc"},lighting:s({vertexnormalsepsilon:{valType:"number",role:"style",min:0,max:1,dflt:1e-12,editType:"calc",description:"Epsilon for vertex normals calculation avoids math issues arising from degenerate geometry."},facenormalsepsilon:{valType:"number",role:"style",min:0,max:1,dflt:1e-6,editType:"calc",description:"Epsilon for face normals calculation avoids math issues arising from degenerate geometry."},editType:"calc"},r.lighting),hoverinfo:s({},o.hoverinfo,{editType:"calc"}),showlegend:s({},o.showlegend,{dflt:!1})})},677:function(e,t,n){"use strict";e.exports=function(e,t,n,i){i=i||e.length;for(var a=new Array(i),r=0;r<i;r++)a[r]=[e[r],t[r],n[r]];return a}},863:function(e,t,n){"use strict";var i=n(380),a=n(421);function r(e){var t,n,a,r,s,l,h,c,f,d,u,p,v=e._x,m=e._y,y=e._z,g=e._len,x=-1/0,_=1/0,T=-1/0,w=1/0,b=-1/0,z=1/0,j="";for(g&&(h=v[0],f=m[0],u=y[0]),g>1&&(c=v[g-1],d=m[g-1],p=y[g-1]),t=0;t<g;t++)x=Math.max(x,v[t]),_=Math.min(_,v[t]),T=Math.max(T,m[t]),w=Math.min(w,m[t]),b=Math.max(b,y[t]),z=Math.min(z,y[t]),r||v[t]===h||(r=!0,j+="x"),s||m[t]===f||(s=!0,j+="y"),l||y[t]===u||(l=!0,j+="z");r||(j+="x"),s||(j+="y"),l||(j+="z");var M=o(e._x),S=o(e._y),A=o(e._z);j=(j=(j=j.replace("x",(h>c?"-":"+")+"x")).replace("y",(f>d?"-":"+")+"y")).replace("z",(u>p?"-":"+")+"z");var D=function(){g=0,M=[],S=[],A=[]};(!g||g<M.length*S.length*A.length)&&D();var I=function(e){return"x"===e?v:"y"===e?m:y},k=function(e){return"x"===e?M:"y"===e?S:A},O=function(e){return e[g-1]<e[0]?-1:1},Y=I(j[1]),Z=I(j[3]),X=I(j[5]),E=k(j[1]).length,F=k(j[3]).length,R=k(j[5]).length,C=!1,L=function(e,t,n){return E*(F*e+t)+n},N=O(I(j[1])),B=O(I(j[3])),q=O(I(j[5]));for(t=0;t<R-1;t++){for(n=0;n<F-1;n++){for(a=0;a<E-1;a++){var J=L(t,n,a),U=L(t,n,a+1),V=L(t,n+1,a),P=L(t+1,n,a);if(Y[J]*N<Y[U]*N&&Z[J]*B<Z[V]*B&&X[J]*q<X[P]*q||(C=!0),C)break}if(C)break}if(C)break}return C&&(i.warn("Encountered arbitrary coordinates! Unable to input data grid."),D()),{xMin:_,yMin:w,zMin:z,xMax:x,yMax:T,zMax:b,Xs:M,Ys:S,Zs:A,len:g,fill:j}}function o(e){return i.distinctVals(e).vals}function s(e,t){if(void 0===t&&(t=e.length),i.isTypedArray(e))return e.subarray(0,t);for(var n=[],a=0;a<t;a++)n[a]=+e[a];return n}e.exports={calc:function(e,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=s(t.u,t._len),t._v=s(t.v,t._len),t._w=s(t.w,t._len),t._x=s(t.x,t._len),t._y=s(t.y,t._len),t._z=s(t.z,t._len);var n=r(t);t._gridFill=n.fill,t._Xs=n.Xs,t._Ys=n.Ys,t._Zs=n.Zs,t._len=n.len;var i,o,l,h=0;t.starts&&(i=s(t.starts.x||[]),o=s(t.starts.y||[]),l=s(t.starts.z||[]),h=Math.min(i.length,o.length,l.length)),t._startsX=i||[],t._startsY=o||[],t._startsZ=l||[];var c,f=0,d=1/0;for(c=0;c<t._len;c++){var u=t._u[c],p=t._v[c],v=t._w[c],m=Math.sqrt(u*u+p*p+v*v);f=Math.max(f,m),d=Math.min(d,m)}for(a(e,t,{vals:[d,f],containerStr:"",cLetter:"c"}),c=0;c<h;c++){var y=i[c];n.xMax=Math.max(n.xMax,y),n.xMin=Math.min(n.xMin,y);var g=o[c];n.yMax=Math.max(n.yMax,g),n.yMin=Math.min(n.yMin,g);var x=l[c];n.zMax=Math.max(n.zMax,x),n.zMin=Math.min(n.zMin,x)}t._slen=h,t._normMax=f,t._xbnds=[n.xMin,n.xMax],t._ybnds=[n.yMin,n.yMax],t._zbnds=[n.zMin,n.zMax]},filter:s,processGrid:r}},905:function(e,t,n){"use strict";var i=n(396),a=n(391).hovertemplateAttrs,r=n(676),o=n(399),s=n(387).extendFlat,l=n(394).overrideAll;function h(e){return{show:{valType:"boolean",role:"info",dflt:!1,description:["Determines whether or not slice planes about the",e,"dimension are drawn."].join(" ")},locations:{valType:"data_array",dflt:[],role:"info",description:["Specifies the location(s) of slices on the axis.","When not specified slices would be created for","all points of the axis",e,"except start and end."].join(" ")},fill:{valType:"number",role:"style",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `slices`. The default fill value of the","`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}function c(e){return{show:{valType:"boolean",role:"info",dflt:!0,description:["Sets the fill ratio of the `slices`. The default fill value of the",e,"`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},fill:{valType:"number",role:"style",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `caps`. The default fill value of the","`caps` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}var f=e.exports=l(s({x:{valType:"data_array",role:"info",description:["Sets the X coordinates of the vertices on X axis."].join(" ")},y:{valType:"data_array",role:"info",description:["Sets the Y coordinates of the vertices on Y axis."].join(" ")},z:{valType:"data_array",role:"info",description:["Sets the Z coordinates of the vertices on Z axis."].join(" ")},value:{valType:"data_array",role:"info",description:["Sets the 4th dimension (value) of the vertices."].join(" ")},isomin:{valType:"number",role:"info",description:["Sets the minimum boundary for iso-surface plot."].join(" ")},isomax:{valType:"number",role:"info",description:["Sets the maximum boundary for iso-surface plot."].join(" ")},surface:{show:{valType:"boolean",role:"info",dflt:!0,description:["Hides/displays surfaces between minimum and maximum iso-values."].join(" ")},count:{valType:"integer",role:"info",dflt:2,min:1,description:["Sets the number of iso-surfaces between minimum and maximum iso-values.","By default this value is 2 meaning that only minimum and maximum surfaces","would be drawn."].join(" ")},fill:{valType:"number",role:"style",min:0,max:1,dflt:1,description:["Sets the fill ratio of the iso-surface. The default fill value of the","surface is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all",role:"style",description:["Sets the surface pattern of the iso-surface 3-D sections. The default pattern of","the surface is `all` meaning that the rest of surface elements would be shaded.","The check options (either 1 or 2) could be used to draw half of the squares","on the surface. Using various combinations of capital `A`, `B`, `C`, `D` and `E`","may also be used to reduce the number of triangles on the iso-surfaces and","creating other patterns of interest."].join(" ")}},spaceframe:{show:{valType:"boolean",role:"info",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",role:"style",min:0,max:1,dflt:.15,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 0.15 meaning that only 15% of the area of every faces of tetras would be","shaded. Applying a greater `fill` ratio would allow the creation of stronger","elements or could be sued to have entirely closed areas (in case of using 1)."].join(" ")}},slices:{x:h("x"),y:h("y"),z:h("z")},caps:{x:c("x"),y:c("y"),z:c("z")},text:{valType:"string",role:"info",dflt:"",arrayOk:!0,description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:a(),showlegend:s({},o.showlegend,{dflt:!1})},i("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:r.opacity,lightposition:r.lightposition,lighting:r.lighting,flatshading:r.flatshading,contour:r.contour,hoverinfo:s({},o.hoverinfo)}),"calc","nested");f.flatshading.dflt=!0,f.lighting.facenormalsepsilon.dflt=0,f.x.editType=f.y.editType=f.z.editType=f.value.editType="calc+clearAxisTypes",f.transforms=void 0},906:function(e,t,n){"use strict";var i=n(753),a=n(489).parseColorScale,r=n(453),o=n(402).extractOpts,s=n(677),l=function(e,t){for(var n=t.length-1;n>0;n--){var i=Math.min(t[n],t[n-1]),a=Math.max(t[n],t[n-1]);if(a>i&&i<e&&e<=a)return{id:n,distRatio:(a-e)/(a-i)}}return{id:0,distRatio:0}};function h(e,t,n){this.scene=e,this.uid=n,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var c=h.prototype;c.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,n=this.data._meshX[t],i=this.data._meshY[t],a=this.data._meshZ[t],r=this.data._Ys.length,o=this.data._Zs.length,s=l(n,this.data._Xs).id,h=l(i,this.data._Ys).id,c=l(a,this.data._Zs).id,f=e.index=c+o*h+o*r*s;e.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var d=this.data.hovertext||this.data.text;return Array.isArray(d)&&void 0!==d[f]?e.textLabel=d[f]:d&&(e.textLabel=d),!0}},c.update=function(e){var t=this.scene,n=t.fullSceneLayout;function i(e,t,n,i){return t.map((function(t){return e.d2l(t,0,i)*n}))}this.data=d(e);var l={positions:s(i(n.xaxis,e._meshX,t.dataScale[0],e.xcalendar),i(n.yaxis,e._meshY,t.dataScale[1],e.ycalendar),i(n.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),cells:s(e._meshI,e._meshJ,e._meshK),lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:r(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},h=o(e);l.vertexIntensity=e._meshIntensity,l.vertexIntensityBounds=[h.min,h.max],l.colormap=a(e),this.mesh.update(l)},c.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var f=["xyz","xzy","yxz","yzx","zxy","zyx"];function d(e){e._meshI=[],e._meshJ=[],e._meshK=[];var t,n,i,a,r,o,s,h=e.surface.show,c=e.spaceframe.show,d=e.surface.fill,u=e.spaceframe.fill,p=!1,v=!1,m=0,y=e._Xs,g=e._Ys,x=e._Zs,_=y.length,T=g.length,w=x.length,b=f.indexOf(e._gridFill.replace(/-/g,"").replace(/\+/g,"")),z=function(e,t,n){switch(b){case 5:return n+w*t+w*T*e;case 4:return n+w*e+w*_*t;case 3:return t+T*n+T*w*e;case 2:return t+T*e+T*_*n;case 1:return e+_*n+_*w*t;default:return e+_*t+_*T*n}},j=e._minValues,M=e._maxValues,S=e._vMin,A=e._vMax;function D(e,t,s){for(var l=o.length,h=n;h<l;h++)if(e===i[h]&&t===a[h]&&s===r[h])return h;return-1}function I(){n=t}function k(){i=[],a=[],r=[],o=[],t=0,I()}function O(e,n,s,l){return i.push(e),a.push(n),r.push(s),o.push(l),++t-1}function Y(e,t,n){for(var i=[],a=0;a<e.length;a++)i[a]=e[a]*(1-n)+n*t[a];return i}function Z(e){s=e}function X(e,t){return"all"===e||null===e||e.indexOf(t)>-1}function E(e,t){return null===e?t:e}function F(t,n,i){I();var a,r,o,l=[n],h=[i];if(s>=1)l=[n],h=[i];else if(s>0){var c=function(e,t){var n=e[0],i=e[1],a=e[2],r=function(e,t,n){for(var i=[],a=0;a<e.length;a++)i[a]=(e[a]+t[a]+n[a])/3;return i}(n,i,a),o=Math.sqrt(1-s),l=Y(r,n,o),h=Y(r,i,o),c=Y(r,a,o),f=t[0],d=t[1],u=t[2];return{xyzv:[[n,i,h],[h,l,n],[i,a,c],[c,h,i],[a,n,l],[l,c,a]],abc:[[f,d,-1],[-1,-1,f],[d,u,-1],[-1,-1,d],[u,f,-1],[-1,-1,u]]}}(n,i);l=c.xyzv,h=c.abc}for(var f=0;f<l.length;f++){n=l[f],i=h[f];for(var d=[],u=0;u<3;u++){var p=n[u][0],v=n[u][1],y=n[u][2],g=n[u][3],x=i[u]>-1?i[u]:D(p,v,y);d[u]=x>-1?x:O(p,v,y,E(t,g))}a=d[0],r=d[1],o=d[2],e._meshI.push(a),e._meshJ.push(r),e._meshK.push(o),++m}}function R(e,t,n,i){var a=e[3];a<n&&(a=n),a>i&&(a=i);for(var r=(e[3]-a)/(e[3]-t[3]+1e-9),o=[],s=0;s<4;s++)o[s]=(1-r)*e[s]+r*t[s];return o}function C(e,t,n){return e>=t&&e<=n}function L(e){var t=.001*(A-S);return e>=S-t&&e<=A+t}function N(t){for(var n=[],i=0;i<4;i++){var a=t[i];n.push([e._x[a],e._y[a],e._z[a],e._value[a]])}return n}function B(e,t,n,i,a,r){r||(r=1),n=[-1,-1,-1];var o=!1,s=[C(t[0][3],i,a),C(t[1][3],i,a),C(t[2][3],i,a)];if(!s[0]&&!s[1]&&!s[2])return!1;var l=function(e,t,n){return L(t[0][3])&&L(t[1][3])&&L(t[2][3])?(F(e,t,n),!0):r<3&&B(e,t,n,S,A,++r)};if(s[0]&&s[1]&&s[2])return l(e,t,n)||o;var h=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach((function(r){if(s[r[0]]&&s[r[1]]&&!s[r[2]]){var c=t[r[0]],f=t[r[1]],d=t[r[2]],u=R(d,c,i,a),p=R(d,f,i,a);o=l(e,[p,u,c],[-1,-1,n[r[0]]])||o,o=l(e,[c,f,p],[n[r[0]],n[r[1]],-1])||o,h=!0}})),h||[[0,1,2],[1,2,0],[2,0,1]].forEach((function(r){if(s[r[0]]&&!s[r[1]]&&!s[r[2]]){var c=t[r[0]],f=t[r[1]],d=t[r[2]],u=R(f,c,i,a),p=R(d,c,i,a);o=l(e,[p,u,c],[-1,-1,n[r[0]]])||o,h=!0}})),o}function q(e,t,n,i){var a=!1,r=N(t),o=[C(r[0][3],n,i),C(r[1][3],n,i),C(r[2][3],n,i),C(r[3][3],n,i)];if(!(o[0]||o[1]||o[2]||o[3]))return a;if(o[0]&&o[1]&&o[2]&&o[3])return v&&(a=function(e,t,n){var i=function(i,a,r){F(e,[t[i],t[a],t[r]],[n[i],n[a],n[r]])};i(0,1,2),i(3,0,1),i(2,3,0),i(1,2,3)}(e,r,t)||a),a;var s=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&o[l[2]]&&!o[l[3]]){var h=r[l[0]],c=r[l[1]],f=r[l[2]],d=r[l[3]];if(v)a=F(e,[h,c,f],[t[l[0]],t[l[1]],t[l[2]]])||a;else{var u=R(d,h,n,i),p=R(d,c,n,i),m=R(d,f,n,i);a=F(null,[u,p,m],[-1,-1,-1])||a}s=!0}})),s?a:([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach((function(l){if(o[l[0]]&&o[l[1]]&&!o[l[2]]&&!o[l[3]]){var h=r[l[0]],c=r[l[1]],f=r[l[2]],d=r[l[3]],u=R(f,h,n,i),p=R(f,c,n,i),m=R(d,c,n,i),y=R(d,h,n,i);v?(a=F(e,[h,y,u],[t[l[0]],-1,-1])||a,a=F(e,[c,p,m],[t[l[1]],-1,-1])||a):a=function(e,t,n){var i=function(i,a,r){F(e,[t[i],t[a],t[r]],[n[i],n[a],n[r]])};i(0,1,2),i(2,3,0)}(null,[u,p,m,y],[-1,-1,-1,-1])||a,s=!0}})),s||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach((function(l){if(o[l[0]]&&!o[l[1]]&&!o[l[2]]&&!o[l[3]]){var h=r[l[0]],c=r[l[1]],f=r[l[2]],d=r[l[3]],u=R(c,h,n,i),p=R(f,h,n,i),m=R(d,h,n,i);v?(a=F(e,[h,u,p],[t[l[0]],-1,-1])||a,a=F(e,[h,p,m],[t[l[0]],-1,-1])||a,a=F(e,[h,m,u],[t[l[0]],-1,-1])||a):a=F(null,[u,p,m],[-1,-1,-1])||a,s=!0}})),a)}function J(e,t,n,i,a,r,o,s,l,h,c){var f=!1;return p&&(X(e,"A")&&(f=q(null,[t,n,i,r],h,c)||f),X(e,"B")&&(f=q(null,[n,i,a,l],h,c)||f),X(e,"C")&&(f=q(null,[n,r,o,l],h,c)||f),X(e,"D")&&(f=q(null,[i,r,s,l],h,c)||f),X(e,"E")&&(f=q(null,[n,i,r,l],h,c)||f)),v&&(f=q(e,[n,i,r,l],h,c)||f),f}function U(e,t,n,i,a,r,o,s){return[!0===s[0]||B(e,N([t,n,i]),[t,n,i],r,o),!0===s[1]||B(e,N([i,a,t]),[i,a,t],r,o)]}function V(e,t,n,i,a,r,o,s,l){return s?U(e,t,n,a,i,r,o,l):U(e,n,a,i,t,r,o,l)}function P(e,t,n,i,a,r,o){var s,l,h,c,f=!1,d=function(){f=B(e,[s,l,h],[-1,-1,-1],a,r)||f,f=B(e,[h,c,s],[-1,-1,-1],a,r)||f},u=o[0],p=o[1],v=o[2];return u&&(s=Y(N([z(t,n-0,i-0)])[0],N([z(t-1,n-0,i-0)])[0],u),l=Y(N([z(t,n-0,i-1)])[0],N([z(t-1,n-0,i-1)])[0],u),h=Y(N([z(t,n-1,i-1)])[0],N([z(t-1,n-1,i-1)])[0],u),c=Y(N([z(t,n-1,i-0)])[0],N([z(t-1,n-1,i-0)])[0],u),d()),p&&(s=Y(N([z(t-0,n,i-0)])[0],N([z(t-0,n-1,i-0)])[0],p),l=Y(N([z(t-0,n,i-1)])[0],N([z(t-0,n-1,i-1)])[0],p),h=Y(N([z(t-1,n,i-1)])[0],N([z(t-1,n-1,i-1)])[0],p),c=Y(N([z(t-1,n,i-0)])[0],N([z(t-1,n-1,i-0)])[0],p),d()),v&&(s=Y(N([z(t-0,n-0,i)])[0],N([z(t-0,n-0,i-1)])[0],v),l=Y(N([z(t-0,n-1,i)])[0],N([z(t-0,n-1,i-1)])[0],v),h=Y(N([z(t-1,n-1,i)])[0],N([z(t-1,n-1,i-1)])[0],v),c=Y(N([z(t-1,n-0,i)])[0],N([z(t-1,n-0,i-1)])[0],v),d()),f}function G(e,t,n,i,a,r,o,s,l,h,c,f){var d=e;return f?(p&&"even"===e&&(d=null),J(d,t,n,i,a,r,o,s,l,h,c)):(p&&"odd"===e&&(d=null),J(d,l,s,o,r,a,i,n,t,h,c))}function K(e,t,n,i,a){for(var r=[],o=0,s=0;s<t.length;s++)for(var l=t[s],h=1;h<w;h++)for(var c=1;c<T;c++)r.push(V(e,z(l,c-1,h-1),z(l,c-1,h),z(l,c,h-1),z(l,c,h),n,i,(l+c+h)%2,a&&a[o]?a[o]:[])),o++;return r}function W(e,t,n,i,a){for(var r=[],o=0,s=0;s<t.length;s++)for(var l=t[s],h=1;h<_;h++)for(var c=1;c<w;c++)r.push(V(e,z(h-1,l,c-1),z(h,l,c-1),z(h-1,l,c),z(h,l,c),n,i,(h+l+c)%2,a&&a[o]?a[o]:[])),o++;return r}function H(e,t,n,i,a){for(var r=[],o=0,s=0;s<t.length;s++)for(var l=t[s],h=1;h<T;h++)for(var c=1;c<_;c++)r.push(V(e,z(c-1,h-1,l),z(c-1,h,l),z(c,h-1,l),z(c,h,l),n,i,(c+h+l)%2,a&&a[o]?a[o]:[])),o++;return r}function Q(e,t,n){for(var i=1;i<w;i++)for(var a=1;a<T;a++)for(var r=1;r<_;r++)G(e,z(r-1,a-1,i-1),z(r-1,a-1,i),z(r-1,a,i-1),z(r-1,a,i),z(r,a-1,i-1),z(r,a-1,i),z(r,a,i-1),z(r,a,i),t,n,(r+a+i)%2)}function $(e,t,n){p=!0,Q(e,t,n),p=!1}function ee(e,t,n,i,a,r){for(var o=[],s=0,l=0;l<t.length;l++)for(var h=t[l],c=1;c<w;c++)for(var f=1;f<T;f++)o.push(P(e,h,f,c,n,i,a[l],r&&r[s]&&r[s])),s++;return o}function te(e,t,n,i,a,r){for(var o=[],s=0,l=0;l<t.length;l++)for(var h=t[l],c=1;c<_;c++)for(var f=1;f<w;f++)o.push(P(e,c,h,f,n,i,a[l],r&&r[s]&&r[s])),s++;return o}function ne(e,t,n,i,a,r){for(var o=[],s=0,l=0;l<t.length;l++)for(var h=t[l],c=1;c<T;c++)for(var f=1;f<_;f++)o.push(P(e,f,c,h,n,i,a[l],r&&r[s]&&r[s])),s++;return o}function ie(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}return function(){if(k(),function(){for(var t=0;t<_;t++)for(var n=0;n<T;n++)for(var i=0;i<w;i++){var a=z(t,n,i);O(e._x[a],e._y[a],e._z[a],e._value[a])}}(),c&&u&&(Z(u),v=!0,Q(null,S,A),v=!1),h&&d){Z(d);for(var t=e.surface.pattern,n=e.surface.count,s=0;s<n;s++){var f=1===n?.5:s/(n-1),p=(1-f)*S+f*A,b=Math.abs(p-j)>Math.abs(p-M)?[j,p]:[p,M];$(t,b[0],b[1])}}var D=[[Math.min(S,M),Math.max(S,M)],[Math.min(j,A),Math.max(j,A)]];["x","y","z"].forEach((function(t){for(var n=[],i=0;i<D.length;i++){var a=0,r=D[i][0],o=D[i][1],s=e.slices[t];if(s.show&&s.fill){Z(s.fill);var h=[],c=[],f=[];if(s.locations.length)for(var d=0;d<s.locations.length;d++){var u=l(s.locations[d],"x"===t?y:"y"===t?g:x);0===u.distRatio?h.push(u.id):u.id>0&&(c.push(u.id),"x"===t?f.push([u.distRatio,0,0]):"y"===t?f.push([0,u.distRatio,0]):f.push([0,0,u.distRatio]))}else h=ie(1,"x"===t?_-1:"y"===t?T-1:w-1);c.length>0&&(n[a]="x"===t?ee(null,c,r,o,f,n[a]):"y"===t?te(null,c,r,o,f,n[a]):ne(null,c,r,o,f,n[a]),a++),h.length>0&&(n[a]="x"===t?K(null,h,r,o,n[a]):"y"===t?W(null,h,r,o,n[a]):H(null,h,r,o,n[a]),a++)}var p=e.caps[t];p.show&&p.fill&&(Z(p.fill),n[a]="x"===t?K(null,[0,_-1],r,o,n[a]):"y"===t?W(null,[0,T-1],r,o,n[a]):H(null,[0,w-1],r,o,n[a]),a++)}})),0===m&&k(),e._meshX=i,e._meshY=a,e._meshZ=r,e._meshIntensity=o,e._Xs=y,e._Ys=g,e._Zs=x}(),e}e.exports={findNearestOnAxis:l,generateIsoMeshes:d,createIsosurfaceTrace:function(e,t){var n=e.glplot.gl,a=i({gl:n}),r=new h(e,a,t.uid);return a._trace=r,r.update(t),e.glplot.add(a),r}}}}]);