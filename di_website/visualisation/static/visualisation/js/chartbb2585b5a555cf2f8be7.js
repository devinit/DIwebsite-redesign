(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{1023:function(e,t,r){"use strict";e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},1136:function(e,t,r){"use strict";var a=r(381),n=r(380),i=r(378),o=r(841),s=r(421).resizeText;function l(e,t,r,a){var s,l,c=(a||{}).hovered,d=t.data.data,p=d.i,u=d.color,h=o.isHierarchyRoot(t),f=1;if(c)s=r._hovered.marker.line.color,l=r._hovered.marker.line.width;else if(h&&"rgba(0,0,0,0)"===u)f=0,s="rgba(0,0,0,0)",l=0;else if(s=i.castOption(r,p,"marker.line.color")||n.defaultLine,l=i.castOption(r,p,"marker.line.width")||0,!r._hasColorscale&&!t.onPathbar){var x=r.marker.depthfade;if(x){var m,y=n.combine(n.addOpacity(r._backgroundColor,.75),u);if(!0===x){var v=o.getMaxDepth(r);m=isFinite(v)?o.isLeaf(t)?0:r._maxVisibleLayers-(t.data.depth-r._entryDepth):t.data.height+1}else m=t.data.depth-r._entryDepth,r._atRootLevel||m++;if(m>0)for(var g=0;g<m;g++){var b=.5*g/m;u=n.combine(n.addOpacity(y,b),u)}}}e.style("stroke-width",l).call(n.fill,u).call(n.stroke,s).style("opacity",f)}e.exports={style:function(e){var t=e._fullLayout._treemaplayer.selectAll(".trace");s(e,t,"treemap"),t.each((function(e){var t=a.select(this),r=e[0].trace;t.style("opacity",r.opacity),t.selectAll("path.surface").each((function(e){a.select(this).call(l,e,r,{hovered:!1})}))}))},styleOne:l}},1497:function(e,t,r){"use strict";var a=r(389).hovertemplateAttrs,n=r(389).texttemplateAttrs,i=r(394),o=r(398).attributes,s=r(568),l=r(1133),c=r(1023),d=r(385).extendFlat;e.exports={labels:l.labels,parents:l.parents,values:l.values,branchvalues:l.branchvalues,count:l.count,level:l.level,maxdepth:l.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",role:"info",editType:"plot",description:["Determines d3 treemap solver.","For more info please refer to https://github.com/d3/d3-hierarchy#treemap-tiling"].join(" ")},squarifyratio:{valType:"number",role:"info",min:1,dflt:1,editType:"plot",description:["When using *squarify* `packing` algorithm, according to https://github.com/d3/d3-hierarchy/blob/master/README.md#squarify_ratio","this option specifies the desired aspect ratio of the generated rectangles.","The ratio must be specified as a number greater than or equal to one.","Note that the orientation of the generated rectangles (tall or wide)","is not implied by the ratio; for example, a ratio of two will attempt","to produce a mixture of rectangles whose width:height ratio is either 2:1 or 1:2.","When using *squarify*, unlike d3 which uses the Golden Ratio i.e. 1.618034,","Plotly applies 1 to increase squares in treemap layouts."].join(" ")},flip:{valType:"flaglist",role:"info",flags:["x","y"],dflt:"",editType:"plot",description:["Determines if the positions obtained from solver are flipped on each axis."].join(" ")},pad:{valType:"number",role:"style",min:0,dflt:3,editType:"plot",description:["Sets the inner padding (in px)."].join(" ")},editType:"calc"},marker:d({pad:{t:{valType:"number",role:"style",min:0,editType:"plot",description:["Sets the padding form the top (in px)."].join(" ")},l:{valType:"number",role:"style",min:0,editType:"plot",description:["Sets the padding form the left (in px)."].join(" ")},r:{valType:"number",role:"style",min:0,editType:"plot",description:["Sets the padding form the right (in px)."].join(" ")},b:{valType:"number",role:"style",min:0,editType:"plot",description:["Sets the padding form the bottom (in px)."].join(" ")},editType:"calc"},colors:l.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style",role:"style",description:["Determines if the sector colors are faded towards","the background from the leaves up to the headers.","This option is unavailable when a `colorscale` is present,","defaults to false when `marker.colors` is set,","but otherwise defaults to true.","When set to *reversed*, the fading direction is inverted,","that is the top elements within hierarchy are drawn with fully saturated colors","while the leaves are faded towards the background color."].join(" ")},line:l.marker.line,editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Determines if the path bar is drawn","i.e. outside the trace `domain` and","with one pixel gap."].join(" ")},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",role:"info",editType:"plot",description:["Determines on which side of the the treemap the","`pathbar` should be presented."].join(" ")},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",role:"style",editType:"plot",description:["Determines which shape is used for edges between `barpath` labels."].join(" ")},thickness:{valType:"number",min:12,role:"info",editType:"plot",description:["Sets the thickness of `pathbar` (in px). If not specified the `pathbar.textfont.size` is used","with 3 pixles extra padding on each side."].join(" ")},textfont:d({},s.textfont,{description:"Sets the font used inside `pathbar`."}),editType:"calc"},text:s.text,textinfo:l.textinfo,texttemplate:n({editType:"plot"},{keys:c.eventDataKeys.concat(["label","value"])}),hovertext:s.hovertext,hoverinfo:l.hoverinfo,hovertemplate:a({},{keys:c.eventDataKeys}),textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:d({},s.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented on top left corner of a treemap graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",role:"style",editType:"plot",description:["Sets the positions of the `text` elements."].join(" ")},domain:o({name:"treemap",trace:!0,editType:"calc"})}},1498:function(e,t,r){"use strict";e.exports={treemapcolorway:{valType:"colorlist",role:"style",editType:"calc",description:["Sets the default treemap slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendtreemapcolors`."].join(" ")},extendtreemapcolors:{valType:"boolean",dflt:!0,role:"style",editType:"calc",description:["If `true`, the treemap slice colors (whether given by `treemapcolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},1499:function(e,t,r){"use strict";var a=r(1134);t.calc=function(e,t){return a.calc(e,t)},t.crossTraceCalc=function(e){return a._runCrossTraceCalc("treemap",e)}},1500:function(e,t,r){"use strict";var a=r(1138);e.exports=function(e,t,r){var n,i=r.flipX,o=r.flipY,s="dice-slice"===r.packing,l=r.pad[o?"bottom":"top"],c=r.pad[i?"right":"left"],d=r.pad[i?"left":"right"],p=r.pad[o?"top":"bottom"];s&&(n=c,c=l,l=n,n=d,d=p,p=n);var u=a.treemap().tile(function(e,t){switch(e){case"squarify":return a.treemapSquarify.ratio(t);case"binary":return a.treemapBinary;case"dice":return a.treemapDice;case"slice":return a.treemapSlice;default:return a.treemapSliceDice}}(r.packing,r.squarifyratio)).paddingInner(r.pad.inner).paddingLeft(c).paddingRight(d).paddingTop(l).paddingBottom(p).size(s?[t[1],t[0]]:t)(e);return(s||i||o)&&function e(t,r,a){var n;a.swapXY&&(n=t.x0,t.x0=t.y0,t.y0=n,n=t.x1,t.x1=t.y1,t.y1=n);a.flipX&&(n=t.x0,t.x0=r[0]-t.x1,t.x1=r[0]-n);a.flipY&&(n=t.y0,t.y0=r[1]-t.y1,t.y1=r[1]-n);var i=t.children;if(i)for(var o=0;o<i.length;o++)e(i[o],r,a)}(u,t,{swapXY:s,flipX:i,flipY:o}),u}},1526:function(e,t,r){"use strict";e.exports=r(1598)},1598:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"treemap",basePlotModule:r(1599),categories:[],animatable:!0,attributes:r(1497),layoutAttributes:r(1498),supplyDefaults:r(1600),supplyLayoutDefaults:r(1601),calc:r(1499).calc,crossTraceCalc:r(1499).crossTraceCalc,plot:r(1602),style:r(1136).style,colorbar:r(416),meta:{description:["Visualize hierarchal data from leaves (and/or outer branches) towards root","with rectangles. The treemap sectors are determined by the entries in","*labels* or *ids* and in *parents*."].join(" ")}}},1599:function(e,t,r){"use strict";var a=r(390);t.name="treemap",t.plot=function(e,r,n,i){a.plotBasePlot(t.name,e,r,n,i)},t.clean=function(e,r,n,i){a.cleanBasePlot(t.name,e,r,n,i)}},1600:function(e,t,r){"use strict";var a=r(378),n=r(1497),i=r(380),o=r(398).defaults,s=r(430).handleText,l=r(442).TEXTPAD,c=r(400),d=c.hasColorscale,p=c.handleDefaults;e.exports=function(e,t,r,c){function u(r,i){return a.coerce(e,t,n,r,i)}var h=u("labels"),f=u("parents");if(h&&h.length&&f&&f.length){var x=u("values");x&&x.length?u("branchvalues"):u("count"),u("level"),u("maxdepth"),"squarify"===u("tiling.packing")&&u("tiling.squarifyratio"),u("tiling.flip"),u("tiling.pad");var m=u("text");u("texttemplate"),t.texttemplate||u("textinfo",Array.isArray(m)?"text+label":"label"),u("hovertext"),u("hovertemplate");var y=u("pathbar.visible");s(e,t,c,u,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("textposition");var v=-1!==t.textposition.indexOf("bottom");u("marker.line.width")&&u("marker.line.color",c.paper_bgcolor);var g=u("marker.colors"),b=t._hasColorscale=d(e,"marker","colors")||(e.marker||{}).coloraxis;b?p(e,t,c,u,{prefix:"marker.",cLetter:"c"}):u("marker.depthfade",!(g||[]).length);var T=2*t.textfont.size;u("marker.pad.t",v?T/4:T),u("marker.pad.l",T/4),u("marker.pad.r",T/4),u("marker.pad.b",v?T:T/4),b&&p(e,t,c,u,{prefix:"marker.",cLetter:"c"}),t._hovered={marker:{line:{width:2,color:i.contrast(c.paper_bgcolor)}}},y&&(u("pathbar.thickness",t.pathbar.textfont.size+2*l),u("pathbar.side"),u("pathbar.edgeshape")),o(t,c,u),t._length=null}else t.visible=!1}},1601:function(e,t,r){"use strict";var a=r(378),n=r(1498);e.exports=function(e,t){function r(r,i){return a.coerce(e,t,n,r,i)}r("treemapcolorway",t.colorway),r("extendtreemapcolors")}},1602:function(e,t,r){"use strict";var a=r(381),n=r(841),i=r(378),o=r(442).TEXTPAD,s=r(516).toMoveInsideBar,l=r(421),c=l.recordMinTextSize,d=l.clearMinTextSize,p=r(438).resizeText,u=r(1023),h=r(1603),f=r(1604);function x(e){return n.isHierarchyRoot(e)?"":n.getPtId(e)}function m(e,t,r,l){var d=e._fullLayout,p=t[0],m=p.trace,y=p.hierarchy,v=n.findEntryWithLevel(y,m.level),g=a.select(r),b=g.selectAll("g.pathbar"),T=g.selectAll("g.slice");if(!v)return b.remove(),void T.remove();var w=n.isHierarchyRoot(v),k=!d.uniformtext.mode&&n.hasTransition(l),S=n.getMaxDepth(m),_=d._size,I=m.domain,X=_.w*(I.x[1]-I.x[0]),Y=_.h*(I.y[1]-I.y[0]),L=X,M=m.pathbar.thickness,P=m.marker.line.width+u.gapWithPathbar,O=m.pathbar.visible?m.pathbar.side.indexOf("bottom")>-1?Y+P:-(M+P):0,C={x0:L,x1:L,y0:O,y1:O+M},z=function(e,t,r){var a=m.tiling.pad,n=function(e){return e-a<=t.x0},i=function(e){return e+a>=t.x1},o=function(e){return e-a<=t.y0},s=function(e){return e+a>=t.y1};return{x0:n(e.x0-a)?0:i(e.x0-a)?r[0]:e.x0,x1:n(e.x1+a)?0:i(e.x1+a)?r[0]:e.x1,y0:o(e.y0-a)?0:s(e.y0-a)?r[1]:e.y0,y1:o(e.y1+a)?0:s(e.y1+a)?r[1]:e.y1}},D=null,R={},A={},B=null,E=function(e,t){return t?R[x(e)]:A[x(e)]},N=function(e,t,r,a){if(t)return R[x(y)]||C;var n=A[m.level]||r;return function(e){return e.data.depth-v.data.depth<S}(e)?z(e,n,a):{}};p.hasMultipleRoots&&w&&S++,m._maxDepth=S,m._backgroundColor=d.paper_bgcolor,m._entryDepth=v.data.depth,m._atRootLevel=w;var H=-X/2+_.l+_.w*(I.x[1]+I.x[0])/2,j=-Y/2+_.t+_.h*(1-(I.y[1]+I.y[0])/2),F=function(e){return H+e},q=function(e){return j+e},U=q(0),K=F(0),V=function(e){return K+e},W=function(e){return U+e};function G(e,t){return e+","+t}var Z=V(0),J=function(e){e.x=Math.max(Z,e.x)},Q=m.pathbar.edgeshape,$=function(e,t){var r=e.x0,a=e.x1,n=e.y0,i=e.y1,l=e.textBB,p=function(e){return-1!==m.textposition.indexOf(e)},u=p("bottom"),h=p("top")||t.isHeader&&!u?"start":u?"end":"middle",f=p("right"),x=p("left")||t.onPathbar?-1:f?1:0,y=m.marker.pad;if(t.isHeader){if((r+=y.l-o)>=(a-=y.r-o)){var v=(r+a)/2;r=v,a=v}var g;u?n<(g=i-y.b)&&g<i&&(n=g):n<(g=n+y.t)&&g<i&&(i=g)}var b=s(r,a,n,i,l,{isHorizontal:!1,constrained:!0,angle:0,anchor:h,leftToRight:x});return b.fontSize=t.fontSize,b.targetX=F(b.targetX),b.targetY=q(b.targetY),isNaN(b.targetX)||isNaN(b.targetY)?{}:(r!==a&&n!==i&&c(m.type,b,d),{scale:b.scale,rotate:b.rotate,textX:b.textX,textY:b.textY,anchorX:b.anchorX,anchorY:b.anchorY,targetX:b.targetX,targetY:b.targetY})},ee=function(e,t){for(var r,a=0,n=e;!r&&a<S;)a++,(n=n.parent)?r=E(n,t):a=S;return r||{}},te=function(e,t,r,n){var o,s=E(e,t);if(s)o=s;else if(t)o=C;else if(D)if(e.parent){var l=B||r;l&&!t?o=z(e,l,n):(o={},i.extendFlat(o,ee(e,t)))}else o=e;else o={};return a.interpolate(o,{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})},re=function(e,t,r,o){var s=E(e,t),l={},p=N(e,t,r,o);i.extendFlat(l,{transform:$({x0:p.x0,x1:p.x1,y0:p.y0,y1:p.y1,textBB:e.textBB,_text:e._text},{isHeader:n.isHeader(e,m)})}),s?l=s:e.parent&&i.extendFlat(l,ee(e,t));var u=e.transform;return e.x0!==e.x1&&e.y0!==e.y1&&c(m.type,u,d),a.interpolate(l,{transform:{scale:u.scale,rotate:u.rotate,textX:u.textX,textY:u.textY,anchorX:u.anchorX,anchorY:u.anchorY,targetX:u.targetX,targetY:u.targetY}})},ae=function(e,t,r,n,i){var o=n[0],s=n[1];k?e.exit().transition().each((function(){var e=a.select(this);e.select("path.surface").transition().attrTween("d",(function(e){var r=function(e,t,r,n){var i,o=E(e,t);if(t)i=C;else{var s=E(v,t);i=s?z(e,s,n):{}}return a.interpolate(o,i)}(e,t,0,[o,s]);return function(e){return i(r(e))}})),e.select("g.slicetext").attr("opacity",0)})).remove():e.exit().remove()},ne=function(e){var t=e.transform;return e.x0!==e.x1&&e.y0!==e.y1&&c(m.type,t,d),i.getTextTransform({textX:t.textX,textY:t.textY,anchorX:t.anchorX,anchorY:t.anchorY,targetX:t.targetX,targetY:t.targetY,scale:t.scale,rotate:t.rotate})};k&&(b.each((function(e){R[x(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},e.transform&&(R[x(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate})})),T.each((function(e){A[x(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},e.transform&&(A[x(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate}),!D&&n.isEntry(e)&&(D=e)}))),B=h(e,t,v,T,{width:X,height:Y,viewX:F,viewY:q,pathSlice:function(e){var t=F(e.x0),r=F(e.x1),a=q(e.y0),n=q(e.y1),i=r-t,o=n-a;if(!i||!o)return"";return"M"+G(t,a+0)+"L"+G(r-0,a)+"L"+G(r,n-0)+"L"+G(t+0,n)+"Z"},toMoveInsideSlice:$,prevEntry:D,makeUpdateSliceInterpolator:te,makeUpdateTextInterpolator:re,handleSlicesExit:ae,hasTransition:k,strTransform:ne}),m.pathbar.visible?f(e,t,v,b,{barDifY:O,width:L,height:M,viewX:V,viewY:W,pathSlice:function(e){var t=V(Math.max(Math.min(e.x0,e.x0),0)),r=V(Math.min(Math.max(e.x1,e.x1),L)),a=W(e.y0),n=W(e.y1),i=M/2,o={},s={};o.x=t,s.x=r,o.y=s.y=(a+n)/2;var l={x:t,y:a},c={x:r,y:a},d={x:r,y:n},p={x:t,y:n};return">"===Q?(l.x-=i,c.x-=i,d.x-=i,p.x-=i):"/"===Q?(d.x-=i,p.x-=i,o.x-=i/2,s.x-=i/2):"\\"===Q?(l.x-=i,c.x-=i,o.x-=i/2,s.x-=i/2):"<"===Q&&(o.x-=i,s.x-=i),J(l),J(p),J(o),J(c),J(d),J(s),"M"+G(l.x,l.y)+"L"+G(c.x,c.y)+"L"+G(s.x,s.y)+"L"+G(d.x,d.y)+"L"+G(p.x,p.y)+"L"+G(o.x,o.y)+"Z"},toMoveInsideSlice:$,makeUpdateSliceInterpolator:te,makeUpdateTextInterpolator:re,handleSlicesExit:ae,hasTransition:k,strTransform:ne}):b.remove()}e.exports=function(e,t,r,i){var o,s,l=e._fullLayout,c=l._treemaplayer,u=!r;(d("treemap",l),(o=c.selectAll("g.trace.treemap").data(t,(function(e){return e[0].trace.uid}))).enter().append("g").classed("trace",!0).classed("treemap",!0),o.order(),!l.uniformtext.mode&&n.hasTransition(r))?(i&&(s=i()),a.transition().duration(r.duration).ease(r.easing).each("end",(function(){s&&s()})).each("interrupt",(function(){s&&s()})).each((function(){c.selectAll("g.trace").each((function(t){m(e,t,this,r)}))}))):(o.each((function(t){m(e,t,this,r)})),l.uniformtext.mode&&p(e,l._treemaplayer.selectAll(".trace"),"treemap"));u&&o.exit().remove()}},1603:function(e,t,r){"use strict";var a=r(381),n=r(378),i=r(384),o=r(391),s=r(1500),l=r(1136).styleOne,c=r(1023),d=r(841),p=r(1135),u=r(1495).formatSliceLabel;e.exports=function(e,t,r,h,f){var x=f.width,m=f.height,y=f.viewX,v=f.viewY,g=f.pathSlice,b=f.toMoveInsideSlice,T=f.strTransform,w=f.hasTransition,k=f.handleSlicesExit,S=f.makeUpdateSliceInterpolator,_=f.makeUpdateTextInterpolator,I=f.prevEntry,X=e._fullLayout,Y=t[0].trace,L=-1!==Y.textposition.indexOf("left"),M=-1!==Y.textposition.indexOf("right"),P=-1!==Y.textposition.indexOf("bottom"),O=!P&&!Y.marker.pad.t||P&&!Y.marker.pad.b,C=s(r,[x,m],{packing:Y.tiling.packing,squarifyratio:Y.tiling.squarifyratio,flipX:Y.tiling.flip.indexOf("x")>-1,flipY:Y.tiling.flip.indexOf("y")>-1,pad:{inner:Y.tiling.pad,top:Y.marker.pad.t,left:Y.marker.pad.l,right:Y.marker.pad.r,bottom:Y.marker.pad.b}}).descendants(),z=1/0,D=-1/0;C.forEach((function(e){var t=e.depth;t>=Y._maxDepth?(e.x0=e.x1=(e.x0+e.x1)/2,e.y0=e.y1=(e.y0+e.y1)/2):(z=Math.min(z,t),D=Math.max(D,t))})),h=h.data(C,d.getPtId),Y._maxVisibleLayers=isFinite(D)?D-z+1:0,h.enter().append("g").classed("slice",!0),k(h,!1,{},[x,m],g),h.order();var R=null;if(w&&I){var A=d.getPtId(I);h.each((function(e){null===R&&d.getPtId(e)===A&&(R={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})}))}var B=function(){return R||{x0:0,x1:x,y0:0,y1:m}},E=h;return w&&(E=E.transition().each("end",(function(){var t=a.select(this);d.setSliceCursor(t,e,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}))),E.each((function(s){var h=d.isHeader(s,Y);s._hoverX=y(s.x1-Y.marker.pad.r),s._hoverY=v(P?s.y1-Y.marker.pad.b/2:s.y0+Y.marker.pad.t/2);var f=a.select(this),k=n.ensureSingle(f,"path","surface",(function(e){e.style("pointer-events","all")}));w?k.transition().attrTween("d",(function(e){var t=S(e,!1,B(),[x,m]);return function(e){return g(t(e))}})):k.attr("d",g),f.call(p,r,e,t,{styleOne:l,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(d.setSliceCursor,e,{isTransitioning:e._transitioning}),k.call(l,s,Y,{hovered:!1}),s.x0===s.x1||s.y0===s.y1?s._text="":s._text=h?O?"":d.getPtLabel(s)||"":u(s,r,Y,t,X)||"";var I=n.ensureSingle(f,"g","slicetext"),C=n.ensureSingle(I,"text","",(function(e){e.attr("data-notex",1)})),z=n.ensureUniformFontSize(e,d.determineTextFont(Y,s,X.font));C.text(s._text||" ").classed("slicetext",!0).attr("text-anchor",M?"end":L||h?"start":"middle").call(i.font,z).call(o.convertToTspans,e),s.textBB=i.bBox(C.node()),s.transform=b(s,{fontSize:z.size,isHeader:h}),s.transform.fontSize=z.size,w?C.transition().attrTween("transform",(function(e){var t=_(e,!1,B(),[x,m]);return function(e){return T(t(e))}})):C.attr("transform",T(s))})),R}},1604:function(e,t,r){"use strict";var a=r(381),n=r(378),i=r(384),o=r(391),s=r(1500),l=r(1136).styleOne,c=r(1023),d=r(841),p=r(1135);e.exports=function(e,t,r,u,h){var f=h.barDifY,x=h.width,m=h.height,y=h.viewX,v=h.viewY,g=h.pathSlice,b=h.toMoveInsideSlice,T=h.strTransform,w=h.hasTransition,k=h.handleSlicesExit,S=h.makeUpdateSliceInterpolator,_=h.makeUpdateTextInterpolator,I={},X=e._fullLayout,Y=t[0],L=Y.trace,M=Y.hierarchy,P=x/L._entryDepth,O=d.listPath(r.data,"id"),C=s(M.copy(),[x,m],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(C=C.filter((function(e){var t=O.indexOf(e.data.id);return-1!==t&&(e.x0=P*t,e.x1=P*(t+1),e.y0=f,e.y1=f+m,e.onPathbar=!0,!0)}))).reverse(),(u=u.data(C,d.getPtId)).enter().append("g").classed("pathbar",!0),k(u,!0,I,[x,m],g),u.order();var z=u;w&&(z=z.transition().each("end",(function(){var t=a.select(this);d.setSliceCursor(t,e,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}))),z.each((function(s){s._hoverX=y(s.x1-Math.min(x,m)/2),s._hoverY=v(s.y1-m/2);var u=a.select(this),h=n.ensureSingle(u,"path","surface",(function(e){e.style("pointer-events","all")}));w?h.transition().attrTween("d",(function(e){var t=S(e,!0,I,[x,m]);return function(e){return g(t(e))}})):h.attr("d",g),u.call(p,r,e,t,{styleOne:l,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(d.setSliceCursor,e,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:e._transitioning}),h.call(l,s,L,{hovered:!1}),s._text=(d.getPtLabel(s)||"").split("<br>").join(" ")||"";var f=n.ensureSingle(u,"g","slicetext"),k=n.ensureSingle(f,"text","",(function(e){e.attr("data-notex",1)})),Y=n.ensureUniformFontSize(e,d.determineTextFont(L,s,X.font,{onPathbar:!0}));k.text(s._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(i.font,Y).call(o.convertToTspans,e),s.textBB=i.bBox(k.node()),s.transform=b(s,{fontSize:Y.size,onPathbar:!0}),s.transform.fontSize=Y.size,w?k.transition().attrTween("transform",(function(e){var t=_(e,!0,I,[x,m]);return function(e){return T(t(e))}})):k.attr("transform",T(s))}))}},516:function(e,t,r){"use strict";var a=r(381),n=r(383),i=r(378),o=r(391),s=r(380),l=r(384),c=r(379),d=r(382).tickText,p=r(421),u=p.recordMinTextSize,h=p.clearMinTextSize,f=r(438),x=r(457),m=r(442),y=r(410),v=y.text,g=y.textposition,b=r(471).appendArrayPointValue,T=m.TEXTPAD;function w(e){return e.id}function k(e){if(e.ids)return w}function S(e,t){return e<t?1:-1}function _(e,t,r,a){var n;return!t.uniformtext.mode&&I(r)?(a&&(n=a()),e.transition().duration(r.duration).ease(r.easing).each("end",(function(){n&&n()})).each("interrupt",(function(){n&&n()}))):e}function I(e){return e&&e.duration>0}function X(e){return"auto"===e?0:e}function Y(e,t){var r=Math.PI/180*t,a=Math.abs(Math.sin(r)),n=Math.abs(Math.cos(r));return{x:e.width*n+e.height*a,y:e.width*a+e.height*n}}function L(e,t,r,a,n,i){var o=!!i.isHorizontal,s=!!i.constrained,l=i.angle||0,c=i.anchor||"end",d="end"===c,p="start"===c,u=((i.leftToRight||0)+1)/2,h=1-u,f=n.width,x=n.height,m=Math.abs(t-e),y=Math.abs(a-r),v=m>2*T&&y>2*T?T:0;m-=2*v,y-=2*v;var g=X(l);"auto"!==l||f<=m&&x<=y||!(f>m||x>y)||(f>y||x>m)&&f<x==m<y||(g+=90);var b=Y(n,g),w=1;s&&(w=Math.min(1,m/b.x,y/b.y));var k=n.left*h+n.right*u,_=(n.top+n.bottom)/2,I=(e+T)*h+(t-T)*u,L=(r+a)/2,M=0,P=0;if(p||d){var O=(o?b.x:b.y)/2,C=o?S(e,t):S(r,a);o?p?(I=e+C*v,M=-C*O):(I=t-C*v,M=C*O):p?(L=r+C*v,P=-C*O):(L=a-C*v,P=C*O)}return{textX:k,textY:_,targetX:I,targetY:L,anchorX:M,anchorY:P,scale:w,rotate:g}}e.exports={plot:function(e,t,r,p,m,y){var w=t.xaxis,M=t.yaxis,P=e._fullLayout;m||(m={mode:P.barmode,norm:P.barmode,gap:P.bargap,groupgap:P.bargroupgap},h("bar",P));var O=i.makeTraceGroups(p,r,"trace bars").each((function(r){var c=a.select(this),p=r[0].trace,h="waterfall"===p.type,O="funnel"===p.type,C="bar"===p.type||O,z=0;h&&p.connector.visible&&"between"===p.connector.mode&&(z=p.connector.line.width/2);var D="h"===p.orientation,R=I(m),A=i.ensureSingle(c,"g","points"),B=k(p),E=A.selectAll("g.point").data(i.identity,B);E.enter().append("g").classed("point",!0),E.exit().remove(),E.each((function(c,h){var k,I,O=a.select(this),A=function(e,t,r,a){var n=[],i=[],o=a?t:r,s=a?r:t;return n[0]=o.c2p(e.s0,!0),i[0]=s.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),i[1]=s.c2p(e.p1,!0),a?[n,i]:[i,n]}(c,w,M,D),B=A[0][0],E=A[0][1],N=A[1][0],H=A[1][1],j=0==(D?E-B:H-N);if(j&&C&&x.getLineWidth(p,c)&&(j=!1),j||(j=!(n(B)&&n(E)&&n(N)&&n(H))),c.isBlank=j,j&&(D?E=B:H=N),z&&!j&&(D?(B-=S(B,E)*z,E+=S(B,E)*z):(N-=S(N,H)*z,H+=S(N,H)*z)),"waterfall"===p.type){if(!j){var F=p[c.dir].marker;k=F.line.width,I=F.color}}else k=x.getLineWidth(p,c),I=c.mc||p.marker.color;function q(e){var t=a.round(k/2%1,2);return 0===m.gap&&0===m.groupgap?a.round(Math.round(e)-t,2):e}if(!e._context.staticPlot){var U=s.opacity(I)<1||k>.01?q:function(e,t,r){return r&&e===t?e:Math.abs(e-t)>=2?q(e):e>t?Math.ceil(e):Math.floor(e)};B=U(B,E,D),E=U(E,B,D),N=U(N,H,!D),H=U(H,N,!D)}var K=_(i.ensureSingle(O,"path"),P,m,y);if(K.style("vector-effect","non-scaling-stroke").attr("d",isNaN((E-B)*(H-N))?"M0,0Z":"M"+B+","+N+"V"+H+"H"+E+"V"+N+"Z").call(l.setClipUrl,t.layerClipId,e),!P.uniformtext.mode&&R){var V=l.makePointStyleFns(p);l.singlePointStyle(c,K,p,V,e)}!function(e,t,r,a,n,s,c,p,h,m,y){var w,k=t.xaxis,I=t.yaxis,M=e._fullLayout;function P(t,r,a){return i.ensureSingle(t,"text").text(r).attr({class:"bartext bartext-"+w,"text-anchor":"middle","data-notex":1}).call(l.font,a).call(o.convertToTspans,e)}var O=a[0].trace,C="h"===O.orientation,z=function(e,t,r,a,n){var o,s=t[0].trace;o=s.texttemplate?function(e,t,r,a,n){var o=t[0].trace,s=i.castOption(o,r,"texttemplate");if(!s)return"";var l,c,p,u,h="waterfall"===o.type,f="funnel"===o.type;"h"===o.orientation?(l="y",c=n,p="x",u=a):(l="x",c=a,p="y",u=n);function x(e){return d(u,+e,!0).text}var m=t[r],y={};y.label=m.p,y.labelLabel=y[l+"Label"]=(v=m.p,d(c,v,!0).text);var v;var g=i.castOption(o,m.i,"text");(0===g||g)&&(y.text=g);y.value=m.s,y.valueLabel=y[p+"Label"]=x(m.s);var T={};b(T,o,m.i),h&&(y.delta=+m.rawS||m.s,y.deltaLabel=x(y.delta),y.final=m.v,y.finalLabel=x(y.final),y.initial=y.final-y.delta,y.initialLabel=x(y.initial));f&&(y.value=m.s,y.valueLabel=x(y.value),y.percentInitial=m.begR,y.percentInitialLabel=i.formatPercent(m.begR),y.percentPrevious=m.difR,y.percentPreviousLabel=i.formatPercent(m.difR),y.percentTotal=m.sumR,y.percenTotalLabel=i.formatPercent(m.sumR));var w=i.castOption(o,m.i,"customdata");w&&(y.customdata=w);return i.texttemplateString(s,y,e._d3locale,T,y,o._meta||{})}(e,t,r,a,n):s.textinfo?function(e,t,r,a){var n=e[0].trace,o="h"===n.orientation,s="waterfall"===n.type,l="funnel"===n.type;function c(e){return d(o?r:a,+e,!0).text}var p,u=n.textinfo,h=e[t],f=u.split("+"),x=[],m=function(e){return-1!==f.indexOf(e)};m("label")&&x.push((y=e[t].p,d(o?a:r,y,!0).text));var y;m("text")&&(0===(p=i.castOption(n,h.i,"text"))||p)&&x.push(p);if(s){var v=+h.rawS||h.s,g=h.v,b=g-v;m("initial")&&x.push(c(b)),m("delta")&&x.push(c(v)),m("final")&&x.push(c(g))}if(l){m("value")&&x.push(c(h.s));var T=0;m("percent initial")&&T++,m("percent previous")&&T++,m("percent total")&&T++;var w=T>1;m("percent initial")&&(p=i.formatPercent(h.begR),w&&(p+=" of initial"),x.push(p)),m("percent previous")&&(p=i.formatPercent(h.difR),w&&(p+=" of previous"),x.push(p)),m("percent total")&&(p=i.formatPercent(h.sumR),w&&(p+=" of total"),x.push(p))}return x.join("<br>")}(t,r,a,n):x.getValue(s.text,r);return x.coerceString(v,o)}(M,a,n,k,I);w=function(e,t){var r=x.getValue(e.textposition,t);return x.coerceEnumerated(g,r)}(O,n);var D="stack"===m.mode||"relative"===m.mode,R=a[n],A=!D||R._outmost;if(!z||"none"===w||(R.isBlank||s===c||p===h)&&("auto"===w||"inside"===w))return void r.select("text").remove();var B=M.font,E=f.getBarColor(a[n],O),N=f.getInsideTextFont(O,n,B,E),H=f.getOutsideTextFont(O,n,B),j=r.datum();C?"log"===k.type&&j.s0<=0&&(s=k.range[0]<k.range[1]?0:k._length):"log"===I.type&&j.s0<=0&&(p=I.range[0]<I.range[1]?I._length:0);var F,q,U,K,V,W=Math.abs(c-s)-2*T,G=Math.abs(h-p)-2*T;"outside"===w&&(A||R.hasB||(w="inside"));if("auto"===w)if(A){w="inside",V=i.ensureUniformFontSize(e,N),F=P(r,z,V),q=l.bBox(F.node()),U=q.width,K=q.height;var Z=U<=W&&K<=G,J=U<=G&&K<=W,Q=C?W>=U*(G/K):G>=K*(W/U);U>0&&K>0&&(Z||J||Q)?w="inside":(w="outside",F.remove(),F=null)}else w="inside";if(!F){V=i.ensureUniformFontSize(e,"outside"===w?H:N);var $=(F=P(r,z,V)).attr("transform");if(F.attr("transform",""),q=l.bBox(F.node()),U=q.width,K=q.height,F.attr("transform",$),U<=0||K<=0)return void F.remove()}var ee,te,re=O.textangle;"outside"===w?(te="both"===O.constraintext||"outside"===O.constraintext,ee=function(e,t,r,a,n,i){var o,s=!!i.isHorizontal,l=!!i.constrained,c=i.angle||0,d=n.width,p=n.height,u=Math.abs(t-e),h=Math.abs(a-r);o=s?h>2*T?T:0:u>2*T?T:0;var f=1;l&&(f=s?Math.min(1,h/p):Math.min(1,u/d));var x=X(c),m=Y(n,x),y=(s?m.x:m.y)/2,v=(n.left+n.right)/2,g=(n.top+n.bottom)/2,b=(e+t)/2,w=(r+a)/2,k=0,_=0,I=s?S(t,e):S(r,a);s?(b=t-I*o,k=I*y):(w=a+I*o,_=-I*y);return{textX:v,textY:g,targetX:b,targetY:w,anchorX:k,anchorY:_,scale:f,rotate:x}}(s,c,p,h,q,{isHorizontal:C,constrained:te,angle:re})):(te="both"===O.constraintext||"inside"===O.constraintext,ee=L(s,c,p,h,q,{isHorizontal:C,constrained:te,angle:re,anchor:O.insidetextanchor}));ee.fontSize=V.size,u(O.type,ee,M),R.transform=ee,_(F,M,m,y).attr("transform",i.getTextTransform(ee))}(e,t,O,r,h,B,E,N,H,m,y),t.layerClipId&&l.hideOutsideRangePoint(c,O.select("text"),w,M,p.xcalendar,p.ycalendar)}));var N=!1===p.cliponaxis;l.setClipUrl(c,N?null:t.layerClipId,e)}));c.getComponentMethod("errorbars","plot")(e,O,t,m)},toMoveInsideBar:L}}}]);