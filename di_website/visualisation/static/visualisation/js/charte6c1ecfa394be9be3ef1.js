(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1066:function(e,t,a){"use strict";var r=a(568),n=a(397),o=a(398).attributes,i=a(389).hovertemplateAttrs,l=a(389).texttemplateAttrs,s=a(385).extendFlat;e.exports={labels:r.labels,label0:r.label0,dlabel:r.dlabel,values:r.values,marker:{colors:r.marker.colors,line:{color:s({},r.marker.line.color,{dflt:null,description:["Sets the color of the line enclosing each sector.","Defaults to the `paper_bgcolor` value."].join(" ")}),width:s({},r.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:r.text,hovertext:r.hovertext,scalegroup:s({},r.scalegroup,{description:["If there are multiple funnelareas that should be sized according to","their totals, link them by providing a non-empty group id here","shared by every trace in the same group."].join(" ")}),textinfo:s({},r.textinfo,{flags:["label","text","value","percent"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:s({},n.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:i({},{keys:["label","color","value","text","percent"]}),textposition:s({},r.textposition,{values:["inside","none"],dflt:"inside"}),textfont:r.textfont,insidetextfont:r.insidetextfont,title:{text:r.title.text,font:r.title.font,position:s({},r.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:o({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",role:"info",min:0,dflt:1,editType:"plot",description:["Sets the ratio between height and width"].join(" ")},baseratio:{valType:"number",role:"info",min:0,max:1,dflt:.333,editType:"plot",description:["Sets the ratio between bottom length and maximum top length."].join(" ")}}},1067:function(e,t,a){"use strict";var r=a(686).hiddenlabels;e.exports={hiddenlabels:r,funnelareacolorway:{valType:"colorlist",role:"style",editType:"calc",description:["Sets the default funnelarea slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendfunnelareacolors`."].join(" ")},extendfunnelareacolors:{valType:"boolean",dflt:!0,role:"style",editType:"calc",description:["If `true`, the funnelarea slice colors (whether given by `funnelareacolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},1068:function(e,t,a){"use strict";var r=a(591);e.exports={calc:function(e,t){return r.calc(e,t)},crossTraceCalc:function(e){r.crossTraceCalc(e,{type:"funnelarea"})}}},1151:function(e,t,a){"use strict";e.exports=a(1304)},1304:function(e,t,a){"use strict";e.exports={moduleType:"trace",name:"funnelarea",basePlotModule:a(1305),categories:["pie-like","funnelarea","showLegend"],attributes:a(1066),layoutAttributes:a(1067),supplyDefaults:a(1306),supplyLayoutDefaults:a(1307),calc:a(1068).calc,crossTraceCalc:a(1068).crossTraceCalc,plot:a(1308),style:a(1309),styleOne:a(688),meta:{description:["Visualize stages in a process using area-encoded trapezoids. This trace can be used",'to show data in a part-to-whole representation similar to a "pie" trace, wherein','each item appears in a single stage. See also the "funnel" trace type for a different',"approach to visualizing funnel data."].join(" ")}}},1305:function(e,t,a){"use strict";var r=a(390);t.name="funnelarea",t.plot=function(e,a,n,o){r.plotBasePlot(t.name,e,a,n,o)},t.clean=function(e,a,n,o){r.cleanBasePlot(t.name,e,a,n,o)}},1306:function(e,t,a){"use strict";var r=a(378),n=a(1066),o=a(398).defaults,i=a(430).handleText,l=a(837).handleLabelsAndValues;e.exports=function(e,t,a,s){function c(a,o){return r.coerce(e,t,n,a,o)}var u=c("labels"),d=c("values"),f=l(u,d),p=f.len;if(t._hasLabels=f.hasLabels,t._hasValues=f.hasValues,!t._hasLabels&&t._hasValues&&(c("label0"),c("dlabel")),p){t._length=p,c("marker.line.width")&&c("marker.line.color",s.paper_bgcolor),c("marker.colors"),c("scalegroup");var h,v=c("text"),x=c("texttemplate");if(x||(h=c("textinfo",Array.isArray(v)?"text+percent":"percent")),c("hovertext"),c("hovertemplate"),x||h&&"none"!==h){var m=c("textposition");i(e,t,s,c,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}o(t,s,c),c("title.text")&&(c("title.position"),r.coerceFont(c,"title.font",s.font)),c("aspectratio"),c("baseratio")}else t.visible=!1}},1307:function(e,t,a){"use strict";var r=a(378),n=a(1067);e.exports=function(e,t){function a(a,o){return r.coerce(e,t,n,a,o)}a("hiddenlabels"),a("funnelareacolorway",t.colorway),a("extendfunnelareacolors")}},1308:function(e,t,a){"use strict";var r=a(381),n=a(384),o=a(378),i=a(391),l=a(516).toMoveInsideBar,s=a(421),c=s.recordMinTextSize,u=s.clearMinTextSize,d=a(725),f=a(736),p=f.attachFxHandlers,h=f.determineInsideTextFont,v=f.layoutAreas,x=f.prerenderTitles,m=f.positionTitleOutside,y=f.formatSliceLabel;function g(e,t){return"l"+(t[0]-e[0])+","+(t[1]-e[1])}e.exports=function(e,t){var a=e._fullLayout;u("funnelarea",a),x(t,e),v(t,a._size),o.makeTraceGroups(a._funnelarealayer,t,"trace").each((function(t){var s=r.select(this),u=t[0],f=u.trace;!function(e){if(!e.length)return;var t=e[0],a=t.trace,r=a.aspectratio,n=a.baseratio;n>.999&&(n=.999);var o,i=Math.pow(n,2),l=t.vTotal,s=l,c=l*i/(1-i)/l;function u(){var e,t={x:e=Math.sqrt(c),y:-e};return[t.x,t.y]}var d,f,p=[];for(p.push(u()),d=e.length-1;d>-1;d--)if(!(f=e[d]).hidden){var h=f.v/s;c+=h,p.push(u())}var v=1/0,x=-1/0;for(d=0;d<p.length;d++)o=p[d],v=Math.min(v,o[1]),x=Math.max(x,o[1]);for(d=0;d<p.length;d++)p[d][1]-=(x+v)/2;var m=p[p.length-1][0],y=t.r,g=(x-v)/2,b=y/m,T=y/g*r;for(t.r=T*g,d=0;d<p.length;d++)p[d][0]*=b,p[d][1]*=T;var w=[-(o=p[0])[0],o[1]],k=[o[0],o[1]],L=0;for(d=e.length-1;d>-1;d--)if(!(f=e[d]).hidden){var A=p[L+=1][0],M=p[L][1];f.TL=[-A,M],f.TR=[A,M],f.BL=w,f.BR=k,f.pxmid=(S=f.TR,z=f.BR,[.5*(S[0]+z[0]),.5*(S[1]+z[1])]),w=f.TL,k=f.TR}var S,z}(t),s.each((function(){var s=r.select(this).selectAll("g.slice").data(t);s.enter().append("g").classed("slice",!0),s.exit().remove(),s.each((function(s,v){if(s.hidden)r.select(this).selectAll("path,g").remove();else{s.pointNumber=s.i,s.curveNumber=f.index;var x=u.cx,m=u.cy,b=r.select(this),T=b.selectAll("path.surface").data([s]);T.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),b.call(p,e,t);var w="M"+(x+s.TR[0])+","+(m+s.TR[1])+g(s.TR,s.BR)+g(s.BR,s.BL)+g(s.BL,s.TL)+"Z";T.attr("d",w),y(e,s,u);var k=d.castOption(f.textposition,s.pts),L=b.selectAll("g.slicetext").data(s.text&&"none"!==k?[0]:[]);L.enter().append("g").classed("slicetext",!0),L.exit().remove(),L.each((function(){var u=o.ensureSingle(r.select(this),"text","",(function(e){e.attr("data-notex",1)})),d=o.ensureUniformFontSize(e,h(f,s,a.font));u.text(s.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(n.font,d).call(i.convertToTspans,e);var p,y,g,b=n.bBox(u.node()),T=Math.min(s.BL[1],s.BR[1])+m,w=Math.max(s.TL[1],s.TR[1])+m;y=Math.max(s.TL[0],s.BL[0])+x,g=Math.min(s.TR[0],s.BR[0])+x,(p=l(y,g,T,w,b,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=d.size,c(f.type,p,a),t[v].transform=p,u.attr("transform",o.getTextTransform(p))}))}}));var v=r.select(this).selectAll("g.titletext").data(f.title.text?[0]:[]);v.enter().append("g").classed("titletext",!0),v.exit().remove(),v.each((function(){var t=o.ensureSingle(r.select(this),"text","",(function(e){e.attr("data-notex",1)})),l=f.title.text;f._meta&&(l=o.templateString(l,f._meta)),t.text(l).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(n.font,f.title.font).call(i.convertToTspans,e);var s=m(u,a._size);t.attr("transform","translate("+s.x+","+s.y+")"+(s.scale<1?"scale("+s.scale+")":"")+"translate("+s.tx+","+s.ty+")")}))}))}))}},1309:function(e,t,a){"use strict";var r=a(381),n=a(688),o=a(421).resizeText;e.exports=function(e){var t=e._fullLayout._funnelarealayer.selectAll(".trace");o(e,t,"funnelarea"),t.each((function(e){var t=e[0].trace,a=r.select(this);a.style({opacity:t.opacity}),a.selectAll("path.surface").each((function(e){r.select(this).call(n,e,t)}))}))}},438:function(e,t,a){"use strict";var r=a(381),n=a(380),o=a(384),i=a(378),l=a(379),s=a(421).resizeText,c=a(410),u=c.textfont,d=c.insidetextfont,f=c.outsidetextfont,p=a(457);function h(e,t,a){o.pointStyle(e.selectAll("path"),t,a),v(e,t,a)}function v(e,t,a){e.selectAll("text").each((function(e){var n=r.select(this),l=i.ensureUniformFontSize(a,x(n,e,t,a));o.font(n,l)}))}function x(e,t,a,r){var n=r._fullLayout.font,o=a.textfont;if(e.classed("bartext-inside")){var i=T(t,a);o=y(a,t.i,n,i)}else e.classed("bartext-outside")&&(o=g(a,t.i,n));return o}function m(e,t,a){return b(u,e.textfont,t,a)}function y(e,t,a,r){var o=m(e,t,a);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(o={color:n.contrast(r),family:o.family,size:o.size}),b(d,e.insidetextfont,t,o)}function g(e,t,a){var r=m(e,t,a);return b(f,e.outsidetextfont,t,r)}function b(e,t,a,r){t=t||{};var n=p.getValue(t.family,a),o=p.getValue(t.size,a),i=p.getValue(t.color,a);return{family:p.coerceString(e.family,n,r.family),size:p.coerceNumber(e.size,o,r.size),color:p.coerceColor(e.color,i,r.color)}}function T(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mc||t.marker.color}e.exports={style:function(e){var t=r.select(e).selectAll("g.barlayer").selectAll("g.trace");s(e,t,"bar");var a=t.size(),n=e._fullLayout;t.style("opacity",(function(e){return e[0].trace.opacity})).each((function(e){("stack"===n.barmode&&a>1||0===n.bargap&&0===n.bargroupgap&&!e[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")})),t.selectAll("g.points").each((function(t){h(r.select(this),t[0].trace,e)})),l.getComponentMethod("errorbars","style")(t)},styleTextPoints:v,styleOnSelect:function(e,t,a){var n=t[0].trace;n.selectedpoints?function(e,t,a){o.selectedPointStyle(e.selectAll("path"),t),function(e,t,a){e.each((function(e){var n,l=r.select(this);if(e.selected){n=i.ensureUniformFontSize(a,x(l,e,t,a));var s=t.selected.textfont&&t.selected.textfont.color;s&&(n.color=s),o.font(l,n)}else o.selectedTextStyle(l,t)}))}(e.selectAll("text"),t,a)}(a,n,e):(h(a,n,e),l.getComponentMethod("errorbars","style")(a))},getInsideTextFont:y,getOutsideTextFont:g,getBarColor:T,resizeText:s}},457:function(e,t,a){"use strict";var r=a(383),n=a(409),o=a(378).isArrayOrTypedArray;t.coerceString=function(e,t,a){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==a?a:e.dflt},t.coerceNumber=function(e,t,a){if(r(t)){t=+t;var n=e.min,o=e.max;if(!(void 0!==n&&t<n||void 0!==o&&t>o))return t}return void 0!==a?a:e.dflt},t.coerceColor=function(e,t,a){return n(t).isValid()?t:void 0!==a?a:e.dflt},t.coerceEnumerated=function(e,t,a){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==a?a:e.dflt},t.getValue=function(e,t){var a;return Array.isArray(e)?t<e.length&&(a=e[t]):a=e,a},t.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:o(e.marker.line.width)?0:e.marker.line.width}},516:function(e,t,a){"use strict";var r=a(381),n=a(383),o=a(378),i=a(391),l=a(380),s=a(384),c=a(379),u=a(382).tickText,d=a(421),f=d.recordMinTextSize,p=d.clearMinTextSize,h=a(438),v=a(457),x=a(442),m=a(410),y=m.text,g=m.textposition,b=a(471).appendArrayPointValue,T=x.TEXTPAD;function w(e){return e.id}function k(e){if(e.ids)return w}function L(e,t){return e<t?1:-1}function A(e,t,a,r){var n;return!t.uniformtext.mode&&M(a)?(r&&(n=r()),e.transition().duration(a.duration).ease(a.easing).each("end",(function(){n&&n()})).each("interrupt",(function(){n&&n()}))):e}function M(e){return e&&e.duration>0}function S(e){return"auto"===e?0:e}function z(e,t){var a=Math.PI/180*t,r=Math.abs(Math.sin(a)),n=Math.abs(Math.cos(a));return{x:e.width*n+e.height*r,y:e.width*r+e.height*n}}function _(e,t,a,r,n,o){var i=!!o.isHorizontal,l=!!o.constrained,s=o.angle||0,c=o.anchor||"end",u="end"===c,d="start"===c,f=((o.leftToRight||0)+1)/2,p=1-f,h=n.width,v=n.height,x=Math.abs(t-e),m=Math.abs(r-a),y=x>2*T&&m>2*T?T:0;x-=2*y,m-=2*y;var g=S(s);"auto"!==s||h<=x&&v<=m||!(h>x||v>m)||(h>m||v>x)&&h<v==x<m||(g+=90);var b=z(n,g),w=1;l&&(w=Math.min(1,x/b.x,m/b.y));var k=n.left*p+n.right*f,A=(n.top+n.bottom)/2,M=(e+T)*p+(t-T)*f,_=(a+r)/2,R=0,B=0;if(d||u){var C=(i?b.x:b.y)/2,P=i?L(e,t):L(a,r);i?d?(M=e+P*y,R=-P*C):(M=t-P*y,R=P*C):d?(_=a+P*y,B=-P*C):(_=r-P*y,B=P*C)}return{textX:k,textY:A,targetX:M,targetY:_,anchorX:R,anchorY:B,scale:w,rotate:g}}e.exports={plot:function(e,t,a,d,x,m){var w=t.xaxis,R=t.yaxis,B=e._fullLayout;x||(x={mode:B.barmode,norm:B.barmode,gap:B.bargap,groupgap:B.bargroupgap},p("bar",B));var C=o.makeTraceGroups(d,a,"trace bars").each((function(a){var c=r.select(this),d=a[0].trace,p="waterfall"===d.type,C="funnel"===d.type,P="bar"===d.type||C,V=0;p&&d.connector.visible&&"between"===d.connector.mode&&(V=d.connector.line.width/2);var H="h"===d.orientation,I=M(x),F=o.ensureSingle(c,"g","points"),O=k(d),j=F.selectAll("g.point").data(o.identity,O);j.enter().append("g").classed("point",!0),j.exit().remove(),j.each((function(c,p){var k,M,C=r.select(this),F=function(e,t,a,r){var n=[],o=[],i=r?t:a,l=r?a:t;return n[0]=i.c2p(e.s0,!0),o[0]=l.c2p(e.p0,!0),n[1]=i.c2p(e.s1,!0),o[1]=l.c2p(e.p1,!0),r?[n,o]:[o,n]}(c,w,R,H),O=F[0][0],j=F[0][1],U=F[1][0],D=F[1][1],N=0==(H?j-O:D-U);if(N&&P&&v.getLineWidth(d,c)&&(N=!1),N||(N=!(n(O)&&n(j)&&n(U)&&n(D))),c.isBlank=N,N&&(H?j=O:D=U),V&&!N&&(H?(O-=L(O,j)*V,j+=L(O,j)*V):(U-=L(U,D)*V,D+=L(U,D)*V)),"waterfall"===d.type){if(!N){var X=d[c.dir].marker;k=X.line.width,M=X.color}}else k=v.getLineWidth(d,c),M=c.mc||d.marker.color;function Y(e){var t=r.round(k/2%1,2);return 0===x.gap&&0===x.groupgap?r.round(Math.round(e)-t,2):e}if(!e._context.staticPlot){var E=l.opacity(M)<1||k>.01?Y:function(e,t,a){return a&&e===t?e:Math.abs(e-t)>=2?Y(e):e>t?Math.ceil(e):Math.floor(e)};O=E(O,j,H),j=E(j,O,H),U=E(U,D,!H),D=E(D,U,!H)}var W=A(o.ensureSingle(C,"path"),B,x,m);if(W.style("vector-effect","non-scaling-stroke").attr("d",isNaN((j-O)*(D-U))?"M0,0Z":"M"+O+","+U+"V"+D+"H"+j+"V"+U+"Z").call(s.setClipUrl,t.layerClipId,e),!B.uniformtext.mode&&I){var Z=s.makePointStyleFns(d);s.singlePointStyle(c,W,d,Z,e)}!function(e,t,a,r,n,l,c,d,p,x,m){var w,k=t.xaxis,M=t.yaxis,R=e._fullLayout;function B(t,a,r){return o.ensureSingle(t,"text").text(a).attr({class:"bartext bartext-"+w,"text-anchor":"middle","data-notex":1}).call(s.font,r).call(i.convertToTspans,e)}var C=r[0].trace,P="h"===C.orientation,V=function(e,t,a,r,n){var i,l=t[0].trace;i=l.texttemplate?function(e,t,a,r,n){var i=t[0].trace,l=o.castOption(i,a,"texttemplate");if(!l)return"";var s,c,d,f,p="waterfall"===i.type,h="funnel"===i.type;"h"===i.orientation?(s="y",c=n,d="x",f=r):(s="x",c=r,d="y",f=n);function v(e){return u(f,+e,!0).text}var x=t[a],m={};m.label=x.p,m.labelLabel=m[s+"Label"]=(y=x.p,u(c,y,!0).text);var y;var g=o.castOption(i,x.i,"text");(0===g||g)&&(m.text=g);m.value=x.s,m.valueLabel=m[d+"Label"]=v(x.s);var T={};b(T,i,x.i),p&&(m.delta=+x.rawS||x.s,m.deltaLabel=v(m.delta),m.final=x.v,m.finalLabel=v(m.final),m.initial=m.final-m.delta,m.initialLabel=v(m.initial));h&&(m.value=x.s,m.valueLabel=v(m.value),m.percentInitial=x.begR,m.percentInitialLabel=o.formatPercent(x.begR),m.percentPrevious=x.difR,m.percentPreviousLabel=o.formatPercent(x.difR),m.percentTotal=x.sumR,m.percenTotalLabel=o.formatPercent(x.sumR));var w=o.castOption(i,x.i,"customdata");w&&(m.customdata=w);return o.texttemplateString(l,m,e._d3locale,T,m,i._meta||{})}(e,t,a,r,n):l.textinfo?function(e,t,a,r){var n=e[0].trace,i="h"===n.orientation,l="waterfall"===n.type,s="funnel"===n.type;function c(e){return u(i?a:r,+e,!0).text}var d,f=n.textinfo,p=e[t],h=f.split("+"),v=[],x=function(e){return-1!==h.indexOf(e)};x("label")&&v.push((m=e[t].p,u(i?r:a,m,!0).text));var m;x("text")&&(0===(d=o.castOption(n,p.i,"text"))||d)&&v.push(d);if(l){var y=+p.rawS||p.s,g=p.v,b=g-y;x("initial")&&v.push(c(b)),x("delta")&&v.push(c(y)),x("final")&&v.push(c(g))}if(s){x("value")&&v.push(c(p.s));var T=0;x("percent initial")&&T++,x("percent previous")&&T++,x("percent total")&&T++;var w=T>1;x("percent initial")&&(d=o.formatPercent(p.begR),w&&(d+=" of initial"),v.push(d)),x("percent previous")&&(d=o.formatPercent(p.difR),w&&(d+=" of previous"),v.push(d)),x("percent total")&&(d=o.formatPercent(p.sumR),w&&(d+=" of total"),v.push(d))}return v.join("<br>")}(t,a,r,n):v.getValue(l.text,a);return v.coerceString(y,i)}(R,r,n,k,M);w=function(e,t){var a=v.getValue(e.textposition,t);return v.coerceEnumerated(g,a)}(C,n);var H="stack"===x.mode||"relative"===x.mode,I=r[n],F=!H||I._outmost;if(!V||"none"===w||(I.isBlank||l===c||d===p)&&("auto"===w||"inside"===w))return void a.select("text").remove();var O=R.font,j=h.getBarColor(r[n],C),U=h.getInsideTextFont(C,n,O,j),D=h.getOutsideTextFont(C,n,O),N=a.datum();P?"log"===k.type&&N.s0<=0&&(l=k.range[0]<k.range[1]?0:k._length):"log"===M.type&&N.s0<=0&&(d=M.range[0]<M.range[1]?M._length:0);var X,Y,E,W,Z,G=Math.abs(c-l)-2*T,J=Math.abs(p-d)-2*T;"outside"===w&&(F||I.hasB||(w="inside"));if("auto"===w)if(F){w="inside",Z=o.ensureUniformFontSize(e,U),X=B(a,V,Z),Y=s.bBox(X.node()),E=Y.width,W=Y.height;var q=E<=G&&W<=J,K=E<=J&&W<=G,Q=P?G>=E*(J/W):J>=W*(G/E);E>0&&W>0&&(q||K||Q)?w="inside":(w="outside",X.remove(),X=null)}else w="inside";if(!X){Z=o.ensureUniformFontSize(e,"outside"===w?D:U);var $=(X=B(a,V,Z)).attr("transform");if(X.attr("transform",""),Y=s.bBox(X.node()),E=Y.width,W=Y.height,X.attr("transform",$),E<=0||W<=0)return void X.remove()}var ee,te,ae=C.textangle;"outside"===w?(te="both"===C.constraintext||"outside"===C.constraintext,ee=function(e,t,a,r,n,o){var i,l=!!o.isHorizontal,s=!!o.constrained,c=o.angle||0,u=n.width,d=n.height,f=Math.abs(t-e),p=Math.abs(r-a);i=l?p>2*T?T:0:f>2*T?T:0;var h=1;s&&(h=l?Math.min(1,p/d):Math.min(1,f/u));var v=S(c),x=z(n,v),m=(l?x.x:x.y)/2,y=(n.left+n.right)/2,g=(n.top+n.bottom)/2,b=(e+t)/2,w=(a+r)/2,k=0,A=0,M=l?L(t,e):L(a,r);l?(b=t-M*i,k=M*m):(w=r+M*i,A=-M*m);return{textX:y,textY:g,targetX:b,targetY:w,anchorX:k,anchorY:A,scale:h,rotate:v}}(l,c,d,p,Y,{isHorizontal:P,constrained:te,angle:ae})):(te="both"===C.constraintext||"inside"===C.constraintext,ee=_(l,c,d,p,Y,{isHorizontal:P,constrained:te,angle:ae,anchor:C.insidetextanchor}));ee.fontSize=Z.size,f(C.type,ee,R),I.transform=ee,A(X,R,x,m).attr("transform",o.getTextTransform(ee))}(e,t,C,a,p,O,j,U,D,x,m),t.layerClipId&&s.hideOutsideRangePoint(c,C.select("text"),w,R,d.xcalendar,d.ycalendar)}));var U=!1===d.cliponaxis;s.setClipUrl(c,U?null:t.layerClipId,e)}));c.getComponentMethod("errorbars","plot")(e,C,t,x)},toMoveInsideBar:_}},686:function(e,t,a){"use strict";e.exports={hiddenlabels:{valType:"data_array",role:"info",editType:"calc",description:["hiddenlabels is the funnelarea & pie chart analog of","visible:'legendonly'","but it can contain many labels, and can simultaneously","hide slices from several pies/funnelarea charts"].join(" ")},piecolorway:{valType:"colorlist",role:"style",editType:"calc",description:["Sets the default pie slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendpiecolors`."].join(" ")},extendpiecolors:{valType:"boolean",dflt:!0,role:"style",editType:"calc",description:["If `true`, the pie slice colors (whether given by `piecolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},837:function(e,t,a){"use strict";var r=a(383),n=a(378),o=a(568),i=a(398).defaults,l=a(430).handleText;function s(e,t){var a=Array.isArray(e),o=n.isArrayOrTypedArray(t),i=Math.min(a?e.length:1/0,o?t.length:1/0);if(isFinite(i)||(i=0),i&&o){for(var l,s=0;s<i;s++){var c=t[s];if(r(c)&&c>0){l=!0;break}}l||(i=0)}return{hasLabels:a,hasValues:o,len:i}}e.exports={handleLabelsAndValues:s,supplyDefaults:function(e,t,a,r){function c(a,r){return n.coerce(e,t,o,a,r)}var u=s(c("labels"),c("values")),d=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(c("label0"),c("dlabel")),d){t._length=d,c("marker.line.width")&&c("marker.line.color"),c("marker.colors"),c("scalegroup");var f,p=c("text"),h=c("texttemplate");if(h||(f=c("textinfo",Array.isArray(p)?"text+percent":"percent")),c("hovertext"),c("hovertemplate"),h||f&&"none"!==f){var v=c("textposition");l(e,t,r,c,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(v)||"auto"===v||"outside"===v)&&c("automargin"),("inside"===v||"auto"===v||Array.isArray(v))&&c("insidetextorientation")}i(t,r,c);var x=c("hole");if(c("title.text")){var m=c("title.position",x?"middle center":"top center");x||"middle center"!==m||(t.title.position="top center"),n.coerceFont(c,"title.font",r.font)}c("sort"),c("direction"),c("rotation"),c("pull")}else t.visible=!1}}}}]);