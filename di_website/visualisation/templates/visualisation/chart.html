{% load wagtailroutablepage_tags footnotes_utils chart_utils %}

<h3 class="type-l type-l--trailer">{{ item.title }}</h3>
<div class="chart-container chart-container--full js-plotly-chart-wrapper">
  {% if item.selectable %}
    <select class="data-selector js-plotly-chart-data-selector"></select>
  {% endif %}
  <div
    class="charts__chart js-plotly-chart"
    {% if not request.is_preview %}
      data-url="{% routablepageurl item 'data' %}"
    {% endif %}
    {% if item.aggregated %}
      data-aggregated="{{ item.aggregated }}"
    {% endif %}
  >
  </div>
  {% if request.is_preview %}
    <script class="js-plotly-chart-raw-data" type="application/json">{{ item.chart_json|as_json|safe }}</script>
  {% endif %}
</div>

{% if item.caption %}
  <figcaption class="media-caption">
    {% content_with_footnotes item.caption %}
  </figcaption>
{% endif %}
